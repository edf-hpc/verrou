<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>3.Â OLDER NEWS</title>
<link rel="stylesheet" type="text/css" href="vg_basic.css">
<meta name="generator" content="DocBook XSL Stylesheets V1.79.1">
<link rel="home" href="index.html" title="Valgrind Documentation">
<link rel="up" href="dist.html" title="Valgrind Distribution Documents">
<link rel="prev" href="dist.news.html" title="2.Â NEWS">
<link rel="next" href="dist.readme.html" title="4.Â README">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div><table class="nav" width="100%" cellspacing="3" cellpadding="3" border="0" summary="Navigation header"><tr>
<td width="22px" align="center" valign="middle"><a accesskey="p" href="dist.news.html"><img src="images/prev.png" width="18" height="21" border="0" alt="Prev"></a></td>
<td width="25px" align="center" valign="middle"><a accesskey="u" href="dist.html"><img src="images/up.png" width="21" height="18" border="0" alt="Up"></a></td>
<td width="31px" align="center" valign="middle"><a accesskey="h" href="index.html"><img src="images/home.png" width="27" height="20" border="0" alt="Up"></a></td>
<th align="center" valign="middle">Valgrind Distribution Documents</th>
<td width="22px" align="center" valign="middle"><a accesskey="n" href="dist.readme.html"><img src="images/next.png" width="18" height="21" border="0" alt="Next"></a></td>
</tr></table></div>
<div class="chapter">
<div class="titlepage"><div><div><h1 class="title">
<a name="dist.news.old"></a>3.Â OLDER NEWS</h1></div></div></div>
<div class="literallayout"><p><br>
Â Â Â Â Â Â ReleaseÂ 3.3.1Â (4Â JuneÂ 2008)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
3.3.1Â fixesÂ aÂ bunchÂ ofÂ bugsÂ inÂ 3.3.0,Â addsÂ supportÂ forÂ glibc-2.8Â based<br>
systemsÂ (openSUSEÂ 11,Â FedoraÂ CoreÂ 9),Â improvesÂ theÂ existingÂ glibc-2.7<br>
support,Â andÂ addsÂ supportÂ forÂ theÂ SSSE3Â (CoreÂ 2)Â instructionÂ set.<br>
<br>
3.3.1Â willÂ likelyÂ beÂ theÂ lastÂ releaseÂ thatÂ supportsÂ someÂ veryÂ old<br>
systems.Â Â InÂ particular,Â theÂ nextÂ majorÂ release,Â 3.4.0,Â willÂ drop<br>
supportÂ forÂ theÂ oldÂ LinuxThreadsÂ threadingÂ library,Â andÂ forÂ gcc<br>
versionsÂ priorÂ toÂ 3.0.<br>
<br>
TheÂ fixedÂ bugsÂ areÂ asÂ follows.Â Â NoteÂ thatÂ "n-i-bz"Â standsÂ forÂ "notÂ in<br>
bugzilla"Â --Â thatÂ is,Â aÂ bugÂ thatÂ wasÂ reportedÂ toÂ usÂ butÂ neverÂ gotÂ a<br>
bugzillaÂ entry.Â Â WeÂ encourageÂ youÂ toÂ fileÂ bugsÂ inÂ bugzilla<br>
(http://bugs.kde.org/enter_valgrind_bug.cgi)Â ratherÂ thanÂ mailingÂ the<br>
developersÂ (orÂ mailingÂ lists)Â directlyÂ --Â bugsÂ thatÂ areÂ notÂ entered<br>
intoÂ bugzillaÂ tendÂ toÂ getÂ forgottenÂ aboutÂ orÂ ignored.<br>
<br>
n-i-bzÂ Â MassifÂ segfaultsÂ atÂ exit<br>
n-i-bzÂ Â MemcheckÂ assertsÂ onÂ AltivecÂ code<br>
n-i-bzÂ Â fixÂ sizeofÂ bugÂ inÂ Helgrind<br>
n-i-bzÂ Â checkÂ fdÂ onÂ sys_llseek<br>
n-i-bzÂ Â updateÂ syscallÂ listsÂ toÂ kernelÂ 2.6.23.1<br>
n-i-bzÂ Â supportÂ sys_sync_file_range<br>
n-i-bzÂ Â handleÂ sys_sysinfo,Â sys_getresuid,Â sys_getresgidÂ onÂ ppc64-linux<br>
n-i-bzÂ Â interceptÂ memcpyÂ inÂ 64-bitÂ ld.so's<br>
n-i-bzÂ Â FixÂ wrappersÂ forÂ sys_{futimesat,utimensat}<br>
n-i-bzÂ Â MinorÂ false-errorÂ avoidanceÂ fixesÂ forÂ Memcheck<br>
n-i-bzÂ Â libmpiwrap.c:Â addÂ aÂ wrapperÂ forÂ MPI_Waitany<br>
n-i-bzÂ Â helgrindÂ supportÂ forÂ glibc-2.8<br>
n-i-bzÂ Â partialÂ fixÂ forÂ mc_leakcheck.c:698Â assert:<br>
Â Â Â Â Â Â Â Â 'lc_shadows[i]-&gt;dataÂ +Â lc_shadows[i]Â ...<br>
n-i-bzÂ Â Massif/CachegrindÂ outputÂ corruptionÂ whenÂ programsÂ fork<br>
n-i-bzÂ Â registerÂ allocatorÂ fix:Â handleÂ spillÂ storesÂ correctly<br>
n-i-bzÂ Â addÂ supportÂ forÂ PA6TÂ PowerPCÂ CPUs<br>
126389Â Â vexÂ x86-&gt;IR:Â 0xFÂ 0xAEÂ (FXRSTOR)<br>
158525Â Â ==126389<br>
152818Â Â vexÂ x86-&gt;IR:Â 0xF3Â 0xACÂ (repzÂ lodsb)Â <br>
153196Â Â vexÂ x86-&gt;IR:Â 0xF2Â 0xA6Â (repnzÂ cmpsb)Â <br>
155011Â Â vexÂ x86-&gt;IR:Â 0xCFÂ (iret)<br>
155091Â Â WarningÂ [...]Â unhandledÂ DW_OP_Â opcodeÂ 0x23<br>
156960Â Â ==155901<br>
155528Â Â supportÂ Core2/SSSE3Â insnsÂ onÂ x86/amd64<br>
155929Â Â ms_printÂ failsÂ onÂ massifÂ outputsÂ containingÂ longÂ lines<br>
157665Â Â valgrindÂ failsÂ onÂ shmdt(0)Â afterÂ shmatÂ toÂ 0<br>
157748Â Â supportÂ x86Â PUSHFW/POPFW<br>
158212Â Â helgrind:Â handleÂ pthread_rwlock_try{rd,wr}lock.<br>
158425Â Â sys_pollÂ incorrectlyÂ emulatedÂ whenÂ RES==0<br>
158744Â Â vexÂ amd64-&gt;IR:Â 0xF0Â 0x41Â 0xFÂ 0xC0Â (xaddb)<br>
160907Â Â SupportÂ forÂ aÂ coupleÂ ofÂ recentÂ LinuxÂ syscalls<br>
161285Â Â PatchÂ --Â supportÂ forÂ eventfd()Â syscall<br>
161378Â Â illegalÂ opcodeÂ inÂ debugÂ libmÂ (FUCOMPP)<br>
160136Â Â ==161378<br>
161487Â Â numberÂ ofÂ suppressionsÂ filesÂ isÂ limitedÂ toÂ 10<br>
162386Â Â ms_printÂ typoÂ inÂ millisecondsÂ timeÂ unitÂ forÂ massif<br>
161036Â Â exp-drd:Â clientÂ allocatedÂ memoryÂ wasÂ neverÂ freed<br>
162663Â Â signalfd_wrapperÂ failsÂ onÂ 64bitÂ linux<br>
<br>
(3.3.1.RC1:Â Â 2Â JuneÂ 2008,Â vexÂ r1854,Â valgrindÂ r8169).<br>
(3.3.1:Â Â Â Â Â Â 4Â JuneÂ 2008,Â vexÂ r1854,Â valgrindÂ r8180).<br>
<br>
<br>
<br>
ReleaseÂ 3.3.0Â (7Â DecemberÂ 2007)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
3.3.0Â isÂ aÂ featureÂ releaseÂ withÂ manyÂ significantÂ improvementsÂ andÂ the<br>
usualÂ collectionÂ ofÂ bugÂ fixes.Â Â ThisÂ releaseÂ supportsÂ X86/Linux,<br>
AMD64/Linux,Â PPC32/LinuxÂ andÂ PPC64/Linux.Â Â SupportÂ forÂ recentÂ distros<br>
(usingÂ gccÂ 4.3,Â glibcÂ 2.6Â andÂ 2.7)Â hasÂ beenÂ added.<br>
<br>
TheÂ mainÂ excitementÂ inÂ 3.3.0Â isÂ newÂ andÂ improvedÂ tools.Â Â Helgrind<br>
worksÂ again,Â MassifÂ hasÂ beenÂ completelyÂ overhauledÂ andÂ muchÂ improved,<br>
CachegrindÂ nowÂ doesÂ branch-mispredictionÂ profiling,Â andÂ aÂ newÂ category<br>
ofÂ experimentalÂ toolsÂ hasÂ beenÂ created,Â containingÂ twoÂ newÂ tools:<br>
OmegaÂ andÂ DRD.Â Â ThereÂ areÂ manyÂ otherÂ smallerÂ improvements.Â Â InÂ detail:<br>
<br>
-Â HelgrindÂ hasÂ beenÂ completelyÂ overhauledÂ andÂ worksÂ forÂ theÂ firstÂ time<br>
Â Â sinceÂ ValgrindÂ 2.2.0.Â Â SupportedÂ functionalityÂ is:Â detectionÂ of<br>
Â Â misusesÂ ofÂ theÂ POSIXÂ PThreadsÂ API,Â detectionÂ ofÂ potentialÂ deadlocks<br>
Â Â resultingÂ fromÂ cyclicÂ lockÂ dependencies,Â andÂ detectionÂ ofÂ data<br>
Â Â races.Â Â ComparedÂ toÂ theÂ 2.2.0Â Helgrind,Â theÂ raceÂ detectionÂ algorithm<br>
Â Â hasÂ someÂ significantÂ improvementsÂ aimedÂ atÂ reducingÂ theÂ falseÂ error<br>
Â Â rate.Â Â HandlingÂ ofÂ variousÂ kindsÂ ofÂ cornerÂ casesÂ hasÂ beenÂ improved.<br>
Â Â EffortsÂ haveÂ beenÂ madeÂ toÂ makeÂ theÂ errorÂ messagesÂ easierÂ to<br>
Â Â understand.Â Â ExtensiveÂ documentationÂ isÂ provided.<br>
<br>
-Â MassifÂ hasÂ beenÂ completelyÂ overhauled.Â Â InsteadÂ ofÂ measuring<br>
Â Â space-timeÂ usageÂ --Â whichÂ wasn'tÂ alwaysÂ usefulÂ andÂ manyÂ peopleÂ found<br>
Â Â confusingÂ --Â itÂ nowÂ measuresÂ spaceÂ usageÂ atÂ variousÂ pointsÂ inÂ the<br>
Â Â execution,Â includingÂ theÂ pointÂ ofÂ peakÂ memoryÂ allocation.Â Â Its<br>
Â Â outputÂ formatÂ hasÂ alsoÂ changed:Â insteadÂ ofÂ producingÂ PostScript<br>
Â Â graphsÂ andÂ HTMLÂ text,Â itÂ producesÂ aÂ singleÂ textÂ outputÂ (viaÂ theÂ new<br>
Â Â 'ms_print'Â script)Â thatÂ containsÂ bothÂ aÂ graphÂ andÂ theÂ oldÂ textual<br>
Â Â information,Â butÂ inÂ aÂ moreÂ compactÂ andÂ readableÂ form.Â Â Finally,Â the<br>
Â Â newÂ versionÂ shouldÂ beÂ moreÂ reliableÂ thanÂ theÂ oldÂ one,Â asÂ itÂ hasÂ been<br>
Â Â testedÂ moreÂ thoroughly.<br>
<br>
-Â CachegrindÂ hasÂ beenÂ extendedÂ toÂ doÂ branch-mispredictionÂ profiling.<br>
Â Â BothÂ conditionalÂ andÂ indirectÂ branchesÂ areÂ profiled.Â Â TheÂ default<br>
Â Â behaviourÂ ofÂ CachegrindÂ isÂ unchanged.Â Â ToÂ useÂ theÂ newÂ functionality,<br>
Â Â giveÂ theÂ optionÂ --branch-sim=yes.<br>
<br>
-Â AÂ newÂ categoryÂ ofÂ "experimentalÂ tools"Â hasÂ beenÂ created.Â Â SuchÂ tools<br>
Â Â mayÂ notÂ workÂ asÂ wellÂ asÂ theÂ standardÂ tools,Â butÂ areÂ includedÂ because<br>
Â Â someÂ peopleÂ willÂ findÂ themÂ useful,Â andÂ becauseÂ exposureÂ toÂ aÂ wider<br>
Â Â userÂ groupÂ providesÂ toolÂ authorsÂ withÂ moreÂ end-userÂ feedback.Â Â These<br>
Â Â toolsÂ haveÂ aÂ "exp-"Â prefixÂ attachedÂ toÂ theirÂ namesÂ toÂ indicateÂ their<br>
Â Â experimentalÂ nature.Â Â CurrentlyÂ thereÂ areÂ twoÂ experimentalÂ tools:<br>
<br>
Â Â *Â exp-Omega:Â anÂ instantaneousÂ leakÂ detector.Â Â See<br>
Â Â Â Â exp-omega/docs/omega_introduction.txt.<br>
<br>
Â Â *Â exp-DRD:Â aÂ dataÂ raceÂ detectorÂ basedÂ onÂ theÂ happens-before<br>
Â Â Â Â relation.Â Â SeeÂ exp-drd/docs/README.txt.<br>
<br>
-Â ScalabilityÂ improvementsÂ forÂ veryÂ largeÂ programs,Â particularlyÂ those<br>
Â Â whichÂ haveÂ aÂ millionÂ orÂ moreÂ malloc'dÂ blocksÂ inÂ useÂ atÂ once.Â Â These<br>
Â Â improvementsÂ mostlyÂ affectÂ Memcheck.Â Â MemcheckÂ isÂ alsoÂ upÂ toÂ 10%<br>
Â Â fasterÂ forÂ allÂ programs,Â withÂ x86-linuxÂ seeingÂ theÂ largest<br>
Â Â improvement.<br>
<br>
-Â WorksÂ wellÂ onÂ theÂ latestÂ LinuxÂ distros.Â Â HasÂ beenÂ testedÂ onÂ Fedora<br>
Â Â CoreÂ 8Â (x86,Â amd64,Â ppc32,Â ppc64)Â andÂ openSUSEÂ 10.3.Â Â glibcÂ 2.6Â and<br>
Â Â 2.7Â areÂ supported.Â Â gcc-4.3Â (inÂ itsÂ currentÂ pre-releaseÂ state)Â is<br>
Â Â supported.Â Â AtÂ theÂ sameÂ time,Â 3.3.0Â retainsÂ supportÂ forÂ older<br>
Â Â distros.<br>
<br>
-Â TheÂ documentationÂ hasÂ beenÂ modestlyÂ reorganisedÂ withÂ theÂ aimÂ of<br>
Â Â makingÂ itÂ easierÂ toÂ findÂ informationÂ onÂ common-usageÂ scenarios.<br>
Â Â SomeÂ advancedÂ materialÂ hasÂ beenÂ movedÂ intoÂ aÂ newÂ chapterÂ inÂ theÂ main<br>
Â Â manual,Â soÂ asÂ toÂ unclutterÂ theÂ mainÂ flow,Â andÂ otherÂ tidyingÂ upÂ has<br>
Â Â beenÂ done.<br>
<br>
-Â ThereÂ isÂ experimentalÂ supportÂ forÂ AIXÂ 5.3,Â bothÂ 32-bitÂ andÂ 64-bit<br>
Â Â processes.Â Â YouÂ needÂ toÂ beÂ runningÂ aÂ 64-bitÂ kernelÂ toÂ useÂ Valgrind<br>
Â Â onÂ aÂ 64-bitÂ executable.<br>
<br>
-Â ThereÂ haveÂ beenÂ someÂ changesÂ toÂ commandÂ lineÂ options,Â whichÂ may<br>
Â Â affectÂ you:<br>
<br>
Â Â *Â --log-file-exactlyÂ andÂ <br>
Â Â Â Â --log-file-qualifierÂ optionsÂ haveÂ beenÂ removed.<br>
<br>
Â Â Â Â ToÂ makeÂ upÂ forÂ thisÂ --log-fileÂ optionÂ hasÂ beenÂ madeÂ moreÂ powerful.<br>
Â Â Â Â ItÂ nowÂ acceptsÂ aÂ %pÂ formatÂ specifier,Â whichÂ isÂ replacedÂ withÂ the<br>
Â Â Â Â processÂ ID,Â andÂ aÂ %q{FOO}Â formatÂ specifier,Â whichÂ isÂ replacedÂ with<br>
Â Â Â Â theÂ contentsÂ ofÂ theÂ environmentÂ variableÂ FOO.<br>
<br>
Â Â *Â --child-silent-after-fork=yes|noÂ [no]<br>
<br>
Â Â Â Â CausesÂ ValgrindÂ toÂ notÂ showÂ anyÂ debuggingÂ orÂ loggingÂ outputÂ for<br>
Â Â Â Â theÂ childÂ processÂ resultingÂ fromÂ aÂ fork()Â call.Â Â ThisÂ canÂ makeÂ the<br>
Â Â Â Â outputÂ lessÂ confusingÂ (althoughÂ moreÂ misleading)Â whenÂ dealingÂ with<br>
Â Â Â Â processesÂ thatÂ createÂ children.<br>
<br>
Â Â *Â --cachegrind-out-file,Â --callgrind-out-fileÂ andÂ --massif-out-file<br>
<br>
Â Â Â Â TheseÂ controlÂ theÂ namesÂ ofÂ theÂ outputÂ filesÂ producedÂ by<br>
Â Â Â Â Cachegrind,Â CallgrindÂ andÂ Massif.Â Â TheyÂ acceptÂ theÂ sameÂ %pÂ andÂ %q<br>
Â Â Â Â formatÂ specifiersÂ thatÂ --log-fileÂ accepts.Â Â --callgrind-out-file<br>
Â Â Â Â replacesÂ Callgrind'sÂ oldÂ --baseÂ option.<br>
<br>
Â Â *Â Cachegrind'sÂ 'cg_annotate'Â scriptÂ noÂ longerÂ usesÂ theÂ --&lt;pid&gt;<br>
Â Â Â Â optionÂ toÂ specifyÂ theÂ outputÂ file.Â Â Instead,Â theÂ firstÂ non-option<br>
Â Â Â Â argumentÂ isÂ takenÂ toÂ beÂ theÂ nameÂ ofÂ theÂ outputÂ file,Â andÂ any<br>
Â Â Â Â subsequentÂ non-optionÂ argumentsÂ areÂ takenÂ toÂ beÂ theÂ namesÂ of<br>
Â Â Â Â sourceÂ filesÂ toÂ beÂ annotated.<br>
<br>
Â Â *Â CachegrindÂ andÂ CallgrindÂ nowÂ useÂ directoryÂ namesÂ whereÂ possibleÂ in<br>
Â Â Â Â theirÂ outputÂ files.Â Â ThisÂ meansÂ thatÂ theÂ -IÂ optionÂ to<br>
Â Â Â Â 'cg_annotate'Â andÂ 'callgrind_annotate'Â shouldÂ notÂ beÂ neededÂ in<br>
Â Â Â Â mostÂ cases.Â Â ItÂ alsoÂ meansÂ theyÂ canÂ correctlyÂ handleÂ theÂ case<br>
Â Â Â Â whereÂ twoÂ sourceÂ filesÂ inÂ differentÂ directoriesÂ haveÂ theÂ same<br>
Â Â Â Â name.<br>
<br>
-Â MemcheckÂ offersÂ aÂ newÂ suppressionÂ kind:Â "Jump".Â Â ThisÂ isÂ for<br>
Â Â suppressingÂ jump-to-invalid-addressÂ errors.Â Â PreviouslyÂ youÂ hadÂ to<br>
Â Â useÂ anÂ "Addr1"Â suppression,Â whichÂ didn'tÂ makeÂ muchÂ sense.<br>
<br>
-Â MemcheckÂ hasÂ newÂ flagsÂ --malloc-fill=&lt;hexnum&gt;Â and<br>
Â Â --free-fill=&lt;hexnum&gt;Â whichÂ freeÂ malloc'dÂ /Â free'dÂ areasÂ withÂ the<br>
Â Â specifiedÂ byte.Â Â ThisÂ canÂ helpÂ shakeÂ outÂ obscureÂ memoryÂ corruption<br>
Â Â problems.Â Â TheÂ definednessÂ andÂ addressabilityÂ ofÂ theseÂ areasÂ is<br>
Â Â unchangedÂ --Â onlyÂ theÂ contentsÂ areÂ affected.<br>
<br>
-Â TheÂ behaviourÂ ofÂ Memcheck'sÂ clientÂ requestsÂ VALGRIND_GET_VBITSÂ and<br>
Â Â VALGRIND_SET_VBITSÂ haveÂ changedÂ slightly.Â Â TheyÂ noÂ longerÂ issue<br>
Â Â addressabilityÂ errorsÂ --Â ifÂ eitherÂ arrayÂ isÂ partiallyÂ unaddressable,<br>
Â Â theyÂ justÂ returnÂ 3Â (asÂ before).Â Â Also,Â SET_VBITSÂ doesn'tÂ report<br>
Â Â definednessÂ errorsÂ ifÂ anyÂ ofÂ theÂ VÂ bitsÂ areÂ undefined.<br>
<br>
-Â TheÂ followingÂ MemcheckÂ clientÂ requestsÂ haveÂ beenÂ removed:<br>
Â Â Â Â VALGRIND_MAKE_NOACCESS<br>
Â Â Â Â VALGRIND_MAKE_WRITABLE<br>
Â Â Â Â VALGRIND_MAKE_READABLE<br>
Â Â Â Â VALGRIND_CHECK_WRITABLE<br>
Â Â Â Â VALGRIND_CHECK_READABLE<br>
Â Â Â Â VALGRIND_CHECK_DEFINED<br>
Â Â TheyÂ wereÂ deprecatedÂ inÂ 3.2.0,Â whenÂ equivalentÂ butÂ better-namedÂ client<br>
Â Â requestsÂ wereÂ added.Â Â SeeÂ theÂ 3.2.0Â releaseÂ notesÂ forÂ moreÂ details.<br>
<br>
-Â TheÂ behaviourÂ ofÂ theÂ toolÂ LackeyÂ hasÂ changedÂ slightly.Â Â First,Â theÂ output<br>
Â Â fromÂ --trace-memÂ hasÂ beenÂ madeÂ moreÂ compact,Â toÂ reduceÂ theÂ sizeÂ ofÂ the<br>
Â Â traces.Â Â Second,Â aÂ newÂ optionÂ --trace-superblocksÂ hasÂ beenÂ added,Â which<br>
Â Â showsÂ theÂ addressesÂ ofÂ superblocksÂ (codeÂ blocks)Â asÂ theyÂ areÂ executed.<br>
<br>
-Â TheÂ followingÂ bugsÂ haveÂ beenÂ fixed.Â Â NoteÂ thatÂ "n-i-bz"Â standsÂ for<br>
Â Â "notÂ inÂ bugzilla"Â --Â thatÂ is,Â aÂ bugÂ thatÂ wasÂ reportedÂ toÂ usÂ but<br>
Â Â neverÂ gotÂ aÂ bugzillaÂ entry.Â Â WeÂ encourageÂ youÂ toÂ fileÂ bugsÂ in<br>
Â Â bugzillaÂ (http://bugs.kde.org/enter_valgrind_bug.cgi)Â ratherÂ than<br>
Â Â mailingÂ theÂ developersÂ (orÂ mailingÂ lists)Â directly.<br>
<br>
Â Â n-i-bzÂ Â x86_linux_REDIR_FOR_index()Â broken<br>
Â Â n-i-bzÂ Â guest-amd64/toIR.c:2512Â (dis_op2_E_G):Â AssertionÂ `0'Â failed.<br>
Â Â n-i-bzÂ Â SupportÂ x86Â INTÂ insnÂ (INTÂ (0xCD)Â 0x40Â -Â 0x43)<br>
Â Â n-i-bzÂ Â AddÂ sys_utimensatÂ systemÂ callÂ forÂ LinuxÂ x86Â platform<br>
Â Â Â 79844Â Â HelgrindÂ complainsÂ aboutÂ raceÂ conditionÂ whichÂ doesÂ notÂ exist<br>
Â Â Â 82871Â Â MassifÂ outputÂ functionÂ namesÂ tooÂ short<br>
Â Â Â 89061Â Â Massif:Â ms_main.c:485Â (get_XCon):Â AssertionÂ `xpt-&gt;max_chi...'<br>
Â Â Â 92615Â Â WriteÂ outputÂ fromÂ MassifÂ atÂ crash<br>
Â Â Â 95483Â Â massifÂ featureÂ request:Â includeÂ peakÂ allocationÂ inÂ report<br>
Â Â 112163Â Â MASSIFÂ crashedÂ withÂ signalÂ 7Â (SIGBUS)Â afterÂ runningÂ 2Â days<br>
Â Â 119404Â Â problemsÂ runningÂ setuidÂ executablesÂ (partialÂ fix)<br>
Â Â 121629Â Â addÂ instruction-countingÂ modeÂ forÂ timing<br>
Â Â 127371Â Â javaÂ vmÂ givingÂ unhandledÂ instructionÂ bytes:Â 0x26Â 0x2EÂ 0x64Â 0x65<br>
Â Â 129937Â Â ==150380<br>
Â Â 129576Â Â MassifÂ losesÂ trackÂ ofÂ memory,Â incorrectÂ graphs<br>
Â Â 132132Â Â massifÂ --format=htmlÂ outputÂ doesÂ notÂ doÂ htmlÂ entityÂ escaping<br>
Â Â 132950Â Â HeapÂ alloc/usageÂ summary<br>
Â Â 133962Â Â unhandledÂ instructionÂ bytes:Â 0xF2Â 0x4CÂ 0xFÂ 0x10<br>
Â Â 134990Â Â useÂ -fno-stack-protectorÂ ifÂ possible<br>
Â Â 136382Â Â ==134990<br>
Â Â 137396Â Â IÂ wouldÂ reallyÂ likeÂ helgrindÂ toÂ workÂ again...<br>
Â Â 137714Â Â x86/amd64-&gt;IR:Â 0x66Â 0xFÂ 0xF7Â 0xC6Â (maskmovq,Â maskmovdq)<br>
Â Â 141631Â Â Massif:Â percentagesÂ don'tÂ addÂ upÂ correctly<br>
Â Â 142706Â Â massifÂ numbersÂ don'tÂ seemÂ toÂ addÂ up<br>
Â Â 143062Â Â massifÂ crashesÂ onÂ appÂ exitÂ withÂ signalÂ 8Â SIGFPE<br>
Â Â 144453Â Â (get_XCon):Â AssertionÂ 'xpt-&gt;max_childrenÂ !=Â 0'Â failed.<br>
Â Â 145559Â Â valgrindÂ abortsÂ whenÂ malloc_statsÂ isÂ called<br>
Â Â 145609Â Â valgrindÂ abortsÂ allÂ runsÂ withÂ 'repeatedÂ section!'<br>
Â Â 145622Â Â --db-attachÂ brokenÂ againÂ onÂ x86-64<br>
Â Â 145837Â Â ==149519<br>
Â Â 145887Â Â PPC32:Â getitimer()Â systemÂ callÂ isÂ notÂ supported<br>
Â Â 146252Â Â ==150678<br>
Â Â 146456Â Â (update_XCon):Â AssertionÂ 'xpt-&gt;curr_spaceÂ &gt;=Â -space_delta'...<br>
Â Â 146701Â Â ==134990<br>
Â Â 146781Â Â AddingÂ supportÂ forÂ privateÂ futexes<br>
Â Â 147325Â Â valgrindÂ internalÂ errorÂ onÂ syscallÂ (SYS_io_destroy,Â 0)<br>
Â Â 147498Â Â amd64-&gt;IR:Â 0xF0Â 0xFÂ 0xB0Â 0xFÂ (lockÂ cmpxchgÂ %cl,(%rdi))<br>
Â Â 147545Â Â Memcheck:Â mc_main.c:817Â (get_sec_vbits8):Â AssertionÂ 'n'Â failed.<br>
Â Â 147628Â Â SALCÂ opcodeÂ 0xd6Â unimplemented<br>
Â Â 147825Â Â crashÂ onÂ amd64-linuxÂ withÂ gccÂ 4.2Â andÂ glibcÂ 2.6Â (CFI)<br>
Â Â 148174Â Â IncorrectÂ typeÂ ofÂ freed_list_volumeÂ causesÂ assertionÂ [...]<br>
Â Â 148447Â Â x86_64Â :Â newÂ NOPÂ codes:Â 66Â 66Â 66Â 66Â 2eÂ 0fÂ 1f<br>
Â Â 149182Â Â PPCÂ TrapÂ instructionsÂ notÂ implementedÂ inÂ valgrind<br>
Â Â 149504Â Â AssertionÂ hitÂ onÂ alloc_xpt-&gt;curr_spaceÂ &gt;=Â -space_delta<br>
Â Â 149519Â Â ppc32:Â VÂ abortsÂ withÂ SIGSEGVÂ onÂ executionÂ ofÂ aÂ signalÂ handler<br>
Â Â 149892Â Â ==137714<br>
Â Â 150044Â Â SEGVÂ duringÂ stackÂ deregister<br>
Â Â 150380Â Â dwarf/gccÂ interoperationÂ (dwarf3Â readÂ problems)<br>
Â Â 150408Â Â ==148447<br>
Â Â 150678Â Â guest-amd64/toIR.c:3741Â (dis_Grp5):Â AssertionÂ `szÂ ==Â 4'Â failed<br>
Â Â 151209Â Â VÂ unableÂ toÂ executeÂ programsÂ forÂ usersÂ withÂ UIDÂ &gt;Â 2^16<br>
Â Â 151938Â Â helpÂ onÂ --db-command=Â misleading<br>
Â Â 152022Â Â subwÂ $0x28,Â %%spÂ causesÂ assertionÂ failureÂ inÂ memcheck<br>
Â Â 152357Â Â inbÂ andÂ outbÂ notÂ recognizedÂ inÂ 64-bitÂ mode<br>
Â Â 152501Â Â vexÂ x86-&gt;IR:Â 0x27Â 0x66Â 0x89Â 0x45Â (daa)Â <br>
Â Â 152818Â Â vexÂ x86-&gt;IR:Â 0xF3Â 0xACÂ 0xFCÂ 0x9CÂ (repÂ lodsb)<br>
<br>
Developer-visibleÂ changes:<br>
<br>
-Â TheÂ namesÂ ofÂ someÂ functionsÂ andÂ typesÂ withinÂ theÂ VexÂ IRÂ have<br>
Â Â changed.Â Â RunÂ 'svnÂ logÂ -r1689Â VEX/pub/libvex_ir.h'Â forÂ fullÂ details.<br>
Â Â AnyÂ existingÂ standaloneÂ toolsÂ willÂ haveÂ toÂ beÂ updatedÂ toÂ reflect<br>
Â Â theseÂ changes.Â Â TheÂ newÂ namesÂ shouldÂ beÂ clearer.Â Â TheÂ file<br>
Â Â VEX/pub/libvex_ir.hÂ isÂ alsoÂ muchÂ betterÂ commented.<br>
<br>
-Â AÂ numberÂ ofÂ newÂ debuggingÂ commandÂ lineÂ optionsÂ haveÂ beenÂ added.<br>
Â Â TheseÂ areÂ mostlyÂ ofÂ useÂ forÂ debuggingÂ theÂ symbolÂ tableÂ andÂ line<br>
Â Â numberÂ readers:<br>
<br>
Â Â --trace-symtab-patt=&lt;patt&gt;Â limitÂ debuginfoÂ tracingÂ toÂ objÂ nameÂ &lt;patt&gt;<br>
Â Â --trace-cfi=no|yesÂ Â Â Â Â Â Â Â showÂ call-frame-infoÂ details?Â [no]<br>
Â Â --debug-dump=symsÂ Â Â Â Â Â Â Â Â mimicÂ /usr/bin/readelfÂ --syms<br>
Â Â --debug-dump=lineÂ Â Â Â Â Â Â Â Â mimicÂ /usr/bin/readelfÂ --debug-dump=line<br>
Â Â --debug-dump=framesÂ Â Â Â Â Â Â mimicÂ /usr/bin/readelfÂ --debug-dump=frames<br>
Â Â --sym-offsets=yes|noÂ Â Â Â Â Â showÂ symsÂ inÂ formÂ 'name+offset'Â ?Â [no]<br>
<br>
-Â Internally,Â theÂ codeÂ baseÂ hasÂ beenÂ furtherÂ factorisedÂ and<br>
Â Â abstractified,Â particularlyÂ withÂ respectÂ toÂ supportÂ forÂ non-Linux<br>
Â Â OSs.<br>
<br>
(3.3.0.RC1:Â Â 2Â DecÂ 2007,Â vexÂ r1803,Â valgrindÂ r7268).<br>
(3.3.0.RC2:Â Â 5Â DecÂ 2007,Â vexÂ r1804,Â valgrindÂ r7282).<br>
(3.3.0.RC3:Â Â 9Â DecÂ 2007,Â vexÂ r1804,Â valgrindÂ r7288).<br>
(3.3.0:Â Â Â Â Â 10Â DecÂ 2007,Â vexÂ r1804,Â valgrindÂ r7290).<br>
<br>
<br>
<br>
ReleaseÂ 3.2.3Â (29Â JanÂ 2007)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
UnfortunatelyÂ 3.2.2Â introducedÂ aÂ regressionÂ whichÂ canÂ causeÂ an<br>
assertionÂ failureÂ ("vex:Â theÂ `impossible'Â happened:Â eqIRConst")Â when<br>
runningÂ obscureÂ piecesÂ ofÂ SSEÂ code.Â Â 3.2.3Â fixesÂ thisÂ andÂ addsÂ one<br>
moreÂ glibc-2.5Â intercept.Â Â InÂ allÂ otherÂ respectsÂ itÂ isÂ identicalÂ to<br>
3.2.2.Â Â PleaseÂ doÂ notÂ useÂ (orÂ package)Â 3.2.2;Â insteadÂ useÂ 3.2.3.<br>
<br>
n-i-bzÂ Â Â vex:Â theÂ `impossible'Â happened:Â eqIRConst<br>
n-i-bzÂ Â Â AddÂ anÂ interceptÂ forÂ glibc-2.5Â __stpcpy_chk<br>
<br>
(3.2.3:Â 29Â JanÂ 2007,Â vexÂ r1732,Â valgrindÂ r6560).<br>
<br>
<br>
ReleaseÂ 3.2.2Â (22Â JanÂ 2007)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
3.2.2Â fixesÂ aÂ bunchÂ ofÂ bugsÂ inÂ 3.2.1,Â addsÂ supportÂ forÂ glibc-2.5Â based<br>
systemsÂ (openSUSEÂ 10.2,Â FedoraÂ CoreÂ 6),Â improvesÂ supportÂ forÂ icc-9.X<br>
compiledÂ code,Â andÂ bringsÂ modestÂ performanceÂ improvementsÂ inÂ some<br>
areas,Â includingÂ amd64Â floatingÂ point,Â powerpcÂ support,Â andÂ startup<br>
responsivenessÂ onÂ allÂ targets.<br>
<br>
TheÂ fixedÂ bugsÂ areÂ asÂ follows.Â Â NoteÂ thatÂ "n-i-bz"Â standsÂ forÂ "notÂ in<br>
bugzilla"Â --Â thatÂ is,Â aÂ bugÂ thatÂ wasÂ reportedÂ toÂ usÂ butÂ neverÂ gotÂ a<br>
bugzillaÂ entry.Â Â WeÂ encourageÂ youÂ toÂ fileÂ bugsÂ inÂ bugzilla<br>
(http://bugs.kde.org/enter_valgrind_bug.cgi)Â ratherÂ thanÂ mailingÂ the<br>
developersÂ (orÂ mailingÂ lists)Â directly.<br>
<br>
129390Â Â Â ppc?-&gt;IR:Â someÂ kindÂ ofÂ VMXÂ prefetchÂ (dstt)<br>
129968Â Â Â amd64-&gt;IR:Â 0xFÂ 0xAEÂ 0x0Â (fxsave)<br>
134319Â Â Â ==129968<br>
133054Â Â Â 'makeÂ install'Â failsÂ withÂ syntaxÂ errors<br>
118903Â Â Â ==133054<br>
132998Â Â Â startupÂ failsÂ inÂ whenÂ runningÂ onÂ UML<br>
134207Â Â Â pkg-configÂ outputÂ containsÂ @VG_PLATFORM@<br>
134727Â Â Â valgrindÂ exitsÂ withÂ "ValueÂ tooÂ largeÂ forÂ definedÂ dataÂ type"<br>
n-i-bzÂ Â Â ppc32/64:Â supportÂ mcrfs<br>
n-i-bzÂ Â Â Cachegrind/Callgrind:Â UpdateÂ cacheÂ parameterÂ detection<br>
135012Â Â Â x86-&gt;IR:Â 0xD7Â 0x8AÂ 0xE0Â 0xD0Â (xlat)<br>
125959Â Â Â ==135012<br>
126147Â Â Â x86-&gt;IR:Â 0xF2Â 0xA5Â 0xFÂ 0x77Â (repneÂ movsw)<br>
136650Â Â Â amd64-&gt;IR:Â 0xC2Â 0x8Â 0x0<br>
135421Â Â Â x86-&gt;IR:Â unhandledÂ Grp5(R)Â caseÂ 6<br>
n-i-bzÂ Â Â ImprovedÂ documentationÂ ofÂ theÂ IRÂ intermediateÂ representation<br>
n-i-bzÂ Â Â jcxzÂ (x86)Â (usersÂ list,Â 8Â Nov)<br>
n-i-bzÂ Â Â ExeContextÂ hashingÂ fix<br>
n-i-bzÂ Â Â fixÂ CFIÂ readingÂ failuresÂ ("DwarfÂ CFIÂ 0:24Â 0:32Â 0:48Â 0:7")<br>
n-i-bzÂ Â Â fixÂ Cachegrind/CallgrindÂ simulationÂ bug<br>
n-i-bzÂ Â Â libmpiwrap.c:Â fixÂ handlingÂ ofÂ MPI_LONG_DOUBLE<br>
n-i-bzÂ Â Â makeÂ UserÂ errorsÂ suppressible<br>
136844Â Â Â corruptedÂ mallocÂ lineÂ whenÂ usingÂ --gen-suppressions=yes<br>
138507Â Â Â ==136844<br>
n-i-bzÂ Â Â SpeedÂ upÂ theÂ JIT'sÂ registerÂ allocator<br>
n-i-bzÂ Â Â FixÂ confusingÂ leak-checkerÂ flagÂ hints<br>
n-i-bzÂ Â Â SupportÂ recentÂ autoswampÂ versions<br>
n-i-bzÂ Â Â ppc32/64Â dispatcherÂ speedups<br>
n-i-bzÂ Â Â ppc64Â frontÂ endÂ rld/rlwÂ improvements<br>
n-i-bzÂ Â Â ppc64Â backÂ endÂ imm64Â improvements<br>
136300Â Â Â supportÂ 64KÂ pagesÂ onÂ ppc64-linux<br>
139124Â Â Â ==Â 136300<br>
n-i-bzÂ Â Â fixÂ ppcÂ insnÂ setÂ testsÂ forÂ gccÂ &gt;=Â 4.1<br>
137493Â Â Â x86-&gt;IR:Â recentÂ binutilsÂ no-ops<br>
137714Â Â Â x86-&gt;IR:Â 0x66Â 0xFÂ 0xF7Â 0xC6Â (maskmovdqu)<br>
138424Â Â Â "failedÂ inÂ UMEÂ withÂ errorÂ 22"Â (produceÂ aÂ betterÂ errorÂ msg)<br>
138856Â Â Â ==138424<br>
138627Â Â Â EnhancementÂ supportÂ forÂ prctlÂ ioctls<br>
138896Â Â Â AddÂ supportÂ forÂ usbÂ ioctls<br>
136059Â Â Â ==138896<br>
139050Â Â Â ppc32-&gt;IR:Â mfsprÂ 268/269Â instructionsÂ notÂ handled<br>
n-i-bzÂ Â Â ppc32-&gt;IR:Â lvxl/stvxl<br>
n-i-bzÂ Â Â glibc-2.5Â support<br>
n-i-bzÂ Â Â memcheck:Â provideÂ replacementÂ forÂ mempcpy<br>
n-i-bzÂ Â Â memcheck:Â replaceÂ bcmpÂ inÂ ld.so<br>
n-i-bzÂ Â Â UseÂ 'ifndef'Â inÂ VEX'sÂ MakefileÂ correctly<br>
n-i-bzÂ Â Â SuppressionsÂ forÂ MVLÂ 4.0.1Â onÂ ppc32-linux<br>
n-i-bzÂ Â Â libmpiwrap.c:Â FixesÂ forÂ MPICH<br>
n-i-bzÂ Â Â MoreÂ robustÂ handlingÂ ofÂ hintedÂ clientÂ mmaps<br>
139776Â Â Â InvalidÂ readÂ inÂ unalignedÂ memcpyÂ withÂ IntelÂ compilerÂ v9<br>
n-i-bzÂ Â Â GenerateÂ validÂ XMLÂ evenÂ forÂ veryÂ longÂ fnÂ names<br>
n-i-bzÂ Â Â Don'tÂ promptÂ aboutÂ suppressionsÂ forÂ unshownÂ reachableÂ leaks<br>
139910Â Â Â amd64Â rclÂ isÂ notÂ supported<br>
n-i-bzÂ Â Â DWARFÂ CFIÂ reader:Â handleÂ DW_CFA_undefined<br>
n-i-bzÂ Â Â DWARFÂ CFIÂ reader:Â handleÂ icc9Â generatedÂ CFIÂ infoÂ better<br>
n-i-bzÂ Â Â fixÂ falseÂ uninit-valueÂ errsÂ inÂ icc9Â generatedÂ FPÂ code<br>
n-i-bzÂ Â Â reduceÂ extraneousÂ framesÂ inÂ libmpiwrap.c<br>
n-i-bzÂ Â Â supportÂ pselect6Â onÂ amd64-linux<br>
<br>
(3.2.2:Â 22Â JanÂ 2007,Â vexÂ r1729,Â valgrindÂ r6545).<br>
<br>
<br>
ReleaseÂ 3.2.1Â (16Â SeptÂ 2006)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
3.2.1Â addsÂ x86/amd64Â supportÂ forÂ allÂ SSE3Â instructionsÂ exceptÂ monitor<br>
andÂ mwait,Â furtherÂ reducesÂ memcheck'sÂ falseÂ errorÂ rateÂ onÂ all<br>
platforms,Â addsÂ supportÂ forÂ recentÂ binutilsÂ (inÂ OpenSUSEÂ 10.2Â and<br>
FedoraÂ Rawhide)Â andÂ fixesÂ aÂ bunchÂ ofÂ bugsÂ inÂ 3.2.0.Â Â SomeÂ ofÂ theÂ fixed<br>
bugsÂ wereÂ causingÂ largeÂ programsÂ toÂ segfaultÂ withÂ --tool=callgrindÂ and<br>
--tool=cachegrind,Â soÂ anÂ upgradeÂ isÂ recommended.<br>
<br>
InÂ viewÂ ofÂ theÂ factÂ thatÂ anyÂ 3.3.0Â releaseÂ isÂ unlikelyÂ toÂ happenÂ until<br>
wellÂ intoÂ 1Q07,Â weÂ intendÂ toÂ keepÂ theÂ 3.2.XÂ lineÂ aliveÂ forÂ aÂ while<br>
yet,Â andÂ soÂ weÂ tentativelyÂ planÂ aÂ 3.2.2Â releaseÂ sometimeÂ inÂ December<br>
06.<br>
<br>
TheÂ fixedÂ bugsÂ areÂ asÂ follows.Â Â NoteÂ thatÂ "n-i-bz"Â standsÂ forÂ "notÂ in<br>
bugzilla"Â --Â thatÂ is,Â aÂ bugÂ thatÂ wasÂ reportedÂ toÂ usÂ butÂ neverÂ gotÂ a<br>
bugzillaÂ entry.<br>
<br>
n-i-bzÂ Â Â ExpandingÂ brk()Â intoÂ lastÂ availableÂ pageÂ asserts<br>
n-i-bzÂ Â Â ppc64-linuxÂ stackÂ RZÂ fast-caseÂ snafu<br>
n-i-bzÂ Â Â 'c'Â inÂ --gen-supps=yesÂ doesn'tÂ work<br>
n-i-bzÂ Â Â VG_N_SEGMENTSÂ tooÂ lowÂ (users,Â 28Â June)<br>
n-i-bzÂ Â Â VG_N_SEGNAMESÂ tooÂ lowÂ (StuÂ Robinson)<br>
106852Â Â Â x86-&gt;IR:Â fisttpÂ (SSE3)<br>
117172Â Â Â FUTEX_WAKEÂ doesÂ notÂ useÂ uaddr2<br>
124039Â Â Â LacksÂ supportÂ forÂ VKI_[GP]IO_UNIMAP*<br>
127521Â Â Â amd64-&gt;IR:Â 0xF0Â 0x48Â 0xFÂ 0xC7Â (cmpxchg8b)<br>
128917Â Â Â amd64-&gt;IR:Â 0x66Â 0xFÂ 0xF6Â 0xC4Â (psadbw,SSE2)<br>
129246Â Â Â JJ:Â ppc32/ppc64Â syscalls,Â w/Â patch<br>
129358Â Â Â x86-&gt;IR:Â fisttplÂ (SSE3)<br>
129866Â Â Â cachegrind/callgrindÂ causesÂ executableÂ toÂ die<br>
130020Â Â Â Can'tÂ statÂ .so/.exeÂ errorÂ whileÂ readingÂ symbols<br>
130388Â Â Â ValgrindÂ abortsÂ whenÂ processÂ callsÂ malloc_trim()<br>
130638Â Â Â PATCH:Â ppc32Â missingÂ systemÂ calls<br>
130785Â Â Â amd64-&gt;IR:Â unhandledÂ instructionÂ "pushfq"<br>
131481:Â Â (HINT_NOP)Â vexÂ x86-&gt;IR:Â 0xFÂ 0x1FÂ 0x0Â 0xF<br>
131298Â Â Â ==131481<br>
132146Â Â Â ProgramsÂ withÂ longÂ sequencesÂ ofÂ bswap[l,q]s<br>
132918Â Â Â vexÂ amd64-&gt;IR:Â 0xD9Â 0xF8Â (fprem)<br>
132813Â Â Â AssertionÂ atÂ priv/guest-x86/toIR.c:652Â fails<br>
133051Â Â Â 'cfsi-&gt;lenÂ &gt;Â 0Â &amp;&amp;Â cfsi-&gt;lenÂ &lt;Â 2000000'Â failed<br>
132722Â Â Â valgrindÂ headerÂ filesÂ areÂ notÂ standardÂ C<br>
n-i-bzÂ Â Â LivelocksÂ entireÂ machineÂ (usersÂ list,Â TimothyÂ Terriberry)<br>
n-i-bzÂ Â Â AlexÂ BenneeÂ mmapÂ problemÂ (9Â Aug)<br>
n-i-bzÂ Â Â BartV:Â Don'tÂ printÂ moreÂ linesÂ ofÂ aÂ stack-traceÂ thanÂ wereÂ obtained.<br>
n-i-bzÂ Â Â ppc32Â SuSEÂ 10.1Â redir<br>
n-i-bzÂ Â Â amd64Â paddingÂ suppressions<br>
n-i-bzÂ Â Â amd64Â insnÂ printingÂ fix.<br>
n-i-bzÂ Â Â ppcÂ cmpÂ reg,regÂ fix<br>
n-i-bzÂ Â Â x86/amd64Â iroptÂ e/rflagÂ reductionÂ rules<br>
n-i-bzÂ Â Â SuSEÂ 10.1Â (ppc32)Â minorÂ fixes<br>
133678Â Â Â amd64-&gt;IR:Â 0x48Â 0xFÂ 0xC5Â 0xC0Â (pextrw?)<br>
133694Â Â Â aspacemÂ assertion:Â aspacem_minAddrÂ &lt;=Â holeStart<br>
n-i-bzÂ Â Â callgrind:Â fixÂ warningÂ aboutÂ malformedÂ creatorÂ lineÂ <br>
n-i-bzÂ Â Â callgrind:Â fixÂ annotateÂ scriptÂ forÂ dataÂ producedÂ withÂ <br>
Â Â Â Â Â Â Â Â Â --dump-instr=yes<br>
n-i-bzÂ Â Â callgrind:Â fixÂ failedÂ assertionÂ whenÂ togglingÂ <br>
Â Â Â Â Â Â Â Â Â instrumentationÂ mode<br>
n-i-bzÂ Â Â callgrind:Â fixÂ annotateÂ scriptÂ fixÂ warningsÂ with<br>
Â Â Â Â Â Â Â Â Â --collect-jumps=yes<br>
n-i-bzÂ Â Â docsÂ pathÂ hardwiredÂ (DennisÂ Lubert)<br>
<br>
TheÂ followingÂ bugsÂ wereÂ notÂ fixed,Â dueÂ primarilyÂ toÂ lackÂ ofÂ developer<br>
time,Â andÂ alsoÂ becauseÂ bugÂ reportersÂ didÂ notÂ answerÂ requestsÂ for<br>
feedbackÂ inÂ timeÂ forÂ theÂ release:<br>
<br>
129390Â Â Â ppc?-&gt;IR:Â someÂ kindÂ ofÂ VMXÂ prefetchÂ (dstt)<br>
129968Â Â Â amd64-&gt;IR:Â 0xFÂ 0xAEÂ 0x0Â (fxsave)<br>
133054Â Â Â 'makeÂ install'Â failsÂ withÂ syntaxÂ errors<br>
n-i-bzÂ Â Â SignalÂ raceÂ conditionÂ (usersÂ list,Â 13Â June,Â JohannesÂ Berg)<br>
n-i-bzÂ Â Â UnrecognisedÂ instructionÂ atÂ addressÂ 0x70198EC2Â (usersÂ list,<br>
Â Â Â Â Â Â Â Â Â 19Â July,Â Bennee)<br>
132998Â Â Â startupÂ failsÂ inÂ whenÂ runningÂ onÂ UML<br>
<br>
TheÂ followingÂ bugÂ wasÂ tentativelyÂ fixedÂ onÂ theÂ mainlineÂ butÂ theÂ fix<br>
wasÂ consideredÂ tooÂ riskyÂ toÂ pushÂ intoÂ 3.2.X:<br>
<br>
133154Â Â Â crashÂ whenÂ usingÂ clientÂ requestsÂ toÂ register/deregisterÂ stack<br>
<br>
(3.2.1:Â 16Â SeptÂ 2006,Â vexÂ r1658,Â valgrindÂ r6070).<br>
<br>
<br>
ReleaseÂ 3.2.0Â (7Â JuneÂ 2006)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
3.2.0Â isÂ aÂ featureÂ releaseÂ withÂ manyÂ significantÂ improvementsÂ andÂ the<br>
usualÂ collectionÂ ofÂ bugÂ fixes.Â Â ThisÂ releaseÂ supportsÂ X86/Linux,<br>
AMD64/Linux,Â PPC32/LinuxÂ andÂ PPC64/Linux.<br>
<br>
Performance,Â especiallyÂ ofÂ Memcheck,Â isÂ improved,Â AddrcheckÂ hasÂ been<br>
removed,Â CallgrindÂ hasÂ beenÂ added,Â PPC64/LinuxÂ supportÂ hasÂ beenÂ added,<br>
LackeyÂ hasÂ beenÂ improved,Â andÂ MPIÂ supportÂ hasÂ beenÂ added.Â Â InÂ detail:<br>
<br>
-Â MemcheckÂ hasÂ improvedÂ speedÂ andÂ reducedÂ memoryÂ use.Â Â RunÂ timesÂ are<br>
Â Â typicallyÂ reducedÂ byÂ 15-30%,Â averagingÂ aboutÂ 24%Â forÂ SPECÂ CPU2000.<br>
Â Â TheÂ otherÂ toolsÂ haveÂ smallerÂ butÂ noticeableÂ speedÂ improvements.Â Â We<br>
Â Â areÂ interestedÂ toÂ hearÂ whatÂ improvementsÂ usersÂ get.<br>
<br>
Â Â MemcheckÂ usesÂ lessÂ memoryÂ dueÂ toÂ theÂ introductionÂ ofÂ aÂ compressed<br>
Â Â representationÂ forÂ shadowÂ memory.Â Â TheÂ spaceÂ overheadÂ hasÂ been<br>
Â Â reducedÂ byÂ aÂ factorÂ ofÂ upÂ toÂ four,Â dependingÂ onÂ programÂ behaviour.<br>
Â Â ThisÂ meansÂ youÂ shouldÂ beÂ ableÂ toÂ runÂ programsÂ thatÂ useÂ moreÂ memory<br>
Â Â thanÂ beforeÂ withoutÂ hittingÂ problems.<br>
<br>
-Â AddrcheckÂ hasÂ beenÂ removed.Â Â ItÂ hasÂ notÂ workedÂ sinceÂ versionÂ 2.4.0,<br>
Â Â andÂ theÂ speedÂ andÂ memoryÂ improvementsÂ toÂ MemcheckÂ makeÂ itÂ redundant.<br>
Â Â IfÂ youÂ likedÂ usingÂ AddrcheckÂ becauseÂ itÂ didn'tÂ giveÂ undefinedÂ value<br>
Â Â errors,Â youÂ canÂ useÂ theÂ newÂ MemcheckÂ optionÂ --undef-value-errors=no<br>
Â Â toÂ getÂ theÂ sameÂ behaviour.<br>
<br>
-Â TheÂ numberÂ ofÂ undefined-valueÂ errorsÂ incorrectlyÂ reportedÂ by<br>
Â Â MemcheckÂ hasÂ beenÂ reducedÂ (suchÂ falseÂ reportsÂ wereÂ alreadyÂ very<br>
Â Â rare).Â Â InÂ particular,Â effortsÂ haveÂ beenÂ madeÂ toÂ ensureÂ Memcheck<br>
Â Â worksÂ reallyÂ wellÂ withÂ gccÂ 4.0/4.1-generatedÂ codeÂ onÂ X86/LinuxÂ and<br>
Â Â AMD64/Linux.<br>
<br>
-Â JosefÂ Weidendorfer'sÂ popularÂ CallgrindÂ toolÂ hasÂ beenÂ added.Â Â Folding<br>
Â Â itÂ inÂ wasÂ aÂ logicalÂ stepÂ givenÂ itsÂ popularityÂ andÂ usefulness,Â and<br>
Â Â makesÂ itÂ easierÂ forÂ usÂ toÂ ensureÂ itÂ worksÂ "outÂ ofÂ theÂ box"Â onÂ all<br>
Â Â supportedÂ targets.Â Â TheÂ associatedÂ KDEÂ KCachegrindÂ GUIÂ remainsÂ a<br>
Â Â separateÂ project.<br>
<br>
-Â AÂ newÂ releaseÂ ofÂ theÂ ValkyrieÂ GUIÂ forÂ Memcheck,Â versionÂ 1.2.0,<br>
Â Â accompaniesÂ thisÂ release.Â Â ImprovementsÂ overÂ previousÂ releases<br>
Â Â includeÂ improvedÂ robustness,Â manyÂ refinementsÂ toÂ theÂ userÂ interface,<br>
Â Â andÂ useÂ ofÂ aÂ standardÂ autoconf/automakeÂ buildÂ system.Â Â YouÂ canÂ get<br>
Â Â itÂ fromÂ http://www.valgrind.org/downloads/guis.html.<br>
<br>
-Â ValgrindÂ nowÂ worksÂ onÂ PPC64/Linux.Â Â AsÂ withÂ theÂ AMD64/LinuxÂ port,<br>
Â Â thisÂ supportsÂ programsÂ usingÂ toÂ 32GÂ ofÂ addressÂ space.Â Â OnÂ 64-bit<br>
Â Â capableÂ PPC64/LinuxÂ setups,Â youÂ getÂ aÂ dualÂ architectureÂ buildÂ so<br>
Â Â thatÂ bothÂ 32-bitÂ andÂ 64-bitÂ executablesÂ canÂ beÂ run.Â Â LinuxÂ onÂ POWER5<br>
Â Â isÂ supported,Â andÂ POWER4Â isÂ alsoÂ believedÂ toÂ work.Â Â BothÂ 32-bitÂ and<br>
Â Â 64-bitÂ DWARF2Â isÂ supported.Â Â ThisÂ portÂ isÂ knownÂ toÂ workÂ wellÂ with<br>
Â Â bothÂ gcc-compiledÂ andÂ xlc/xlf-compiledÂ code.<br>
<br>
-Â FloatingÂ pointÂ accuracyÂ hasÂ beenÂ improvedÂ forÂ PPC32/Linux.<br>
Â Â Specifically,Â theÂ floatingÂ pointÂ roundingÂ modeÂ isÂ observedÂ onÂ allÂ FP<br>
Â Â arithmeticÂ operations,Â andÂ multiply-accumulateÂ instructionsÂ are<br>
Â Â preservedÂ byÂ theÂ compilationÂ pipeline.Â Â ThisÂ meansÂ youÂ shouldÂ getÂ FP<br>
Â Â resultsÂ whichÂ areÂ bit-for-bitÂ identicalÂ toÂ aÂ nativeÂ run.Â Â These<br>
Â Â improvementsÂ areÂ alsoÂ presentÂ inÂ theÂ PPC64/LinuxÂ port.<br>
<br>
-Â Lackey,Â theÂ exampleÂ tool,Â hasÂ beenÂ improved:<br>
<br>
Â Â *Â ItÂ hasÂ aÂ newÂ optionÂ --detailed-countsÂ (offÂ byÂ default)Â which<br>
Â Â Â Â causesÂ itÂ toÂ printÂ outÂ aÂ countÂ ofÂ loads,Â storesÂ andÂ ALUÂ operations<br>
Â Â Â Â done,Â andÂ theirÂ sizes.<br>
<br>
Â Â *Â ItÂ hasÂ aÂ newÂ optionÂ --trace-memÂ (offÂ byÂ default)Â whichÂ causesÂ it<br>
Â Â Â Â toÂ printÂ outÂ aÂ traceÂ ofÂ allÂ memoryÂ accessesÂ performedÂ byÂ a<br>
Â Â Â Â program.Â Â It'sÂ aÂ goodÂ startingÂ pointÂ forÂ buildingÂ ValgrindÂ tools<br>
Â Â Â Â thatÂ needÂ toÂ trackÂ memoryÂ accesses.Â Â ReadÂ theÂ commentsÂ atÂ theÂ top<br>
Â Â Â Â ofÂ theÂ fileÂ lackey/lk_main.cÂ forÂ details.<br>
<br>
Â Â *Â TheÂ originalÂ instrumentationÂ (countingÂ numbersÂ ofÂ instructions,<br>
Â Â Â Â jumps,Â etc)Â isÂ nowÂ controlledÂ byÂ aÂ newÂ optionÂ --basic-counts.Â Â It<br>
Â Â Â Â isÂ onÂ byÂ default.<br>
<br>
-Â MPIÂ support:Â partialÂ supportÂ forÂ debuggingÂ distributedÂ applications<br>
Â Â usingÂ theÂ MPIÂ libraryÂ specificationÂ hasÂ beenÂ added.Â Â ValgrindÂ is<br>
Â Â awareÂ ofÂ theÂ memoryÂ stateÂ changesÂ causedÂ byÂ aÂ subsetÂ ofÂ theÂ MPI<br>
Â Â functions,Â andÂ willÂ carefullyÂ checkÂ dataÂ passedÂ toÂ theÂ (P)MPI_<br>
Â Â interface.<br>
<br>
-Â AÂ newÂ flag,Â --error-exitcode=,Â hasÂ beenÂ added.Â Â ThisÂ allowsÂ changing<br>
Â Â theÂ exitÂ codeÂ inÂ runsÂ whereÂ ValgrindÂ reportedÂ errors,Â whichÂ is<br>
Â Â usefulÂ whenÂ usingÂ ValgrindÂ asÂ partÂ ofÂ anÂ automatedÂ testÂ suite.<br>
<br>
-Â VariousÂ segfaultsÂ whenÂ readingÂ old-styleÂ "stabs"Â debugÂ information<br>
Â Â haveÂ beenÂ fixed.<br>
<br>
-Â AÂ simpleÂ performanceÂ evaluationÂ suiteÂ hasÂ beenÂ added.Â Â See<br>
Â Â perf/READMEÂ andÂ README_DEVELOPERSÂ forÂ details.Â Â ThereÂ are<br>
Â Â variousÂ bellsÂ andÂ whistles.<br>
<br>
-Â NewÂ configurationÂ flags:<br>
Â Â Â Â --enable-only32bit<br>
Â Â Â Â --enable-only64bit<br>
Â Â ByÂ default,Â onÂ 64Â bitÂ platformsÂ (ppc64-linux,Â amd64-linux)Â theÂ build<br>
Â Â systemÂ willÂ attemptÂ toÂ buildÂ aÂ ValgrindÂ whichÂ supportsÂ bothÂ 32-bit<br>
Â Â andÂ 64-bitÂ executables.Â Â ThisÂ mayÂ notÂ beÂ whatÂ youÂ want,Â andÂ youÂ can<br>
Â Â overrideÂ theÂ defaultÂ behaviourÂ usingÂ theseÂ flags.<br>
<br>
PleaseÂ noteÂ thatÂ HelgrindÂ isÂ stillÂ notÂ working.Â Â WeÂ haveÂ madeÂ an<br>
importantÂ stepÂ towardsÂ makingÂ itÂ workÂ again,Â however,Â withÂ the<br>
additionÂ ofÂ functionÂ wrappingÂ (seeÂ below).<br>
<br>
OtherÂ user-visibleÂ changes:<br>
<br>
-Â ValgrindÂ nowÂ hasÂ theÂ abilityÂ toÂ interceptÂ andÂ wrapÂ arbitrary<br>
Â Â functions.Â Â ThisÂ isÂ aÂ preliminaryÂ stepÂ towardsÂ makingÂ HelgrindÂ work<br>
Â Â again,Â andÂ wasÂ requiredÂ forÂ MPIÂ support.<br>
<br>
-Â ThereÂ areÂ someÂ changesÂ toÂ Memcheck'sÂ clientÂ requests.Â Â SomeÂ ofÂ them<br>
Â Â haveÂ changedÂ names:<br>
<br>
Â Â Â Â MAKE_NOACCESSÂ Â --&gt;Â MAKE_MEM_NOACCESS<br>
Â Â Â Â MAKE_WRITABLEÂ Â --&gt;Â MAKE_MEM_UNDEFINED<br>
Â Â Â Â MAKE_READABLEÂ Â --&gt;Â MAKE_MEM_DEFINED<br>
<br>
Â Â Â Â CHECK_WRITABLEÂ --&gt;Â CHECK_MEM_IS_ADDRESSABLE<br>
Â Â Â Â CHECK_READABLEÂ --&gt;Â CHECK_MEM_IS_DEFINED<br>
Â Â Â Â CHECK_DEFINEDÂ Â --&gt;Â CHECK_VALUE_IS_DEFINED<br>
<br>
Â Â TheÂ reasonÂ forÂ theÂ changeÂ isÂ thatÂ theÂ oldÂ namesÂ areÂ subtly<br>
Â Â misleading.Â Â TheÂ oldÂ namesÂ willÂ stillÂ work,Â butÂ theyÂ areÂ deprecated<br>
Â Â andÂ mayÂ beÂ removedÂ inÂ aÂ futureÂ release.<br>
<br>
Â Â WeÂ alsoÂ addedÂ aÂ newÂ clientÂ request:<br>
Â Â <br>
Â Â Â Â MAKE_MEM_DEFINED_IF_ADDRESSABLE(a,Â len)<br>
Â Â Â Â <br>
Â Â whichÂ isÂ likeÂ MAKE_MEM_DEFINEDÂ butÂ onlyÂ affectsÂ aÂ byteÂ ifÂ theÂ byteÂ is<br>
Â Â alreadyÂ addressable.<br>
<br>
-Â TheÂ wayÂ clientÂ requestsÂ areÂ encodedÂ inÂ theÂ instructionÂ streamÂ has<br>
Â Â changed.Â Â Unfortunately,Â thisÂ meansÂ 3.2.0Â willÂ notÂ honourÂ client<br>
Â Â requestsÂ compiledÂ intoÂ binariesÂ usingÂ headersÂ fromÂ earlierÂ versions<br>
Â Â ofÂ Valgrind.Â Â WeÂ willÂ tryÂ toÂ keepÂ theÂ clientÂ requestÂ encodingsÂ moreÂ <br>
Â Â stableÂ inÂ future.<br>
<br>
BUGSÂ FIXED:<br>
<br>
108258Â Â Â NPTLÂ pthreadÂ cleanupÂ handlersÂ notÂ calledÂ <br>
117290Â Â Â valgrindÂ isÂ sigKILL'dÂ onÂ startup<br>
117295Â Â Â ==Â 117290<br>
118703Â Â Â m_signals.c:1427Â AssertionÂ 'tst-&gt;statusÂ ==Â VgTs_WaitSys'<br>
118466Â Â Â addÂ %reg,Â %regÂ generatesÂ incorrectÂ validityÂ forÂ bitÂ 0<br>
123210Â Â Â New:Â strlenÂ fromÂ ld-linuxÂ onÂ amd64<br>
123244Â Â Â DWARF2Â CFIÂ reader:Â unhandledÂ CFIÂ instructionÂ 0:18<br>
123248Â Â Â syscallsÂ inÂ glibc-2.4:Â openat,Â fstatat,Â symlinkat<br>
123258Â Â Â socketcall.recvmsg(msg.msg_iov[i]Â pointsÂ toÂ uninit<br>
123535Â Â Â mremap(new_addr)Â requiresÂ MREMAP_FIXEDÂ inÂ 4thÂ arg<br>
123836Â Â Â smallÂ typoÂ inÂ theÂ doc<br>
124029Â Â Â ppcÂ compileÂ failed:Â `vor'Â gccÂ 3.3.5<br>
124222Â Â Â Segfault:Â @@don'tÂ knowÂ whatÂ typeÂ ':'Â is<br>
124475Â Â Â ppc32:Â crashÂ (syscall?)Â timer_settime()<br>
124499Â Â Â amd64-&gt;IR:Â 0xFÂ 0xEÂ 0x48Â 0x85Â (femms)<br>
124528Â Â Â FATAL:Â aspacemÂ assertionÂ failed:Â segment_is_sane<br>
124697Â Â Â vexÂ x86-&gt;IR:Â 0xFÂ 0x70Â 0xC9Â 0x0Â (pshufw)<br>
124892Â Â Â vexÂ x86-&gt;IR:Â 0xF3Â 0xAEÂ (REPxÂ SCASB)<br>
126216Â Â Â ==Â 124892<br>
124808Â Â Â ppc32:Â sys_sched_getaffinity()Â notÂ handled<br>
n-i-bzÂ Â Â VeryÂ longÂ stabsÂ stringsÂ crashÂ m_debuginfo<br>
n-i-bzÂ Â Â amd64-&gt;IR:Â 0x66Â 0xFÂ 0xF5Â (pmaddwd)<br>
125492Â Â Â ppc32:Â supportÂ aÂ bunchÂ moreÂ syscalls<br>
121617Â Â Â ppc32/64:Â coredumpingÂ givesÂ assertionÂ failure<br>
121814Â Â Â CoregrindÂ returnÂ errorÂ asÂ exitcodeÂ patch<br>
126517Â Â Â ==Â 121814<br>
125607Â Â Â amd64-&gt;IR:Â 0x66Â 0xFÂ 0xA3Â 0x2Â (btwÂ etc)<br>
125651Â Â Â amd64-&gt;IR:Â 0xF8Â 0x49Â 0xFFÂ 0xE3Â (clc?)<br>
126253Â Â Â x86Â movxÂ isÂ wrong<br>
126451Â Â Â 3.2Â SVNÂ doesn'tÂ workÂ onÂ ppc32Â CPU'sÂ withoutÂ FPU<br>
126217Â Â Â increaseÂ #Â threads<br>
126243Â Â Â vexÂ x86-&gt;IR:Â popwÂ mem<br>
126583Â Â Â amd64-&gt;IR:Â 0x48Â 0xFÂ 0xA4Â 0xC2Â (shldÂ $1,%rax,%rdx)<br>
126668Â Â Â amd64-&gt;IR:Â 0x1CÂ 0xFFÂ (sbbÂ $0xff,%al)<br>
126696Â Â Â supportÂ forÂ CDROMREADRAWÂ ioctlÂ andÂ CDROMREADTOCENTRYÂ fix<br>
126722Â Â Â assertion:Â segment_is_saneÂ atÂ m_aspacemgr/aspacemgr.c:1624<br>
126938Â Â Â badÂ checkingÂ forÂ syscallsÂ linkat,Â renameat,Â symlinkat<br>
<br>
(3.2.0RC1:Â 27Â MayÂ Â 2006,Â vexÂ r1626,Â valgrindÂ r5947).<br>
(3.2.0:Â Â Â Â Â 7Â JuneÂ 2006,Â vexÂ r1628,Â valgrindÂ r5957).<br>
<br>
<br>
ReleaseÂ 3.1.1Â (15Â MarchÂ 2006)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
3.1.1Â fixesÂ aÂ bunchÂ ofÂ bugsÂ reportedÂ inÂ 3.1.0.Â Â ThereÂ isÂ noÂ new<br>
functionality.Â Â TheÂ fixedÂ bugsÂ are:<br>
<br>
(note:Â "n-i-bz"Â meansÂ "notÂ inÂ bugzilla"Â --Â thisÂ bugÂ doesÂ notÂ have<br>
Â aÂ bugzillaÂ entry).<br>
<br>
n-i-bzÂ Â Â ppc32:Â fsubÂ 3,3,3Â inÂ dispatcherÂ doesn'tÂ clearÂ NaNs<br>
n-i-bzÂ Â Â ppc32:Â __NR_{set,get}priority<br>
117332Â Â Â x86:Â missingÂ lineÂ infoÂ withÂ iccÂ 8.1<br>
117366Â Â Â amd64:Â 0xDDÂ 0x7CÂ fnstsw<br>
118274Â Â Â ==Â 117366<br>
117367Â Â Â amd64:Â 0xD9Â 0xF4Â fxtract<br>
117369Â Â Â amd64:Â __NR_getpriorityÂ (140)<br>
117419Â Â Â ppc32:Â lfsuÂ f5,Â -4(r11)<br>
117419Â Â Â ppc32:Â fsqrt<br>
117936Â Â Â moreÂ stabsÂ problemsÂ (segfaultsÂ whileÂ readingÂ debugÂ info)<br>
119914Â Â Â ==Â 117936<br>
120345Â Â Â ==Â 117936<br>
118239Â Â Â amd64:Â 0xFÂ 0xAEÂ 0x3FÂ (clflush)<br>
118939Â Â Â vm86oldÂ systemÂ call<br>
n-i-bzÂ Â Â memcheck/tests/mempoolÂ readsÂ freedÂ memory<br>
n-i-bzÂ Â Â AshleyP'sÂ custom-allocatorÂ assertion<br>
n-i-bzÂ Â Â DirkÂ strict-aliasingÂ stuff<br>
n-i-bzÂ Â Â MoreÂ spaceÂ forÂ debuggerÂ cmdÂ lineÂ (DanÂ Thaler)<br>
n-i-bzÂ Â Â ClarifiedÂ leakÂ checkerÂ outputÂ message<br>
n-i-bzÂ Â Â AshleyP'sÂ --gen-suppressionsÂ outputÂ fix<br>
n-i-bzÂ Â Â cg_annotate'sÂ --sortÂ optionÂ broken<br>
n-i-bzÂ Â Â OSetÂ 64-bitÂ fastcmpÂ bug<br>
n-i-bzÂ Â Â VG_(getgroups)Â fixÂ (ShinichiÂ Noda)<br>
n-i-bzÂ Â Â ppc32:Â allocateÂ fromÂ callee-savedÂ FP/VMXÂ regs<br>
n-i-bzÂ Â Â misalignedÂ pathÂ word-sizeÂ bugÂ inÂ mc_main.c<br>
119297Â Â Â IncorrectÂ errorÂ messageÂ forÂ sseÂ code<br>
120410Â Â Â x86:Â prefetchwÂ (0xFÂ 0xDÂ 0x48Â 0x4)<br>
120728Â Â Â TIOCSERGETLSR,Â TIOCGICOUNT,Â HDIO_GET_DMAÂ ioctls<br>
120658Â Â Â BuildÂ fixesÂ forÂ gccÂ 2.96<br>
120734Â Â Â x86:Â SupportÂ forÂ changingÂ EIPÂ inÂ signalÂ handler<br>
n-i-bzÂ Â Â memcheck/tests/zeropageÂ de-loopingÂ fix<br>
n-i-bzÂ Â Â x86:Â fxtractÂ doesn'tÂ workÂ reliably<br>
121662Â Â Â x86:Â lockÂ xaddÂ (0xF0Â 0xFÂ 0xC0Â 0x2)<br>
121893Â Â Â callocÂ doesÂ notÂ alwaysÂ returnÂ zeroedÂ memory<br>
121901Â Â Â noÂ supportÂ forÂ syscallÂ tkill<br>
n-i-bzÂ Â Â SuppressionÂ updateÂ forÂ DebianÂ unstable<br>
122067Â Â Â amd64:Â fcmovnuÂ (0xDBÂ 0xD9)<br>
n-i-bzÂ Â Â ppc32:Â brokenÂ signalÂ handlingÂ inÂ cpuÂ featureÂ detection<br>
n-i-bzÂ Â Â ppc32:Â roundingÂ modeÂ problemsÂ (improved,Â partialÂ fixÂ only)<br>
119482Â Â Â ppc32:Â mtfsb1<br>
n-i-bzÂ Â Â ppc32:Â mtocrf/mfocrf<br>
<br>
(3.1.1:Â Â 15Â MarchÂ 2006,Â vexÂ r1597,Â valgrindÂ r5771).<br>
<br>
<br>
ReleaseÂ 3.1.0Â (25Â NovemberÂ 2005)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
3.1.0Â isÂ aÂ featureÂ releaseÂ withÂ aÂ numberÂ ofÂ significantÂ improvements:<br>
AMD64Â supportÂ isÂ muchÂ improved,Â PPC32Â supportÂ isÂ goodÂ enoughÂ toÂ be<br>
usable,Â andÂ theÂ handlingÂ ofÂ memoryÂ managementÂ andÂ addressÂ spaceÂ is<br>
muchÂ moreÂ robust.Â Â InÂ detail:<br>
<br>
-Â AMD64Â supportÂ isÂ muchÂ improved.Â Â TheÂ 64-bitÂ vs.Â 32-bitÂ issuesÂ in<br>
Â Â 3.0.XÂ haveÂ beenÂ resolved,Â andÂ itÂ shouldÂ "justÂ work"Â nowÂ inÂ all<br>
Â Â cases.Â Â OnÂ AMD64Â machinesÂ bothÂ 64-bitÂ andÂ 32-bitÂ versionsÂ of<br>
Â Â ValgrindÂ areÂ built.Â Â TheÂ rightÂ versionÂ willÂ beÂ invoked<br>
Â Â automatically,Â evenÂ whenÂ usingÂ --trace-childrenÂ andÂ mixingÂ execution<br>
Â Â betweenÂ 64-bitÂ andÂ 32-bitÂ executables.Â Â Also,Â manyÂ moreÂ instructions<br>
Â Â areÂ supported.<br>
<br>
-Â PPC32Â supportÂ isÂ nowÂ goodÂ enoughÂ toÂ beÂ usable.Â Â ItÂ shouldÂ workÂ with<br>
Â Â allÂ tools,Â butÂ pleaseÂ letÂ usÂ knowÂ ifÂ youÂ haveÂ problems.Â Â Three<br>
Â Â classesÂ ofÂ CPUsÂ areÂ supported:Â integerÂ onlyÂ (noÂ FP,Â noÂ Altivec),<br>
Â Â whichÂ coversÂ embeddedÂ PPCÂ uses,Â integerÂ andÂ FPÂ butÂ noÂ Altivec<br>
Â Â (G3-ish),Â andÂ CPUsÂ capableÂ ofÂ AltivecÂ tooÂ (G4,Â G5).<br>
<br>
-Â Valgrind'sÂ addressÂ spaceÂ managementÂ hasÂ beenÂ overhauled.Â Â AsÂ a<br>
Â Â result,Â ValgrindÂ shouldÂ beÂ muchÂ moreÂ robustÂ withÂ programsÂ thatÂ use<br>
Â Â largeÂ amountsÂ ofÂ memory.Â Â ThereÂ shouldÂ beÂ manyÂ fewerÂ "memory<br>
Â Â exhausted"Â messages,Â andÂ debugÂ symbolsÂ shouldÂ beÂ readÂ correctlyÂ on<br>
Â Â largeÂ (eg.Â 300MB+)Â executables.Â Â OnÂ 32-bitÂ machinesÂ theÂ fullÂ address<br>
Â Â spaceÂ availableÂ toÂ userÂ programsÂ (usuallyÂ 3GBÂ orÂ 4GB)Â canÂ beÂ fully<br>
Â Â utilised.Â Â OnÂ 64-bitÂ machinesÂ upÂ toÂ 32GBÂ ofÂ spaceÂ isÂ usable;Â when<br>
Â Â usingÂ MemcheckÂ thatÂ meansÂ yourÂ programÂ canÂ useÂ upÂ toÂ aboutÂ 14GB.<br>
<br>
Â Â AÂ sideÂ effectÂ ofÂ thisÂ changeÂ isÂ thatÂ ValgrindÂ isÂ noÂ longerÂ protected<br>
Â Â againstÂ wildÂ writesÂ byÂ theÂ client.Â Â ThisÂ featureÂ wasÂ niceÂ butÂ relied<br>
Â Â onÂ theÂ x86Â segmentÂ registersÂ andÂ soÂ wasn'tÂ portable.<br>
<br>
-Â MostÂ usersÂ shouldÂ notÂ notice,Â butÂ asÂ partÂ ofÂ theÂ addressÂ space<br>
Â Â managerÂ change,Â theÂ wayÂ ValgrindÂ isÂ builtÂ hasÂ beenÂ changed.Â Â Each<br>
Â Â toolÂ isÂ nowÂ builtÂ asÂ aÂ staticallyÂ linkedÂ stand-aloneÂ executable,<br>
Â Â ratherÂ thanÂ asÂ aÂ sharedÂ objectÂ thatÂ isÂ dynamicallyÂ linkedÂ withÂ the<br>
Â Â core.Â Â TheÂ "valgrind"Â programÂ invokesÂ theÂ appropriateÂ toolÂ depending<br>
Â Â onÂ theÂ --toolÂ option.Â Â ThisÂ slightlyÂ increasesÂ theÂ amountÂ ofÂ disk<br>
Â Â spaceÂ usedÂ byÂ Valgrind,Â butÂ itÂ greatlyÂ simplifiedÂ manyÂ thingsÂ and<br>
Â Â removedÂ Valgrind'sÂ dependenceÂ onÂ glibc.<br>
<br>
PleaseÂ noteÂ thatÂ AddrcheckÂ andÂ HelgrindÂ areÂ stillÂ notÂ working.Â Â Work<br>
isÂ underwayÂ toÂ reinstateÂ themÂ (orÂ equivalents).Â Â WeÂ apologiseÂ forÂ the<br>
inconvenience.<br>
<br>
OtherÂ user-visibleÂ changes:<br>
<br>
-Â TheÂ --weird-hacksÂ optionÂ hasÂ beenÂ renamedÂ --sim-hints.<br>
<br>
-Â TheÂ --time-stampÂ optionÂ noÂ longerÂ givesÂ anÂ absoluteÂ dateÂ andÂ time.<br>
Â Â ItÂ nowÂ printsÂ theÂ timeÂ elapsedÂ sinceÂ theÂ programÂ began.<br>
<br>
-Â ItÂ shouldÂ buildÂ withÂ gcc-2.96.<br>
<br>
-Â ValgrindÂ canÂ nowÂ runÂ itselfÂ (seeÂ README_DEVELOPERSÂ forÂ how).<br>
Â Â ThisÂ isÂ notÂ muchÂ useÂ toÂ you,Â butÂ itÂ meansÂ theÂ developersÂ canÂ now<br>
Â Â profileÂ ValgrindÂ usingÂ Cachegrind.Â Â AsÂ aÂ resultÂ aÂ coupleÂ of<br>
Â Â performanceÂ badÂ casesÂ haveÂ beenÂ fixed.<br>
<br>
-Â TheÂ XMLÂ outputÂ formatÂ hasÂ changedÂ slightly.Â Â See<br>
Â Â docs/internals/xml-output.txt.<br>
<br>
-Â CoreÂ dumpingÂ hasÂ beenÂ reinstatedÂ (itÂ wasÂ disabledÂ inÂ 3.0.0Â andÂ 3.0.1).<br>
Â Â IfÂ yourÂ programÂ crashesÂ whileÂ runningÂ underÂ Valgrind,Â aÂ coreÂ fileÂ with<br>
Â Â theÂ nameÂ "vgcore.&lt;pid&gt;"Â willÂ beÂ createdÂ (ifÂ yourÂ settingsÂ allowÂ core<br>
Â Â fileÂ creation).Â Â NoteÂ thatÂ theÂ floatingÂ pointÂ informationÂ isÂ notÂ all<br>
Â Â there.Â Â IfÂ ValgrindÂ itselfÂ crashes,Â theÂ OSÂ willÂ createÂ aÂ normalÂ core<br>
Â Â file.<br>
<br>
TheÂ followingÂ areÂ someÂ user-visibleÂ changesÂ thatÂ occurredÂ inÂ earlier<br>
versionsÂ thatÂ mayÂ notÂ haveÂ beenÂ announced,Â orÂ wereÂ announcedÂ butÂ not<br>
widelyÂ noticed.Â Â SoÂ we'reÂ mentioningÂ themÂ now.<br>
<br>
-Â TheÂ --toolÂ flagÂ isÂ optionalÂ onceÂ again;Â Â ifÂ youÂ omitÂ it,Â Memcheck<br>
Â Â isÂ runÂ byÂ default.<br>
<br>
-Â TheÂ --num-callersÂ flagÂ nowÂ hasÂ aÂ defaultÂ valueÂ ofÂ 12.Â Â ItÂ was<br>
Â Â previouslyÂ 4.<br>
<br>
-Â TheÂ --xml=yesÂ flagÂ causesÂ Valgrind'sÂ outputÂ toÂ beÂ producedÂ inÂ XML<br>
Â Â format.Â Â ThisÂ isÂ designedÂ toÂ makeÂ itÂ easyÂ forÂ otherÂ programsÂ to<br>
Â Â consumeÂ Valgrind'sÂ output.Â Â TheÂ formatÂ isÂ describedÂ inÂ theÂ file<br>
Â Â docs/internals/xml-format.txt.<br>
<br>
-Â TheÂ --gen-suppressionsÂ flagÂ supportsÂ anÂ "all"Â valueÂ thatÂ causesÂ every<br>
Â Â suppressionÂ toÂ beÂ printedÂ withoutÂ asking.<br>
<br>
-Â TheÂ --log-fileÂ optionÂ noÂ longerÂ putsÂ "pid"Â inÂ theÂ filename,Â eg.Â the<br>
Â Â oldÂ nameÂ "foo.pid12345"Â isÂ nowÂ "foo.12345".<br>
<br>
-Â ThereÂ areÂ severalÂ graphicalÂ front-endsÂ forÂ Valgrind,Â suchÂ asÂ Valkyrie,<br>
Â Â AlleyoopÂ andÂ Valgui.Â Â SeeÂ http://www.valgrind.org/downloads/guis.html<br>
Â Â forÂ aÂ list.<br>
<br>
BUGSÂ FIXED:<br>
<br>
109861Â Â amd64Â hangsÂ atÂ startup<br>
110301Â Â ditto<br>
111554Â Â valgrindÂ crashesÂ withÂ CannotÂ allocateÂ memory<br>
111809Â Â MemcheckÂ toolÂ doesn'tÂ startÂ java<br>
111901Â Â cross-platformÂ runÂ ofÂ cachegrindÂ failsÂ onÂ opteron<br>
113468Â Â (vgPlain_mprotect_range):Â AssertionÂ 'rÂ !=Â -1'Â failed.<br>
Â 92071Â Â ReadingÂ debuggingÂ infoÂ usesÂ tooÂ muchÂ memory<br>
109744Â Â memcheckÂ losesÂ trackÂ ofÂ mmapÂ fromÂ directÂ ld-linux.so.2<br>
110183Â Â tailÂ ofÂ pageÂ withÂ _end<br>
Â 82301Â Â FVÂ memoryÂ layoutÂ tooÂ rigid<br>
Â 98278Â Â InfiniteÂ recursionÂ possibleÂ whenÂ allocatingÂ memory<br>
108994Â Â ValgrindÂ runsÂ outÂ ofÂ memoryÂ dueÂ toÂ 133xÂ overhead<br>
115643Â Â valgrindÂ cannotÂ allocateÂ memory<br>
105974Â Â vg_hashtable.cÂ staticÂ hashÂ table<br>
109323Â Â ppc32:Â dispatch.SÂ usesÂ AltivecÂ insn,Â whichÂ doesn'tÂ workÂ onÂ POWER.Â <br>
109345Â Â ptrace_setregsÂ notÂ yetÂ implementedÂ forÂ ppc<br>
110831Â Â WouldÂ likeÂ toÂ beÂ ableÂ toÂ runÂ againstÂ bothÂ 32Â andÂ 64Â bitÂ <br>
Â Â Â Â Â Â Â Â binariesÂ onÂ AMD64<br>
110829Â Â ==Â 110831<br>
111781Â Â compileÂ ofÂ valgrind-3.0.0Â failsÂ onÂ myÂ linuxÂ (gccÂ 2.XÂ prob)<br>
112670Â Â Cachegrind:Â cg_main.c:486Â (handleOneStatementÂ ...<br>
112941Â Â vexÂ x86:Â 0xD9Â 0xF4Â (fxtract)<br>
110201Â Â ==Â 112941<br>
113015Â Â vexÂ amd64-&gt;IR:Â 0xE3Â 0x14Â 0x48Â 0x83Â (jrcxz)<br>
113126Â Â CrashÂ withÂ binariesÂ builtÂ withÂ -gstabs+/-ggdb<br>
104065Â Â ==Â 113126<br>
115741Â Â ==Â 113126<br>
113403Â Â PartialÂ SSE3Â supportÂ onÂ x86<br>
113541Â Â vex:Â Grp5(x86)Â (altÂ encodingÂ inc/dec)Â caseÂ 1<br>
113642Â Â valgrindÂ crashesÂ whenÂ tryingÂ toÂ readÂ debugÂ information<br>
113810Â Â vexÂ x86-&gt;IR:Â 66Â 0FÂ F6Â (66Â +Â PSADBWÂ ==Â SSEÂ PSADBW)<br>
113796Â Â read()Â andÂ write()Â doÂ notÂ workÂ ifÂ bufferÂ isÂ inÂ sharedÂ memory<br>
113851Â Â vexÂ x86-&gt;IR:Â (pmaddwd):Â 0x66Â 0xFÂ 0xF5Â 0xC7<br>
114366Â Â vexÂ amd64Â cannnotÂ handleÂ __asm__(Â "fninit"Â )<br>
114412Â Â vexÂ amd64-&gt;IR:Â 0xFÂ 0xADÂ 0xC2Â 0xD3Â (128-bitÂ shift,Â shrdq?)<br>
114455Â Â vexÂ amd64-&gt;IR:Â 0xFÂ 0xACÂ 0xD0Â 0x1Â (alsoÂ shrdq)<br>
115590:Â amd64-&gt;IR:Â 0x67Â 0xE3Â 0x9Â 0xEBÂ (addressÂ sizeÂ override)<br>
115953Â Â valgrindÂ svnÂ r5042Â doesÂ notÂ buildÂ withÂ parallelÂ makeÂ (-j3)<br>
116057Â Â maximumÂ instructionÂ sizeÂ -Â VG_MAX_INSTR_SZBÂ tooÂ small?<br>
116483Â Â shmatÂ failesÂ withÂ invalidÂ argument<br>
102202Â Â valgrindÂ crashesÂ whenÂ realloc'ingÂ untilÂ outÂ ofÂ memory<br>
109487Â Â ==Â 102202<br>
110536Â Â ==Â 102202<br>
112687Â Â ==Â 102202<br>
111724Â Â vexÂ amd64-&gt;IR:Â 0x41Â 0xFÂ 0xABÂ (moreÂ BT{,S,R,C}Â funÂ nÂ games)<br>
111748Â Â vexÂ amd64-&gt;IR:Â 0xDDÂ 0xE2Â (fucom)<br>
111785Â Â makeÂ failsÂ ifÂ CCÂ containsÂ spaces<br>
111829Â Â vexÂ x86-&gt;IR:Â sbbÂ AL,Â Ib<br>
111851Â Â vexÂ x86-&gt;IR:Â 0x9FÂ 0x89Â (lahf/sahf)<br>
112031Â Â ioplÂ onÂ AMD64Â andÂ README_MISSING_SYSCALL_OR_IOCTLÂ update<br>
112152Â Â codeÂ generationÂ forÂ Xin_MFenceÂ onÂ x86Â withÂ SSE0Â subarch<br>
112167Â Â ==Â 112152<br>
112789Â Â ==Â 112152<br>
112199Â Â nakedÂ arÂ toolÂ isÂ usedÂ inÂ vexÂ makefile<br>
112501Â Â vexÂ x86-&gt;IR:Â movqÂ (0xFÂ 0x7FÂ 0xC1Â 0xF)Â (mmxÂ MOVQ)<br>
113583Â Â ==Â 112501<br>
112538Â Â memalignÂ crash<br>
113190Â Â BrokenÂ linksÂ inÂ docs/html/<br>
113230Â Â ValgrindÂ sys_pipeÂ onÂ x86-64Â wronglyÂ thinksÂ fileÂ descriptors<br>
Â Â Â Â Â Â Â Â shouldÂ beÂ 64bit<br>
113996Â Â vexÂ amd64-&gt;IR:Â fucompÂ (0xDDÂ 0xE9)<br>
114196Â Â vexÂ x86-&gt;IR:Â outÂ %eax,(%dx)Â (0xEFÂ 0xC9Â 0xC3Â 0x90)<br>
114289Â Â MemcheckÂ failsÂ toÂ interceptÂ mallocÂ whenÂ usedÂ inÂ anÂ uclibcÂ environment<br>
114756Â Â mbindÂ syscallÂ support<br>
114757Â Â ValgrindÂ diesÂ withÂ assertion:Â AssertionÂ 'noLargerThanÂ &gt;Â 0'Â failed<br>
114563Â Â stackÂ trackingÂ moduleÂ notÂ informedÂ whenÂ valgrindÂ switchesÂ threads<br>
114564Â Â clone()Â andÂ stacks<br>
114565Â Â ==Â 114564<br>
115496Â Â glibcÂ crashesÂ tryingÂ toÂ useÂ sysinfoÂ page<br>
116200Â Â enableÂ fsetxattr,Â fgetxattr,Â andÂ fremovexattrÂ forÂ amd64<br>
<br>
(3.1.0RC1:Â 20Â NovemberÂ 2005,Â vexÂ r1466,Â valgrindÂ r5224).<br>
(3.1.0:Â Â Â Â 26Â NovemberÂ 2005,Â vexÂ r1471,Â valgrindÂ r5235).<br>
<br>
<br>
ReleaseÂ 3.0.1Â (29Â AugustÂ 2005)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
3.0.1Â fixesÂ aÂ bunchÂ ofÂ bugsÂ reportedÂ inÂ 3.0.0.Â Â ThereÂ isÂ noÂ new<br>
functionality.Â Â SomeÂ ofÂ theÂ fixedÂ bugsÂ areÂ critical,Â soÂ ifÂ you<br>
use/distributeÂ 3.0.0,Â anÂ upgradeÂ toÂ 3.0.1Â isÂ recommended.Â Â TheÂ fixed<br>
bugsÂ are:<br>
<br>
(note:Â "n-i-bz"Â meansÂ "notÂ inÂ bugzilla"Â --Â thisÂ bugÂ doesÂ notÂ have<br>
Â aÂ bugzillaÂ entry).<br>
<br>
109313Â Â (==Â 110505)Â x86Â cmpxchg8b<br>
n-i-bzÂ Â x86:Â trackÂ butÂ ignoreÂ changesÂ toÂ %eflags.ACÂ (alignmentÂ check)<br>
110102Â Â dis_op2_E_G(amd64)<br>
110202Â Â x86Â sys_waitpid(#286)<br>
110203Â Â clock_getres(,0)<br>
110208Â Â execveÂ failÂ wrongÂ retval<br>
110274Â Â SSE1Â nowÂ mandatoryÂ forÂ x86<br>
110388Â Â amd64Â 0xDDÂ 0xD1<br>
110464Â Â amd64Â 0xDCÂ 0x1DÂ FCOMP<br>
110478Â Â amd64Â 0xFÂ 0xDÂ PREFETCH<br>
n-i-bzÂ Â XMLÂ &lt;unique&gt;Â printingÂ wrong<br>
n-i-bzÂ Â DirkÂ r4359Â (amd64Â syscallsÂ fromÂ trunk)<br>
110591Â Â amd64Â andÂ x86:Â rdtscÂ notÂ implementedÂ properly<br>
n-i-bzÂ Â NickÂ r4384Â (stubÂ implementationsÂ ofÂ AddrcheckÂ andÂ Helgrind)<br>
110652Â Â AMD64Â valgrindÂ crashesÂ onÂ cwtdÂ instruction<br>
110653Â Â AMD64Â valgrindÂ crashesÂ onÂ sarbÂ $0x4,foo(%rip)Â instruction<br>
110656Â Â PATH=/usr/bin::/binÂ valgrindÂ foobarÂ statsÂ ./fooba<br>
110657Â Â SmallÂ testÂ fixes<br>
110671Â Â vexÂ x86-&gt;IR:Â unhandledÂ instructionÂ bytes:Â 0xF3Â 0xC3Â (repÂ ret)<br>
n-i-bzÂ Â NickÂ (CachegrindÂ shouldÂ notÂ assertÂ whenÂ itÂ encountersÂ aÂ client<br>
Â Â Â Â Â Â Â Â request.)<br>
110685Â Â amd64-&gt;IR:Â unhandledÂ instructionÂ bytes:Â 0xE1Â 0x56Â (loopeÂ Jb)<br>
110830Â Â configuringÂ withÂ --hostÂ failsÂ toÂ buildÂ 32Â bitÂ onÂ 64Â bitÂ target<br>
110875Â Â AssertionÂ whenÂ execveÂ fails<br>
n-i-bzÂ Â UpdatesÂ toÂ MemcheckÂ manual<br>
n-i-bzÂ Â FixedÂ brokenÂ malloc_usable_size()<br>
110898Â Â opteronÂ instructionsÂ missing:Â btqÂ btsqÂ btrqÂ bsfq<br>
110954Â Â x86-&gt;IR:Â unhandledÂ instructionÂ bytes:Â 0xE2Â 0xF6Â (loopÂ Jb)<br>
n-i-bzÂ Â MakeÂ suppressionsÂ workÂ forÂ "???"Â linesÂ inÂ stacktraces.<br>
111006Â Â bogusÂ warningsÂ fromÂ linuxthreads<br>
111092Â Â x86:Â dis_Grp2(Reg):Â unhandledÂ case(x86)Â <br>
111231Â Â sctp_getladdrs()Â andÂ sctp_getpaddrs()Â returnsÂ uninitialized<br>
Â Â Â Â Â Â Â Â memory<br>
111102Â Â (commentÂ #4)Â Â Â FixedÂ 64-bitÂ uncleanÂ "sillyÂ arg"Â message<br>
n-i-bzÂ Â vexÂ x86-&gt;IR:Â unhandledÂ instructionÂ bytes:Â 0x14Â 0x0<br>
n-i-bzÂ Â minorÂ umount/fcntlÂ wrapperÂ fixes<br>
111090Â Â InternalÂ ErrorÂ runningÂ Massif<br>
101204Â Â noisyÂ warning<br>
111513Â Â IllegalÂ opcodeÂ forÂ SSEÂ instructionÂ (x86Â movups)<br>
111555Â Â VEX/Makefile:Â CCÂ isÂ setÂ toÂ gcc<br>
n-i-bzÂ Â FixÂ XMLÂ bugsÂ inÂ FAQ<br>
<br>
(3.0.1:Â 29Â AugustÂ 05,<br>
Â Â Â Â Â Â Â Â vex/branches/VEX_3_0_BRANCHÂ r1367,<br>
Â Â Â Â Â Â Â Â valgrind/branches/VALGRIND_3_0_BRANCHÂ r4574).<br>
<br>
<br>
<br>
ReleaseÂ 3.0.0Â (3Â AugustÂ 2005)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
3.0.0Â isÂ aÂ majorÂ overhaulÂ ofÂ Valgrind.Â Â TheÂ mostÂ significantÂ user<br>
visibleÂ changeÂ isÂ thatÂ ValgrindÂ nowÂ supportsÂ architecturesÂ otherÂ than<br>
x86.Â Â TheÂ newÂ architecturesÂ itÂ supportsÂ areÂ AMD64Â andÂ PPC32,Â andÂ the<br>
infrastructureÂ isÂ presentÂ forÂ otherÂ architecturesÂ toÂ beÂ addedÂ later.<br>
<br>
AMD64Â supportÂ worksÂ well,Â butÂ hasÂ someÂ shortcomings:<br>
<br>
-Â ItÂ generallyÂ won'tÂ beÂ asÂ solidÂ asÂ theÂ x86Â version.Â Â ForÂ example,<br>
Â Â supportÂ forÂ moreÂ obscureÂ instructionsÂ andÂ systemÂ callsÂ mayÂ beÂ missing.<br>
Â Â WeÂ willÂ fixÂ theseÂ asÂ theyÂ arise.<br>
<br>
-Â AddressÂ spaceÂ mayÂ beÂ limited;Â seeÂ theÂ pointÂ about<br>
Â Â position-independentÂ executablesÂ below.<br>
<br>
-Â IfÂ ValgrindÂ isÂ builtÂ onÂ anÂ AMD64Â machine,Â itÂ willÂ onlyÂ runÂ 64-bit<br>
Â Â executables.Â Â IfÂ youÂ wantÂ toÂ runÂ 32-bitÂ x86Â executablesÂ underÂ Valgrind<br>
Â Â onÂ anÂ AMD64,Â youÂ willÂ needÂ toÂ buildÂ ValgrindÂ onÂ anÂ x86Â machineÂ and<br>
Â Â copyÂ itÂ toÂ theÂ AMD64Â machine.Â Â AndÂ itÂ probablyÂ won'tÂ workÂ ifÂ youÂ do<br>
Â Â somethingÂ trickyÂ likeÂ exec'ingÂ aÂ 32-bitÂ programÂ fromÂ aÂ 64-bitÂ program<br>
Â Â whileÂ usingÂ --trace-children=yes.Â Â WeÂ hopeÂ toÂ improveÂ thisÂ situation<br>
Â Â inÂ theÂ future.<br>
<br>
TheÂ PPC32Â supportÂ isÂ veryÂ basic.Â Â ItÂ mayÂ notÂ workÂ reliablyÂ evenÂ for<br>
smallÂ programs,Â butÂ it'sÂ aÂ start.Â Â ManyÂ thanksÂ toÂ PaulÂ MackerrasÂ for<br>
hisÂ greatÂ workÂ thatÂ enabledÂ thisÂ support.Â Â WeÂ areÂ workingÂ toÂ make<br>
PPC32Â usableÂ asÂ soonÂ asÂ possible.<br>
<br>
OtherÂ user-visibleÂ changes:<br>
<br>
-Â ValgrindÂ isÂ noÂ longerÂ builtÂ byÂ defaultÂ asÂ aÂ position-independent<br>
Â Â executableÂ (PIE),Â asÂ thisÂ causedÂ tooÂ manyÂ problems.<br>
<br>
Â Â WithoutÂ PIEÂ enabled,Â AMD64Â programsÂ willÂ onlyÂ beÂ ableÂ toÂ accessÂ 2GBÂ of<br>
Â Â addressÂ space.Â Â WeÂ willÂ fixÂ thisÂ eventually,Â butÂ notÂ forÂ theÂ moment.<br>
Â Â <br>
Â Â UseÂ --enable-pieÂ atÂ configure-timeÂ toÂ turnÂ thisÂ on.<br>
<br>
-Â SupportÂ forÂ programsÂ thatÂ useÂ stack-switchingÂ hasÂ beenÂ improved.Â Â Use<br>
Â Â theÂ --max-stackframeÂ flagÂ forÂ simpleÂ cases,Â andÂ the<br>
Â Â VALGRIND_STACK_REGISTER,Â VALGRIND_STACK_DEREGISTERÂ and<br>
Â Â VALGRIND_STACK_CHANGEÂ clientÂ requestsÂ forÂ trickierÂ cases.<br>
<br>
-Â SupportÂ forÂ programsÂ thatÂ useÂ self-modifyingÂ codeÂ hasÂ beenÂ improved,<br>
Â Â inÂ particularÂ programsÂ thatÂ putÂ temporaryÂ codeÂ fragmentsÂ onÂ theÂ stack.<br>
Â Â ThisÂ helpsÂ forÂ CÂ programsÂ compiledÂ withÂ GCCÂ thatÂ useÂ nestedÂ functions,<br>
Â Â andÂ alsoÂ AdaÂ programs.Â Â ThisÂ isÂ controlledÂ withÂ theÂ --smc-check<br>
Â Â flag,Â althoughÂ theÂ defaultÂ settingÂ shouldÂ workÂ inÂ mostÂ cases.<br>
<br>
-Â OutputÂ canÂ nowÂ beÂ printedÂ inÂ XMLÂ format.Â Â ThisÂ shouldÂ makeÂ itÂ easier<br>
Â Â forÂ toolsÂ suchÂ asÂ GUIÂ front-endsÂ andÂ automatedÂ error-processing<br>
Â Â schemesÂ toÂ useÂ ValgrindÂ outputÂ asÂ input.Â Â TheÂ --xmlÂ flagÂ controlsÂ this.<br>
Â Â AsÂ partÂ ofÂ thisÂ change,Â ELFÂ directoryÂ informationÂ isÂ readÂ fromÂ executables,<br>
Â Â soÂ absoluteÂ sourceÂ fileÂ pathsÂ areÂ availableÂ ifÂ needed.<br>
<br>
-Â ProgramsÂ thatÂ allocateÂ manyÂ heapÂ blocksÂ mayÂ runÂ faster,Â dueÂ to<br>
Â Â improvementsÂ inÂ certainÂ dataÂ structures.<br>
<br>
-Â AddrcheckÂ isÂ currentlyÂ notÂ working.Â Â WeÂ hopeÂ toÂ getÂ itÂ workingÂ again<br>
Â Â soon.Â Â HelgrindÂ isÂ stillÂ notÂ working,Â asÂ wasÂ theÂ caseÂ forÂ theÂ 2.4.0<br>
Â Â release.<br>
<br>
-Â TheÂ JITterÂ hasÂ beenÂ completelyÂ rewritten,Â andÂ isÂ nowÂ inÂ aÂ separate<br>
Â Â library,Â calledÂ Vex.Â Â ThisÂ enabledÂ aÂ lotÂ ofÂ theÂ user-visibleÂ changes,<br>
Â Â suchÂ asÂ newÂ architectureÂ support.Â Â TheÂ newÂ JITÂ unfortunatelyÂ translates<br>
Â Â moreÂ slowlyÂ thanÂ theÂ oldÂ one,Â soÂ programsÂ mayÂ takeÂ longerÂ toÂ start.<br>
Â Â WeÂ believeÂ theÂ codeÂ qualityÂ isÂ producesÂ isÂ aboutÂ theÂ same,Â soÂ once<br>
Â Â started,Â programsÂ shouldÂ runÂ atÂ aboutÂ theÂ sameÂ speed.Â Â FeedbackÂ about<br>
Â Â thisÂ wouldÂ beÂ useful.<br>
<br>
Â Â OnÂ theÂ plusÂ side,Â VexÂ andÂ henceÂ MemcheckÂ tracksÂ valueÂ flowÂ properly<br>
Â Â throughÂ floatingÂ pointÂ andÂ vectorÂ registers,Â somethingÂ theÂ 2.XÂ line<br>
Â Â couldÂ notÂ do.Â Â ThatÂ meansÂ thatÂ MemcheckÂ isÂ muchÂ moreÂ likelyÂ toÂ be<br>
Â Â usablyÂ accurateÂ onÂ vectorisedÂ code.<br>
<br>
-Â ThereÂ isÂ aÂ subtleÂ changeÂ toÂ theÂ wayÂ exitingÂ ofÂ threadedÂ programs<br>
Â Â isÂ handled.Â Â InÂ 3.0,Â Valgrind'sÂ finalÂ diagnosticÂ outputÂ (leakÂ check,<br>
Â Â etc)Â isÂ notÂ printedÂ untilÂ theÂ lastÂ threadÂ exits.Â Â IfÂ theÂ lastÂ thread<br>
Â Â toÂ exitÂ wasÂ notÂ theÂ originalÂ threadÂ whichÂ startedÂ theÂ program,Â any<br>
Â Â otherÂ processÂ wait()-ingÂ onÂ thisÂ oneÂ toÂ exitÂ mayÂ concludeÂ itÂ has<br>
Â Â finishedÂ beforeÂ theÂ diagnosticÂ outputÂ isÂ printed.Â Â ThisÂ mayÂ notÂ be<br>
Â Â whatÂ youÂ expect.Â Â 2.XÂ hadÂ aÂ differentÂ schemeÂ whichÂ avoidedÂ this<br>
Â Â problem,Â butÂ causedÂ deadlocksÂ underÂ obscureÂ circumstances,Â soÂ we<br>
Â Â areÂ tryingÂ somethingÂ differentÂ forÂ 3.0.<br>
<br>
-Â SmallÂ changesÂ inÂ controlÂ logÂ fileÂ namingÂ whichÂ makeÂ itÂ easierÂ to<br>
Â Â useÂ valgrindÂ forÂ debuggingÂ MPI-basedÂ programs.Â Â TheÂ relevant<br>
Â Â newÂ flagsÂ areÂ --log-file-exactly=Â andÂ --log-file-qualifier=.<br>
<br>
-Â AsÂ partÂ ofÂ addingÂ AMD64Â support,Â DWARF2Â CFI-basedÂ stackÂ unwinding<br>
Â Â supportÂ wasÂ added.Â Â InÂ principleÂ thisÂ meansÂ ValgrindÂ canÂ produce<br>
Â Â meaningfulÂ backtracesÂ onÂ x86Â codeÂ compiledÂ withÂ -fomit-frame-pointer<br>
Â Â providingÂ youÂ alsoÂ compileÂ yourÂ codeÂ withÂ -fasynchronous-unwind-tables.<br>
<br>
-Â TheÂ documentationÂ buildÂ systemÂ hasÂ beenÂ completelyÂ redone.<br>
Â Â TheÂ documentationÂ mastersÂ areÂ nowÂ inÂ XMLÂ format,Â andÂ fromÂ that<br>
Â Â HTML,Â PostScriptÂ andÂ PDFÂ documentationÂ isÂ generated.Â Â AsÂ aÂ result<br>
Â Â theÂ manualÂ isÂ nowÂ availableÂ inÂ bookÂ form.Â Â NoteÂ thatÂ the<br>
Â Â documentationÂ inÂ theÂ sourceÂ tarballsÂ isÂ pre-built,Â soÂ youÂ don'tÂ need<br>
Â Â anyÂ XMLÂ processingÂ toolsÂ toÂ buildÂ ValgrindÂ fromÂ aÂ tarball.<br>
<br>
ChangesÂ thatÂ areÂ notÂ user-visible:<br>
<br>
-Â TheÂ codeÂ hasÂ beenÂ massivelyÂ overhauledÂ inÂ orderÂ toÂ modulariseÂ it.<br>
Â Â AsÂ aÂ resultÂ weÂ hopeÂ itÂ isÂ easierÂ toÂ navigateÂ andÂ understand.<br>
<br>
-Â LotsÂ ofÂ codeÂ hasÂ beenÂ rewritten.<br>
<br>
BUGSÂ FIXED:<br>
<br>
110046Â Â szÂ ==Â 4Â assertionÂ failedÂ <br>
109810Â Â vexÂ amd64-&gt;IR:Â unhandledÂ instructionÂ bytes:Â 0xA3Â 0x4CÂ 0x70Â 0xD7<br>
109802Â Â AddÂ aÂ plausible_stack_sizeÂ command-lineÂ parameterÂ ?<br>
109783Â Â unhandledÂ ioctlÂ TIOCMGETÂ (runningÂ hwÂ detectionÂ toolÂ discover)Â <br>
109780Â Â unhandledÂ ioctlÂ BLKSSZGETÂ (runningÂ fdiskÂ -lÂ /dev/hda)<br>
109718Â Â vexÂ x86-&gt;IR:Â unhandledÂ instruction:Â ffreepÂ <br>
109429Â Â AMD64Â unhandledÂ syscall:Â 127Â (sigpending)<br>
109401Â Â falseÂ positiveÂ uninitÂ inÂ strchrÂ fromÂ ld-linux.so.2<br>
109385Â Â "stabs"Â parseÂ failureÂ <br>
109378Â Â amd64:Â unhandledÂ instructionÂ REPÂ NOP<br>
109376Â Â amd64:Â unhandledÂ instructionÂ LOOPÂ JbÂ <br>
109363Â Â AMD64Â unhandledÂ instructionÂ bytesÂ <br>
109362Â Â AMD64Â unhandledÂ syscall:Â 24Â (sched_yield)<br>
109358Â Â fork()Â won'tÂ workÂ withÂ valgrind-3.0Â SVN<br>
109332Â Â amd64Â unhandledÂ instruction:Â ADCÂ Ev,Â Gv<br>
109314Â Â BogusÂ memcheckÂ reportÂ onÂ amd64<br>
108883Â Â Crash;Â vg_memory.c:905Â (vgPlain_init_shadow_range):<br>
Â Â Â Â Â Â Â Â AssertionÂ `vgPlain_defined_init_shadow_page()'Â failed.<br>
108349Â Â mincoreÂ syscallÂ parameterÂ checkedÂ incorrectlyÂ <br>
108059Â Â buildÂ infrastructure:Â smallÂ update<br>
107524Â Â epoll_ctlÂ eventÂ parameterÂ checkedÂ onÂ EPOLL_CTL_DEL<br>
107123Â Â VexÂ diesÂ withÂ unhandledÂ instructions:Â 0xD9Â 0x31Â 0xFÂ 0xAE<br>
106841Â Â auxmapÂ &amp;Â openGLÂ problems<br>
106713Â Â SDL_InitÂ causesÂ valgrindÂ toÂ exit<br>
106352Â Â setcontextÂ andÂ makecontextÂ notÂ handledÂ correctlyÂ <br>
106293Â Â addressesÂ beyondÂ initialÂ clientÂ stackÂ allocationÂ <br>
Â Â Â Â Â Â Â Â notÂ checkedÂ inÂ VALGRIND_DO_LEAK_CHECK<br>
106283Â Â PIEÂ clientÂ programsÂ areÂ loadedÂ atÂ addressÂ 0<br>
105831Â Â AssertionÂ `vgPlain_defined_init_shadow_page()'Â failed.<br>
105039Â Â longÂ run-timesÂ probablyÂ dueÂ toÂ memoryÂ managerÂ <br>
104797Â Â valgrindÂ needsÂ toÂ beÂ awareÂ ofÂ BLKGETSIZE64<br>
103594Â Â unhandledÂ instruction:Â FICOM<br>
103320Â Â ValgrindÂ 2.4.0Â failsÂ toÂ compileÂ withÂ gccÂ 3.4.3Â andÂ -O0<br>
103168Â Â potentiallyÂ memoryÂ leakÂ inÂ coregrind/ume.cÂ <br>
102039Â Â badÂ permissionsÂ forÂ mappedÂ regionÂ atÂ addressÂ 0xB7C73680<br>
101881Â Â weirdÂ assertionÂ problem<br>
101543Â Â SupportÂ fadvise64Â syscalls<br>
75247Â Â Â x86_64/amd64Â supportÂ (theÂ biggestÂ "bug"Â weÂ haveÂ everÂ fixed)<br>
<br>
(3.0RC1:Â 27Â JulyÂ Â Â 05,Â vexÂ r1303,Â valgrindÂ r4283).<br>
(3.0.0:Â Â Â 3Â AugustÂ 05,Â vexÂ r1313,Â valgrindÂ r4316).<br>
<br>
<br>
<br>
StableÂ releaseÂ 2.4.1Â (1Â AugustÂ 2005)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
(TheÂ notesÂ forÂ thisÂ releaseÂ haveÂ beenÂ lost.Â Â Sorry!Â Â ItÂ wouldÂ have<br>
containedÂ variousÂ bugÂ fixesÂ butÂ noÂ newÂ features.)<br>
<br>
<br>
<br>
StableÂ releaseÂ 2.4.0Â (MarchÂ 2005)Â --Â CHANGESÂ RELATIVEÂ TOÂ 2.2.0<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
2.4.0Â bringsÂ manyÂ significantÂ changesÂ andÂ bugÂ fixes.Â Â TheÂ most<br>
significantÂ user-visibleÂ changeÂ isÂ thatÂ weÂ noÂ longerÂ supplyÂ ourÂ own<br>
pthreadÂ implementation.Â Â Instead,Â ValgrindÂ isÂ finallyÂ capableÂ of<br>
runningÂ theÂ nativeÂ threadÂ library,Â eitherÂ LinuxThreadsÂ orÂ NPTL.<br>
<br>
ThisÂ meansÂ ourÂ libpthreadÂ hasÂ gone,Â alongÂ withÂ theÂ bugsÂ associated<br>
withÂ it.Â Â ValgrindÂ nowÂ supportsÂ theÂ kernel'sÂ threadingÂ syscalls,Â and<br>
letsÂ youÂ useÂ yourÂ standardÂ systemÂ libpthread.Â Â AsÂ aÂ result:<br>
<br>
*Â ThereÂ areÂ manyÂ fewerÂ systemÂ dependenciesÂ andÂ strangeÂ library-related<br>
Â Â bugs.Â Â ThereÂ isÂ aÂ smallÂ performanceÂ improvement,Â andÂ aÂ large<br>
Â Â stabilityÂ improvement.<br>
<br>
*Â OnÂ theÂ downside,Â ValgrindÂ canÂ noÂ longerÂ reportÂ misusesÂ ofÂ theÂ POSIX<br>
Â Â PThreadsÂ API.Â Â ItÂ alsoÂ meansÂ thatÂ HelgrindÂ currentlyÂ doesÂ notÂ work.<br>
Â Â WeÂ hopeÂ toÂ fixÂ theseÂ problemsÂ inÂ aÂ futureÂ release.<br>
<br>
NoteÂ thatÂ runningÂ theÂ nativeÂ threadÂ librariesÂ doesÂ notÂ meanÂ Valgrind<br>
isÂ ableÂ toÂ provideÂ genuineÂ concurrentÂ executionÂ onÂ SMPs.Â Â WeÂ still<br>
imposeÂ theÂ restrictionÂ thatÂ onlyÂ oneÂ threadÂ isÂ runningÂ atÂ anyÂ given<br>
time.<br>
<br>
ThereÂ areÂ manyÂ otherÂ significantÂ changesÂ too:<br>
<br>
*Â MemcheckÂ isÂ (onceÂ again)Â theÂ defaultÂ tool.<br>
<br>
*Â TheÂ defaultÂ stackÂ backtraceÂ isÂ nowÂ 12Â callÂ frames,Â ratherÂ thanÂ 4.<br>
<br>
*Â SuppressionsÂ canÂ haveÂ upÂ toÂ 25Â callÂ frameÂ matches,Â ratherÂ thanÂ 4.<br>
<br>
*Â MemcheckÂ andÂ AddrcheckÂ useÂ lessÂ memory.Â Â UnderÂ someÂ circumstances,<br>
Â Â theyÂ noÂ longerÂ allocateÂ shadowÂ memoryÂ ifÂ thereÂ areÂ largeÂ regionsÂ of<br>
Â Â memoryÂ withÂ theÂ sameÂ A/VÂ statesÂ -Â suchÂ asÂ anÂ mmapedÂ file.<br>
<br>
*Â TheÂ memory-leakÂ detectorÂ inÂ MemcheckÂ andÂ AddrcheckÂ hasÂ been<br>
Â Â improved.Â Â ItÂ nowÂ reportsÂ moreÂ typesÂ ofÂ memoryÂ leak,Â including<br>
Â Â leakedÂ cycles.Â Â WhenÂ reportingÂ leakedÂ memory,Â itÂ canÂ distinguish<br>
Â Â betweenÂ directlyÂ leakedÂ memoryÂ (memoryÂ withÂ noÂ references),Â and<br>
Â Â indirectlyÂ leakedÂ memoryÂ (memoryÂ onlyÂ referredÂ toÂ byÂ otherÂ leaked<br>
Â Â memory).<br>
<br>
*Â Memcheck'sÂ confusionÂ overÂ theÂ effectÂ ofÂ mprotect()Â hasÂ beenÂ fixed:<br>
Â Â previouslyÂ mprotectÂ couldÂ erroneouslyÂ markÂ undefinedÂ dataÂ as<br>
Â Â defined.<br>
<br>
*Â SignalÂ handlingÂ isÂ muchÂ improvedÂ andÂ shouldÂ beÂ veryÂ closeÂ toÂ what<br>
Â Â youÂ getÂ whenÂ runningÂ natively.Â Â <br>
<br>
Â Â OneÂ resultÂ ofÂ thisÂ isÂ thatÂ ValgrindÂ observesÂ changesÂ toÂ sigcontexts<br>
Â Â passedÂ toÂ signalÂ handlers.Â Â SuchÂ modificationsÂ willÂ takeÂ effectÂ when<br>
Â Â theÂ signalÂ returns.Â Â YouÂ willÂ needÂ toÂ runÂ withÂ --single-step=yesÂ to<br>
Â Â makeÂ thisÂ useful.<br>
<br>
*Â ValgrindÂ isÂ builtÂ inÂ PositionÂ IndependentÂ ExecutableÂ (PIE)Â formatÂ if<br>
Â Â yourÂ toolchainÂ supportsÂ it.Â Â ThisÂ allowsÂ itÂ toÂ takeÂ advantageÂ ofÂ all<br>
Â Â theÂ availableÂ addressÂ spaceÂ onÂ systemsÂ withÂ 4GbyteÂ userÂ address<br>
Â Â spaces.<br>
<br>
*Â ValgrindÂ canÂ nowÂ runÂ itselfÂ (requiresÂ PIEÂ support).<br>
<br>
*Â SyscallÂ argumentsÂ areÂ nowÂ checkedÂ forÂ validity.Â Â PreviouslyÂ all<br>
Â Â memoryÂ usedÂ byÂ syscallsÂ wasÂ checked,Â butÂ nowÂ theÂ actualÂ values<br>
Â Â passedÂ areÂ alsoÂ checked.<br>
<br>
*Â SyscallÂ wrappersÂ areÂ moreÂ robustÂ againstÂ badÂ addressesÂ beingÂ passed<br>
Â Â toÂ syscalls:Â theyÂ willÂ failÂ withÂ EFAULTÂ ratherÂ thanÂ killingÂ Valgrind<br>
Â Â withÂ SIGSEGV.<br>
<br>
*Â BecauseÂ clone()Â isÂ directlyÂ supported,Â someÂ non-pthreadÂ usesÂ ofÂ it<br>
Â Â willÂ work.Â Â PartialÂ sharingÂ (whereÂ someÂ resourcesÂ areÂ shared,Â and<br>
Â Â someÂ areÂ not)Â isÂ notÂ supported.<br>
<br>
*Â open()Â andÂ readlink()Â onÂ /proc/self/exeÂ areÂ supported.<br>
<br>
BUGSÂ FIXED:<br>
<br>
88520Â Â Â pipe+fork+dup2Â killsÂ theÂ mainÂ program<br>
88604Â 	ValgrindÂ AbortsÂ whenÂ usingÂ $VALGRIND_OPTSÂ andÂ userÂ progra...<br>
88614Â 	valgrind:Â vg_libpthread.c:2323Â (read):Â AssertionÂ `read_pt...<br>
88703Â 	StabsÂ parserÂ failsÂ toÂ handleÂ ";"<br>
88886Â 	ioctlÂ wrappersÂ forÂ TIOCMBISÂ andÂ TIOCMBIC<br>
89032Â 	valgrindÂ pthread_cond_timedwaitÂ fails<br>
89106Â 	theÂ 'impossible'Â happened<br>
89139Â 	MissingÂ sched_setaffinityÂ &amp;Â sched_getaffinity<br>
89198Â 	valgrindÂ lacksÂ supportÂ forÂ SIOCSPGRPÂ andÂ SIOCGPGRP<br>
89263Â 	MissingÂ ioctlÂ translationsÂ forÂ scsi-genericÂ andÂ CDÂ playing<br>
89440Â 	tests/deadlock.cÂ lineÂ endings<br>
89481Â 	`impossible'Â happened:Â EXECÂ FAILED<br>
89663Â 	valgrindÂ 2.2.0Â crashÂ onÂ RedhatÂ 7.2<br>
89792Â 	ReportÂ pthread_mutex_lock()Â deadlocksÂ insteadÂ ofÂ returnin...<br>
90111Â 	statvfs64Â givesÂ invalidÂ error/warning<br>
90128Â 	crash+memoryÂ faultÂ withÂ stabsÂ generatedÂ byÂ gnatÂ forÂ aÂ run...<br>
90778Â 	VALGRIND_CHECK_DEFINED()Â notÂ asÂ documentedÂ inÂ memcheck.h<br>
90834Â 	cachegrindÂ crashesÂ atÂ endÂ ofÂ programÂ withoutÂ reportingÂ re...<br>
91028Â 	valgrind:Â vg_memory.c:229Â (vgPlain_unmap_range):Â Assertio...<br>
91162Â 	valgrindÂ crashÂ whileÂ debuggingÂ drivelÂ 1.2.1<br>
91199Â 	UnimplementedÂ function<br>
91325Â 	SignalÂ routingÂ doesÂ notÂ propagateÂ theÂ siginfoÂ structure<br>
91599Â 	AssertionÂ `cvÂ ==Â ((voidÂ *)0)'<br>
91604Â 	rw_lookupÂ clearsÂ origÂ andÂ sendsÂ theÂ NULLÂ valueÂ toÂ rw_new<br>
91821Â 	SmallÂ problemsÂ buildingÂ valgrindÂ withÂ $top_builddirÂ neÂ $t...<br>
91844Â 	signalÂ 11Â (SIGSEGV)Â atÂ get_tcbÂ (libpthread.c:86)Â inÂ corec...<br>
92264Â 	UNIMPLEMENTEDÂ FUNCTION:Â pthread_condattr_setpshared<br>
92331Â 	per-targetÂ flagsÂ necessitateÂ AM_PROG_CC_C_O<br>
92420Â 	valgrindÂ doesn'tÂ compileÂ withÂ linuxÂ 2.6.8.1/9<br>
92513Â 	ValgrindÂ 2.2.0Â generatesÂ someÂ warningÂ messages<br>
92528Â 	vg_symtab2.c:170Â (addLoc):Â AssertionÂ `loc-&gt;sizeÂ &gt;Â 0'Â failed.<br>
93096Â 	unhandledÂ ioctlÂ 0x4B3AÂ andÂ 0x5601<br>
93117Â 	ToolÂ andÂ coreÂ interfaceÂ versionsÂ doÂ notÂ match<br>
93128Â 	Can'tÂ runÂ valgrindÂ --tool=memcheckÂ becauseÂ ofÂ unimplement...<br>
93174Â 	ValgrindÂ canÂ crashÂ ifÂ passedÂ badÂ argsÂ toÂ certainÂ syscalls<br>
93309Â 	StackÂ frameÂ inÂ newÂ threadÂ isÂ badlyÂ aligned<br>
93328Â 	WrongÂ typesÂ usedÂ withÂ sys_sigprocmask()<br>
93763Â 	/usr/include/asm/msr.hÂ isÂ missing<br>
93776Â 	valgrind:Â vg_memory.c:508Â (vgPlain_find_map_space):Â Asser...<br>
93810Â 	fcntl()Â argumentÂ checkingÂ aÂ bitÂ tooÂ strict<br>
94378Â 	AssertionÂ `tst-&gt;sigqueue_headÂ !=Â tst-&gt;sigqueue_tail'Â failed.<br>
94429Â 	valgrindÂ 2.2.0Â segfaultÂ withÂ mmap64Â inÂ glibcÂ 2.3.3<br>
94645Â 	ImpossibleÂ happened:Â PINSRWÂ mem<br>
94953Â 	valgrind:Â theÂ `impossible'Â happened:Â SIGSEGV<br>
95667Â 	ValgrindÂ doesÂ notÂ workÂ withÂ anyÂ KDEÂ app<br>
96243Â 	AssertionÂ 'res==0'Â failed<br>
96252Â 	stage2Â loaderÂ ofÂ valgrindÂ failsÂ toÂ allocateÂ memory<br>
96520Â 	AllÂ programsÂ crashingÂ atÂ _dl_startÂ (inÂ /lib/ld-2.3.3.so)Â ...<br>
96660Â 	ioctlÂ CDROMREADTOCENTRYÂ causesÂ bogusÂ warnings<br>
96747Â 	AfterÂ loopingÂ inÂ aÂ segfaultÂ handler,Â theÂ impossibleÂ happens<br>
96923Â 	ZeroÂ sizedÂ arraysÂ crashÂ valgrindÂ traceÂ backÂ withÂ SIGFPE<br>
96948Â 	valgrindÂ stopsÂ withÂ assertionÂ failureÂ regardingÂ mmap2<br>
96966Â 	valgrindÂ failsÂ whenÂ applicationÂ opensÂ moreÂ thanÂ 16Â sockets<br>
97398Â 	valgrind:Â vg_libpthread.c:2667Â AssertionÂ failed<br>
97407Â 	valgrind:Â vg_mylibc.c:1226Â (vgPlain_safe_fd):Â AssertionÂ `...<br>
97427Â 	"Warning:Â invalidÂ fileÂ descriptorÂ -1Â inÂ syscallÂ close()"Â ...<br>
97785Â 	missingÂ backtrace<br>
97792Â 	buildÂ inÂ objÂ dirÂ failsÂ -Â autoconfÂ /Â makefileÂ cleanup<br>
97880Â 	pthread_mutex_lockÂ failsÂ fromÂ sharedÂ libraryÂ (specialÂ ker...<br>
97975Â 	programÂ abortsÂ withoutÂ angÂ VGÂ messages<br>
98129Â 	FailedÂ whenÂ openÂ andÂ closeÂ fileÂ 230000Â timesÂ usingÂ stdio<br>
98175Â 	CrashesÂ whenÂ usingÂ valgrind-2.2.0Â withÂ aÂ programÂ usingÂ al...<br>
98288Â 	MassifÂ broken<br>
98303Â 	UNIMPLEMENTEDÂ FUNCTIONÂ pthread_condattr_setpshared<br>
98630Â 	failed--compilationÂ missingÂ warnings.pm,Â failsÂ toÂ makeÂ he...<br>
98756Â 	CannotÂ valgrindÂ signal-heavyÂ kdriveÂ XÂ server<br>
98966Â 	valgrindingÂ theÂ JVMÂ failsÂ withÂ aÂ sanityÂ checkÂ assertion<br>
99035Â 	ValgrindÂ crashesÂ whileÂ profiling<br>
99142Â 	loopsÂ withÂ messageÂ "SignalÂ 11Â beingÂ droppedÂ fromÂ threadÂ 0...<br>
99195Â 	threadedÂ appsÂ crashÂ onÂ threadÂ startÂ (usingÂ QThread::start...<br>
99348Â 	AssertionÂ `vgPlain_lseek(core_fd,Â 0,Â 1)Â ==Â phdrs[i].p_off...<br>
99568Â 	FalseÂ negativeÂ dueÂ toÂ mishandlingÂ ofÂ mprotect<br>
99738Â 	valgrindÂ memcheckÂ crashesÂ onÂ programÂ thatÂ usesÂ sigitimer<br>
99923Â 	0-sizedÂ allocationsÂ areÂ reportedÂ asÂ leaks<br>
99949Â 	programÂ segÂ faultsÂ afterÂ exit()<br>
100036Â 	"newSuperblock'sÂ requestÂ forÂ 1048576Â bytesÂ failed"<br>
100116Â 	valgrind:Â (pthread_cond_init):Â AssertionÂ `sizeof(*Â cond)Â ...<br>
100486Â 	memcheckÂ reportsÂ "valgrind:Â theÂ `impossible'Â happened:Â V...<br>
100833Â 	secondÂ callÂ toÂ "mremap"Â failsÂ withÂ EINVAL<br>
101156Â 	(vgPlain_find_map_space):Â AssertionÂ `(addrÂ &amp;Â ((1Â &lt;&lt;Â 12)-1...<br>
101173Â 	AssertionÂ `recDepthÂ &gt;=Â 0Â &amp;&amp;Â recDepthÂ &lt;Â 500'Â failed<br>
101291Â 	creatingÂ threadsÂ inÂ aÂ forkedÂ processÂ fails<br>
101313Â 	valgrindÂ causesÂ differentÂ behaviorÂ whenÂ resizingÂ aÂ window...<br>
101423Â 	segfaultÂ forÂ c++Â arrayÂ ofÂ floats<br>
101562Â 	valgrindÂ massifÂ diesÂ onÂ SIGINTÂ evenÂ withÂ signalÂ handlerÂ r...<br>
<br>
<br>
StableÂ releaseÂ 2.2.0Â (31Â AugustÂ 2004)Â --Â CHANGESÂ RELATIVEÂ TOÂ 2.0.0<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
2.2.0Â bringsÂ nineÂ monthsÂ worthÂ ofÂ improvementsÂ andÂ bugÂ fixes.Â Â We<br>
believeÂ itÂ toÂ beÂ aÂ worthyÂ successorÂ toÂ 2.0.0.Â Â ThereÂ areÂ literally<br>
hundredsÂ ofÂ bugÂ fixesÂ andÂ minorÂ improvements.Â Â ThereÂ areÂ alsoÂ some<br>
fairlyÂ majorÂ user-visibleÂ changes:<br>
<br>
*Â AÂ completeÂ overhaulÂ ofÂ handlingÂ ofÂ systemÂ callsÂ andÂ signals,Â andÂ <br>
Â Â theirÂ interactionÂ withÂ threads.Â Â InÂ general,Â theÂ accuracyÂ ofÂ theÂ <br>
Â Â systemÂ call,Â threadÂ andÂ signalÂ simulationsÂ isÂ muchÂ improved:<br>
<br>
Â Â -Â BlockingÂ systemÂ callsÂ behaveÂ exactlyÂ asÂ theyÂ doÂ whenÂ running<br>
Â Â Â Â nativelyÂ (notÂ onÂ valgrind).Â Â ThatÂ is,Â ifÂ aÂ syscallÂ blocksÂ onlyÂ the<br>
Â Â Â Â callingÂ threadÂ whenÂ runningÂ natively,Â thanÂ itÂ behavesÂ theÂ sameÂ on<br>
Â Â Â Â valgrind.Â Â NoÂ moreÂ mysteriousÂ hangsÂ becauseÂ VÂ doesn'tÂ knowÂ thatÂ some<br>
Â Â Â Â syscallÂ orÂ other,Â shouldÂ blockÂ onlyÂ theÂ callingÂ thread.<br>
<br>
Â Â -Â InterruptedÂ syscallsÂ shouldÂ nowÂ giveÂ moreÂ faithfulÂ results.<br>
<br>
Â Â -Â SignalÂ contextsÂ inÂ signalÂ handlersÂ areÂ supported.<br>
<br>
*Â ImprovementsÂ toÂ NPTLÂ supportÂ toÂ theÂ extentÂ thatÂ VÂ nowÂ worksÂ <br>
Â Â properlyÂ onÂ NPTL-onlyÂ setups.<br>
<br>
*Â GreaterÂ isolationÂ betweenÂ ValgrindÂ andÂ theÂ programÂ beingÂ run,Â so<br>
Â Â theÂ programÂ isÂ lessÂ likelyÂ toÂ inadvertentlyÂ killÂ ValgrindÂ by<br>
Â Â doingÂ wildÂ writes.<br>
<br>
*Â Massif:Â aÂ newÂ spaceÂ profilingÂ tool.Â Â TryÂ it!Â Â It'sÂ cool,Â andÂ it'll<br>
Â Â tellÂ youÂ inÂ detailÂ whereÂ andÂ whenÂ yourÂ C/C++Â codeÂ isÂ allocatingÂ heap.<br>
Â Â DrawsÂ prettyÂ .psÂ picturesÂ ofÂ memoryÂ useÂ againstÂ time.Â Â AÂ potentially<br>
Â Â powerfulÂ toolÂ forÂ makingÂ senseÂ ofÂ yourÂ program'sÂ spaceÂ use.<br>
<br>
*Â FileÂ descriptorÂ leakageÂ checks.Â Â WhenÂ enabled,Â ValgrindÂ willÂ printÂ out<br>
Â Â aÂ listÂ ofÂ openÂ fileÂ descriptorsÂ onÂ exit.<br>
<br>
*Â ImprovedÂ SSE2/SSE3Â support.<br>
<br>
*Â Time-stampedÂ output;Â useÂ --time-stamp=yes<br>
<br>
<br>
<br>
StableÂ releaseÂ 2.2.0Â (31Â AugustÂ 2004)Â --Â CHANGESÂ RELATIVEÂ TOÂ 2.1.2<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
2.2.0Â isÂ notÂ muchÂ differentÂ fromÂ 2.1.2,Â releasedÂ sevenÂ weeksÂ ago.<br>
AÂ numberÂ ofÂ bugsÂ haveÂ beenÂ fixed,Â mostÂ notablyÂ #85658,Â whichÂ gave<br>
problemsÂ forÂ quiteÂ aÂ fewÂ people.Â Â ThereÂ haveÂ beenÂ manyÂ internal<br>
cleanups,Â butÂ thoseÂ areÂ notÂ userÂ visible.<br>
<br>
TheÂ followingÂ bugsÂ haveÂ beenÂ fixedÂ sinceÂ 2.1.2:<br>
<br>
85658Â Â Â AssertÂ inÂ coregrind/vg_libpthread.c:2326Â (open64)Â !=<br>
Â Â Â Â Â Â Â Â (void*)0Â failed<br>
Â Â Â Â Â Â Â Â ThisÂ bugÂ wasÂ reportedÂ multipleÂ times,Â andÂ soÂ theÂ following<br>
Â Â Â Â Â Â Â Â duplicatesÂ ofÂ itÂ areÂ alsoÂ fixed:Â 87620,Â 85796,Â 85935,Â 86065,Â <br>
Â Â Â Â Â Â Â Â 86919,Â 86988,Â 87917,Â 88156<br>
<br>
80716Â Â Â SemaphoreÂ mappingÂ bugÂ causedÂ byÂ unmapÂ (sem_destroy)<br>
Â Â Â Â Â Â Â Â (WasÂ fixedÂ priorÂ toÂ 2.1.2)<br>
<br>
86987Â Â Â semctlÂ andÂ shmctlÂ syscallsÂ familyÂ isÂ notÂ handledÂ properly<br>
<br>
86696Â Â Â valgrindÂ 2.1.2Â +Â RHÂ AS2.1Â +Â librt<br>
<br>
86730Â Â Â valgrindÂ locksÂ upÂ atÂ endÂ ofÂ runÂ withÂ assertionÂ failureÂ <br>
Â Â Â Â Â Â Â Â inÂ __pthread_unwind<br>
<br>
86641Â Â Â memcheckÂ doesn'tÂ workÂ withÂ MesaÂ OpenGL/ATIÂ onÂ SuseÂ 9.1<br>
Â Â Â Â Â Â Â Â (alsoÂ fixesÂ 74298,Â aÂ duplicateÂ ofÂ this)<br>
<br>
85947Â Â Â MMX/SSEÂ unhandledÂ instructionÂ 'sfence'<br>
<br>
84978Â Â Â WrongÂ errorÂ "ConditionalÂ jumpÂ orÂ moveÂ dependsÂ on<br>
Â Â Â Â Â Â Â Â uninitialisedÂ value"Â resultingÂ fromÂ "sbblÂ %reg,Â %reg"<br>
<br>
86254Â Â Â ssort()Â failsÂ whenÂ signedÂ intÂ returnÂ typeÂ fromÂ comparisonÂ isÂ <br>
Â Â Â Â Â Â Â Â tooÂ smallÂ toÂ handleÂ resultÂ ofÂ unsignedÂ intÂ subtraction<br>
<br>
87089Â Â Â memalign(Â 4,Â xxx)Â makesÂ valgrindÂ assert<br>
<br>
86407Â Â Â AddÂ supportÂ forÂ low-levelÂ parallelÂ portÂ driverÂ ioctls.<br>
<br>
70587Â Â Â AddÂ timestampsÂ toÂ ValgrindÂ output?Â (wishlist)<br>
<br>
84937Â Â Â vg_libpthread.c:2505Â (se_remap):Â AssertionÂ `resÂ ==Â 0'<br>
Â Â Â Â Â Â Â Â (fixedÂ priorÂ toÂ 2.1.2)<br>
<br>
86317Â Â Â cannotÂ loadÂ libSDL-1.2.so.0Â usingÂ valgrind<br>
<br>
86989Â Â Â memcpyÂ fromÂ mac_replace_strmem.cÂ complainsÂ about<br>
Â Â Â Â Â Â Â Â uninitializedÂ pointersÂ passedÂ whenÂ lengthÂ toÂ copyÂ isÂ zero<br>
<br>
85811Â Â Â gnuÂ pascalÂ symbolÂ causesÂ segmentationÂ fault;Â okÂ inÂ 2.0.0<br>
<br>
79138Â Â Â writingÂ toÂ sbrk()'dÂ memoryÂ causesÂ segfault<br>
<br>
77369Â Â Â schedÂ deadlockÂ whileÂ signalÂ receivedÂ duringÂ pthread_join<br>
Â Â Â Â Â Â Â Â andÂ theÂ joinedÂ threadÂ exited<br>
<br>
88115Â Â Â InÂ signalÂ handlerÂ forÂ SIGFPE,Â Â siginfo-&gt;si_addrÂ isÂ wrongÂ <br>
Â Â Â Â Â Â Â Â underÂ Valgrind<br>
<br>
78765Â Â Â MassifÂ crashesÂ onÂ appÂ exitÂ ifÂ FPÂ exceptionsÂ areÂ enabled<br>
<br>
AdditionallyÂ thereÂ areÂ theÂ followingÂ changes,Â whichÂ areÂ notÂ <br>
connectedÂ toÂ anyÂ bugÂ reportÂ numbers,Â AFAICS:<br>
<br>
*Â FixÂ scaryÂ bugÂ causingÂ mis-identificationÂ ofÂ SSEÂ storesÂ vs<br>
Â Â loadsÂ andÂ soÂ causingÂ memcheckÂ toÂ sometimesÂ giveÂ nonsenseÂ results<br>
Â Â onÂ SSEÂ code.<br>
<br>
*Â AddÂ supportÂ forÂ theÂ POSIXÂ messageÂ queueÂ systemÂ calls.<br>
<br>
*Â FixÂ toÂ allowÂ 32-bitÂ ValgrindÂ toÂ runÂ onÂ AMD64Â boxes.Â Â Note:Â thisÂ does<br>
Â Â NOTÂ allowÂ ValgrindÂ toÂ workÂ withÂ 64-bitÂ executablesÂ -Â onlyÂ withÂ 32-bit<br>
Â Â executablesÂ onÂ anÂ AMD64Â box.<br>
<br>
*Â AtÂ configureÂ time,Â onlyÂ checkÂ whetherÂ linux/mii.hÂ canÂ beÂ processedÂ <br>
Â Â soÂ thatÂ weÂ don'tÂ generateÂ uglyÂ warningsÂ byÂ tryingÂ toÂ compileÂ it.<br>
<br>
*Â AddÂ supportÂ forÂ POSIXÂ clocksÂ andÂ timers.<br>
<br>
<br>
<br>
DeveloperÂ (cvsÂ head)Â releaseÂ 2.1.2Â (18Â JulyÂ 2004)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
2.1.2Â containsÂ fourÂ monthsÂ worthÂ ofÂ bugÂ fixesÂ andÂ refinements.<br>
AlthoughÂ officiallyÂ aÂ developerÂ release,Â weÂ believeÂ itÂ toÂ beÂ stable<br>
enoughÂ forÂ widespreadÂ day-to-dayÂ use.Â Â 2.1.2Â isÂ prettyÂ good,Â soÂ tryÂ it<br>
first,Â althoughÂ thereÂ isÂ aÂ chanceÂ itÂ won'tÂ work.Â Â IfÂ soÂ thenÂ tryÂ 2.0.0<br>
andÂ tellÂ usÂ whatÂ wentÂ wrong."Â Â 2.1.2Â fixesÂ aÂ lotÂ ofÂ problemsÂ present<br>
inÂ 2.0.0Â andÂ isÂ generallyÂ aÂ muchÂ betterÂ product.<br>
<br>
RelativeÂ toÂ 2.1.1,Â aÂ largeÂ numberÂ ofÂ minorÂ problemsÂ withÂ 2.1.1Â have<br>
beenÂ fixed,Â andÂ soÂ ifÂ youÂ useÂ 2.1.1Â youÂ shouldÂ tryÂ 2.1.2.Â Â UsersÂ of<br>
theÂ lastÂ stableÂ release,Â 2.0.0,Â mightÂ alsoÂ wantÂ toÂ tryÂ thisÂ release.<br>
<br>
TheÂ followingÂ bugs,Â andÂ probablyÂ manyÂ more,Â haveÂ beenÂ fixed.Â Â These<br>
areÂ listedÂ atÂ http://bugs.kde.org.Â Â ReportingÂ aÂ bugÂ forÂ valgrindÂ in<br>
theÂ http://bugs.kde.orgÂ isÂ muchÂ moreÂ likelyÂ toÂ getÂ youÂ aÂ fixÂ than<br>
mailingÂ developersÂ directly,Â soÂ pleaseÂ continueÂ toÂ keepÂ sendingÂ bugs<br>
there.<br>
<br>
76869Â Â Â CrashesÂ whenÂ runningÂ anyÂ toolÂ underÂ FedoraÂ CoreÂ 2Â test1<br>
Â Â Â Â Â Â Â Â ThisÂ fixesÂ theÂ problemÂ withÂ returningÂ fromÂ aÂ signalÂ handlerÂ <br>
Â Â Â Â Â Â Â Â whenÂ VDSOsÂ areÂ turnedÂ offÂ inÂ FC2.<br>
<br>
69508Â Â Â javaÂ 1.4.2Â clientÂ failsÂ withÂ erroneousÂ "stackÂ sizeÂ tooÂ small".<br>
Â Â Â Â Â Â Â Â ThisÂ fixÂ makesÂ moreÂ ofÂ theÂ pthreadÂ stackÂ attributeÂ relatedÂ <br>
Â Â Â Â Â Â Â Â functionsÂ workÂ properly.Â Â JavaÂ stillÂ doesn'tÂ workÂ though.<br>
<br>
71906Â Â Â mallocÂ alignmentÂ shouldÂ beÂ 8,Â notÂ 4<br>
Â Â Â Â Â Â Â Â AllÂ memoryÂ returnedÂ byÂ malloc/newÂ etcÂ isÂ nowÂ atÂ least<br>
Â Â Â Â Â Â Â Â 8-byteÂ aligned.<br>
<br>
81970Â Â Â vg_alloc_ThreadState:Â noÂ freeÂ slotsÂ available<br>
Â Â Â Â Â Â Â Â (closedÂ becauseÂ theÂ workaroundÂ isÂ simple:Â increase<br>
Â Â Â Â Â Â Â Â Â VG_N_THREADS,Â rebuildÂ andÂ tryÂ again.)<br>
<br>
78514Â Â Â ConditionalÂ jumpÂ orÂ moveÂ dependsÂ onÂ uninitializedÂ value(s)<br>
Â Â Â Â Â Â Â Â (aÂ slightÂ mishandingÂ ofÂ FPÂ codeÂ inÂ memcheck)<br>
<br>
77952Â Â Â pThreadÂ SupportÂ (crash)Â (dueÂ toÂ initialisation-orderingÂ probs)<br>
Â Â Â Â Â Â Â Â (alsoÂ 85118)<br>
<br>
80942Â Â Â AddrcheckÂ wasn'tÂ doingÂ overlapÂ checkingÂ asÂ itÂ should.<br>
78048Â Â Â returnÂ NULLÂ onÂ malloc/newÂ etcÂ failure,Â insteadÂ ofÂ asserting<br>
73655Â Â Â operatorÂ new()Â overrideÂ inÂ userÂ .soÂ filesÂ oftenÂ doesn'tÂ getÂ pickedÂ up<br>
83060Â Â Â ValgrindÂ doesÂ notÂ handleÂ nativeÂ kernelÂ AIO<br>
69872Â Â Â CreateÂ properÂ coredumpsÂ afterÂ fatalÂ signals<br>
82026Â Â Â failureÂ withÂ newÂ glibcÂ versions:Â __libc_*Â functionsÂ areÂ notÂ exported<br>
70344Â Â Â UNIMPLEMENTEDÂ FUNCTION:Â tcdrainÂ <br>
81297Â Â Â CancellationÂ ofÂ pthread_cond_waitÂ doesÂ notÂ requireÂ mutex<br>
82872Â Â Â UsingÂ debugÂ infoÂ fromÂ additionalÂ packagesÂ (wishlist)<br>
83025Â Â Â SupportÂ forÂ ioctlsÂ FIGETBSZÂ andÂ FIBMAP<br>
83340Â Â Â SupportÂ forÂ ioctlÂ HDIO_GET_IDENTITY<br>
79714Â Â Â SupportÂ forÂ theÂ semtimedopÂ systemÂ call.<br>
77022Â Â Â SupportÂ forÂ ioctlsÂ FBIOGET_VSCREENINFOÂ andÂ FBIOGET_FSCREENINFO<br>
82098Â Â Â hp2psÂ ansificationÂ (wishlist)<br>
83573Â Â Â ValgrindÂ SIGSEGVÂ onÂ execve<br>
82999Â Â Â showÂ whichÂ cmdlineÂ optionÂ wasÂ erroneousÂ (wishlist)<br>
83040Â Â Â makeÂ valgrindÂ VPATHÂ andÂ distcheck-cleanÂ (wishlist)<br>
83998Â Â Â AssertionÂ `newfdÂ &gt;Â vgPlain_max_fd'Â failedÂ (seeÂ below)<br>
82722Â Â Â UncheckedÂ mmapÂ inÂ as_padÂ leadsÂ toÂ mysteriousÂ failuresÂ later<br>
78958Â Â Â memcheckÂ segÂ faultsÂ whileÂ runningÂ MozillaÂ <br>
85416Â Â Â ArgumentsÂ withÂ colonÂ (e.g.Â --logsocket)Â ignored<br>
<br>
<br>
AdditionallyÂ thereÂ areÂ theÂ followingÂ changes,Â whichÂ areÂ notÂ <br>
connectedÂ toÂ anyÂ bugÂ reportÂ numbers,Â AFAICS:<br>
<br>
*Â RearrangedÂ addressÂ spaceÂ layoutÂ relativeÂ toÂ 2.1.1,Â soÂ that<br>
Â Â Valgrind/toolsÂ willÂ runÂ outÂ ofÂ memoryÂ laterÂ thanÂ currentlyÂ inÂ many<br>
Â Â circumstances.Â Â ThisÂ isÂ goodÂ newsÂ esp.Â forÂ Calltree.Â Â ItÂ should<br>
Â Â beÂ possibleÂ forÂ clientÂ programsÂ toÂ allocateÂ overÂ 800MBÂ of<br>
Â Â memoryÂ whenÂ usingÂ memcheckÂ now.<br>
<br>
*Â ImprovedÂ checkingÂ whenÂ layingÂ outÂ memory.Â Â ShouldÂ hopefullyÂ avoid<br>
Â Â theÂ randomÂ segmentationÂ faultsÂ thatÂ 2.1.1Â sometimesÂ caused.<br>
<br>
*Â SupportÂ forÂ FedoraÂ CoreÂ 2Â andÂ SuSEÂ 9.1.Â Â ImprovementsÂ toÂ NPTL<br>
Â Â supportÂ toÂ theÂ extentÂ thatÂ VÂ nowÂ worksÂ properlyÂ onÂ NPTL-onlyÂ setups.<br>
<br>
*Â RenamedÂ theÂ followingÂ options:<br>
Â Â --logfile-fdÂ Â --&gt;Â Â --log-fd<br>
Â Â --logfileÂ Â Â Â Â --&gt;Â Â --log-file<br>
Â Â --logsocketÂ Â Â --&gt;Â Â --log-socket<br>
Â Â toÂ beÂ consistentÂ withÂ eachÂ otherÂ andÂ otherÂ optionsÂ (esp.Â --input-fd).<br>
<br>
*Â AddÂ supportÂ forÂ SIOCGMIIPHY,Â SIOCGMIIREGÂ andÂ SIOCSMIIREGÂ ioctlsÂ and<br>
Â Â improveÂ theÂ checkingÂ ofÂ otherÂ interfaceÂ relatedÂ ioctls.<br>
<br>
*Â FixÂ buildingÂ withÂ gcc-3.4.1.<br>
<br>
*Â RemoveÂ limitÂ onÂ numberÂ ofÂ semaphoresÂ supported.<br>
<br>
*Â AddÂ supportÂ forÂ syscalls:Â set_tid_addressÂ (258),Â acctÂ (51).<br>
<br>
*Â SupportÂ instructionÂ "repneÂ movs"Â --Â notÂ officialÂ butÂ seemsÂ toÂ occur.<br>
<br>
*Â ImplementÂ anÂ emulatedÂ softÂ limitÂ forÂ fileÂ descriptorsÂ inÂ additionÂ to<br>
Â Â theÂ currentÂ reservedÂ area,Â whichÂ effectivelyÂ actsÂ asÂ aÂ hardÂ limit.Â The<br>
Â Â setrlimitÂ systemÂ callÂ nowÂ simplyÂ updatesÂ theÂ emulatedÂ limitsÂ asÂ best<br>
Â Â asÂ possibleÂ -Â theÂ hardÂ limitÂ isÂ notÂ allowedÂ toÂ moveÂ atÂ allÂ andÂ just<br>
Â Â returnsÂ EPERMÂ ifÂ youÂ tryÂ andÂ changeÂ it.Â Â ThisÂ shouldÂ stopÂ reductions<br>
Â Â inÂ theÂ softÂ limitÂ causingÂ assertionsÂ whenÂ valgrindÂ triesÂ toÂ allocate<br>
Â Â descriptorsÂ fromÂ theÂ reservedÂ area.<br>
Â Â (ThisÂ actuallyÂ cameÂ fromÂ bugÂ #83998).<br>
<br>
*Â MajorÂ overhaulÂ ofÂ CachegrindÂ implementation.Â Â FirstÂ user-visibleÂ change<br>
Â Â isÂ thatÂ cachegrind.outÂ filesÂ areÂ nowÂ typicallyÂ 90%Â smallerÂ thanÂ they<br>
Â Â usedÂ toÂ be;Â Â codeÂ annotationÂ timesÂ areÂ correspondinglyÂ muchÂ smaller.<br>
Â Â SecondÂ user-visibleÂ changeÂ isÂ thatÂ hit/missÂ countsÂ forÂ codeÂ thatÂ is<br>
Â Â unloadedÂ atÂ run-timeÂ isÂ noÂ longerÂ dumpedÂ intoÂ aÂ singleÂ "discard"Â pile,<br>
Â Â butÂ accuratelyÂ preserved.<br>
<br>
*Â ClientÂ requestsÂ forÂ tellingÂ valgrindÂ aboutÂ memoryÂ pools.<br>
<br>
<br>
<br>
DeveloperÂ (cvsÂ head)Â releaseÂ 2.1.1Â (12Â MarchÂ 2004)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
2.1.1Â containsÂ someÂ internalÂ structuralÂ changesÂ neededÂ forÂ V's<br>
long-termÂ future.Â Â TheseÂ don'tÂ affectÂ end-users.Â Â MostÂ notable<br>
user-visibleÂ changesÂ are:<br>
<br>
*Â GreaterÂ isolationÂ betweenÂ ValgrindÂ andÂ theÂ programÂ beingÂ run,Â so<br>
Â Â theÂ programÂ isÂ lessÂ likelyÂ toÂ inadvertentlyÂ killÂ ValgrindÂ by<br>
Â Â doingÂ wildÂ writes.<br>
<br>
*Â Massif:Â aÂ newÂ spaceÂ profilingÂ tool.Â Â TryÂ it!Â Â It'sÂ cool,Â andÂ it'll<br>
Â Â tellÂ youÂ inÂ detailÂ whereÂ andÂ whenÂ yourÂ C/C++Â codeÂ isÂ allocatingÂ heap.<br>
Â Â DrawsÂ prettyÂ .psÂ picturesÂ ofÂ memoryÂ useÂ againstÂ time.Â Â AÂ potentially<br>
Â Â powerfulÂ toolÂ forÂ makingÂ senseÂ ofÂ yourÂ program'sÂ spaceÂ use.<br>
<br>
*Â FixesÂ forÂ manyÂ bugs,Â includingÂ supportÂ forÂ moreÂ SSE2/SSE3Â instructions,<br>
Â Â variousÂ signal/syscallÂ things,Â andÂ variousÂ problemsÂ withÂ debug<br>
Â Â infoÂ readers.<br>
<br>
*Â SupportÂ forÂ glibc-2.3.3Â basedÂ systems.<br>
<br>
WeÂ areÂ nowÂ doingÂ automaticÂ overnightÂ build-and-testÂ runsÂ onÂ aÂ variety<br>
ofÂ distros.Â Â AsÂ aÂ result,Â weÂ believeÂ 2.1.1Â buildsÂ andÂ runsÂ on:<br>
RedÂ HatÂ 7.2,Â 7.3,Â 8.0,Â 9,Â FedoraÂ CoreÂ 1,Â SuSEÂ 8.2,Â SuSEÂ 9.<br>
<br>
<br>
TheÂ followingÂ bugs,Â andÂ probablyÂ manyÂ more,Â haveÂ beenÂ fixed.Â Â These<br>
areÂ listedÂ atÂ http://bugs.kde.org.Â Â ReportingÂ aÂ bugÂ forÂ valgrindÂ in<br>
theÂ http://bugs.kde.orgÂ isÂ muchÂ moreÂ likelyÂ toÂ getÂ youÂ aÂ fixÂ than<br>
mailingÂ developersÂ directly,Â soÂ pleaseÂ continueÂ toÂ keepÂ sendingÂ bugs<br>
there.<br>
<br>
69616Â Â Â glibcÂ 2.3.2Â w/NPTLÂ isÂ massivelyÂ differentÂ thanÂ whatÂ valgrindÂ expectsÂ <br>
69856Â Â Â IÂ don'tÂ knowÂ howÂ toÂ instrumentÂ MMXishÂ stuffÂ (Helgrind)<br>
73892Â Â Â valgrindÂ segfaultsÂ startingÂ withÂ Objective-CÂ debugÂ infoÂ <br>
Â Â Â Â Â Â Â Â (fixÂ forÂ S-typeÂ stabs)<br>
73145Â Â Â ValgrindÂ complainsÂ tooÂ muchÂ aboutÂ close(&lt;reservedÂ fd&gt;)Â <br>
73902Â Â Â ShadowÂ memoryÂ allocationÂ seemsÂ toÂ failÂ onÂ RedHatÂ 8.0Â <br>
68633Â Â Â VG_N_SEMAPHORESÂ tooÂ lowÂ (VÂ itselfÂ wasÂ leakingÂ semaphores)<br>
75099Â Â Â impossibleÂ toÂ traceÂ multiprocessÂ programsÂ <br>
76839Â Â Â theÂ `impossible'Â happened:Â disInstr:Â INTÂ butÂ notÂ 0x80Â !Â <br>
76762Â Â Â vg_to_ucode.c:3748Â (dis_push_segreg):Â AssertionÂ `szÂ ==Â 4'Â failed.Â <br>
76747Â Â Â cannotÂ includeÂ valgrind.hÂ inÂ c++Â programÂ <br>
76223Â Â Â parsingÂ B(3,10)Â gaveÂ NULLÂ typeÂ =&gt;Â impossibleÂ happensÂ <br>
75604Â Â Â shmdtÂ handlingÂ problemÂ <br>
76416Â Â Â ProblemsÂ withÂ gccÂ 3.4Â snapÂ 20040225Â <br>
75614Â Â Â usingÂ -gstabsÂ whenÂ buildingÂ yourÂ programsÂ theÂ `impossible'Â happened<br>
75787Â Â Â PatchÂ forÂ someÂ CDROMÂ ioctlsÂ CDORM_GET_MCN,Â CDROM_SEND_PACKET,<br>
75294Â Â Â gccÂ 3.4Â snapshot'sÂ libstdc++Â haveÂ unsupportedÂ instructions.Â <br>
Â Â Â Â Â Â Â Â (REPÂ RET)<br>
73326Â Â Â vg_symtab2.c:272Â (addScopeRange):Â AssertionÂ `range-&gt;sizeÂ &gt;Â 0'Â failed.Â <br>
72596Â Â Â notÂ recognizingÂ __libc_mallocÂ <br>
69489Â Â Â WouldÂ likeÂ toÂ attachÂ dddÂ toÂ runningÂ programÂ <br>
72781Â Â Â CachegrindÂ crashesÂ withÂ kdeÂ programsÂ <br>
73055Â Â Â IllegalÂ operandÂ atÂ DXTCV11CompressBlockSSE2Â (moreÂ SSEÂ opcodes)<br>
73026Â Â Â DescriptorÂ leakÂ checkÂ reportsÂ portÂ numbersÂ wronglyÂ <br>
71705Â Â Â README_MISSING_SYSCALL_OR_IOCTLÂ outÂ ofÂ dateÂ <br>
72643Â Â Â ImproveÂ supportÂ forÂ SSE/SSE2Â instructionsÂ <br>
72484Â Â Â valgrindÂ leavesÂ it'sÂ ownÂ signalÂ maskÂ inÂ placeÂ whenÂ execingÂ <br>
72650Â Â Â SignalÂ HandlingÂ alwaysÂ seemsÂ toÂ restartÂ systemÂ callsÂ <br>
72006Â Â Â TheÂ mmapÂ systemÂ callÂ turnsÂ allÂ errorsÂ inÂ ENOMEMÂ <br>
71781Â Â Â gdbÂ attachÂ isÂ prettyÂ uselessÂ <br>
71180Â Â Â unhandledÂ instructionÂ bytes:Â 0xFÂ 0xAEÂ 0x85Â 0xE8Â <br>
69886Â Â Â writesÂ toÂ zeroÂ pageÂ causeÂ valgrindÂ toÂ assertÂ onÂ exitÂ <br>
71791Â Â Â crashÂ whenÂ valgrindingÂ gimpÂ 1.3Â (stabsÂ readerÂ problem)<br>
69783Â Â Â unhandledÂ syscall:Â 218Â <br>
69782Â Â Â unhandledÂ instructionÂ bytes:Â 0x66Â 0xFÂ 0x2BÂ 0x80Â <br>
70385Â Â Â valgrindÂ failsÂ ifÂ theÂ softÂ fileÂ descriptorÂ limitÂ isÂ lessÂ <br>
Â Â Â Â Â Â Â Â thanÂ aboutÂ 828<br>
69529Â Â Â "rep;Â nop"Â shouldÂ doÂ aÂ yieldÂ <br>
70827Â Â Â programsÂ withÂ lotsÂ ofÂ sharedÂ librariesÂ reportÂ "mmapÂ failed"Â <br>
Â Â Â Â Â Â Â Â forÂ someÂ ofÂ themÂ whenÂ readingÂ symbolsÂ <br>
71028Â Â Â glibc'sÂ strnlenÂ isÂ optimisedÂ enoughÂ toÂ confuseÂ valgrindÂ <br>
<br>
<br>
<br>
<br>
UnstableÂ (cvsÂ head)Â releaseÂ 2.1.0Â (15Â DecemberÂ 2003)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
ForÂ whateverÂ it'sÂ worth,Â 2.1.0Â actuallyÂ seemsÂ prettyÂ darnÂ stableÂ toÂ me<br>
(Julian).Â Â ItÂ looksÂ eminentlyÂ usable,Â andÂ givenÂ thatÂ itÂ fixesÂ some<br>
significantÂ bugs,Â mayÂ wellÂ beÂ worthÂ usingÂ onÂ aÂ day-to-dayÂ basis.<br>
2.1.0Â isÂ knownÂ toÂ buildÂ andÂ passÂ regressionÂ testsÂ on:Â SuSEÂ 9,Â SuSE<br>
8.2,Â RedHatÂ 8.<br>
<br>
2.1.0Â mostÂ notablyÂ includesÂ JeremyÂ Fitzhardinge'sÂ completeÂ overhaulÂ of<br>
handlingÂ ofÂ systemÂ callsÂ andÂ signals,Â andÂ theirÂ interactionÂ with<br>
threads.Â Â InÂ general,Â theÂ accuracyÂ ofÂ theÂ systemÂ call,Â threadÂ and<br>
signalÂ simulationsÂ isÂ muchÂ improved.Â Â Specifically:<br>
<br>
-Â BlockingÂ systemÂ callsÂ behaveÂ exactlyÂ asÂ theyÂ doÂ whenÂ running<br>
Â Â nativelyÂ (notÂ onÂ valgrind).Â Â ThatÂ is,Â ifÂ aÂ syscallÂ blocksÂ onlyÂ the<br>
Â Â callingÂ threadÂ whenÂ runningÂ natively,Â thanÂ itÂ behavesÂ theÂ sameÂ on<br>
Â Â valgrind.Â Â NoÂ moreÂ mysteriousÂ hangsÂ becauseÂ VÂ doesn'tÂ knowÂ thatÂ some<br>
Â Â syscallÂ orÂ other,Â shouldÂ blockÂ onlyÂ theÂ callingÂ thread.<br>
<br>
-Â InterruptedÂ syscallsÂ shouldÂ nowÂ giveÂ moreÂ faithfulÂ results.<br>
<br>
-Â Finally,Â signalÂ contextsÂ inÂ signalÂ handlersÂ areÂ supported.Â Â AsÂ a<br>
Â Â result,Â konquerorÂ onÂ SuSEÂ 9Â noÂ longerÂ segfaultsÂ whenÂ notifiedÂ of<br>
Â Â fileÂ changesÂ inÂ directoriesÂ itÂ isÂ watching.<br>
<br>
OtherÂ changes:<br>
<br>
-Â RobertÂ Walsh'sÂ fileÂ descriptorÂ leakageÂ checks.Â Â WhenÂ enabled,<br>
Â Â ValgrindÂ willÂ printÂ outÂ aÂ listÂ ofÂ openÂ fileÂ descriptorsÂ on<br>
Â Â exit.Â Â AlongÂ withÂ eachÂ fileÂ descriptor,Â ValgrindÂ printsÂ outÂ aÂ stack<br>
Â Â backtraceÂ ofÂ whereÂ theÂ fileÂ wasÂ openedÂ andÂ anyÂ detailsÂ relatingÂ toÂ the<br>
Â Â fileÂ descriptorÂ suchÂ asÂ theÂ fileÂ nameÂ orÂ socketÂ details.<br>
Â Â ToÂ use,Â give:Â --track-fds=yes<br>
<br>
-Â ImplementedÂ aÂ fewÂ moreÂ SSE/SSE2Â instructions.<br>
<br>
-Â LessÂ crudÂ onÂ theÂ stackÂ whenÂ youÂ doÂ 'where'Â insideÂ aÂ GDBÂ attach.<br>
<br>
-Â FixedÂ theÂ followingÂ bugs:<br>
Â Â 68360:Â ValgrindÂ doesÂ notÂ compileÂ againstÂ 2.6.0-testXÂ kernels<br>
Â Â 68525:Â CVSÂ headÂ doesn'tÂ compileÂ onÂ C90Â compilers<br>
Â Â 68566:Â pkgconfigÂ supportÂ (wishlist)<br>
Â Â 68588:Â AssertionÂ `szÂ ==Â 4'Â failedÂ inÂ vg_to_ucode.cÂ (disInstr)<br>
Â Â 69140:Â valgrindÂ notÂ ableÂ toÂ explicitlyÂ specifyÂ aÂ pathÂ toÂ aÂ binary.Â <br>
Â Â 69432:Â helgrindÂ assertsÂ encounteringÂ aÂ MutexErrÂ whenÂ thereÂ areÂ <br>
Â Â Â Â Â Â Â Â Â EraserErrÂ suppressions<br>
<br>
-Â IncreaseÂ theÂ maxÂ sizeÂ ofÂ theÂ translationÂ cacheÂ fromÂ 200kÂ averageÂ bbs<br>
Â Â toÂ 300kÂ averageÂ bbs.Â Â ProgramsÂ onÂ theÂ sizeÂ ofÂ OOoÂ (680m17)Â are<br>
Â Â thrashingÂ theÂ cacheÂ atÂ theÂ smallerÂ size,Â creatingÂ largeÂ numbersÂ of<br>
Â Â retranslationsÂ andÂ wastingÂ significantÂ timeÂ asÂ aÂ result.<br>
<br>
<br>
<br>
StableÂ releaseÂ 2.0.0Â (5Â NovÂ 2003)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
<br>
2.0.0Â improvesÂ SSE/SSE2Â support,Â fixesÂ someÂ minorÂ bugs,Â and<br>
improvesÂ supportÂ forÂ SuSEÂ 9Â andÂ theÂ RedÂ HatÂ "Severn"Â beta.<br>
<br>
-Â FurtherÂ improvementsÂ toÂ SSE/SSE2Â support.Â Â TheÂ entireÂ testÂ suiteÂ of<br>
Â Â theÂ GNUÂ ScientificÂ LibraryÂ (gsl-1.4)Â compiledÂ withÂ IntelÂ IccÂ 7.1<br>
Â Â 20030307ZÂ '-gÂ -OÂ -xW'Â nowÂ works.Â Â IÂ thinkÂ thisÂ givesÂ prettyÂ good<br>
Â Â coverageÂ ofÂ SSE/SSE2Â floatingÂ pointÂ instructions,Â orÂ atÂ leastÂ the<br>
Â Â subsetÂ emittedÂ byÂ Icc.<br>
<br>
-Â AlsoÂ addedÂ supportÂ forÂ theÂ followingÂ instructions:<br>
Â Â Â Â MOVNTDQÂ UCOMISDÂ UNPCKLPSÂ UNPCKHPSÂ SQRTSS<br>
Â Â Â Â PUSH/POPÂ %{FS,GS},Â andÂ PUSHÂ %CSÂ (Nb:Â thereÂ isÂ noÂ POPÂ %CS).<br>
<br>
-Â CFIÂ supportÂ forÂ GDBÂ versionÂ 6.Â Â NeededÂ toÂ enableÂ newerÂ GDBs<br>
Â Â toÂ figureÂ outÂ whereÂ theyÂ areÂ whenÂ usingÂ --gdb-attach=yes.<br>
<br>
-Â FixÂ this:<br>
Â Â Â Â Â Â mc_translate.c:1091Â (memcheck_instrument):Â Assertion<br>
Â Â Â Â Â Â `u_in-&gt;sizeÂ ==Â 4Â ||Â u_in-&gt;sizeÂ ==Â 16'Â failed.<br>
<br>
-Â ReturnÂ anÂ errorÂ ratherÂ thanÂ panicingÂ whenÂ givenÂ aÂ badÂ socketcall.<br>
<br>
-Â FixÂ checkingÂ ofÂ syscallÂ rt_sigtimedwait().<br>
<br>
-Â ImplementÂ __NR_clock_gettimeÂ (syscallÂ 265).Â Â NeededÂ onÂ RedÂ HatÂ Severn.<br>
<br>
-Â FixedÂ bugÂ inÂ overlapÂ checkÂ inÂ strncpy()Â --Â itÂ wasÂ assumingÂ theÂ srcÂ wasÂ 'n'<br>
Â Â bytesÂ long,Â whenÂ itÂ couldÂ beÂ shorter,Â whichÂ couldÂ causeÂ false<br>
Â Â positives.<br>
<br>
-Â SupportÂ useÂ ofÂ select()Â forÂ veryÂ largeÂ numbersÂ ofÂ fileÂ descriptors.<br>
<br>
-Â Don'tÂ failÂ silentlyÂ ifÂ theÂ executableÂ isÂ staticallyÂ linked,Â orÂ is<br>
Â Â setuid/setgid.Â PrintÂ anÂ errorÂ messageÂ instead.<br>
<br>
-Â SupportÂ forÂ oldÂ DWARF-1Â formatÂ lineÂ numberÂ info.<br>
<br>
<br>
<br>
SnapshotÂ 20031012Â (12Â OctoberÂ 2003)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
<br>
ThreeÂ monthsÂ worthÂ ofÂ bugÂ fixes,Â roughly.Â Â MostÂ significantÂ single<br>
changeÂ isÂ improvedÂ SSE/SSE2Â support,Â mostlyÂ thanksÂ toÂ DirkÂ Mueller.<br>
<br>
20031012Â buildsÂ onÂ RedÂ HatÂ FedoraÂ ("Severn")Â butÂ doesn'tÂ reallyÂ work<br>
(curiously,Â mozillaÂ runsÂ OK,Â butÂ aÂ modestÂ "lsÂ -l"Â bombs).Â Â IÂ hopeÂ to<br>
getÂ aÂ workingÂ versionÂ outÂ soon.Â Â ItÂ mayÂ orÂ mayÂ notÂ workÂ okÂ onÂ the<br>
forthcomingÂ SuSEÂ 9;Â IÂ hearÂ positiveÂ noisesÂ aboutÂ itÂ butÂ haven'tÂ been<br>
ableÂ toÂ verifyÂ thisÂ myselfÂ (notÂ untilÂ IÂ getÂ holdÂ ofÂ aÂ copyÂ ofÂ 9).<br>
<br>
AÂ detailedÂ listÂ ofÂ changes,Â inÂ noÂ particularÂ order:<br>
<br>
-Â DescribeÂ --gen-suppressionsÂ inÂ theÂ FAQ.<br>
<br>
-Â SyscallÂ __NR_waitpidÂ supported.<br>
<br>
-Â MinorÂ MMXÂ bugÂ fix.<br>
<br>
-Â -vÂ printsÂ program'sÂ argv[]Â atÂ startup.<br>
<br>
-Â MoreÂ glibc-2.3Â suppressions.<br>
<br>
-Â SuppressionsÂ forÂ stackÂ underrunÂ bug(s)Â inÂ theÂ c++Â supportÂ library<br>
Â Â distributedÂ withÂ IntelÂ IccÂ 7.0.<br>
<br>
-Â FixÂ problemsÂ readingÂ /proc/self/maps.<br>
<br>
-Â FixÂ aÂ coupleÂ ofÂ messagesÂ thatÂ shouldÂ haveÂ beenÂ suppressedÂ byÂ -q,Â <br>
Â Â butÂ weren't.<br>
<br>
-Â MakeÂ AddrcheckÂ understandÂ "Overlap"Â suppressions.<br>
<br>
-Â AtÂ startup,Â checkÂ ifÂ programÂ isÂ staticallyÂ linkedÂ andÂ bailÂ outÂ ifÂ so.<br>
<br>
-Â Cachegrind:Â Auto-detectÂ IntelÂ Pentium-M,Â alsoÂ VIAÂ Nehemiah<br>
<br>
-Â Memcheck/addrcheck:Â minorÂ speedÂ optimisations<br>
<br>
-Â HandleÂ syscallÂ __NR_brkÂ moreÂ correctlyÂ thanÂ before.<br>
<br>
-Â FixedÂ incorrectÂ allocate/freeÂ mismatchÂ errorsÂ whenÂ using<br>
Â Â operatorÂ new(unsigned,Â std::nothrow_tÂ const&amp;)<br>
Â Â operatorÂ new[](unsigned,Â std::nothrow_tÂ const&amp;)<br>
<br>
-Â SupportÂ POSIXÂ pthreadÂ spinlocks.<br>
<br>
-Â FixupsÂ forÂ cleanÂ compilationÂ withÂ gcc-3.3.1.<br>
<br>
-Â ImplementedÂ moreÂ opcodes:Â <br>
Â Â Â Â -Â pushÂ %es<br>
Â Â Â Â -Â pushÂ %ds<br>
Â Â Â Â -Â popÂ %es<br>
Â Â Â Â -Â popÂ %ds<br>
Â Â Â Â -Â movntq<br>
Â Â Â Â -Â sfence<br>
Â Â Â Â -Â pshufw<br>
Â Â Â Â -Â pavgb<br>
Â Â Â Â -Â ucomiss<br>
Â Â Â Â -Â enter<br>
Â Â Â Â -Â movÂ imm32,Â %esp<br>
Â Â Â Â -Â allÂ "in"Â andÂ "out"Â opcodes<br>
Â Â Â Â -Â inc/decÂ %esp<br>
Â Â Â Â -Â AÂ wholeÂ bunchÂ ofÂ SSE/SSE2Â instructions<br>
<br>
-Â Memcheck:Â don'tÂ bombÂ onÂ SSE/SSE2Â code.<br>
<br>
<br>
SnapshotÂ 20030725Â (25Â JulyÂ 2003)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
<br>
FixesÂ someÂ minorÂ problemsÂ inÂ 20030716.<br>
<br>
-Â FixÂ bugsÂ inÂ overlapÂ checkingÂ forÂ strcpy/memcpyÂ etc.<br>
<br>
-Â DoÂ overlapÂ checkingÂ withÂ AddrcheckÂ asÂ wellÂ asÂ Memcheck.<br>
<br>
-Â FixÂ this:<br>
Â Â Â Â Â Â Memcheck:Â theÂ `impossible'Â happened:<br>
Â Â Â Â Â Â get_error_name:Â unexpectedÂ type<br>
<br>
-Â InstallÂ headersÂ neededÂ toÂ compileÂ newÂ skins.<br>
<br>
-Â RemoveÂ leadingÂ spacesÂ andÂ colonÂ inÂ theÂ LD_LIBRARY_PATHÂ /Â LD_PRELOAD<br>
Â Â passedÂ toÂ non-tracedÂ children.<br>
<br>
-Â FixÂ fileÂ descriptorÂ leakÂ inÂ valgrind-listener.<br>
<br>
-Â FixÂ longstandingÂ bugÂ inÂ whichÂ theÂ allocationÂ pointÂ ofÂ aÂ <br>
Â Â blockÂ resizedÂ byÂ reallocÂ wasÂ notÂ correctlyÂ set.Â Â ThisÂ may<br>
Â Â haveÂ causedÂ confusingÂ errorÂ messages.<br>
<br>
<br>
SnapshotÂ 20030716Â (16Â JulyÂ 2003)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
<br>
20030716Â isÂ aÂ snapshotÂ ofÂ ourÂ currentÂ CVSÂ headÂ (development)Â branch.<br>
ThisÂ isÂ theÂ branchÂ whichÂ willÂ becomeÂ valgrind-2.0.Â Â ItÂ contains<br>
significantÂ enhancementsÂ overÂ theÂ 1.9.XÂ branch.<br>
<br>
DespiteÂ thisÂ beingÂ aÂ snapshotÂ ofÂ theÂ CVSÂ head,Â itÂ isÂ believedÂ toÂ be<br>
quiteÂ stableÂ --Â atÂ leastÂ asÂ stableÂ asÂ 1.9.6Â orÂ 1.0.4,Â ifÂ notÂ moreÂ so<br>
--Â andÂ thereforeÂ suitableÂ forÂ widespreadÂ use.Â Â PleaseÂ letÂ usÂ knowÂ asap<br>
ifÂ itÂ causesÂ problemsÂ forÂ you.<br>
<br>
TwoÂ reasonsÂ forÂ releasingÂ aÂ snapshotÂ nowÂ are:<br>
<br>
-Â It'sÂ beenÂ aÂ whileÂ sinceÂ 1.9.6,Â andÂ thisÂ snapshotÂ fixes<br>
Â Â variousÂ problemsÂ thatÂ 1.9.6Â hasÂ withÂ threadedÂ programsÂ <br>
Â Â onÂ glibc-2.3.XÂ basedÂ systems.<br>
<br>
-Â SoÂ asÂ toÂ makeÂ availableÂ improvementsÂ inÂ theÂ 2.0Â line.<br>
<br>
MajorÂ changesÂ inÂ 20030716,Â asÂ comparedÂ toÂ 1.9.6:<br>
<br>
-Â MoreÂ fixesÂ toÂ threadingÂ supportÂ onÂ glibc-2.3.1Â andÂ 2.3.2-based<br>
Â Â systemsÂ (SuSEÂ 8.2,Â RedÂ HatÂ 9).Â Â IfÂ youÂ haveÂ hadÂ problems<br>
Â Â withÂ inconsistent/illogicalÂ behaviourÂ ofÂ errno,Â h_errnoÂ orÂ theÂ DNS<br>
Â Â resolverÂ functionsÂ inÂ threadedÂ programs,Â 20030716Â shouldÂ improve<br>
Â Â matters.Â Â ThisÂ snapshotÂ seemsÂ stableÂ enoughÂ toÂ runÂ OpenOffice.org<br>
Â Â 1.1rcÂ onÂ RedÂ HatÂ 7.3,Â SuSEÂ 8.2Â andÂ RedÂ HatÂ 9,Â andÂ that'sÂ aÂ big<br>
Â Â threadedÂ appÂ ifÂ everÂ IÂ sawÂ one.<br>
<br>
-Â AutomaticÂ generationÂ ofÂ suppressionÂ records;Â youÂ noÂ longer<br>
Â Â needÂ toÂ writeÂ themÂ byÂ hand.Â Â UseÂ --gen-suppressions=yes.<br>
<br>
-Â strcpy/memcpy/etcÂ checkÂ theirÂ argumentsÂ forÂ overlaps,Â when<br>
Â Â runningÂ withÂ theÂ MemcheckÂ orÂ AddrcheckÂ skins.<br>
<br>
-Â malloc_usable_size()Â isÂ nowÂ supported.<br>
<br>
-Â newÂ clientÂ requests:<br>
Â Â Â Â -Â VALGRIND_COUNT_ERRORS,Â VALGRIND_COUNT_LEAKS:Â <br>
Â Â Â Â Â Â usefulÂ withÂ regressionÂ testing<br>
Â Â Â Â -Â VALGRIND_NON_SIMD_CALL[0123]:Â forÂ runningÂ arbitraryÂ functionsÂ <br>
Â Â Â Â Â Â onÂ realÂ CPUÂ (useÂ withÂ caution!)<br>
<br>
-Â TheÂ GDBÂ attachÂ mechanismÂ isÂ moreÂ flexible.Â Â AllowÂ theÂ GDBÂ to<br>
Â Â beÂ runÂ toÂ beÂ specifiedÂ byÂ --gdb-path=/path/to/gdb,Â andÂ specify<br>
Â Â whichÂ fileÂ descriptorÂ VÂ willÂ readÂ itsÂ inputÂ fromÂ with<br>
Â Â --input-fd=&lt;number&gt;.<br>
<br>
-Â CachegrindÂ givesÂ moreÂ accurateÂ resultsÂ (wasn'tÂ trackingÂ instructionsÂ in<br>
Â Â malloc()Â andÂ friendsÂ previously,Â isÂ now).<br>
<br>
-Â CompleteÂ supportÂ forÂ theÂ MMXÂ instructionÂ set.<br>
<br>
-Â PartialÂ supportÂ forÂ theÂ SSEÂ andÂ SSE2Â instructionÂ sets.Â Â WorkÂ forÂ this<br>
Â Â isÂ ongoing.Â Â AboutÂ halfÂ theÂ SSE/SSE2Â instructionsÂ areÂ done,Â so<br>
Â Â someÂ SSEÂ basedÂ programsÂ mayÂ work.Â Â CurrentlyÂ youÂ needÂ toÂ specify<br>
Â Â --skin=addrcheck.Â Â BasicallyÂ notÂ suitableÂ forÂ realÂ useÂ yet.<br>
<br>
-Â SignificantÂ speedupsÂ (10%-20%)Â forÂ standardÂ memoryÂ checking.<br>
<br>
-Â FixÂ assertionÂ failureÂ inÂ pthread_once().<br>
<br>
-Â FixÂ this:<br>
Â Â Â Â valgrind:Â vg_intercept.c:598Â (vgAllRoadsLeadToRome_select):Â <br>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â AssertionÂ `ms_endÂ &gt;=Â ms_now'Â failed.<br>
<br>
-Â ImplementÂ pthread_mutexattr_setpshared.<br>
<br>
-Â UnderstandÂ PentiumÂ 4Â branchÂ hints.Â Â AlsoÂ implementedÂ aÂ coupleÂ more<br>
Â Â obscureÂ x86Â instructions.<br>
<br>
-Â LotsÂ ofÂ otherÂ minorÂ bugÂ fixes.<br>
<br>
-Â WeÂ haveÂ aÂ decentÂ regressionÂ testÂ system,Â forÂ theÂ firstÂ time.<br>
Â Â ThisÂ doesn'tÂ helpÂ youÂ directly,Â butÂ itÂ doesÂ makeÂ itÂ aÂ lotÂ easier<br>
Â Â forÂ usÂ toÂ trackÂ theÂ qualityÂ ofÂ theÂ system,Â especiallyÂ across<br>
Â Â multipleÂ linuxÂ distributions.Â Â <br>
<br>
Â Â YouÂ canÂ runÂ theÂ regressionÂ testsÂ withÂ 'makeÂ regtest'Â afterÂ 'make<br>
Â Â install'Â completes.Â Â OnÂ SuSEÂ 8.2Â andÂ RedÂ HatÂ 9Â IÂ getÂ this:<br>
Â <br>
Â Â Â Â Â ==Â 84Â tests,Â 0Â stderrÂ failures,Â 0Â stdoutÂ failuresÂ ==<br>
<br>
Â Â OnÂ RedÂ HatÂ 8,Â IÂ getÂ this:<br>
<br>
Â Â Â Â Â ==Â 84Â tests,Â 2Â stderrÂ failures,Â 1Â stdoutÂ failureÂ ==<br>
Â Â Â Â Â corecheck/tests/res_searchÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â (stdout)<br>
Â Â Â Â Â memcheck/tests/sigaltstackÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â (stderr)<br>
<br>
Â Â sigaltstackÂ isÂ probablyÂ harmless.Â Â res_searchÂ doesn'tÂ work<br>
Â Â onÂ RÂ HÂ 8Â evenÂ runningÂ natively,Â soÂ I'mÂ notÂ tooÂ worried.Â Â Â <br>
<br>
Â Â OnÂ RedÂ HatÂ 7.3,Â aÂ glibc-2.2.5Â system,Â IÂ getÂ theseÂ harmlessÂ failures:<br>
<br>
Â Â Â Â Â ==Â 84Â tests,Â 2Â stderrÂ failures,Â 1Â stdoutÂ failureÂ ==<br>
Â Â Â Â Â corecheck/tests/pth_atfork1Â Â Â Â Â Â Â Â Â Â Â Â Â Â (stdout)<br>
Â Â Â Â Â corecheck/tests/pth_atfork1Â Â Â Â Â Â Â Â Â Â Â Â Â Â (stderr)<br>
Â Â Â Â Â memcheck/tests/sigaltstackÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â (stderr)<br>
<br>
Â Â YouÂ needÂ toÂ runÂ onÂ aÂ PIIÂ system,Â atÂ least,Â sinceÂ someÂ tests<br>
Â Â containÂ P6-specificÂ instructions,Â andÂ theÂ testÂ machineÂ needs<br>
Â Â accessÂ toÂ theÂ internetÂ soÂ thatÂ corecheck/tests/res_search<br>
Â Â (aÂ testÂ thatÂ theÂ DNSÂ resolverÂ works)Â canÂ function.<br>
<br>
AsÂ ever,Â thanksÂ forÂ theÂ vastÂ amountÂ ofÂ feedbackÂ :)Â andÂ bugÂ reportsÂ :(<br>
WeÂ mayÂ notÂ answerÂ allÂ messages,Â butÂ weÂ doÂ atÂ leastÂ lookÂ atÂ allÂ of<br>
them,Â andÂ tendÂ toÂ fixÂ theÂ mostÂ frequentlyÂ reportedÂ bugs.<br>
<br>
<br>
<br>
VersionÂ 1.9.6Â (7Â MayÂ 2003Â orÂ thereabouts)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
<br>
MajorÂ changesÂ inÂ 1.9.6:<br>
<br>
-Â ImprovedÂ threadingÂ supportÂ forÂ glibcÂ &gt;=Â 2.3.2Â (SuSEÂ 8.2,<br>
Â Â RedHatÂ 9,Â toÂ nameÂ butÂ twoÂ ...)Â Â ItÂ turnedÂ outÂ thatÂ 1.9.5<br>
Â Â hadÂ problemsÂ withÂ threadingÂ supportÂ onÂ glibcÂ &gt;=Â 2.3.2,<br>
Â Â usuallyÂ manifestedÂ byÂ threadedÂ programsÂ deadlockingÂ inÂ systemÂ calls,<br>
Â Â orÂ runningÂ unbelievablyÂ slowly.Â Â HopefullyÂ theseÂ areÂ fixedÂ now.Â Â 1.9.6<br>
Â Â isÂ theÂ firstÂ valgrindÂ whichÂ givesÂ reasonableÂ supportÂ for<br>
Â Â glibc-2.3.2.Â Â AlsoÂ fixedÂ aÂ 2.3.2Â problemÂ withÂ pthread_atfork().<br>
<br>
-Â MajorlyÂ expandedÂ FAQ.txt.Â Â We'veÂ addedÂ workaroundsÂ forÂ all<br>
Â Â commonÂ problemsÂ forÂ whichÂ aÂ workaroundÂ isÂ known.<br>
<br>
MinorÂ changesÂ inÂ 1.9.6:<br>
<br>
-Â FixÂ identificationÂ ofÂ theÂ mainÂ thread'sÂ stack.Â Â Incorrect<br>
Â Â identificationÂ ofÂ itÂ wasÂ causingÂ someÂ on-stackÂ addressesÂ toÂ notÂ get<br>
Â Â identifiedÂ asÂ such.Â Â ThisÂ onlyÂ affectedÂ theÂ usefulnessÂ ofÂ someÂ error<br>
Â Â messages;Â theÂ correctnessÂ ofÂ theÂ checksÂ madeÂ isÂ unchanged.<br>
<br>
-Â SupportÂ forÂ kernelsÂ &gt;=Â 2.5.68.<br>
<br>
-Â DummyÂ implementationsÂ ofÂ __libc_current_sigrtmin,Â <br>
Â Â __libc_current_sigrtmaxÂ andÂ __libc_allocate_rtsig,Â hopefully<br>
Â Â goodÂ enoughÂ toÂ keepÂ aliveÂ programsÂ whichÂ previouslyÂ diedÂ forÂ lackÂ of<br>
Â Â them.<br>
<br>
-Â FixÂ bugÂ inÂ theÂ VALGRIND_DISCARD_TRANSLATIONSÂ clientÂ request.<br>
<br>
-Â FixÂ bugÂ inÂ theÂ DWARF2Â debugÂ lineÂ infoÂ loader,Â whenÂ instructionsÂ <br>
Â Â followingÂ eachÂ otherÂ haveÂ sourceÂ linesÂ farÂ fromÂ eachÂ otherÂ <br>
Â Â (e.g.Â withÂ inlinedÂ functions).<br>
<br>
-Â DebugÂ infoÂ reading:Â readÂ symbolsÂ fromÂ bothÂ "symtab"Â andÂ "dynsym"<br>
Â Â sections,Â ratherÂ thanÂ merelyÂ fromÂ theÂ oneÂ thatÂ comesÂ lastÂ inÂ the<br>
Â Â file.<br>
<br>
-Â NewÂ syscallÂ support:Â prctl(),Â creat(),Â lookup_dcookie().<br>
<br>
-Â WhenÂ checkingÂ callsÂ toÂ accept(),Â recvfrom(),Â getsocketopt(),<br>
Â Â don'tÂ complainÂ ifÂ bufferÂ valuesÂ areÂ NULL.<br>
<br>
-Â TryÂ andÂ avoidÂ assertionÂ failuresÂ in<br>
Â Â mash_LD_PRELOAD_and_LD_LIBRARY_PATH.<br>
<br>
-Â MinorÂ bugÂ fixesÂ inÂ cg_annotate.<br>
<br>
<br>
<br>
VersionÂ 1.9.5Â (7Â AprilÂ 2003)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
<br>
ItÂ occursÂ toÂ meÂ thatÂ itÂ wouldÂ beÂ helpfulÂ forÂ valgrindÂ usersÂ toÂ record<br>
inÂ theÂ sourceÂ distributionÂ theÂ changesÂ inÂ eachÂ release.Â Â SoÂ IÂ now<br>
attemptÂ toÂ mendÂ myÂ errantÂ waysÂ :-)Â Â ChangesÂ inÂ thisÂ andÂ futureÂ releases<br>
willÂ beÂ documentedÂ inÂ theÂ NEWSÂ fileÂ inÂ theÂ sourceÂ distribution.<br>
<br>
MajorÂ changesÂ inÂ 1.9.5:<br>
<br>
-Â (CriticalÂ bugÂ fix):Â FixÂ aÂ bugÂ inÂ theÂ FPUÂ simulation.Â Â ThisÂ was<br>
Â Â causingÂ someÂ floatingÂ pointÂ conditionalÂ testsÂ notÂ toÂ workÂ right.<br>
Â Â SeveralÂ peopleÂ reportedÂ this.Â Â IfÂ youÂ hadÂ floatingÂ pointÂ codeÂ which<br>
Â Â didn'tÂ workÂ rightÂ onÂ 1.9.1Â toÂ 1.9.4,Â it'sÂ worthÂ tryingÂ 1.9.5.<br>
<br>
-Â PartialÂ supportÂ forÂ RedÂ HatÂ 9.Â Â RH9Â usesÂ theÂ newÂ NativeÂ PosixÂ <br>
Â Â ThreadsÂ LibraryÂ (NPTL),Â insteadÂ ofÂ theÂ olderÂ LinuxThreads.Â Â <br>
Â Â ThisÂ potentiallyÂ causesÂ problemsÂ withÂ VÂ whichÂ willÂ takeÂ some<br>
Â Â timeÂ toÂ correct.Â Â InÂ theÂ meantimeÂ weÂ haveÂ partiallyÂ workedÂ around<br>
Â Â this,Â andÂ soÂ 1.9.5Â worksÂ onÂ RH9.Â Â ThreadedÂ programsÂ stillÂ work,<br>
Â Â butÂ theyÂ mayÂ deadlock,Â becauseÂ someÂ systemÂ callsÂ (accept,Â read,<br>
Â Â write,Â etc)Â whichÂ shouldÂ beÂ nonblocking,Â inÂ factÂ doÂ block.Â Â This<br>
Â Â isÂ aÂ knownÂ bugÂ whichÂ weÂ areÂ lookingÂ into.<br>
<br>
Â Â IfÂ youÂ can,Â yourÂ bestÂ betÂ (unfortunately)Â isÂ toÂ avoidÂ usingÂ <br>
Â Â 1.9.5Â onÂ aÂ RedÂ HatÂ 9Â system,Â orÂ onÂ anyÂ NPTL-basedÂ distribution.<br>
Â Â IfÂ yourÂ glibcÂ isÂ 2.3.1Â orÂ earlier,Â you'reÂ almostÂ certainlyÂ OK.<br>
<br>
MinorÂ changesÂ inÂ 1.9.5:<br>
<br>
-Â AddedÂ someÂ #errorsÂ toÂ valgrind.hÂ toÂ ensureÂ peopleÂ don'tÂ include<br>
Â Â itÂ accidentallyÂ inÂ theirÂ sources.Â Â ThisÂ isÂ aÂ changeÂ fromÂ 1.0.X<br>
Â Â whichÂ wasÂ neverÂ properlyÂ documented.Â Â TheÂ rightÂ thingÂ toÂ include<br>
Â Â isÂ nowÂ memcheck.h.Â Â SomeÂ peopleÂ reportedÂ problemsÂ andÂ strange<br>
Â Â behaviourÂ whenÂ (incorrectly)Â includingÂ valgrind.hÂ inÂ codeÂ withÂ <br>
Â Â 1.9.1Â --Â 1.9.4.Â Â ThisÂ isÂ noÂ longerÂ possible.<br>
<br>
-Â AddÂ someÂ __extension__Â bitsÂ andÂ piecesÂ soÂ thatÂ gccÂ configured<br>
Â Â forÂ valgrind-checkingÂ compilesÂ evenÂ withÂ -Werror.Â Â IfÂ you<br>
Â Â don'tÂ understandÂ this,Â ignoreÂ it.Â Â OfÂ interestÂ toÂ gccÂ developers<br>
Â Â only.<br>
<br>
-Â RemovedÂ aÂ pointlessÂ checkÂ whichÂ causedÂ problemsÂ interworkingÂ <br>
Â Â withÂ Clearcase.Â Â VÂ wouldÂ complainÂ aboutÂ sharedÂ objectsÂ whose<br>
Â Â namesÂ didÂ notÂ endÂ ".so",Â andÂ refuseÂ toÂ run.Â Â ThisÂ isÂ nowÂ fixed.<br>
Â Â InÂ factÂ itÂ wasÂ fixedÂ inÂ 1.9.4Â butÂ notÂ documented.<br>
<br>
-Â FixedÂ aÂ bugÂ causingÂ anÂ assertionÂ failureÂ ofÂ "waitersÂ ==Â 1"<br>
Â Â somewhereÂ inÂ vg_scheduler.c,Â whenÂ runningÂ largeÂ threadedÂ apps,<br>
Â Â notablyÂ MySQL.<br>
<br>
-Â AddÂ supportÂ forÂ theÂ munlockÂ systemÂ callÂ (124).<br>
<br>
SomeÂ commentsÂ aboutÂ futureÂ releases:<br>
<br>
1.9.5Â is,Â weÂ hope,Â theÂ mostÂ stableÂ ValgrindÂ soÂ far.Â Â ItÂ prettyÂ much<br>
supersedesÂ theÂ 1.0.XÂ branch.Â Â IfÂ youÂ areÂ aÂ valgrindÂ packager,Â please<br>
considerÂ makingÂ 1.9.5Â availableÂ toÂ yourÂ users.Â Â YouÂ canÂ regardÂ the<br>
1.0.XÂ branchÂ asÂ obsolete:Â 1.9.5Â isÂ stableÂ andÂ vastlyÂ superior.Â Â There<br>
areÂ noÂ plansÂ atÂ allÂ forÂ furtherÂ releasesÂ ofÂ theÂ 1.0.XÂ branch.<br>
<br>
IfÂ youÂ wantÂ aÂ leading-edgeÂ valgrind,Â considerÂ buildingÂ theÂ cvsÂ head<br>
(fromÂ SourceForge),Â orÂ gettingÂ aÂ snapshotÂ ofÂ it.Â Â CurrentÂ coolÂ stuff<br>
goingÂ inÂ includesÂ MMXÂ supportÂ (done);Â SSE/SSE2Â supportÂ (inÂ progress),<br>
aÂ significantÂ (10-20%)Â performanceÂ improvementÂ (done),Â andÂ theÂ usual<br>
largeÂ collectionÂ ofÂ minorÂ changes.Â Â HopefullyÂ weÂ willÂ beÂ ableÂ to<br>
improveÂ ourÂ NPTLÂ support,Â butÂ noÂ promises.<br>
<br>
<br>
Â Â Â Â </p></div>
</div>
<div>
<br><table class="nav" width="100%" cellspacing="3" cellpadding="2" border="0" summary="Navigation footer">
<tr>
<td rowspan="2" width="40%" align="left">
<a accesskey="p" href="dist.news.html">&lt;&lt;Â 2.Â NEWS</a>Â </td>
<td width="20%" align="center"><a accesskey="u" href="dist.html">Up</a></td>
<td rowspan="2" width="40%" align="right">Â <a accesskey="n" href="dist.readme.html">4.Â READMEÂ &gt;&gt;</a>
</td>
</tr>
<tr><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td></tr>
</table>
</div>
</body>
</html>
