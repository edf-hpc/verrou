<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>2.Â NEWS</title>
<link rel="stylesheet" type="text/css" href="vg_basic.css">
<meta name="generator" content="DocBook XSL Stylesheets V1.79.1">
<link rel="home" href="index.html" title="Valgrind Documentation">
<link rel="up" href="dist.html" title="Valgrind Distribution Documents">
<link rel="prev" href="dist.authors.html" title="1.Â AUTHORS">
<link rel="next" href="dist.news.old.html" title="3.Â OLDER NEWS">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div><table class="nav" width="100%" cellspacing="3" cellpadding="3" border="0" summary="Navigation header"><tr>
<td width="22px" align="center" valign="middle"><a accesskey="p" href="dist.authors.html"><img src="images/prev.png" width="18" height="21" border="0" alt="Prev"></a></td>
<td width="25px" align="center" valign="middle"><a accesskey="u" href="dist.html"><img src="images/up.png" width="21" height="18" border="0" alt="Up"></a></td>
<td width="31px" align="center" valign="middle"><a accesskey="h" href="index.html"><img src="images/home.png" width="27" height="20" border="0" alt="Up"></a></td>
<th align="center" valign="middle">Valgrind Distribution Documents</th>
<td width="22px" align="center" valign="middle"><a accesskey="n" href="dist.news.old.html"><img src="images/next.png" width="18" height="21" border="0" alt="Next"></a></td>
</tr></table></div>
<div class="chapter">
<div class="titlepage"><div><div><h1 class="title">
<a name="dist.news"></a>2.Â NEWS</h1></div></div></div>
<div class="literallayout"><p><br>
Â Â Â Â Â Â ReleaseÂ 3.20.0Â (24Â OctÂ 2022)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
<br>
ThisÂ releaseÂ supportsÂ X86/Linux,Â AMD64/Linux,Â ARM32/Linux,Â ARM64/Linux,<br>
PPC32/Linux,Â PPC64BE/Linux,Â PPC64LE/Linux,Â S390X/Linux,Â MIPS32/Linux,<br>
MIPS64/Linux,Â ARM/Android,Â ARM64/Android,Â MIPS32/Android,Â X86/Android,<br>
X86/Solaris,Â AMD64/Solaris,Â AMD64/MacOSXÂ 10.12,Â X86/FreeBSDÂ and<br>
AMD64/FreeBSD.Â Â ThereÂ isÂ alsoÂ preliminaryÂ supportÂ forÂ X86/macOSÂ 10.13,<br>
AMD64/macOSÂ 10.13Â andÂ nanoMIPS/Linux.<br>
<br>
*Â ====================Â COREÂ CHANGESÂ ===================<br>
<br>
*Â TheÂ optionÂ "--vgdb-stop-at=event1,event2,..."Â acceptsÂ theÂ newÂ valueÂ abexit.<br>
Â Â ThisÂ indicatesÂ toÂ invokeÂ gdbserverÂ whenÂ yourÂ programÂ exitsÂ abnormally<br>
Â Â (i.e.Â withÂ aÂ nonÂ zeroÂ exitÂ code).<br>
*Â FixÂ RustÂ v0Â nameÂ demangling.<br>
*Â TheÂ LinuxÂ rseqÂ syscallÂ isÂ nowÂ implementedÂ asÂ (silently)Â returningÂ ENOSYS.<br>
*Â AddÂ FreeBSDÂ syscallÂ wrappersÂ forÂ __specialfdÂ andÂ __realpathat.<br>
*Â RemoveÂ FreeBSDÂ dependenciesÂ onÂ COMPAT10,Â whichÂ fixesÂ compatibilityÂ with<br>
Â Â HardenedBSD<br>
*Â TheÂ optionÂ --enable-debuginfod=&lt;no|yes&gt;Â [default:Â yes]Â hasÂ beenÂ addedÂ on<br>
Â Â Linux.<br>
*Â MoreÂ DWARF5Â supportÂ asÂ generatedÂ byÂ clang14.<br>
<br>
*Â ====================Â FIXEDÂ BUGSÂ ====================<br>
<br>
TheÂ followingÂ bugsÂ haveÂ beenÂ fixedÂ orÂ resolved.Â Â NoteÂ thatÂ "n-i-bz"<br>
standsÂ forÂ "notÂ inÂ bugzilla"Â --Â thatÂ is,Â aÂ bugÂ thatÂ wasÂ reportedÂ toÂ us<br>
butÂ neverÂ gotÂ aÂ bugzillaÂ entry.Â Â WeÂ encourageÂ youÂ toÂ fileÂ bugsÂ in<br>
bugzillaÂ (https://bugs.kde.org/enter_bug.cgi?product=valgrind)Â rather<br>
thanÂ mailingÂ theÂ developersÂ (orÂ mailingÂ lists)Â directlyÂ --Â bugsÂ that<br>
areÂ notÂ enteredÂ intoÂ bugzillaÂ tendÂ toÂ getÂ forgottenÂ aboutÂ orÂ ignored.<br>
<br>
131186Â Â writevÂ reportsÂ errorÂ inÂ (vector[...])<br>
434764Â Â iconv_openÂ causesÂ ld.soÂ v2.28+Â toÂ useÂ optimisedÂ strncmp<br>
446754Â Â ImproveÂ errorÂ codesÂ fromÂ allocÂ functionsÂ underÂ memcheck<br>
452274Â Â memcheckÂ crashesÂ withÂ AssertionÂ 'sci-&gt;status.whatÂ ==Â SsIdle'Â failed<br>
452779Â Â ValgrindÂ failsÂ toÂ buildÂ onÂ FreeBSDÂ 13.0Â withÂ llvm-develÂ (15.0.0)<br>
453055Â Â shared_timed_mutexÂ drdÂ testÂ failsÂ withÂ "LockÂ sharedÂ failed"Â message<br>
453602Â Â MissingÂ commandÂ lineÂ optionÂ toÂ enable/disableÂ debuginfod<br>
452802Â Â HandleÂ lldÂ 9+Â splitÂ RWÂ PT_LOADÂ segmentsÂ correctly<br>
454040Â Â s390x:Â False-positiveÂ memcheck:condÂ inÂ memmemÂ onÂ arch13Â systemsÂ <br>
456171Â Â [PATCH]Â FreeBSD:Â Don'tÂ recordÂ addressÂ errorsÂ whenÂ accessingÂ theÂ 'kern.ps_strings'Â sysctlÂ struct<br>
n-i-bzÂ Â ImplementÂ vgdbÂ invokerÂ onÂ FreeBSD<br>
458845Â Â PowerPC:Â TheÂ LÂ fieldÂ forÂ theÂ dcbfÂ andÂ syncÂ instructionÂ shouldÂ be<br>
Â Â Â Â Â Â Â Â 3Â bitsÂ inÂ ISAÂ 3.1.<br>
458915Â Â RemoveÂ registerÂ cacheÂ toÂ fixÂ 458915Â gdbserverÂ causesÂ wrongÂ syscallÂ return<br>
459031Â Â DocumentationÂ onÂ --error-exitcodeÂ incomplete<br>
459477Â Â XERRORÂ messagesÂ lacksÂ endingÂ '\n'Â inÂ vgdb<br>
<br>
ToÂ seeÂ detailsÂ ofÂ aÂ givenÂ bug,Â visit<br>
Â Â https://bugs.kde.org/show_bug.cgi?id=XXXXXX<br>
whereÂ XXXXXXÂ isÂ theÂ bugÂ numberÂ asÂ listedÂ above.<br>
<br>
(3.20.0.RC1:Â 20Â OctÂ 2022)<br>
<br>
<br>
ReleaseÂ 3.19.0Â (11Â AprÂ 2022)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
<br>
ThisÂ releaseÂ supportsÂ X86/Linux,Â AMD64/Linux,Â ARM32/Linux,Â ARM64/Linux,<br>
PPC32/Linux,Â PPC64BE/Linux,Â PPC64LE/Linux,Â S390X/Linux,Â MIPS32/Linux,<br>
MIPS64/Linux,Â ARM/Android,Â ARM64/Android,Â MIPS32/Android,Â X86/Android,<br>
X86/Solaris,Â AMD64/Solaris,Â AMD64/MacOSXÂ 10.12,Â X86/FreeBSDÂ and<br>
AMD64/FreeBSD.Â Â ThereÂ isÂ alsoÂ preliminaryÂ supportÂ forÂ X86/macOSÂ 10.13,<br>
AMD64/macOSÂ 10.13Â andÂ nanoMIPS/Linux.<br>
<br>
*Â ====================Â COREÂ CHANGESÂ ===================<br>
<br>
*Â FixÂ RustÂ v0Â nameÂ demangling.<br>
*Â TheÂ LinuxÂ rseqÂ syscallÂ isÂ nowÂ implementedÂ asÂ (silently)Â returningÂ ENOSYS.<br>
*Â AddÂ FreeBSDÂ syscallÂ wrappersÂ forÂ __specialfdÂ andÂ __realpathat.<br>
*Â RemoveÂ FreeBSDÂ dependenciesÂ onÂ COMPAT10,Â whichÂ fixesÂ compatibilityÂ withÂ HardenedBSD<br>
<br>
*Â ==================Â PLATFORMÂ CHANGESÂ =================<br>
<br>
*Â arm64:<br>
Â Â -Â ignoreÂ theÂ "v8.x"Â architectureÂ levels,Â onlyÂ lookÂ atÂ actualÂ CPUÂ features<br>
Â Â Â Â present.Â FixesÂ mismatchÂ detectedÂ betweenÂ RDMAÂ andÂ atomicsÂ features<br>
Â Â Â Â preventingÂ startupÂ onÂ someÂ QEMUÂ configurations.<br>
Â Â -Â ImplementÂ LD{,A}XPÂ andÂ ST{,L}XP<br>
Â Â -Â FixÂ incorrectÂ codeÂ emittedÂ forÂ doublewordÂ CAS.<br>
<br>
*Â s390:<br>
Â Â -Â FixÂ sys_ipcÂ semtimedopÂ syscall<br>
Â Â -Â FixÂ VFLRXÂ andÂ WFLRXÂ instructions<br>
Â Â -Â FixÂ EXRLÂ instructionÂ withÂ negativeÂ offset<br>
<br>
*Â ppc64:<br>
Â Â -Â ReimplementÂ theÂ vbpermqÂ instructionÂ supportÂ toÂ generateÂ lessÂ IopsÂ and<br>
Â Â Â Â avoidÂ overflowingÂ internalÂ buffers.<br>
Â Â -Â FixÂ checkingÂ forÂ scvÂ supportÂ toÂ avoidÂ "FacilityÂ 'SCV'Â unavailableÂ (12),<br>
Â Â Â Â exception"Â messagesÂ inÂ dmsg.<br>
Â Â -Â FixÂ settingÂ conditionÂ codeÂ forÂ VectorÂ CompareÂ quadÂ wordÂ instructions.<br>
Â Â -Â FixÂ fixÂ lxsibzx,Â lxsihzxÂ andÂ lxsihzxÂ instructionsÂ soÂ theyÂ onlyÂ load<br>
Â Â Â Â theirÂ respectiveÂ sizedÂ data.<br>
Â Â -Â FixÂ theÂ prefixedÂ stqÂ instructionÂ inÂ PCÂ relativeÂ mode.<br>
<br>
*Â ====================Â TOOLÂ CHANGESÂ ===================<br>
<br>
*Â Memcheck:<br>
Â Â -Â SpeedÂ upÂ --track-origins=yesÂ forÂ largeÂ (inÂ theÂ rangeÂ ofÂ hundredsÂ to<br>
Â Â Â Â thousandsÂ ofÂ megabytes)Â mmap/munmaps.<br>
*Â DRD/Helgrind:<br>
Â Â -Â SeveralÂ fixesÂ forÂ newÂ versionsÂ ofÂ libstd++Â usingÂ newÂ posixÂ try_lock<br>
Â Â Â Â functions<br>
<br>
*Â ====================Â FIXEDÂ BUGSÂ ====================<br>
<br>
TheÂ followingÂ bugsÂ haveÂ beenÂ fixedÂ orÂ resolved.Â Â NoteÂ thatÂ "n-i-bz"<br>
standsÂ forÂ "notÂ inÂ bugzilla"Â --Â thatÂ is,Â aÂ bugÂ thatÂ wasÂ reportedÂ toÂ us<br>
butÂ neverÂ gotÂ aÂ bugzillaÂ entry.Â Â WeÂ encourageÂ youÂ toÂ fileÂ bugsÂ in<br>
bugzillaÂ (https://bugs.kde.org/enter_bug.cgi?product=valgrind)Â rather<br>
thanÂ mailingÂ theÂ developersÂ (orÂ mailingÂ lists)Â directlyÂ --Â bugsÂ that<br>
areÂ notÂ enteredÂ intoÂ bugzillaÂ tendÂ toÂ getÂ forgottenÂ aboutÂ orÂ ignored.<br>
<br>
403802Â Â leak_cpp_interiorÂ failsÂ withÂ someÂ reachableÂ blocksÂ differentÂ thanÂ expected<br>
435732Â Â memcheck/tests/leak_cpp_interiorÂ failsÂ withÂ gcc11<br>
444242Â Â s390x:Â ValgrindÂ crashesÂ onÂ EXRLÂ withÂ negativeÂ offset<br>
444399Â Â arm64:Â unhandledÂ instructionÂ 0xC87F2D89Â (LD{,A}XPÂ andÂ ST{,L}XP).<br>
Â Â Â Â Â Â Â Â ==Â 434283<br>
444481Â Â gdb_serverÂ testÂ failuresÂ onÂ s390x<br>
444495Â Â dhat/tests/copyÂ failsÂ onÂ s390x<br>
444552Â Â memcheck/tests/semÂ failsÂ onÂ s390xÂ withÂ glibcÂ 2.34<br>
444571Â Â PPC,Â fixÂ theÂ lxsibzxÂ andÂ lxsihzxÂ soÂ theyÂ onlyÂ loadÂ theirÂ respective<br>
Â Â Â Â Â Â Â Â sizedÂ data.<br>
444836Â Â PPC,Â pstqÂ instructionÂ forÂ R=1Â isÂ notÂ storingÂ toÂ theÂ correctÂ address.<br>
444925Â Â fexecveÂ syscallÂ wrapperÂ notÂ properlyÂ implemented<br>
445032Â Â valgrind/memcheckÂ crashÂ withÂ SIGSEGVÂ whenÂ SIGVTALRMÂ timerÂ usedÂ and<br>
Â Â Â Â Â Â Â Â libthr.soÂ associated<br>
445211Â Â FixÂ outÂ ofÂ treeÂ builds<br>
445300Â Â [PATCH]Â FixÂ buildingÂ testsÂ withÂ Musl<br>
445011Â Â SIGCHLDÂ isÂ sentÂ whenÂ valgrindÂ usesÂ debuginfod-find<br>
445354Â Â arm64Â backend:Â incorrectÂ codeÂ emittedÂ forÂ doublewordÂ CAS<br>
445415Â Â arm64Â frontÂ end:Â alignmentÂ checksÂ missingÂ forÂ atomicÂ instructions<br>
445504Â Â UsingÂ C++Â condition_variableÂ resultsÂ inÂ bogusÂ "mutexÂ isÂ lockedÂ simultaneouslyÂ byÂ twoÂ threads"Â warning<br>
445607Â Â UnhandledÂ amd64-freebsdÂ syscall:Â 247<br>
445668Â Â InlineÂ stackÂ frameÂ generationÂ isÂ brokenÂ forÂ RustÂ binaries<br>
445916Â Â DemangleÂ RustÂ v0Â symbolsÂ withÂ .llvmÂ suffix<br>
446139Â Â DRD/HelgrindÂ withÂ std::shared_timed_mutex::try_lock_untilÂ andÂ try_lock_shared_untilÂ falseÂ positives<br>
446138Â Â DRD/HelgrindÂ withÂ std::timed_mutex::try_lock_untilÂ falseÂ positives<br>
446281Â Â AddÂ aÂ DRDÂ suppressionÂ forÂ fwrite<br>
446103Â Â Memcheck:Â `--track-origins=yes`Â causesÂ extremeÂ slowdownsÂ forÂ largeÂ mmap/munmap<br>
446139Â Â DRD/HelgrindÂ withÂ std::shared_timed_mutex::try_lock_untilÂ andÂ try_lock_shared_untilÂ false<br>
446251Â Â TARGET_SIGNAL_THRÂ addedÂ toÂ enumÂ target_signal<br>
446823Â Â FreeBSDÂ -Â missingÂ syscallsÂ whenÂ usingÂ libzm4<br>
447991Â Â s390x:Â ValgrindÂ indicatesÂ illegalÂ instructionÂ onÂ wflrx<br>
447995Â Â ValgrindÂ segfaultÂ onÂ power10Â dueÂ toÂ hwcapÂ checkingÂ code<br>
449483Â Â Powerpc:Â vcmpgtsq.,Â vcmpgtuq,,Â vcmpequq.Â instructionsÂ notÂ settingÂ the<br>
Â Â Â Â Â Â Â Â conditionÂ codeÂ correctly.<br>
449672Â Â ppc64Â --track-origins=yesÂ failuresÂ becauseÂ ofÂ badÂ cmovÂ addHRegUse<br>
449838Â Â sigsegvÂ liburingÂ theÂ 'impossible'Â happenedÂ forÂ io_uring_setup<br>
450025Â Â Powerc:Â ACCÂ fileÂ notÂ implementedÂ asÂ aÂ logicalÂ overlayÂ ofÂ theÂ VSR<br>
Â Â Â Â Â Â Â Â registers.<br>
450437Â Â WarnÂ forÂ execveÂ syscallÂ withÂ argvÂ orÂ argv[0]Â beingÂ NULL<br>
450536Â Â Powerpc:Â valgrindÂ throwsÂ 'facilityÂ scvÂ unavailableÂ exception'<br>
451626Â Â SyscallÂ paramÂ bpf(attr-&gt;raw_tracepoint.name)Â pointsÂ toÂ unaddressableÂ byte(s)<br>
451827Â Â [ppc64le]Â VEXÂ temporaryÂ storageÂ exhaustedÂ withÂ severalÂ vbpermqÂ instructions<br>
451843Â Â valgrindÂ failsÂ toÂ startÂ onÂ aÂ FreeBSDÂ systemÂ whichÂ enforcesÂ W^X<br>
<br>
ToÂ seeÂ detailsÂ ofÂ aÂ givenÂ bug,Â visit<br>
Â Â https://bugs.kde.org/show_bug.cgi?id=XXXXXX<br>
whereÂ XXXXXXÂ isÂ theÂ bugÂ numberÂ asÂ listedÂ above.<br>
<br>
(3.19.0.RC1:Â 02Â AprÂ 2022)<br>
(3.19.0.RC2:Â 08Â AprÂ 2022)<br>
<br>
<br>
ReleaseÂ 3.18.0Â (15Â OctÂ 2021)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
<br>
ThisÂ releaseÂ supportsÂ X86/Linux,Â AMD64/Linux,Â ARM32/Linux,Â ARM64/Linux,<br>
PPC32/Linux,Â PPC64BE/Linux,Â PPC64LE/Linux,Â S390X/Linux,Â MIPS32/Linux,<br>
MIPS64/Linux,Â ARM/Android,Â ARM64/Android,Â MIPS32/Android,Â X86/Android,<br>
X86/Solaris,Â AMD64/Solaris,Â AMD64/MacOSXÂ 10.12,Â X86/FreeBSDÂ and<br>
AMD64/FreeBSD.Â Â ThereÂ isÂ alsoÂ preliminaryÂ supportÂ forÂ X86/macOSÂ 10.13,<br>
AMD64/macOSÂ 10.13Â andÂ nanoMIPS/Linux.<br>
<br>
*Â ====================Â COREÂ CHANGESÂ ===================<br>
<br>
*Â TheÂ libibertyÂ demanglerÂ hasÂ beenÂ updated,Â whichÂ bringsÂ supportÂ for<br>
Â Â RustÂ v0Â nameÂ demangling.Â [Update:Â alas,Â dueÂ toÂ aÂ bug,Â thisÂ support<br>
Â Â isn'tÂ workingÂ inÂ 3.18.0.]<br>
<br>
*Â __libc_freeresÂ isn'tÂ calledÂ anymoreÂ afterÂ theÂ programÂ recievesÂ a<br>
Â Â fatalÂ signal.Â CausingÂ someÂ internalÂ glibcÂ resourcesÂ toÂ hangÂ around,<br>
Â Â butÂ preventingÂ anyÂ crashesÂ afterÂ theÂ programÂ hasÂ ended.<br>
<br>
*Â TheÂ DWARFÂ readerÂ isÂ nowÂ veryÂ muchÂ fasterÂ atÂ startupÂ whenÂ just<br>
Â Â --read-inline-info=yesÂ (theÂ defaultÂ inÂ mostÂ cases)Â isÂ given.<br>
<br>
*Â glibcÂ 2.34,Â whichÂ movedÂ variousÂ functionsÂ fromÂ libpthread.soÂ into<br>
Â Â libc.so,Â isÂ nowÂ supported.<br>
<br>
*Â ==================Â PLATFORMÂ CHANGESÂ =================<br>
<br>
*Â arm64:<br>
<br>
Â Â -Â v8.2Â scalarÂ andÂ vectorÂ FABD,Â FACGE,Â FACGTÂ andÂ FADD.<br>
Â Â -Â v8.2Â FPÂ compareÂ &amp;Â conditionalÂ compareÂ instructions.<br>
Â Â -Â ZeroÂ variantsÂ ofÂ v8.2Â FPÂ compareÂ instructions.<br>
<br>
*Â s390:<br>
<br>
Â Â -Â SupportÂ theÂ miscellaneous-instruction-extensionsÂ facilityÂ 3Â and<br>
Â Â Â Â theÂ vector-enhancementsÂ facilityÂ 2.Â Â ThisÂ enablesÂ programs<br>
Â Â Â Â compiledÂ withÂ "-march=arch13"Â orÂ "-march=z15"Â toÂ beÂ executed<br>
Â Â Â Â underÂ Valgrind.<br>
<br>
*Â ppc64:<br>
<br>
Â Â -Â ISAÂ 3.1Â supportÂ isÂ nowÂ complete<br>
Â Â -Â ISAÂ 3.0Â supportÂ forÂ theÂ darnÂ instructionÂ added.<br>
Â Â -Â ISAÂ 3.0Â supportÂ forÂ theÂ vectorÂ systemÂ callÂ instructionÂ scvÂ added.<br>
Â Â -Â ISAÂ 3.0Â supportÂ forÂ theÂ copy,Â pasteÂ andÂ cpabortÂ instructionsÂ added.<br>
Â <br>
*Â SupportÂ forÂ X86/FreeBSDÂ andÂ AMD64/FreeBSDÂ hasÂ beenÂ added.<br>
<br>
*Â ====================Â OTHERÂ CHANGESÂ ====================<br>
<br>
*Â MemcheckÂ onÂ amd64:Â minorÂ fixesÂ toÂ removeÂ someÂ falseÂ positive<br>
Â Â undef-valueÂ errors<br>
<br>
*Â ====================Â FIXEDÂ BUGSÂ ====================<br>
<br>
TheÂ followingÂ bugsÂ haveÂ beenÂ fixedÂ orÂ resolved.Â Â NoteÂ thatÂ "n-i-bz"<br>
standsÂ forÂ "notÂ inÂ bugzilla"Â --Â thatÂ is,Â aÂ bugÂ thatÂ wasÂ reportedÂ toÂ us<br>
butÂ neverÂ gotÂ aÂ bugzillaÂ entry.Â Â WeÂ encourageÂ youÂ toÂ fileÂ bugsÂ in<br>
bugzillaÂ (https://bugs.kde.org/enter_bug.cgi?product=valgrind)Â rather<br>
thanÂ mailingÂ theÂ developersÂ (orÂ mailingÂ lists)Â directlyÂ --Â bugsÂ that<br>
areÂ notÂ enteredÂ intoÂ bugzillaÂ tendÂ toÂ getÂ forgottenÂ aboutÂ orÂ ignored.<br>
<br>
208531Â Â [PATCH]:Â FreeBSDÂ supportÂ forÂ valgrind<br>
368960Â Â WARNING:Â unhandledÂ amd64-linuxÂ syscall:Â 163Â (acct)<br>
407589Â Â [Linux]Â AddÂ supportÂ forÂ C11Â aligned_alloc()Â andÂ GNUÂ reallocarray()<br>
423963Â Â ErrorÂ inÂ childÂ threadÂ whenÂ CLONE_PIDFDÂ isÂ used<br>
426148Â Â crashÂ withÂ "impossibleÂ happened"Â whenÂ runningÂ BPFÂ CO-REÂ programs<br>
429375Â Â PPCÂ ISAÂ 3.1Â supportÂ isÂ missing,Â partÂ 9<br>
431157Â Â PPC_FEATURE2_SCVÂ needsÂ toÂ beÂ maskedÂ inÂ AT_HWCAP2<br>
431306Â Â UpdateÂ demanglerÂ toÂ supportÂ RustÂ v0Â nameÂ mangling<br>
432387Â Â s390x:Â z15Â instructionsÂ support<br>
433437Â Â FreeBSDÂ support,Â partÂ 1<br>
433438Â Â FreeBSDÂ support,Â partÂ 2<br>
433439Â Â FreeBSDÂ support,Â partÂ 3<br>
433469Â Â FreeBSDÂ support,Â partÂ 4<br>
433473Â Â FreeBSDÂ support,Â partÂ 5<br>
433477Â Â FreeBSDÂ support,Â partÂ 6<br>
433479Â Â FreeBSDÂ support,Â partÂ 7<br>
433504Â Â FreeBSDÂ support,Â partÂ 8<br>
433506Â Â FreeBSDÂ support,Â partÂ 9<br>
433507Â Â FreeBSDÂ support,Â partÂ 10<br>
433508Â Â FreeBSDÂ support,Â partÂ 11<br>
433510Â Â FreeBSDÂ support,Â partÂ 12<br>
433801Â Â PPCÂ ISAÂ 3.1Â supportÂ isÂ missing,Â partÂ 10Â (ISAÂ 3.1Â supportÂ complete)<br>
433863Â Â s390x:Â memcheck/tests/s390x/{cds,cs,csg}Â failures<br>
434296Â Â s390x:Â False-positiveÂ memcheckÂ diagnosticsÂ fromÂ vectorÂ string<br>
Â Â Â Â Â Â Â Â instructions<br>
434840Â Â PPC64Â darnÂ instructionÂ notÂ supported<br>
435665Â Â PPCÂ ISAÂ 3.0Â copy,Â paste,Â cpabortÂ instructionsÂ areÂ notÂ supportedÂ <br>
435908Â Â valgrindÂ triesÂ toÂ fetchÂ fromÂ deubginfodÂ forÂ filesÂ whichÂ already<br>
Â Â Â Â Â Â Â Â haveÂ debugÂ information<br>
438871Â Â unhandledÂ instructionÂ bytes:Â 0xF3Â 0x49Â 0xFÂ 0x6FÂ 0x9CÂ 0x24Â 0x60Â 0x2<br>
439046Â Â valgrindÂ isÂ unusablyÂ largeÂ whenÂ linkedÂ withÂ lld<br>
439090Â Â ImplementÂ close_range(2)<br>
439326Â Â ValgrindÂ 3.17.0Â won'tÂ compileÂ withÂ IntelÂ 2021Â oneAPIÂ compilers<br>
439590Â Â glibc-2.34Â breaksÂ suppressionsÂ againstÂ obj:*/lib*/libc-2.*so*<br>
440670Â Â unhandledÂ ppc64le-linuxÂ syscall:Â 252Â statfs64Â andÂ 253Â fstatfs64<br>
440906Â Â FixÂ impossibleÂ constraintÂ issueÂ inÂ P10Â testcase.<br>
441512Â Â RemoveÂ aÂ unneededÂ /Â unnecessaryÂ prefixÂ check.<br>
441534Â Â UpdateÂ theÂ expectedÂ outputÂ forÂ test_isa_3_1_VRT.<br>
442061Â Â veryÂ slowÂ executionÂ underÂ FedoraÂ 34Â (readdwarf3)<br>
443031Â Â GccÂ -manyÂ changeÂ requiresÂ explicitÂ .machineÂ directives<br>
443033Â Â AddÂ supportÂ forÂ theÂ ISAÂ 3.0Â mcrxrxÂ instruction<br>
443034Â Â Sraw,Â srawi,Â srad,Â sradi,Â mfs<br>
443178Â Â Powerpc,Â testÂ jm-mfsprÂ expectedÂ outputÂ needsÂ toÂ beÂ updated.<br>
443179Â Â NeedÂ newÂ testÂ forÂ theÂ lxvxÂ andÂ stxvxÂ instructionsÂ onÂ ISAÂ 2.07Â and<br>
Â Â Â Â Â Â Â Â ISAÂ 3.0Â systems.<br>
443180Â Â TheÂ subnormalÂ testÂ andÂ theÂ ISAÂ 3.0Â testÂ generateÂ compilerÂ warnings<br>
443314Â Â InÂ theÂ latestÂ GITÂ version,Â ValgrindÂ withÂ "--trace-flags"Â crashes<br>
Â Â Â Â Â Â Â Â atÂ "al"Â register<br>
443605Â Â Don'tÂ callÂ final_tidyupÂ (__libc_freeres)Â onÂ FatalSignal<br>
<br>
ToÂ seeÂ detailsÂ ofÂ aÂ givenÂ bug,Â visit<br>
Â Â https://bugs.kde.org/show_bug.cgi?id=XXXXXX<br>
whereÂ XXXXXXÂ isÂ theÂ bugÂ numberÂ asÂ listedÂ below.<br>
<br>
(3.18.0.RC1:Â 12Â OctÂ 2021)<br>
(3.18.0:Â Â Â Â Â 15Â OctÂ 2021)<br>
<br>
<br>
<br>
ReleaseÂ 3.17.0Â (19Â MarÂ 2021)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
<br>
3.17.0Â fixesÂ aÂ numberÂ ofÂ bugsÂ andÂ addsÂ someÂ functionalÂ changes:Â supportÂ for<br>
GCCÂ 11,Â ClangÂ 11,Â DWARF5Â debuginfo,Â theÂ 'debuginfod'Â debuginfoÂ server,Â and<br>
someÂ newÂ instructionsÂ forÂ Arm64,Â S390Â andÂ POWER.Â Â ThereÂ areÂ alsoÂ someÂ tool<br>
updates.<br>
<br>
ThisÂ releaseÂ supportsÂ X86/Linux,Â AMD64/Linux,Â ARM32/Linux,Â ARM64/Linux,<br>
PPC32/Linux,Â PPC64BE/Linux,Â PPC64LE/Linux,Â S390X/Linux,Â MIPS32/Linux,<br>
MIPS64/Linux,Â ARM/Android,Â ARM64/Android,Â MIPS32/Android,Â X86/Android,<br>
X86/Solaris,Â AMD64/SolarisÂ andÂ AMD64/MacOSXÂ 10.12.Â Â ThereÂ isÂ alsoÂ preliminary<br>
supportÂ forÂ X86/macOSÂ 10.13,Â AMD64/macOSÂ 10.13Â andÂ nanoMIPS/Linux.<br>
<br>
*Â ====================Â COREÂ CHANGESÂ ===================<br>
<br>
*Â DWARFÂ versionÂ 5Â support.Â Â ValgrindÂ canÂ nowÂ readÂ DWARFÂ versionÂ 5Â debuginfoÂ as<br>
Â Â producedÂ byÂ GCCÂ 11.<br>
<br>
*Â ValgrindÂ nowÂ supportsÂ debuginfod,Â anÂ HTTPÂ serverÂ forÂ distributingÂ ELF/DWARF<br>
Â Â debuggingÂ information.Â WhenÂ aÂ debuginfoÂ fileÂ cannotÂ beÂ foundÂ locally,<br>
Â Â ValgrindÂ isÂ ableÂ toÂ queryÂ debuginfodÂ serversÂ forÂ theÂ fileÂ usingÂ its<br>
Â Â build-id.Â SeeÂ theÂ userÂ manualÂ forÂ moreÂ informationÂ aboutÂ debuginfodÂ support.<br>
<br>
*Â ==================Â PLATFORMÂ CHANGESÂ =================<br>
<br>
*Â arm64:<br>
<br>
Â Â -Â InaccuraciesÂ resultingÂ fromÂ double-roundingÂ inÂ theÂ simulationÂ of<br>
Â Â Â Â floating-pointÂ multiply-add/subtractÂ instructionsÂ haveÂ beenÂ fixed.Â Â These<br>
Â Â Â Â shouldÂ nowÂ behaveÂ exactlyÂ asÂ theÂ hardwareÂ does.<br>
<br>
Â Â -Â PartialÂ supportÂ forÂ theÂ ARMÂ v8.2Â instructionÂ set.Â Â v8.2Â supportÂ workÂ is<br>
Â Â Â Â ongoing.Â Â SupportÂ forÂ theÂ half-wordÂ variantsÂ ofÂ atÂ leastÂ theÂ following<br>
Â Â Â Â instructionsÂ hasÂ beenÂ added:<br>
Â Â Â Â Â Â Â FABSÂ &lt;Hd&gt;,Â &lt;Hn&gt;<br>
Â Â Â Â Â Â Â FABSÂ &lt;Vd&gt;.&lt;T&gt;,Â &lt;Vn&gt;.&lt;T&gt;<br>
Â Â Â Â Â Â Â FNEGÂ &lt;Hd&gt;,Â &lt;Hn&gt;<br>
Â Â Â Â Â Â Â FNEGÂ &lt;Vd&gt;.&lt;T&gt;,Â &lt;Vn&gt;.&lt;T&gt;<br>
Â Â Â Â Â Â Â FSQRTÂ &lt;Hd&gt;,Â &lt;Hn&gt;<br>
Â Â Â Â Â Â Â FSQRTÂ &lt;Vd&gt;.&lt;T&gt;,Â &lt;Vn&gt;.&lt;T&gt;<br>
Â Â Â Â Â Â Â FADDP<br>
<br>
*Â s390:<br>
<br>
Â Â -Â ImplementÂ theÂ newÂ instructions/featuresÂ thatÂ wereÂ addedÂ toÂ z/Architecture<br>
Â Â Â Â withÂ theÂ vector-enhancementsÂ facilityÂ 1.Â Â AlsoÂ coverÂ theÂ instructionsÂ from<br>
Â Â Â Â theÂ vector-packed-decimalÂ facilityÂ thatÂ areÂ definedÂ outsideÂ theÂ chapter<br>
Â Â Â Â "VectorÂ DecimalÂ Instructions",Â butÂ notÂ theÂ onesÂ fromÂ thatÂ chapterÂ itself.<br>
<br>
Â Â Â Â ForÂ aÂ detailedÂ listÂ ofÂ newlyÂ supportedÂ instructionsÂ seeÂ theÂ updatesÂ to<br>
Â Â Â Â `docs/internals/s390-opcodes.csv'.<br>
<br>
Â Â Â Â SinceÂ theÂ miscellaneousÂ instructionÂ extensionsÂ facilityÂ 2Â wasÂ already<br>
Â Â Â Â addedÂ inÂ ValgrindÂ 3.16.0,Â thisÂ completesÂ theÂ supportÂ necessaryÂ toÂ run<br>
Â Â Â Â generalÂ programsÂ builtÂ withÂ `--march=z14'Â underÂ Valgrind.Â Â The<br>
Â Â Â Â vector-packed-decimalÂ facilityÂ isÂ currentlyÂ notÂ exploitedÂ byÂ theÂ standard<br>
Â Â Â Â toolchainÂ andÂ libraries.<br>
<br>
*Â ppc64:<br>
<br>
Â Â -Â VariousÂ bugÂ fixes.Â Â FixÂ forÂ theÂ syncÂ fieldÂ toÂ limitÂ settingÂ justÂ twoÂ of<br>
Â Â Â Â theÂ twoÂ bitsÂ inÂ theÂ L-field.Â FixÂ theÂ writeÂ sizeÂ forÂ theÂ stxsibxÂ and<br>
Â Â Â Â stxsihxÂ instructions.Â Â FixÂ theÂ modswÂ andÂ modsdÂ instructions.<br>
<br>
Â Â -Â PartialÂ supportÂ forÂ ISAÂ 3.1Â hasÂ beenÂ added.Â Â SupportÂ forÂ theÂ VSXÂ PCVÂ mask<br>
Â Â Â Â instructions,Â bfloat16Â GERÂ instructions,Â andÂ bfloat16Â to/fromÂ floatÂ 32-bit<br>
Â Â Â Â conversionÂ instructionsÂ areÂ stillÂ missing.<br>
<br>
*Â ====================Â TOOLÂ CHANGESÂ ====================<br>
<br>
*Â GeneralÂ toolÂ changes<br>
<br>
Â Â -Â AllÂ theÂ toolsÂ andÂ theirÂ vgpreloadÂ librariesÂ areÂ nowÂ installedÂ under<br>
Â Â Â Â libexecÂ becauseÂ theyÂ cannotÂ beÂ executedÂ directlyÂ andÂ shouldÂ beÂ runÂ through<br>
Â Â Â Â theÂ valgrindÂ executable.Â ThisÂ shouldÂ beÂ anÂ internal,Â notÂ userÂ visible,<br>
Â Â Â Â change,Â butÂ mightÂ impactÂ valgrindÂ packagers.<br>
<br>
Â Â -Â TheÂ --track-fdsÂ optionÂ nowÂ respectsÂ -q,Â --quietÂ andÂ won'tÂ outputÂ anything<br>
Â Â Â Â ifÂ noÂ fileÂ descriptorsÂ areÂ leaked.Â ItÂ alsoÂ won'tÂ reportÂ theÂ standardÂ stdin<br>
Â Â Â Â (0),Â stdoutÂ (1)Â orÂ stderrÂ (2)Â descriptorsÂ asÂ beingÂ leakedÂ with<br>
Â Â Â Â --trace-fds=yesÂ anymore.Â ToÂ trackÂ whetherÂ theÂ standardÂ fileÂ descriptors<br>
Â Â Â Â areÂ stillÂ openÂ atÂ theÂ endÂ ofÂ theÂ programÂ runÂ useÂ --trace-fds=all.<br>
<br>
*Â DHAT:<br>
<br>
Â Â -Â DHATÂ hasÂ beenÂ extended,Â withÂ twoÂ newÂ modesÂ ofÂ operation.Â TheÂ new<br>
Â Â Â Â --mode=copyÂ flagÂ triggersÂ copyÂ profiling,Â whichÂ recordsÂ callsÂ toÂ memcpy,<br>
Â Â Â Â strcpy,Â andÂ similarÂ functions.Â TheÂ newÂ --mode=ad-hocÂ flagÂ triggersÂ adÂ hoc<br>
Â Â Â Â profiling,Â whichÂ recordsÂ callsÂ toÂ theÂ DHAT_AD_HOC_EVENTÂ clientÂ requestÂ in<br>
Â Â Â Â theÂ newÂ dhat/dhat.hÂ file.Â ThisÂ isÂ usefulÂ forÂ learningÂ moreÂ aboutÂ hotÂ code<br>
Â Â Â Â paths.Â SeeÂ theÂ userÂ manualÂ forÂ moreÂ informationÂ aboutÂ theÂ newÂ modes.<br>
<br>
Â Â -Â BecauseÂ ofÂ theseÂ changes,Â DHAT'sÂ fileÂ formatÂ hasÂ changed.Â DHATÂ output<br>
Â Â Â Â filesÂ producedÂ withÂ earlierÂ versionsÂ ofÂ DHATÂ willÂ notÂ workÂ withÂ this<br>
Â Â Â Â versionÂ ofÂ DHAT'sÂ viewer,Â andÂ DHATÂ outputÂ filesÂ producedÂ withÂ thisÂ version<br>
Â Â Â Â ofÂ DHATÂ willÂ notÂ workÂ withÂ earlierÂ versionsÂ ofÂ DHAT'sÂ viewer.<br>
<br>
*Â ====================Â FIXEDÂ BUGSÂ ====================<br>
<br>
TheÂ followingÂ bugsÂ haveÂ beenÂ fixedÂ orÂ resolved.Â Â NoteÂ thatÂ "n-i-bz"<br>
standsÂ forÂ "notÂ inÂ bugzilla"Â --Â thatÂ is,Â aÂ bugÂ thatÂ wasÂ reportedÂ toÂ us<br>
butÂ neverÂ gotÂ aÂ bugzillaÂ entry.Â Â WeÂ encourageÂ youÂ toÂ fileÂ bugsÂ in<br>
bugzillaÂ (https://bugs.kde.org/enter_bug.cgi?product=valgrind)Â rather<br>
thanÂ mailingÂ theÂ developersÂ (orÂ mailingÂ lists)Â directlyÂ --Â bugsÂ that<br>
areÂ notÂ enteredÂ intoÂ bugzillaÂ tendÂ toÂ getÂ forgottenÂ aboutÂ orÂ ignored.<br>
<br>
ToÂ seeÂ detailsÂ ofÂ aÂ givenÂ bug,Â visit<br>
Â Â https://bugs.kde.org/show_bug.cgi?id=XXXXXX<br>
whereÂ XXXXXXÂ isÂ theÂ bugÂ numberÂ asÂ listedÂ below.<br>
<br>
140178Â Â open("/proc/self/exe",Â ...);Â doesn'tÂ quiteÂ work<br>
140939Â --track-fdsÂ reportsÂ leakageÂ ofÂ stdout/in/errÂ andÂ doesn'tÂ respectÂ -q<br>
217695Â Â malloc/calloc/realloc/memalignÂ failureÂ doesn'tÂ setÂ errnoÂ toÂ ENOMEM<br>
338633Â Â gdbserver_tests/nlcontrolc.vgtestÂ hangsÂ onÂ arm64<br>
345077Â Â linuxÂ syscallÂ execveatÂ supportÂ (linuxÂ 3.19)<br>
361770Â Â MissingÂ F_ADD_SEALS<br>
369029Â Â handleÂ linuxÂ syscallsÂ sched_getattrÂ andÂ sched_setattr<br>
384729Â Â __libc_freeresÂ inhibitsÂ cross-platformÂ valgrind<br>
388787Â Â SupportÂ forÂ C++17Â new/delete<br>
391853Â Â Makefile.all.am:L247Â andÂ @SOLARIS_UNDEF_LARGESOURCE@Â beingÂ empty<br>
396656Â Â WarningsÂ whileÂ readingÂ debugÂ info<br>
397605Â Â ioctlÂ FICLONEÂ mishandled<br>
401416Â Â CompileÂ failureÂ withÂ openmpiÂ 4.0<br>
408663Â Â SuppressionÂ fileÂ forÂ muslÂ libc<br>
404076Â Â s390x:Â z14Â vectorÂ instructionsÂ notÂ implemented<br>
410743Â Â shmat()Â callsÂ forÂ 32-bitÂ programsÂ failÂ whenÂ runningÂ inÂ 64-bitÂ valgrind<br>
Â Â Â Â Â Â Â Â (actuallyÂ affectedÂ allÂ x86Â andÂ nanomipsÂ regardlessÂ ofÂ hostÂ bitness)<br>
413547Â Â regressionÂ testÂ doesÂ notÂ checkÂ forÂ ArmÂ 64Â features.<br>
414268Â Â EnableÂ AArch64Â featureÂ detectionÂ andÂ decodingÂ forÂ v8.xÂ instructions<br>
415293Â Â IncorrectÂ call-graphÂ trackingÂ dueÂ toÂ newÂ _dl_runtime_resolve_xsave*<br>
422174Â Â unhandledÂ instructionÂ bytes:Â 0x48Â 0xE9Â (REXÂ prefixedÂ JMPÂ instruction)<br>
422261Â Â platformÂ selectionÂ failsÂ forÂ unqualifiedÂ clientÂ name<br>
422623Â Â epoll_ctlÂ warnsÂ forÂ uninitializedÂ paddingÂ onÂ non-amd64Â 64bitÂ arches<br>
423021Â Â PPC:Â Â AddÂ missingÂ ISAÂ 3.0Â documentationÂ linkÂ andÂ HWCAPSÂ test.<br>
423195Â Â PPCÂ ISAÂ 3.1Â supportÂ isÂ missing,Â partÂ 1<br>
423361Â Â AddsÂ io_uringÂ supportÂ onÂ arm64/aarch64Â (andÂ allÂ otherÂ arches)<br>
424012Â Â crashÂ withÂ readv/writevÂ havingÂ invalidÂ butÂ notÂ NULLÂ arg2Â iovec<br>
424298Â Â amd64:Â ImplementÂ RDSEED<br>
425232Â Â PPCÂ ISAÂ 3.1Â supportÂ isÂ missing,Â partÂ 2<br>
425820Â Â FailureÂ toÂ recognizeÂ vpcmpeqqÂ asÂ aÂ dependencyÂ breakingÂ idiom.<br>
426014Â Â arm64:Â implementÂ fmaddÂ andÂ fmsubÂ asÂ Iop_MAdd/Sub<br>
426123Â Â PPCÂ ISAÂ 3.1Â supportÂ isÂ missing,Â partÂ 3<br>
426144Â Â FixÂ "conditionÂ variableÂ hasÂ notÂ beenÂ initialized"Â onÂ FedoraÂ 33.<br>
427400Â Â PPCÂ ISAÂ 3.1Â supportÂ isÂ missing,Â partÂ 4<br>
427401Â Â PPCÂ ISAÂ 3.1Â supportÂ isÂ missing,Â partÂ 5<br>
427404Â Â PPCÂ ISAÂ 3.1Â supportÂ isÂ missing,Â partÂ 6<br>
427870Â Â lmw,Â lswiÂ andÂ relatedÂ PowerPCÂ insnsÂ aren'tÂ allowedÂ onÂ ppc64le<br>
427787Â Â SupportÂ newÂ faccessat2Â linuxÂ syscallÂ (439)<br>
427969Â Â debuginfoÂ sectionÂ duplicatesÂ aÂ sectionÂ inÂ theÂ mainÂ ELFÂ file<br>
428035Â Â drd:Â UnbreakÂ theÂ muslÂ build<br>
428648Â Â s390_emit_load_memÂ panicsÂ dueÂ toÂ 20-bitÂ offsetÂ forÂ vectorÂ load<br>
428716Â Â cppcheckÂ detectsÂ potentialÂ leakÂ inÂ VEX/useful/smchash.c<br>
428909Â Â helgrind:Â needÂ toÂ interceptÂ duplicateÂ libcÂ definitionsÂ forÂ FedoraÂ 33<br>
429352Â Â PPCÂ ISAÂ 3.1Â supportÂ isÂ missing,Â partÂ 7<br>
429354Â Â PPCÂ ISAÂ 3.1Â supportÂ isÂ missing,Â partÂ 8<br>
429692Â Â unhandledÂ ppc64le-linuxÂ syscall:Â 147Â (getsid)<br>
429864Â Â s390x:Â C++Â atomicÂ test_and_setÂ yieldsÂ false-positiveÂ memcheck<br>
Â Â Â Â Â Â Â Â diagnostics<br>
429952Â Â ErrorsÂ whenÂ buildingÂ regtestÂ withÂ clang<br>
430354Â Â ppcÂ stxsibxÂ andÂ stxsihxÂ instructionsÂ writeÂ tooÂ muchÂ data<br>
430429Â Â valgrind.hÂ doesn'tÂ compileÂ onÂ s390xÂ withÂ clang<br>
430485Â Â expr_is_guardableÂ doesn'tÂ handleÂ Iex_Qop<br>
431556Â Â CompleteÂ arm64Â FADDPÂ v8.2Â instructionÂ support<br>
432102Â Â AddÂ supportÂ forÂ DWARF5Â asÂ producedÂ byÂ GCC11<br>
432161Â Â AdditionÂ ofÂ arm64Â v8.2Â FADDP,Â FNEGÂ andÂ FSQRT<br>
432381Â Â drd:Â ProcessÂ STACK_REGISTERÂ clientÂ requests<br>
432552Â Â [AArch64]Â invalidÂ errorÂ emittedÂ forÂ pre-decrementedÂ byte/hwordÂ addresses<br>
432672Â Â vg_regtest:Â test-specificÂ environmentÂ variablesÂ notÂ resetÂ betweenÂ tests<br>
432809Â Â VEXÂ shouldÂ supportÂ REX.WÂ +Â POPF<br>
432861Â Â PPCÂ modswÂ andÂ modsdÂ giveÂ incorrectÂ resultsÂ forÂ 1Â modÂ 12<br>
432870Â Â gdbserver_tests:nlcontrolcÂ hangsÂ withÂ newestÂ glibc2.33Â x86-64<br>
432215Â Â AddÂ debuginfodÂ functionality<br>
433323Â Â UseÂ pkglibexecdirÂ asÂ vglibdir<br>
433500Â Â DRDÂ regtestÂ fauluresÂ whenÂ libstdc++Â andÂ libgccÂ debuginfoÂ areÂ installed<br>
433629Â Â valgrind/READMEÂ hasÂ typeÂ "abd"Â insteadÂ ofÂ "and"<br>
433641Â Â RustÂ std::sys::unix::fs::try_statxÂ SyscallÂ paramÂ fstatat(file_name)<br>
433898Â Â arm64:Â HandleÂ sp,Â lr,Â fpÂ asÂ DwRegÂ inÂ CfiExpr<br>
434193Â Â GCCÂ 9+Â inlinedÂ strcmpÂ causesÂ "ConditionalÂ jumpÂ orÂ moveÂ [..]Â value"Â report<br>
n-i-bzÂ Â helgrind:Â IfÂ hg_cli__reallocÂ fails,Â returnÂ NULL.<br>
n-i-bzÂ Â arm64Â frontÂ end:Â avoidÂ MemcheckÂ falseÂ positivesÂ relatingÂ toÂ CPUID<br>
<br>
(3.17.0.RC1:Â 13Â MarÂ 2021)<br>
(3.17.0.RC2:Â 17Â MarÂ 2021)<br>
(3.17.0:Â Â Â Â Â 19Â MarÂ 2021)<br>
<br>
<br>
<br>
ReleaseÂ 3.16.1Â (22Â JuneÂ 2020)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
<br>
3.16.1Â fixesÂ twoÂ criticalÂ bugsÂ discoveredÂ afterÂ 3.16.0Â wasÂ frozen.Â Â ItÂ also<br>
fixesÂ characterÂ encodingÂ problemsÂ inÂ theÂ documentationÂ HTML.<br>
<br>
422677Â Â PPCÂ syncÂ instructionÂ LÂ fieldÂ shouldÂ onlyÂ beÂ 2Â bitsÂ inÂ ISAÂ 3.0<br>
422715Â Â 32-bitÂ x86:Â vex:Â theÂ `impossible'Â happened:Â expr_is_guardable:Â unhandledÂ expr<br>
<br>
(3.16.1,Â 22Â JuneÂ 2020,Â 36d6727e1d768333a536f274491e5879cab2c2f7)<br>
<br>
<br>
<br>
ReleaseÂ 3.16.0Â (27Â MayÂ 2020)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
<br>
3.16.0Â isÂ aÂ featureÂ releaseÂ withÂ manyÂ improvementsÂ andÂ theÂ usualÂ collectionÂ of<br>
bugÂ fixes.<br>
<br>
ThisÂ releaseÂ supportsÂ X86/Linux,Â AMD64/Linux,Â ARM32/Linux,Â ARM64/Linux,<br>
PPC32/Linux,Â PPC64BE/Linux,Â PPC64LE/Linux,Â S390X/Linux,Â MIPS32/Linux,<br>
MIPS64/Linux,Â ARM/Android,Â ARM64/Android,Â MIPS32/Android,Â X86/Android,<br>
X86/Solaris,Â AMD64/SolarisÂ andÂ AMD64/MacOSXÂ 10.12.Â Â ThereÂ isÂ alsoÂ preliminary<br>
supportÂ forÂ X86/macOSÂ 10.13,Â AMD64/macOSÂ 10.13Â andÂ nanoMIPS/Linux.<br>
<br>
*Â ====================Â COREÂ CHANGESÂ ===================<br>
<br>
*Â ItÂ isÂ nowÂ possibleÂ toÂ dynamicallyÂ changeÂ theÂ valueÂ ofÂ manyÂ commandÂ line<br>
Â Â optionsÂ whileÂ yourÂ programÂ (orÂ itsÂ children)Â areÂ runningÂ underÂ Valgrind.<br>
<br>
Â Â ToÂ seeÂ theÂ listÂ ofÂ dynamicallyÂ changeableÂ options,Â run<br>
Â Â Â Â Â "valgrindÂ --help-dyn-options".<br>
<br>
Â Â YouÂ canÂ changeÂ theÂ optionsÂ fromÂ theÂ shellÂ byÂ usingÂ vgdbÂ toÂ launch<br>
Â Â theÂ monitorÂ commandÂ "v.cloÂ &lt;cloÂ option&gt;...".<br>
Â Â TheÂ sameÂ monitorÂ commandÂ canÂ beÂ usedÂ fromÂ aÂ gdbÂ connected<br>
Â Â toÂ theÂ valgrindÂ gdbserver.<br>
Â Â YourÂ programÂ canÂ alsoÂ changeÂ theÂ dynamicallyÂ changeableÂ optionsÂ using<br>
Â Â theÂ clientÂ requestÂ VALGRIND_CLO_CHANGE(option).<br>
<br>
*Â ==================Â PLATFORMÂ CHANGESÂ =================<br>
<br>
*Â MIPS:Â preliminaryÂ supportÂ forÂ nanoMIPSÂ instructionÂ setÂ hasÂ beenÂ added.<br>
<br>
*Â ====================Â TOOLÂ CHANGESÂ ====================<br>
<br>
*Â DHAT:<br>
<br>
Â Â -Â TheÂ implicitÂ memcpyÂ doneÂ byÂ eachÂ callÂ toÂ reallocÂ nowÂ countsÂ towardsÂ the<br>
Â Â Â Â readÂ andÂ writeÂ countsÂ ofÂ resizedÂ heapÂ blocks,Â makingÂ thoseÂ countsÂ higher<br>
Â Â Â Â andÂ moreÂ accurate.<br>
<br>
*Â Cachegrind:<br>
<br>
Â Â -Â cg_annotate'sÂ --autoÂ andÂ --show-percsÂ optionsÂ nowÂ defaultÂ toÂ 'yes',Â because<br>
Â Â Â Â theyÂ areÂ usuallyÂ wanted.<br>
<br>
*Â Callgrind:<br>
<br>
Â Â -Â callgrind_annotate'sÂ --autoÂ andÂ --show-percsÂ optionsÂ nowÂ defaultÂ toÂ 'yes',<br>
Â Â Â Â becauseÂ theyÂ areÂ usuallyÂ wanted.<br>
<br>
Â Â -Â TheÂ commandÂ optionÂ --collect-systimeÂ hasÂ beenÂ enhancedÂ toÂ specify<br>
Â Â Â Â theÂ unitÂ usedÂ toÂ recordÂ theÂ elapsedÂ timeÂ spentÂ duringÂ systemÂ calls.<br>
Â Â Â Â TheÂ commandÂ optionÂ nowÂ acceptsÂ theÂ valuesÂ no|yes|msec|usec|nsec,<br>
Â Â Â Â whereÂ yesÂ isÂ aÂ synonymÂ ofÂ msec.Â Â WhenÂ givingÂ theÂ valueÂ nsec,Â the<br>
Â Â Â Â systemÂ cpuÂ timeÂ ofÂ systemÂ callsÂ isÂ alsoÂ recorded.<br>
<br>
*Â Memcheck:<br>
<br>
Â Â -Â SeveralÂ memcheckÂ optionsÂ areÂ nowÂ dynamicallyÂ changeable.<br>
Â Â Â Â UseÂ Â valgrindÂ --help-dyn-optionsÂ Â toÂ listÂ them.<br>
<br>
Â Â -Â TheÂ releaseÂ 3.15Â introducedÂ aÂ backwardÂ incompatibleÂ changeÂ for<br>
Â Â Â Â someÂ suppressionÂ entriesÂ relatedÂ toÂ preadvÂ andÂ pwritevÂ syscalls.<br>
Â Â Â Â WhenÂ readingÂ aÂ suppressionÂ entryÂ usingÂ theÂ unsupportedÂ 3.14Â format,<br>
Â Â Â Â valgrindÂ willÂ nowÂ produceÂ aÂ warningÂ toÂ sayÂ theÂ suppressionÂ entryÂ willÂ not<br>
Â Â Â Â work,Â andÂ suggestÂ theÂ neededÂ change.<br>
<br>
Â Â -Â SignificantlyÂ fewerÂ falseÂ positiveÂ errorsÂ onÂ optimisedÂ codeÂ generatedÂ by<br>
Â Â Â Â ClangÂ andÂ GCC.Â Â InÂ particular,Â MemcheckÂ nowÂ dealsÂ betterÂ withÂ the<br>
Â Â Â Â situationÂ whereÂ theÂ compilerÂ willÂ transformÂ C-levelÂ "AÂ &amp;&amp;Â B"Â intoÂ "BÂ &amp;&amp;Â A"<br>
Â Â Â Â underÂ certainÂ circumstancesÂ (inÂ whichÂ theÂ transformationÂ isÂ valid).<br>
Â Â Â Â HandlingÂ ofÂ integerÂ equality/non-equalityÂ checksÂ onÂ partiallyÂ defined<br>
Â Â Â Â valuesÂ isÂ alsoÂ improvedÂ onÂ someÂ architectures.<br>
<br>
*Â exp-sgcheck:<br>
<br>
Â Â -Â TheÂ exprimentalÂ StackÂ andÂ GlobalÂ ArrayÂ CheckingÂ toolÂ hasÂ beenÂ removed.<br>
Â Â Â Â ItÂ onlyÂ everÂ workedÂ onÂ x86Â andÂ amd64,Â andÂ evenÂ onÂ thoseÂ itÂ hadÂ a<br>
Â Â Â Â highÂ falseÂ positiveÂ rateÂ andÂ wasÂ slow.Â Â AnÂ alternativeÂ forÂ detecting<br>
Â Â Â Â stackÂ andÂ globalÂ arrayÂ overrunsÂ isÂ usingÂ theÂ AddressSanitizerÂ (ASAN)<br>
Â Â Â Â facilityÂ ofÂ theÂ GCCÂ andÂ ClangÂ compilers,Â whichÂ requireÂ youÂ toÂ rebuild<br>
Â Â Â Â yourÂ codeÂ withÂ -fsanitize=address.<br>
<br>
*Â ====================Â OTHERÂ CHANGESÂ ====================<br>
<br>
*Â NewÂ andÂ modifiedÂ GDBÂ serverÂ monitorÂ features:<br>
<br>
Â Â -Â OptionÂ -TÂ tellsÂ vgdbÂ toÂ outputÂ aÂ timestampÂ inÂ theÂ vgdbÂ informationÂ messages.<br>
<br>
Â Â -Â TheÂ gdbserverÂ monitorÂ commandsÂ thatÂ requireÂ anÂ addressÂ andÂ anÂ optional<br>
Â Â Â Â lengthÂ argumentÂ nowÂ acceptsÂ theÂ alternateÂ 'CÂ like'Â syntaxÂ "address[length]".<br>
Â Â Â Â ForÂ example,Â theÂ memcheckÂ commandÂ "monitorÂ who_points_atÂ 0x12345678Â 120"<br>
Â Â Â Â canÂ nowÂ alsoÂ beÂ givenÂ asÂ "monitorÂ who_points_atÂ 0x12345678[120]".<br>
<br>
*Â ====================Â FIXEDÂ BUGSÂ ====================<br>
<br>
TheÂ followingÂ bugsÂ haveÂ beenÂ fixedÂ orÂ resolved.Â Â NoteÂ thatÂ "n-i-bz"<br>
standsÂ forÂ "notÂ inÂ bugzilla"Â --Â thatÂ is,Â aÂ bugÂ thatÂ wasÂ reportedÂ toÂ us<br>
butÂ neverÂ gotÂ aÂ bugzillaÂ entry.Â Â WeÂ encourageÂ youÂ toÂ fileÂ bugsÂ in<br>
bugzillaÂ (https://bugs.kde.org/enter_bug.cgi?product=valgrind)Â rather<br>
thanÂ mailingÂ theÂ developersÂ (orÂ mailingÂ lists)Â directlyÂ --Â bugsÂ that<br>
areÂ notÂ enteredÂ intoÂ bugzillaÂ tendÂ toÂ getÂ forgottenÂ aboutÂ orÂ ignored.<br>
<br>
ToÂ seeÂ detailsÂ ofÂ aÂ givenÂ bug,Â visit<br>
Â Â https://bugs.kde.org/show_bug.cgi?id=XXXXXX<br>
whereÂ XXXXXXÂ isÂ theÂ bugÂ numberÂ asÂ listedÂ below.<br>
<br>
343099Â Â LinuxÂ setnsÂ syscallÂ wrapperÂ missing,Â unhandledÂ syscall:Â 308<br>
Â Â Â Â Â Â Â Â ==Â 368923Â WARNING:Â unhandledÂ arm64-linuxÂ syscall:Â 268Â (setns)<br>
Â Â Â Â Â Â Â Â ==Â 369031Â WARNING:Â unhandledÂ amd64-linuxÂ syscall:Â 308Â (setns)<br>
385386Â Â AssertionÂ failedÂ "szBÂ &gt;=Â CACHE_ENTRY_SIZE"Â atÂ m_debuginfo/image.c:517<br>
400162Â Â Patch:Â GuardÂ againstÂ __GLIBC_PREREQÂ forÂ muslÂ libc<br>
400593Â Â InÂ Coregrind,Â useÂ statxÂ forÂ someÂ internalÂ syscallsÂ ifÂ [f]stat[64]Â fail<br>
400872Â Â AddÂ nanoMIPSÂ supportÂ toÂ Valgrind<br>
403212Â Â drd/tests/trylockÂ hangsÂ onÂ FreeBSD<br>
404406Â Â s390x:Â z14Â miscellaneousÂ instructionsÂ notÂ implemented<br>
405201Â Â IncorrectÂ sizeÂ ofÂ structÂ vki_siginfoÂ onÂ 64-bitÂ LinuxÂ architectures<br>
406561Â Â mcinfcallWSRUÂ gdbserver_testÂ failsÂ onÂ ppc64<br>
406824Â Â UnsupportedÂ baseline<br>
407218Â Â AddÂ supportÂ forÂ theÂ copy_file_rangeÂ syscall<br>
407307Â Â InterceptÂ stpcpyÂ alsoÂ inÂ ld.soÂ forÂ arm64<br>
407376Â Â UpdateÂ XenÂ supportÂ toÂ 4.12Â (4.13,Â actually)Â andÂ addÂ moreÂ coverage<br>
Â Â Â Â Â Â Â Â ==Â 390553<br>
407764Â Â drdÂ cond_post_waitÂ getsÂ wrongÂ (?)Â conditionÂ onÂ s390xÂ z13Â system<br>
408009Â Â ExposeÂ rdrandÂ andÂ f16cÂ evenÂ onÂ avxÂ ifÂ hostÂ cpuÂ supportsÂ them<br>
408091Â Â MissingÂ pkeyÂ syscalls<br>
408414Â Â AddÂ supportÂ forÂ missingÂ forÂ preadv2Â andÂ pwritev2Â syscalls<br>
409141Â Â ValgrindÂ hangsÂ whenÂ SIGKILLed<br>
409206Â Â SupportÂ forÂ LinuxÂ PPSÂ andÂ PTPÂ ioctls<br>
409367Â Â exit_group()Â afterÂ signalÂ toÂ threadÂ waitingÂ inÂ futex()Â causesÂ hangs<br>
409429Â Â amd64:Â recognizeÂ 'cmpeq'Â variantsÂ asÂ aÂ dependencyÂ breakingÂ idiom<br>
409780Â Â ReferencesÂ toÂ non-existentÂ configure.in<br>
410556Â Â AddÂ supportÂ forÂ BLKIO{MIN,OPT}Â andÂ BLKALIGNOFFÂ ioctls<br>
410599Â Â Non-deterministicÂ behaviourÂ ofÂ pth_self_kill_15_otherÂ test<br>
410757Â Â discrepancyÂ forÂ preadv2/pwritev2Â syscallsÂ acrossÂ differentÂ versions<br>
411134Â Â AllowÂ theÂ userÂ toÂ changeÂ aÂ setÂ ofÂ commandÂ lineÂ optionsÂ duringÂ execution<br>
411451Â Â amd64-&gt;IRÂ ofÂ bt/btc/bts/btrÂ withÂ immediateÂ clearsÂ zeroÂ flag<br>
412344Â Â ProblemÂ settingÂ mipsÂ flagsÂ withÂ specificÂ paths<br>
412408Â Â unhandledÂ arm-linuxÂ syscall:Â 124Â -Â adjtimeÂ -Â onÂ arm-linux<br>
413119Â Â IoctlÂ wrapperÂ forÂ DRM_IOCTL_I915_GEM_MMAP<br>
413330Â Â avx-1Â testÂ failsÂ onÂ AMDÂ EPYCÂ 7401PÂ 24-CoreÂ Processor<br>
413603Â Â callgrind_annotate/cg_annotateÂ truncateÂ functionÂ namesÂ atÂ '#'<br>
414565Â Â SpecificÂ useÂ caseÂ bugÂ foundÂ inÂ SysResÂ VG_(do_sys_sigprocmask)<br>
415136Â Â ARMv8.1Â Compare-and-SwapÂ instructionsÂ areÂ notÂ supported<br>
415757Â Â vexÂ x86-&gt;IR:Â 0x66Â 0xFÂ 0xCEÂ 0x4FÂ (bswapw)<br>
416239Â Â valgrindÂ crashesÂ whenÂ handlingÂ clock_adjtime<br>
416285Â Â UseÂ prlimit64Â inÂ VG_(getrlimit)Â andÂ VG_(setrlimit)<br>
416286Â Â DRDÂ reportsÂ "conflictingÂ load"Â errorÂ onÂ std::mutex::lock()<br>
416301Â Â s390x:Â "compareÂ andÂ signal"Â notÂ supported<br>
416387Â Â finit_moduleÂ andÂ bpfÂ syscallsÂ areÂ unhandledÂ onÂ arm64<br>
416464Â Â FixÂ falseÂ reportsÂ forÂ uninitializedÂ memoryÂ forÂ PR_CAPBSET_READ/DROP<br>
416667Â Â gcc10Â ppc64leÂ impossibleÂ constraintÂ inÂ 'asm'Â inÂ test_isa.<br>
416753Â Â newÂ 32bitÂ timeÂ syscallsÂ forÂ 2038+<br>
417075Â Â pwritev(vector[...])Â suppressionÂ ignored<br>
Â Â Â Â Â Â Â Â 417075Â isÂ notÂ fixed,Â butÂ incompatibleÂ suppÂ entriesÂ areÂ detected<br>
Â Â Â Â Â Â Â Â andÂ aÂ warningÂ isÂ producedÂ forÂ these.<br>
417187Â Â [MIPS]Â ConditionalÂ branchÂ problemÂ sinceÂ 'grail'Â changes<br>
417238Â Â TestÂ memcheck/tests/vbit-testÂ failsÂ onÂ mips64Â BE<br>
417266Â Â MakeÂ memcheck/tests/linux/sigqueueÂ usableÂ withÂ musl<br>
417281Â Â s390x:Â /bin/trueÂ segfaultsÂ withÂ "grail"Â enabled<br>
417427Â Â commitÂ toÂ fixÂ vki_siginfo_tÂ definitionÂ createdÂ numerousÂ regression<br>
Â Â Â Â Â Â Â Â errorsÂ onÂ ppc64<br>
417452Â Â s390_insn_store_emit:Â dst-&gt;tagÂ forÂ HRcVec128<br>
417578Â Â AddÂ suppressionsÂ forÂ glibcÂ DTVÂ leaks<br>
417906Â Â cloneÂ withÂ CLONE_VFORKÂ andÂ noÂ CLONE_VMÂ fails<br>
418004Â Â GrailÂ codeÂ additionsÂ breakÂ ppc64.<br>
418435Â Â s390x:Â spuriousÂ "ConditionalÂ jumpÂ orÂ moveÂ dependsÂ onÂ uninitialisedÂ [..]"<br>
418997Â Â s390x:Â SupportÂ Iex_ITEÂ forÂ floatÂ andÂ vectorÂ types<br>
419503Â Â s390x:Â AvoidÂ modifyingÂ registersÂ returnedÂ fromÂ iselÂ functions<br>
421321Â Â gcc10Â arm64Â buildÂ needsÂ __getauxvalÂ forÂ linkingÂ withÂ libgcc<br>
421570Â Â std_mutexÂ failsÂ onÂ ArmÂ v8.1Â h/w<br>
434035Â Â vgdbÂ mightÂ crashÂ ifÂ valgrindÂ isÂ killed<br>
n-i-bzÂ Â FixÂ minorÂ oneÂ timeÂ leaksÂ inÂ dhat.<br>
n-i-bzÂ Â AddÂ --run-cxx-freeres=noÂ inÂ outerÂ argsÂ toÂ avoidÂ innerÂ crashes.<br>
n-i-bzÂ Â AddÂ supportÂ forÂ theÂ LinuxÂ io_uringÂ systemÂ calls<br>
n-i-bzÂ Â sys_statx:Â don'tÂ complainÂ ifÂ bothÂ |filename|Â andÂ |buf|Â areÂ NULL.<br>
n-i-bzÂ Â FixÂ non-glibcÂ buildÂ ofÂ testÂ suiteÂ withÂ s390x_features<br>
n-i-bzÂ Â MinGW,Â include/valgrind.h:Â FixÂ detectionÂ ofÂ 64-bitÂ mode<br>
423195Â Â PPCÂ ISAÂ 3.1Â supportÂ isÂ missing,Â partÂ 1<br>
<br>
(3.16.0.RC1:Â Â 18Â MayÂ 2020,Â gitÂ 6052ee66a0cf5234e8e2a2b49a8760226bc13b92)<br>
(3.16.0.RC2:Â Â 19Â MayÂ 2020,Â gitÂ 940ec1ca69a09f7fdae3e800b7359f85c13c4b37)<br>
(3.16.0:Â Â Â Â Â Â 27Â MayÂ 2020,Â gitÂ bf5e647edb9e96cbd5c57cc944984402eeee296d)<br>
<br>
<br>
<br>
ReleaseÂ 3.15.0Â (12Â AprilÂ 2019)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
<br>
3.15.0Â isÂ aÂ featureÂ releaseÂ withÂ manyÂ improvementsÂ andÂ theÂ usualÂ collectionÂ of<br>
bugÂ fixes.<br>
<br>
ThisÂ releaseÂ supportsÂ X86/Linux,Â AMD64/Linux,Â ARM32/Linux,Â ARM64/Linux,<br>
PPC32/Linux,Â PPC64BE/Linux,Â PPC64LE/Linux,Â S390X/Linux,Â MIPS32/Linux,<br>
MIPS64/Linux,Â ARM/Android,Â ARM64/Android,Â MIPS32/Android,Â X86/Android,<br>
X86/Solaris,Â AMD64/SolarisÂ andÂ AMD64/MacOSXÂ 10.12.Â Â ThereÂ isÂ alsoÂ preliminary<br>
supportÂ forÂ X86/macOSÂ 10.13Â andÂ AMD64/macOSÂ 10.13.<br>
<br>
*Â ====================Â COREÂ CHANGESÂ ===================<br>
<br>
*Â TheÂ XTreeÂ MassifÂ outputÂ formatÂ nowÂ makesÂ useÂ ofÂ theÂ informationÂ obtained<br>
Â Â whenÂ specifyingÂ --read-inline-info=yes.<br>
<br>
*Â amd64Â (x86_64):Â theÂ RDRANDÂ andÂ F16CÂ insnÂ setÂ extensionsÂ areÂ nowÂ supported.<br>
<br>
*Â ====================Â TOOLÂ CHANGESÂ ====================<br>
<br>
*Â DHAT:Â <br>
<br>
Â Â -Â DHATÂ beenÂ thoroughlyÂ overhauled,Â improved,Â andÂ givenÂ aÂ GUI.Â Â AsÂ aÂ result,<br>
Â Â Â Â itÂ hasÂ beenÂ promotedÂ fromÂ anÂ experimentalÂ toolÂ toÂ aÂ regularÂ tool.Â Â RunÂ it<br>
Â Â Â Â withÂ --tool=dhatÂ insteadÂ ofÂ --tool=exp-dhat.<br>
<br>
Â Â -Â DHATÂ nowÂ printsÂ onlyÂ minimalÂ dataÂ whenÂ theÂ programÂ ends,Â insteadÂ writing<br>
Â Â Â Â theÂ bulkÂ ofÂ theÂ profilingÂ dataÂ toÂ aÂ file.Â Â AsÂ aÂ result,Â theÂ --show-top-n<br>
Â Â Â Â andÂ --sort-byÂ optionsÂ haveÂ beenÂ removed.<br>
Â Â Â Â <br>
Â Â -Â ProfileÂ resultsÂ canÂ beÂ viewedÂ withÂ theÂ newÂ viewer,Â dh_view.html.Â Â When<br>
Â Â Â Â aÂ runÂ ends,Â aÂ shortÂ messageÂ isÂ printed,Â explainingÂ howÂ toÂ viewÂ theÂ result.<br>
Â Â Â Â <br>
Â Â -Â SeeÂ theÂ documentationÂ forÂ moreÂ details.<br>
<br>
*Â Cachegrind:<br>
<br>
Â Â -Â cg_annotateÂ hasÂ aÂ newÂ option,Â --show-percs,Â whichÂ printsÂ percentagesÂ next<br>
Â Â Â Â toÂ allÂ eventÂ counts.<br>
<br>
*Â Callgrind:<br>
<br>
Â Â -Â callgrind_annotateÂ hasÂ aÂ newÂ option,Â --show-percs,Â whichÂ printsÂ percentages<br>
Â Â Â Â nextÂ toÂ allÂ eventÂ counts.<br>
<br>
Â Â -Â callgrind_annotateÂ nowÂ insertsÂ commasÂ inÂ callÂ counts,Â and<br>
Â Â Â Â sortÂ theÂ caller/calleeÂ listsÂ inÂ theÂ callÂ tree.<br>
<br>
*Â Massif:<br>
<br>
Â Â -Â TheÂ defaultÂ valueÂ forÂ --read-inline-infoÂ isÂ nowÂ "yes"Â on<br>
Â Â Â Â Linux/Android/Solaris.Â ItÂ isÂ stillÂ "no"Â onÂ otherÂ OS.<br>
<br>
*Â Memcheck:<br>
<br>
Â Â -Â TheÂ optionÂ --xtree-leak=yesÂ (toÂ outputÂ leakÂ resultÂ inÂ xtreeÂ format)<br>
Â Â Â Â automaticallyÂ activatesÂ theÂ optionÂ --show-leak-kinds=all,Â asÂ xtree<br>
Â Â Â Â visualisationÂ toolsÂ suchÂ asÂ kcachegrindÂ canÂ inÂ anyÂ caseÂ selectÂ whatÂ kind<br>
Â Â Â Â ofÂ leakÂ toÂ visualise.<br>
<br>
Â Â -Â ThereÂ hasÂ beenÂ furtherÂ workÂ toÂ avoidÂ falseÂ positives.Â Â InÂ particular,<br>
Â Â Â Â integerÂ equalityÂ onÂ partiallyÂ definedÂ inputsÂ (CÂ ==Â andÂ !=)Â isÂ nowÂ handled<br>
Â Â Â Â better.<br>
<br>
*Â ====================Â OTHERÂ CHANGESÂ ====================<br>
<br>
*Â TheÂ newÂ optionÂ --show-error-list=no|yesÂ displays,Â atÂ theÂ endÂ ofÂ theÂ run,Â the<br>
Â Â listÂ ofÂ detectedÂ errorsÂ andÂ theÂ usedÂ suppressions.Â Â PriorÂ toÂ thisÂ change,<br>
Â Â showingÂ thisÂ informationÂ couldÂ onlyÂ beÂ doneÂ byÂ specifyingÂ "-vÂ -v",Â butÂ that<br>
Â Â alsoÂ producedÂ aÂ lotÂ ofÂ otherÂ possibly-non-usefulÂ messages.Â Â TheÂ optionÂ -sÂ is<br>
Â Â equivalentÂ toÂ --show-error-list=yes.<br>
<br>
*Â ====================Â FIXEDÂ BUGSÂ ====================<br>
<br>
TheÂ followingÂ bugsÂ haveÂ beenÂ fixedÂ orÂ resolved.Â Â NoteÂ thatÂ "n-i-bz"<br>
standsÂ forÂ "notÂ inÂ bugzilla"Â --Â thatÂ is,Â aÂ bugÂ thatÂ wasÂ reportedÂ toÂ us<br>
butÂ neverÂ gotÂ aÂ bugzillaÂ entry.Â Â WeÂ encourageÂ youÂ toÂ fileÂ bugsÂ in<br>
bugzillaÂ (https://bugs.kde.org/enter_bug.cgi?product=valgrind)Â rather<br>
thanÂ mailingÂ theÂ developersÂ (orÂ mailingÂ lists)Â directlyÂ --Â bugsÂ that<br>
areÂ notÂ enteredÂ intoÂ bugzillaÂ tendÂ toÂ getÂ forgottenÂ aboutÂ orÂ ignored.<br>
<br>
ToÂ seeÂ detailsÂ ofÂ aÂ givenÂ bug,Â visit<br>
Â Â https://bugs.kde.org/show_bug.cgi?id=XXXXXX<br>
whereÂ XXXXXXÂ isÂ theÂ bugÂ numberÂ asÂ listedÂ below.<br>
<br>
385411Â Â s390x:Â z13Â vectorÂ floating-pointÂ instructionsÂ notÂ implemented<br>
397187Â Â z13Â vectorÂ registerÂ supportÂ forÂ vgdbÂ gdbserver<br>
398183Â Â VexÂ errorsÂ withÂ _mm256_shuffle_epi8/vpshufb<br>
398870Â Â PleaseÂ addÂ supportÂ forÂ instructionÂ vcvtps2ph<br>
399287Â Â amd64Â frontÂ end:Â IllegalÂ InstructionÂ vcmptrueps<br>
399301Â Â UseÂ inlinedÂ framesÂ inÂ MassifÂ XTreeÂ output.Â <br>
399322Â Â ImproveÂ callgrind_annotateÂ output<br>
399444Â Â VEX/priv/guest_s390_toIR.c:17407:Â (style)Â MismatchingÂ assignmentÂ [..]<br>
400164Â Â helgrindÂ testÂ encountersÂ mipsÂ x-compilerÂ warningsÂ andÂ assemblerÂ error<br>
400490Â Â s390x:Â VRsÂ allocatedÂ asÂ ifÂ separateÂ fromÂ FPRs<br>
400491Â Â s390x:Â OperandÂ ofÂ LOCHÂ treatedÂ asÂ unsignedÂ integer<br>
400975Â Â CompileÂ error:Â error:Â '-mips64r2'Â conflictsÂ withÂ theÂ otherÂ architecture<br>
Â Â Â Â Â Â Â Â options,Â whichÂ specifyÂ aÂ mips64Â processor<br>
401112Â Â LLVMÂ 5.0Â generatesÂ comparisonÂ againstÂ partiallyÂ initializedÂ data<br>
401277Â Â MoreÂ bugsÂ inÂ z13Â support<br>
401454Â Â AddÂ aÂ --show-percsÂ optionÂ toÂ cg_annotateÂ andÂ callgrind_annotate.<br>
401578Â Â drd:Â crashesÂ sometimesÂ onÂ fork()<br>
401627Â Â memcheckÂ errorsÂ withÂ glibcÂ avx2Â optimizedÂ wcsncmp<br>
401822Â Â none/tests/ppc64/jm-vmxÂ failsÂ andÂ producesÂ assemblerÂ warnings<br>
401827Â Â none/tests/ppc64/test_isa_2_06_part3Â failureÂ onÂ ppc64leÂ (xvrsqrtesp)<br>
401828Â Â none/tests/ppc64/test_isa_2_06_part1Â failureÂ onÂ ppc64leÂ (fcfidsÂ and<br>
Â Â Â Â Â Â Â Â fcfidus)<br>
402006Â Â markÂ helperÂ regsÂ definedÂ inÂ final_tidyupÂ beforeÂ freeres_wrapperÂ call<br>
402048Â Â WARNING:Â unhandledÂ ppc64[be|le]-linuxÂ syscall:Â 26Â (ptrace)<br>
402123Â Â invalidÂ assemblerÂ opcodesÂ forÂ mips32r2<br>
402134Â Â assertionÂ failÂ inÂ mc_translate.cÂ (noteTmpUsesIn)Â Iex_VECRETÂ onÂ arm64<br>
402327Â Â Warning:Â DWARF2Â CFIÂ reader:Â unhandledÂ DW_OP_Â opcodeÂ 0x13Â (DW_OP_drop)<br>
402341Â Â drd/tests/tsan_thread_wrappers_pthread.h:369:Â suspiciousÂ codeÂ ?<br>
402351Â Â mips64Â libvexmultiarch_testÂ failsÂ onÂ s390x<br>
402369Â Â OverhaulÂ DHAT<br>
402395Â Â coregrind/vgdb-invoker-solaris.c:Â 2Â *Â poorÂ errorÂ checking<br>
402480Â Â DoÂ notÂ useÂ %rspÂ inÂ clobberÂ list<br>
402481Â Â vbit-testÂ failsÂ onÂ x86Â forÂ Iop_CmpEQ64Â iselInt64ExprÂ Sar64<br>
402515Â Â ImplementÂ newÂ optionÂ --show-error-list=no|yesÂ /Â -s<br>
402519Â Â POWERÂ 3.0Â addexÂ instructionÂ incorrectlyÂ implemented<br>
402781Â Â RedoÂ theÂ cacheÂ usedÂ toÂ processÂ indirectÂ branchÂ targets<br>
403123Â Â vexÂ amd64-&gt;IR:0xF3Â 0x48Â 0xFÂ 0xAEÂ 0xD3Â (wrfsbase)<br>
403552Â Â s390x:Â wrongÂ facilityÂ bitÂ checkedÂ forÂ vectorÂ facility<br>
404054Â Â memcheckÂ powerpcÂ subfeÂ x,Â x,Â xÂ initializesÂ xÂ toÂ 0Â orÂ -1Â basedÂ onÂ CA<br>
404638Â Â AddÂ VG_(replaceIndexXA)<br>
404843Â Â s390x:Â backtraceÂ sometimesÂ endsÂ prematurely<br>
404888Â Â autotoolsÂ cleanupÂ series<br>
405079Â Â unhandledÂ ppc64le-linuxÂ syscall:Â 131Â (quotactl)<br>
405182Â Â ValgrindÂ failsÂ toÂ buildÂ withÂ Clang<br>
405205Â Â filter_libc:Â removeÂ theÂ lineÂ holdingÂ theÂ futexÂ syscallÂ errorÂ entirely<br>
405356Â Â PPC64,Â xvcvsxdsp,Â xvcvuxdspÂ areÂ supposedÂ toÂ writeÂ theÂ 32-bitÂ resultÂ to<br>
Â Â Â Â Â Â Â Â theÂ upperÂ andÂ lowerÂ 32-bitsÂ ofÂ theÂ 64-bitÂ result<br>
405362Â Â PPC64,Â vmsummbmÂ instructionÂ doesn'tÂ handleÂ overflowÂ caseÂ correctly<br>
405363Â Â PPC64,Â xvcvdpsxws,Â xvcvdpuxws,Â doÂ notÂ handleÂ NaNÂ argumentsÂ correctly.<br>
405365Â Â PPC64,Â functionÂ _get_maxmin_fp_NaN()Â doesn'tÂ handleÂ QNaN,Â SNaNÂ case<br>
Â Â Â Â Â Â Â Â correctly.<br>
405403Â Â s390xÂ disassemblerÂ cannotÂ beÂ usedÂ onÂ x86<br>
405430Â Â UseÂ gccÂ -Wimplicit-fallthrough=2Â byÂ defaultÂ ifÂ available<br>
405458Â Â MIPSÂ mkFormVECÂ argumentsÂ swapped?<br>
405716Â Â drd:Â FixÂ anÂ integerÂ overflowÂ inÂ theÂ stackÂ marginÂ calculation<br>
405722Â Â SupportÂ arm64Â coreÂ dump<br>
405733Â Â PPC64,Â xvcvdpspÂ shouldÂ writeÂ 32-bitÂ resultÂ toÂ upperÂ andÂ lowerÂ 32-bits<br>
Â Â Â Â Â Â Â Â ofÂ theÂ 64-bitÂ destinationÂ field.<br>
405734Â Â PPC64,Â vrlwnm,Â vrlwmi,Â vrldrm,Â vrldmiÂ doÂ notÂ workÂ properlyÂ whenÂ meÂ &lt;Â mb<br>
405782Â Â "VEXÂ temporaryÂ storageÂ exhausted"Â whenÂ attemptingÂ toÂ debugÂ slic3r-pe<br>
406198Â Â none/tests/ppc64/test_isa_3_0_otherÂ testÂ sporadicallyÂ includingÂ CA<br>
Â Â Â Â Â Â Â Â bitÂ inÂ output.<br>
406256Â Â PPC64,Â vectorÂ floatingÂ pointÂ instructionsÂ don'tÂ handleÂ subnormal<br>
Â Â Â Â Â Â Â Â accordingÂ toÂ VSCR[NJ]Â bitÂ setting.<br>
406352Â Â cachegrind/callgrindÂ failsÂ annÂ testsÂ becauseÂ ofÂ missingÂ a.c<br>
406354Â Â dhatÂ isÂ brokenÂ onÂ x86Â (32bit)<br>
406355Â Â mcsignopass,Â mcsigpass,Â mcbreakÂ failÂ dueÂ toÂ differenceÂ inÂ gdbÂ output<br>
406357Â Â gdbserver_testsÂ failsÂ becauseÂ ofÂ gdbÂ outputÂ change<br>
406360Â Â memcheck/tests/libstdc++.suppÂ needsÂ moreÂ supressionÂ variants<br>
406422Â Â none/tests/amd64-linux/map_32bits.vgtestÂ failsÂ tooÂ easily<br>
406465Â Â arm64Â insnÂ selectorÂ failsÂ onÂ "t0Â =Â &lt;expr&gt;"Â whereÂ &lt;expr&gt;Â hasÂ typeÂ Ity_F16<br>
407340Â Â PPC64,Â doesÂ notÂ supportÂ theÂ vlogefp,Â vexptefpÂ instructions.<br>
n-i-bzÂ Â addÂ syswrapÂ forÂ PTRACE_GET|SET_THREAD_AREAÂ onÂ amd64.<br>
n-i-bzÂ Â FixÂ callgrind_annotateÂ nonÂ deterministicÂ orderÂ forÂ equalÂ total<br>
n-i-bzÂ Â callgrind_annotateÂ --threshold=100Â doesÂ notÂ printÂ allÂ functions.<br>
n-i-bzÂ Â callgrind_annotateÂ UseÂ ofÂ uninitializedÂ valueÂ inÂ numericÂ gtÂ (&gt;)<br>
n-i-bzÂ Â amd64Â (x86_64):Â RDRANDÂ andÂ F16CÂ insnÂ setÂ extensionsÂ areÂ supported<br>
<br>
(3.15.0.RC1:Â Â 8Â AprilÂ 2019,Â gitÂ ce94d674de5b99df173aad4c3ee48fc2a92e5d9c)<br>
(3.15.0.RC2:Â 11Â AprilÂ 2019,Â gitÂ 0c8be9bbede189ec580ec270521811766429595f)<br>
(3.15.0:Â Â Â Â Â 14Â AprilÂ 2019,Â gitÂ 270037da8b508954f0f7d703a0bebf5364eec548)<br>
<br>
<br>
<br>
ReleaseÂ 3.14.0Â (9Â OctoberÂ 2018)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
<br>
3.14.0Â isÂ aÂ featureÂ releaseÂ withÂ manyÂ improvementsÂ andÂ theÂ usualÂ collectionÂ of<br>
bugÂ fixes.<br>
<br>
ThisÂ releaseÂ supportsÂ X86/Linux,Â AMD64/Linux,Â ARM32/Linux,Â ARM64/Linux,<br>
PPC32/Linux,Â PPC64BE/Linux,Â PPC64LE/Linux,Â S390X/Linux,Â MIPS32/Linux,<br>
MIPS64/Linux,Â ARM/Android,Â ARM64/Android,Â MIPS32/Android,Â X86/Android,<br>
X86/Solaris,Â AMD64/SolarisÂ andÂ AMD64/MacOSXÂ 10.12.Â Â ThereÂ isÂ alsoÂ preliminary<br>
supportÂ forÂ X86/macOSÂ 10.13,Â AMD64/macOSÂ 10.13.<br>
<br>
*Â ====================Â COREÂ CHANGESÂ ===================<br>
<br>
*Â TheÂ newÂ optionÂ --keep-debuginfo=no|yesÂ (defaultÂ no)Â canÂ beÂ usedÂ toÂ retain<br>
Â Â debugÂ infoÂ forÂ unloadedÂ code.Â Â ThisÂ allowsÂ savedÂ stackÂ tracesÂ (e.g.Â for<br>
Â Â memoryÂ leaks)Â toÂ includeÂ file/lineÂ infoÂ forÂ codeÂ thatÂ hasÂ beenÂ dlclose'dÂ (or<br>
Â Â similar).Â Â SeeÂ theÂ userÂ manualÂ forÂ moreÂ informationÂ andÂ knownÂ limitations.<br>
<br>
*Â AbilityÂ toÂ specifyÂ suppressionsÂ basedÂ onÂ sourceÂ fileÂ nameÂ andÂ lineÂ number.<br>
<br>
*Â MajorlyÂ overhauledÂ registerÂ allocator.Â Â NoÂ end-userÂ changes,Â butÂ theÂ JIT<br>
Â Â generatesÂ codeÂ aÂ bitÂ moreÂ quicklyÂ now.<br>
<br>
*Â ==================Â PLATFORMÂ CHANGESÂ =================<br>
<br>
*Â PreliminaryÂ supportÂ forÂ macOSÂ 10.13Â hasÂ beenÂ added.<br>
<br>
*Â mips:Â supportÂ forÂ MIPS32/MIPS64Â RevisionÂ 6Â hasÂ beenÂ added.<br>
<br>
*Â mips:Â supportÂ forÂ MIPSÂ SIMDÂ architectureÂ (MSA)Â hasÂ beenÂ added.<br>
<br>
*Â mips:Â supportÂ forÂ MIPSÂ N32Â ABIÂ hasÂ beenÂ added.<br>
<br>
*Â s390:Â partialÂ supportÂ forÂ vectorÂ instructionsÂ (integerÂ andÂ string)Â hasÂ been<br>
Â Â added.<br>
<br>
*Â ====================Â TOOLÂ CHANGESÂ ====================<br>
<br>
*Â Helgrind:Â AdditionÂ ofÂ aÂ flag<br>
Â Â --delta-stacktrace=no|yesÂ [yesÂ onÂ linuxÂ amd64/x86]<br>
Â Â whichÂ specifiesÂ howÂ fullÂ historyÂ stackÂ tracesÂ shouldÂ beÂ computed.<br>
Â Â SettingÂ thisÂ toÂ =yesÂ canÂ speedÂ upÂ HelgrindÂ byÂ 25%Â whenÂ using<br>
Â Â --history-level=full.<br>
<br>
*Â Memcheck:Â reducedÂ falseÂ positiveÂ rateÂ forÂ optimisedÂ codeÂ createdÂ byÂ ClangÂ 6<br>
Â Â /Â LLVMÂ 6Â onÂ x86,Â amd64Â andÂ arm64.Â Â InÂ particular,Â MemcheckÂ analysesÂ code<br>
Â Â blocksÂ moreÂ carefullyÂ toÂ determineÂ whereÂ itÂ canÂ avoidÂ expensiveÂ definedness<br>
Â Â checksÂ withoutÂ lossÂ ofÂ precision.Â Â ThisÂ isÂ controlledÂ byÂ theÂ flag<br>
Â Â --expensive-definedness-checks=no|auto|yesÂ [auto].<br>
<br>
*Â ====================Â OTHERÂ CHANGESÂ ====================<br>
<br>
*Â ValgrindÂ isÂ nowÂ buildableÂ withÂ link-timeÂ optimisationÂ (LTO).Â Â AÂ new<br>
Â Â configureÂ optionÂ --enable-lto=yesÂ allowsÂ buildingÂ ValgrindÂ withÂ LTO.Â Â IfÂ the<br>
Â Â toolchainÂ supportsÂ it,Â thisÂ producesÂ aÂ smaller/fasterÂ ValgrindÂ (upÂ toÂ 10%).<br>
Â Â NoteÂ thatÂ ifÂ youÂ areÂ doingÂ ValgrindÂ development,Â --enable-lto=yesÂ massively<br>
Â Â slowsÂ downÂ theÂ buildÂ process.<br>
<br>
*Â ====================Â FIXEDÂ BUGSÂ ====================<br>
<br>
TheÂ followingÂ bugsÂ haveÂ beenÂ fixedÂ orÂ resolved.Â Â NoteÂ thatÂ "n-i-bz"<br>
standsÂ forÂ "notÂ inÂ bugzilla"Â --Â thatÂ is,Â aÂ bugÂ thatÂ wasÂ reportedÂ toÂ us<br>
butÂ neverÂ gotÂ aÂ bugzillaÂ entry.Â Â WeÂ encourageÂ youÂ toÂ fileÂ bugsÂ in<br>
bugzillaÂ (https://bugs.kde.org/enter_bug.cgi?product=valgrind)Â rather<br>
thanÂ mailingÂ theÂ developersÂ (orÂ mailingÂ lists)Â directlyÂ --Â bugsÂ that<br>
areÂ notÂ enteredÂ intoÂ bugzillaÂ tendÂ toÂ getÂ forgottenÂ aboutÂ orÂ ignored.<br>
<br>
ToÂ seeÂ detailsÂ ofÂ aÂ givenÂ bug,Â visit<br>
Â Â https://bugs.kde.org/show_bug.cgi?id=XXXXXX<br>
whereÂ XXXXXXÂ isÂ theÂ bugÂ numberÂ asÂ listedÂ below.<br>
<br>
79362Â Â Â DebugÂ infoÂ isÂ lostÂ forÂ .soÂ filesÂ whenÂ theyÂ areÂ dlclose'd<br>
208052Â Â strlcpyÂ errorÂ whenÂ nÂ =Â 0<br>
255603Â Â exp-sgcheckÂ AssertionÂ '!already_present'Â failed<br>
338252Â Â buildingÂ valgrindÂ withÂ -fltoÂ (linkÂ timeÂ optimisation)Â fails<br>
345763Â Â MIPSÂ N32Â ABIÂ support<br>
368913Â Â WARNING:Â unhandledÂ arm64-linuxÂ syscall:Â 117Â (ptrace)<br>
Â Â Â Â Â Â Â Â ==Â 388664Â Â unhandledÂ arm64-linuxÂ syscall:Â 117Â Â (ptrace)<br>
372347Â Â ReplacementÂ problemÂ ofÂ theÂ additionalÂ c++14/c++17Â new/deleteÂ operators<br>
373069Â Â memcheck/tests/leak_cpp_interiorÂ failsÂ withÂ GCCÂ 5.1+<br>
376257Â Â helgrindÂ historyÂ fullÂ speedÂ upÂ usingÂ aÂ cachedÂ stack<br>
379373Â Â FixÂ syscallÂ paramÂ msg-&gt;desc.port.nameÂ pointsÂ toÂ uninitialisedÂ byte(s)<br>
Â Â Â Â Â Â Â Â onÂ macOSÂ 10.12<br>
379748Â Â FixÂ missingÂ pselectÂ syscallÂ (OSÂ XÂ 10.11)<br>
379754Â Â FixÂ missingÂ syscallÂ ulock_waitÂ (OSÂ XÂ 10.12)<br>
380397Â Â s390x:Â __GI_strcspn()Â replacemenetÂ needed<br>
381162Â Â possibleÂ arrayÂ overrunÂ inÂ VEXÂ registerÂ allocator<br>
381272Â Â ppc64Â doesn'tÂ compileÂ test_isa_2_06_partx.cÂ withoutÂ VSXÂ support<br>
381274Â Â powerpcÂ tooÂ chattyÂ evenÂ withÂ --sigill-diagnostics=no<br>
381289Â Â epoll_pwaitÂ canÂ haveÂ aÂ NULLÂ sigmask<br>
381553Â Â VEXÂ registerÂ allocatorÂ v3<br>
381556Â Â arm64:Â HandleÂ featureÂ registersÂ accessÂ onÂ 4.11Â LinuxÂ kernelÂ orÂ later<br>
381769Â Â UseÂ ucontext_tÂ insteadÂ ofÂ structÂ ucontext<br>
381805Â Â arm32Â needsÂ ld.soÂ indexÂ hardwireÂ forÂ newÂ glibcÂ securityÂ fixes<br>
382256Â Â gzÂ compilerÂ flagÂ testÂ doesn'tÂ workÂ forÂ gold<br>
382407Â Â vg_perfÂ needsÂ "--terse"Â commandÂ lineÂ option<br>
382515Â Â "AssertionÂ 'di-&gt;have_dinfo'Â failed."Â onÂ wine'sÂ dlls/mscoree/tests/[..]<br>
382563Â Â MIPSÂ MSAÂ ASEÂ support<br>
382998Â Â xml-socketÂ doesn'tÂ work<br>
383275Â Â massif:Â m_xarray.c:162Â (ensureSpaceXA):Â AssertionÂ '!xa-&gt;arr'Â failed<br>
383723Â Â FixÂ missingÂ kevent_qosÂ syscallÂ (macOSÂ 10.11)<br>
Â Â Â Â Â Â Â Â ==Â 385604Â Â illegalÂ hardwareÂ instructionÂ (OpenCVÂ cv::namedWindow)<br>
384096Â Â MentionÂ AddrCheckÂ atÂ Memcheck'sÂ commandÂ lineÂ optionÂ [..]<br>
384230Â Â vexÂ x86-&gt;IR:Â 0x67Â 0xE8Â 0xABÂ 0x68<br>
Â Â Â Â Â Â Â Â ==Â 384156Â Â vexÂ x86-&gt;IR:Â 0x67Â 0xE8Â 0x6BÂ 0x6A<br>
Â Â Â Â Â Â Â Â ==Â 386115Â Â vexÂ x86-&gt;IR:Â 0x67Â 0xE8Â 0xD3Â 0x8BÂ anyÂ program<br>
Â Â Â Â Â Â Â Â ==Â 388407Â Â vexÂ x86-&gt;IR:Â 0x67Â 0xE8Â 0xABÂ 0x29<br>
Â Â Â Â Â Â Â Â ==Â 394903Â Â vexÂ x86-&gt;IR:Â 0x67Â 0xE8Â 0x1BÂ 0xDA<br>
384337Â Â performanceÂ improvementsÂ toÂ VEXÂ registerÂ allocatorÂ v2Â andÂ v3<br>
384526Â Â reduceÂ numberÂ ofÂ spillÂ insnsÂ generatedÂ byÂ VEXÂ registerÂ allocatorÂ v3<br>
384584Â Â CalleeÂ savedÂ regsÂ listedÂ firstÂ forÂ AMD64,Â X86,Â andÂ PPCÂ architectures<br>
384631Â Â SanitiseÂ clientÂ argsÂ asÂ printedÂ withÂ -v<br>
384633Â Â AddÂ aÂ simpleÂ progress-reportingÂ facility<br>
384987Â Â VEXÂ regalloc:Â allocateÂ caller-saveÂ registersÂ forÂ shortÂ livedÂ vregs<br>
385055Â Â PPCÂ VEXÂ temporaryÂ storageÂ exhausted<br>
385182Â Â PPC64Â isÂ missingÂ supportÂ forÂ theÂ DSCR<br>
385183Â Â PPC64,Â AddÂ supportÂ forÂ xscmpeqdp,Â xscmpgtdp,Â xscmpgedp,Â xsmincdp<br>
385207Â Â PPC64,Â generate_store_FPRF()Â generatesÂ tooÂ manyÂ Iops<br>
385208Â Â PPC64,Â xxpermÂ instructionÂ exhaustsÂ temporaryÂ memory<br>
385210Â Â PPC64,Â vpermrÂ instructionÂ couldÂ exhaustÂ temporaryÂ memory<br>
385279Â Â unhandledÂ syscall:Â mach:43Â (mach_generate_activity_id)<br>
Â Â Â Â Â Â Â Â ==Â 395136Â Â valgrind:Â m_syswrap/syswrap-main.c:438Â (BoolÂ eq_Syscall[..]<br>
Â Â Â Â Â Â Â Â ==Â 387045Â Â ValgrindÂ crashingÂ onÂ HighÂ SierraÂ whenÂ testingÂ anyÂ newlyÂ [..]<br>
385334Â Â PPC64,Â fixÂ vpermr,Â xxperm,Â xxpermrÂ maskÂ value.<br>
385408Â Â s390x:Â z13Â vectorÂ "support"Â instructionsÂ notÂ implemented<br>
385409Â Â s390x:Â z13Â vectorÂ integerÂ instructionsÂ notÂ implemented<br>
385410Â Â s390x:Â z13Â vectorÂ stringÂ instructionsÂ notÂ implemented<br>
385412Â Â s390x:Â newÂ non-vectorÂ z13Â instructionsÂ notÂ implemented<br>
385868Â Â glibcÂ ld.soÂ _dl_runtime_resolve_avx_slowÂ conditionalÂ jumpÂ warning.<br>
385912Â Â none/tests/rlimit_nofileÂ failsÂ onÂ newerÂ glibc/kernel.<br>
385939Â Â OptionallyÂ exitÂ onÂ theÂ firstÂ error<br>
386318Â Â valgrind.org/info/tools.htmlÂ isÂ missingÂ SGCheck<br>
386425Â Â runningÂ valgrindÂ +Â wineÂ onÂ armv7lÂ givesÂ illegalÂ opcode<br>
386397Â Â PPC64,Â valgrindÂ truncatesÂ powerpcÂ timebaseÂ toÂ 32-bits.<br>
387410Â Â MIPSr6Â support<br>
387664Â Â Memcheck:Â makeÂ expensive-definedness-checksÂ beÂ theÂ default<br>
387712Â Â s390xÂ cgijnlÂ reportsÂ ConditionalÂ jumpÂ dependsÂ onÂ uninitialisedÂ value<br>
387766Â Â asmÂ shiftsÂ causeÂ falseÂ positiveÂ "ConditionalÂ jumpÂ orÂ moveÂ depends<br>
Â Â Â Â Â Â Â Â onÂ uninitialisedÂ value"<br>
387773Â Â .gnu_debugaltlinkÂ pathsÂ resolveÂ relativeÂ toÂ .debugÂ file,Â notÂ symlink<br>
388174Â Â valgrindÂ withÂ WineÂ quitsÂ withÂ "AssertionÂ 'cfsi_fits'Â failed"<br>
388786Â Â SupportÂ bpfÂ syscallÂ inÂ amd64Â Linux<br>
388862Â Â AddÂ replacementsÂ forÂ wmemchrÂ andÂ wcsnlenÂ onÂ Linux<br>
389065Â Â valgrindÂ meetsÂ gccÂ flagÂ -Wlogical-op<br>
389373Â Â exp-sgcheckÂ theÂ 'impossible'Â happenedÂ asÂ Ist_LoadGÂ isÂ notÂ instrumented<br>
390471Â Â suppressionÂ byÂ specificationÂ ofÂ source-fileÂ lineÂ number<br>
390723Â Â makeÂ xtreeÂ dumpÂ filesÂ worldÂ wideÂ readable,Â similarÂ toÂ logÂ files<br>
391164Â Â constraintÂ bugÂ inÂ tests/ppc64/test_isa_2_07_part1.cÂ forÂ mtfprwa<br>
391861Â Â MassifÂ AssertionÂ 'n_ipsÂ &gt;=Â 1Â &amp;&amp;Â n_ipsÂ &lt;=Â VG_(clo_backtrace_size)'<br>
392118Â Â unhandledÂ amd64-linuxÂ syscall:Â 332Â (statx)<br>
392449Â Â callgrindÂ notÂ clearingÂ theÂ numberÂ ofÂ callsÂ properly<br>
393017Â Â AddÂ missingÂ supportÂ forÂ xsmaxcdpÂ instruction,Â bugÂ fixesÂ forÂ xsmincdp,<br>
Â Â Â Â Â Â Â Â lxssp,Â stxsspÂ andÂ stxvlÂ instructions.<br>
393023Â Â callgrind_controlÂ risksÂ usingÂ theÂ wrongÂ vgdb<br>
393062Â Â build-idÂ ELFÂ phdrsÂ readÂ causesÂ "debuginfoÂ reader:Â ensure_validÂ failed"<br>
393099Â Â posix_memalign()Â invalidÂ writeÂ ifÂ alignmentÂ ==Â 0<br>
393146Â Â failingÂ assertÂ "is_DebugInfo_active(di)"<br>
395709Â Â PPC64Â isÂ missingÂ supportÂ forÂ theÂ xvnegspÂ instruction<br>
395682Â Â AcceptÂ read-onlyÂ PT_LOADÂ segmentsÂ andÂ .rodataÂ byÂ ldÂ -zÂ separate-code<br>
Â Â Â Â Â Â Â Â ==Â 384727<br>
396475Â Â valgrindÂ OS-XÂ build:Â config.hÂ notÂ foundÂ (out-of-treeÂ macOSÂ builds)<br>
395991Â Â arm-linux:Â wine'sÂ unitÂ testsÂ enterÂ aÂ signalÂ deliveryÂ loopÂ [..]<br>
396839Â Â s390x:Â TrapÂ instructionsÂ notÂ implemented<br>
396887Â Â arch_prctlÂ shouldÂ returnÂ EINVALÂ onÂ unknownÂ option<br>
Â Â Â Â Â Â Â Â ==Â 397286Â crashÂ beforeÂ launchingÂ binaryÂ (UnsupportedÂ arch_prctlÂ option)<br>
Â Â Â Â Â Â Â Â ==Â 397393Â valgrind:Â theÂ 'impossible'Â happened:Â (Archlinux)<br>
Â Â Â Â Â Â Â Â ==Â 397521Â valgrind:Â theÂ 'impossible'Â happened:Â UnsupportedÂ [..]<br>
396906Â Â compileÂ testsÂ failureÂ onÂ mips32-linux:Â brokenÂ inlineÂ asmÂ inÂ testsÂ on<br>
Â Â Â Â Â Â Â Â mips32-linux<br>
397012Â Â glibcÂ ld.soÂ usesÂ arch_prctlÂ onÂ i386<br>
397089Â Â amd64:Â IncorrectÂ decodingÂ ofÂ three-registerÂ vmovss/vmovsdÂ opcodeÂ 11h<br>
397354Â Â utimensatÂ shouldÂ ignoreÂ timespecÂ tv_secÂ ifÂ tv_nsecÂ isÂ UTIME_NOW/OMIT<br>
397424Â Â glibcÂ 2.27Â andÂ gdb_serverÂ tests<br>
398028Â Â AssertionÂ `cfsi_fits`Â failingÂ inÂ simpleÂ CÂ program<br>
398066Â Â s390x:Â cgijlÂ dep1,Â 0Â reportsÂ falseÂ unitialisedÂ valuesÂ warning<br>
<br>
n-i-bzÂ Â FixÂ missingÂ workq_opsÂ operationsÂ (macOS)<br>
n-i-bzÂ Â fixÂ bugÂ inÂ strspnÂ replacement<br>
n-i-bzÂ Â AddÂ supportÂ forÂ theÂ LinuxÂ BLKFLSBUFÂ ioctl<br>
n-i-bzÂ Â AddÂ supportÂ forÂ theÂ LinuxÂ BLKREPORTZONEÂ andÂ BLKRESETZONEÂ ioctls<br>
n-i-bzÂ Â FixÂ possibleÂ stackÂ trashingÂ byÂ semctlÂ syscallÂ wrapping<br>
n-i-bzÂ Â AddÂ supportÂ forÂ theÂ LinuxÂ membarrier()Â systemÂ call<br>
n-i-bzÂ Â x86Â frontÂ end:Â recogniseÂ andÂ handleÂ UD2Â correctly<br>
n-i-bzÂ Â SignalÂ deliveryÂ forÂ x86-linux:Â ensureÂ thatÂ theÂ stackÂ pointerÂ is<br>
Â Â Â Â Â Â Â Â correctlyÂ alignedÂ beforeÂ enteringÂ theÂ handler.<br>
<br>
(3.14.0.RC1:Â 30Â SeptemberÂ 2018,Â gitÂ c2aeea2d28acb0639bcc8cc1e4ab115067db1eae)<br>
(3.14.0.RC2:Â 3Â OctoberÂ 2018,Â gitÂ 3e214c4858a6fdd5697e767543a0c19e30505582)<br>
(3.14.0:Â Â Â Â Â 9Â OctoberÂ 2018,Â gitÂ 353a3587bb0e2757411f9138f5e936728ed6cc4f)<br>
<br>
<br>
<br>
ReleaseÂ 3.13.0Â (15Â JuneÂ 2017)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
<br>
3.13.0Â isÂ aÂ featureÂ releaseÂ withÂ manyÂ improvementsÂ andÂ theÂ usualÂ collectionÂ of<br>
bugÂ fixes.<br>
<br>
ThisÂ releaseÂ supportsÂ X86/Linux,Â AMD64/Linux,Â ARM32/Linux,Â ARM64/Linux,<br>
PPC32/Linux,Â PPC64BE/Linux,Â PPC64LE/Linux,Â S390X/Linux,Â MIPS32/Linux,<br>
MIPS64/Linux,Â ARM/Android,Â ARM64/Android,Â MIPS32/Android,Â X86/Android,<br>
X86/Solaris,Â AMD64/SolarisÂ andÂ AMD64/MacOSXÂ 10.12.<br>
<br>
*Â ====================Â COREÂ CHANGESÂ ===================<br>
<br>
*Â TheÂ translationÂ cacheÂ sizeÂ hasÂ beenÂ increasedÂ toÂ keepÂ upÂ withÂ theÂ demandsÂ of<br>
Â Â largeÂ applications.Â Â TheÂ maximumÂ numberÂ ofÂ sectorsÂ hasÂ increasedÂ fromÂ 24Â to<br>
Â Â 48.Â Â TheÂ defaultÂ numberÂ ofÂ sectorsÂ hasÂ increasedÂ fromÂ 16Â toÂ 32Â onÂ all<br>
Â Â targetsÂ exceptÂ Android,Â whereÂ theÂ increaseÂ isÂ fromÂ 6Â toÂ 12.<br>
<br>
*Â TheÂ amountÂ ofÂ memoryÂ thatÂ ValgrindÂ canÂ useÂ hasÂ beenÂ increasedÂ fromÂ 64GBÂ to<br>
Â Â 128GB.Â Â InÂ particularÂ thisÂ meansÂ yourÂ applicationÂ canÂ allocateÂ upÂ toÂ about<br>
Â Â 60GBÂ whenÂ runningÂ onÂ Memcheck.<br>
<br>
*Â Valgrind'sÂ defaultÂ loadÂ addressÂ hasÂ beenÂ changedÂ fromÂ 0x3800'0000Â to<br>
Â Â 0x5800'0000,Â soÂ asÂ toÂ makeÂ itÂ possibleÂ toÂ loadÂ largerÂ executables.Â Â This<br>
Â Â shouldÂ makeÂ itÂ possibleÂ toÂ loadÂ executablesÂ ofÂ sizeÂ atÂ leastÂ 1200MB.<br>
<br>
*Â AÂ massiveÂ spaceleakÂ causedÂ byÂ readingÂ compressedÂ debuginfoÂ filesÂ hasÂ been<br>
Â Â fixed.Â Â ValgrindÂ shouldÂ nowÂ beÂ entirelyÂ usableÂ withÂ gcc-7.0Â "-gz"Â created<br>
Â Â debuginfo.<br>
<br>
*Â TheÂ C++Â demanglerÂ hasÂ beenÂ updated.<br>
<br>
*Â SupportÂ forÂ demanglingÂ RustÂ symbolsÂ hasÂ beenÂ added.<br>
<br>
*Â AÂ newÂ representationÂ ofÂ stackÂ traces,Â theÂ "XTree",Â hasÂ beenÂ added.Â Â AnÂ XTree<br>
Â Â isÂ aÂ treeÂ ofÂ stacktracesÂ withÂ dataÂ associatedÂ withÂ theÂ stacktraces.Â Â ThisÂ is<br>
Â Â usedÂ byÂ variousÂ toolsÂ (Memcheck,Â Helgrind,Â Massif)Â toÂ reportÂ onÂ theÂ heap<br>
Â Â consumptionÂ ofÂ yourÂ program.Â Â ReportingÂ isÂ controlledÂ byÂ theÂ newÂ options<br>
Â Â --xtree-memory=none|allocs|fullÂ andÂ --xtree-memory-file=&lt;file&gt;.<br>
<br>
Â Â AÂ reportÂ canÂ alsoÂ beÂ producedÂ onÂ demandÂ usingÂ theÂ gdbserverÂ monitorÂ command<br>
Â Â 'xtmemoryÂ [&lt;filename&gt;]&gt;'.Â Â TheÂ XTreeÂ canÂ beÂ outputÂ inÂ 2Â formats:Â 'callgrind<br>
Â Â format'Â andÂ 'massifÂ format.Â TheÂ existingÂ visualisersÂ forÂ theseÂ formatsÂ (e.g.<br>
Â Â callgrind_annotate,Â KCachegrind,Â ms_print)Â canÂ beÂ usedÂ toÂ visualiseÂ and<br>
Â Â analyseÂ theseÂ reports.<br>
<br>
Â Â MemcheckÂ canÂ alsoÂ produceÂ XTreeÂ leakÂ reportsÂ usingÂ theÂ CallgrindÂ file<br>
Â Â format.Â Â ForÂ moreÂ details,Â seeÂ theÂ userÂ manual.<br>
<br>
*Â ==================Â PLATFORMÂ CHANGESÂ =================<br>
<br>
*Â ppc64:Â supportÂ forÂ ISAÂ 3.0BÂ andÂ variousÂ fixesÂ forÂ existingÂ 3.0Â support<br>
<br>
*Â amd64:Â fixesÂ forÂ JITÂ failureÂ problemsÂ onÂ longÂ AVX2Â codeÂ blocks<br>
<br>
*Â amd64Â andÂ x86:Â supportÂ forÂ CETÂ prefixesÂ hasÂ beenÂ added<br>
<br>
*Â arm32:Â aÂ fewÂ missingÂ ARMv8Â instructionsÂ haveÂ beenÂ implemented<br>
<br>
*Â arm64,Â mips64,Â mips32:Â anÂ alternativeÂ implementationÂ ofÂ Load-LinkedÂ and<br>
Â Â Store-ConditionalÂ instructionsÂ hasÂ beenÂ added.Â Â ThisÂ isÂ toÂ dealÂ with<br>
Â Â processorÂ implementationsÂ thatÂ implementÂ theÂ LL/SCÂ specificationsÂ strictly<br>
Â Â andÂ asÂ aÂ resultÂ causeÂ ValgrindÂ toÂ hangÂ inÂ certainÂ situations.Â Â The<br>
Â Â alternativeÂ implementationÂ isÂ automaticallyÂ enabledÂ atÂ startup,Â asÂ required.<br>
Â Â YouÂ canÂ useÂ theÂ optionÂ --sim-hints=fallback-llscÂ toÂ force-enableÂ itÂ ifÂ you<br>
Â Â want.<br>
<br>
*Â SupportÂ forÂ OSXÂ 10.12Â hasÂ beenÂ improved.<br>
<br>
*Â OnÂ Linux,Â cloneÂ handlingÂ hasÂ beenÂ improvedÂ toÂ honourÂ CLONE_VFORKÂ that<br>
Â Â involvesÂ aÂ childÂ stack.Â Â NoteÂ howeverÂ thatÂ CLONE_VFORKÂ |Â CLONE_VMÂ isÂ handled<br>
Â Â likeÂ CLONE_VFORKÂ (byÂ removingÂ CLONE_VM),Â soÂ applicationsÂ thatÂ dependÂ on<br>
Â Â CLONE_VMÂ exactÂ semanticsÂ willÂ (still)Â notÂ work.<br>
<br>
*Â TheÂ TileGX/LinuxÂ portÂ hasÂ beenÂ removedÂ becauseÂ itÂ appearsÂ toÂ beÂ bothÂ unused<br>
Â Â andÂ unsupported.<br>
<br>
*Â ====================Â TOOLÂ CHANGESÂ ====================<br>
<br>
*Â Memcheck:<br>
<br>
Â Â -Â MemcheckÂ shouldÂ giveÂ fewerÂ falseÂ positivesÂ whenÂ runningÂ optimised<br>
Â Â Â Â Clang/LLVMÂ generatedÂ code.<br>
<br>
Â Â -Â SupportÂ forÂ --xtree-memoryÂ andÂ 'xtmemoryÂ [&lt;filename&gt;]&gt;'.<br>
<br>
Â Â -Â NewÂ commandÂ lineÂ optionsÂ --xtree-leak=no|yesÂ andÂ --xtree-leak-file=&lt;file&gt;<br>
Â Â Â Â toÂ produceÂ theÂ endÂ ofÂ executionÂ leakÂ reportÂ inÂ aÂ xtreeÂ callgrindÂ format<br>
Â Â Â Â file.<br>
<br>
Â Â -Â NewÂ optionÂ 'xtleak'Â inÂ theÂ memcheckÂ leak_checkÂ monitorÂ command,Â toÂ produce<br>
Â Â Â Â theÂ leakÂ reportÂ inÂ anÂ xtreeÂ file.<br>
<br>
*Â Massif:<br>
<br>
Â Â -Â SupportÂ forÂ --xtree-memoryÂ andÂ 'xtmemoryÂ [&lt;filename&gt;]&gt;'.<br>
<br>
Â Â -Â ForÂ someÂ workloadsÂ (typically,Â forÂ bigÂ applications),Â MassifÂ memory<br>
Â Â Â Â consumptionÂ andÂ CPUÂ consumptionÂ hasÂ decreasedÂ significantly.<br>
<br>
*Â Helgrind:<br>
<br>
Â Â -Â SupportÂ forÂ --xtree-memoryÂ andÂ 'xtmemoryÂ [&lt;filename&gt;]&gt;'.<br>
<br>
Â Â -Â additionÂ ofÂ clientÂ requestÂ VALGRIND_HG_GNAT_DEPENDENT_MASTER_JOIN,Â useful<br>
Â Â Â Â forÂ AdaÂ gnatÂ compiledÂ applications.<br>
<br>
*Â ====================Â OTHERÂ CHANGESÂ ====================<br>
<br>
*Â ForÂ ValgrindÂ developers:Â inÂ anÂ outer/innerÂ setup,Â theÂ outerÂ ValgrindÂ will<br>
Â Â appendÂ theÂ innerÂ guestÂ stacktraceÂ toÂ theÂ innerÂ hostÂ stacktrace.Â Â ThisÂ helps<br>
Â Â toÂ investigateÂ theÂ errorsÂ reportedÂ byÂ theÂ outer,Â whenÂ theyÂ areÂ causedÂ byÂ the<br>
Â Â innerÂ guestÂ programÂ (suchÂ asÂ anÂ innerÂ regtest).Â Â SeeÂ README_DEVELOPERSÂ for<br>
Â Â moreÂ info.<br>
<br>
*Â ToÂ allowÂ fastÂ detectionÂ ofÂ callgrindÂ filesÂ byÂ desktopÂ environmentsÂ andÂ file<br>
Â Â managers,Â theÂ formatÂ wasÂ extendedÂ toÂ haveÂ anÂ optionalÂ firstÂ lineÂ that<br>
Â Â uniquelyÂ identifiesÂ theÂ formatÂ ("#Â callgrindÂ format").Â Â CallgrindÂ creates<br>
Â Â thisÂ lineÂ now,Â asÂ doesÂ theÂ newÂ xtreeÂ functionality.<br>
<br>
*Â FileÂ nameÂ templateÂ argumentsÂ (suchÂ asÂ --log-file,Â --xtree-memory-file,Â ...)<br>
Â Â haveÂ aÂ newÂ %nÂ formatÂ letterÂ thatÂ isÂ replacedÂ byÂ aÂ sequenceÂ number.<br>
<br>
*Â "--versionÂ -v"Â nowÂ showsÂ theÂ SVNÂ revisionÂ numbersÂ fromÂ whichÂ ValgrindÂ was<br>
Â Â built.<br>
<br>
*Â ====================Â FIXEDÂ BUGSÂ ====================<br>
<br>
TheÂ followingÂ bugsÂ haveÂ beenÂ fixedÂ orÂ resolved.Â Â NoteÂ thatÂ "n-i-bz"<br>
standsÂ forÂ "notÂ inÂ bugzilla"Â --Â thatÂ is,Â aÂ bugÂ thatÂ wasÂ reportedÂ toÂ us<br>
butÂ neverÂ gotÂ aÂ bugzillaÂ entry.Â Â WeÂ encourageÂ youÂ toÂ fileÂ bugsÂ in<br>
bugzillaÂ (https://bugs.kde.org/enter_bug.cgi?product=valgrind)Â rather<br>
thanÂ mailingÂ theÂ developersÂ (orÂ mailingÂ lists)Â directlyÂ --Â bugsÂ that<br>
areÂ notÂ enteredÂ intoÂ bugzillaÂ tendÂ toÂ getÂ forgottenÂ aboutÂ orÂ ignored.<br>
<br>
ToÂ seeÂ detailsÂ ofÂ aÂ givenÂ bug,Â visit<br>
Â Â https://bugs.kde.org/show_bug.cgi?id=XXXXXX<br>
whereÂ XXXXXXÂ isÂ theÂ bugÂ numberÂ asÂ listedÂ below.<br>
<br>
162848Â Â --log-fileÂ outputÂ isn'tÂ splitÂ whenÂ aÂ programÂ forks<br>
340777Â Â IllegalÂ instructionÂ onÂ mipsÂ (ar71xx)<br>
341481Â Â MIPS64:Â Iop_CmpNE32Â triggersÂ falseÂ warningÂ onÂ MIPS64Â platforms<br>
342040Â Â ValgrindÂ mishandlesÂ cloneÂ withÂ CLONE_VFORKÂ |Â CLONE_VMÂ thatÂ clones<br>
Â Â Â Â Â Â Â Â toÂ aÂ differentÂ stack.<br>
344139Â Â x86Â stack-segÂ overrides,Â neededÂ byÂ theÂ WineÂ people<br>
344524Â Â storeÂ conditionalÂ ofÂ guestÂ applicationsÂ alwaysÂ failÂ -Â observedÂ on<br>
Â Â Â Â Â Â Â Â Octeon3(MIPS)<br>
348616Â Â Wine/valgrind:Â notedÂ butÂ unhandledÂ ioctlÂ 0x5390Â [..]Â (DVD_READ_STRUCT)<br>
352395Â Â PleaseÂ provideÂ SVNÂ revisionÂ infoÂ inÂ --versionÂ -v<br>
352767Â Â Wine/valgrind:Â notedÂ butÂ unhandledÂ ioctlÂ 0x5307Â [..]Â (CDROMSTOP)<br>
356374Â Â AssertionÂ 'DRD_(g_threadinfo)[tid].pt_threadidÂ !=<br>
Â Â Â Â Â Â Â Â INVALID_POSIX_THREADID'Â failed<br>
358213Â Â helgrind/drdÂ bar_badÂ testcaseÂ hangsÂ orÂ crashesÂ withÂ newÂ glibcÂ pthread<br>
Â Â Â Â Â Â Â Â barrierÂ implementation<br>
358697Â Â valgrind.h:Â SomeÂ codeÂ remainsÂ evenÂ whenÂ definingÂ NVALGRIND<br>
359202Â Â AddÂ muslÂ libcÂ configure/compile<br>
360415Â Â amd64Â instructionsÂ ADCXÂ andÂ ADOXÂ areÂ notÂ implementedÂ inÂ VEX<br>
Â Â Â Â Â Â Â Â ==Â 372828Â (vexÂ amd64-&gt;IR:Â 0x66Â 0xFÂ 0x3AÂ 0x62Â 0x4AÂ 0x10)<br>
360429Â Â unhandledÂ ioctlÂ 0x530dÂ withÂ noÂ size/directionÂ hintsÂ (CDROMREADMODE1)<br>
362223Â Â assertionÂ failedÂ whenÂ .valgrindrcÂ isÂ aÂ directoryÂ insteadÂ ofÂ aÂ file<br>
367543Â Â bt/btc/btr/btsÂ x86/x86_64Â instructionsÂ areÂ poorly-handledÂ wrtÂ flags<br>
367942Â Â SegfaultÂ vgPlain_do_sys_sigactionÂ (m_signals.c:1138)<br>
368507Â Â can'tÂ mallocÂ chunksÂ largerÂ thanÂ aboutÂ 34GB<br>
368529Â Â AndroidÂ armÂ targetÂ linkÂ error,Â missingÂ atexitÂ andÂ pthread_atfork<br>
368863Â Â WARNING:Â unhandledÂ arm64-linuxÂ syscall:Â 100Â (get_robust_list)<br>
368865Â Â WARNING:Â unhandledÂ arm64-linuxÂ syscall:Â 272Â (kcmp)<br>
368868Â Â disInstr(arm64):Â unhandledÂ instructionÂ 0xD53BE000Â =Â cntfrq_el0Â (ARMv8)<br>
368917Â Â WARNING:Â unhandledÂ arm64-linuxÂ syscall:Â 218Â (request_key)<br>
368918Â Â WARNING:Â unhandledÂ arm64-linuxÂ syscall:Â 127Â (sched_rr_get_interval)<br>
368922Â Â WARNING:Â unhandledÂ arm64-linuxÂ syscall:Â 161Â (sethostname)<br>
368924Â Â WARNING:Â unhandledÂ arm64-linuxÂ syscall:Â 84Â (sync_file_range)<br>
368925Â Â WARNING:Â unhandledÂ arm64-linuxÂ syscall:Â 130Â (tkill)<br>
368926Â Â WARNING:Â unhandledÂ arm64-linuxÂ syscall:Â 97Â (unshare)<br>
369459Â Â valgrindÂ onÂ arm64Â violatesÂ theÂ ARMv8Â specÂ (ldxr/stxr)<br>
370028Â Â ReduceÂ theÂ numberÂ ofÂ compilerÂ warningsÂ onÂ MIPSÂ platforms<br>
370635Â Â arm64Â missingÂ syscallÂ getcpu<br>
371225Â Â FixÂ orderÂ ofÂ timer_{gettime,getoverrun,settime}Â syscallsÂ onÂ arm64<br>
371227Â Â CleanÂ AArch64Â syscallÂ table<br>
371412Â Â RenameÂ wrap_sys_shmatÂ toÂ sys_shmatÂ likeÂ otherÂ wrappers<br>
371471Â Â ValgrindÂ complainsÂ aboutÂ nonÂ legitÂ memoryÂ leaksÂ onÂ placementÂ newÂ (C++)<br>
371491Â Â handleAddrOverrides()Â isÂ [incorrect]Â whenÂ ASOÂ prefixÂ isÂ used<br>
371503Â Â disInstr(arm64):Â unhandledÂ instructionÂ 0xF89F0000<br>
371869Â Â supportÂ '%'Â inÂ symbolÂ Z-encoding<br>
371916Â Â executionÂ treeÂ xtreeÂ concept<br>
372120Â Â c++Â demanglerÂ demanglesÂ symbolsÂ whichÂ areÂ notÂ c++<br>
372185Â Â SupportÂ ofÂ valgrindÂ onÂ ARMv8Â withÂ 32Â bitÂ executable<br>
372188Â Â vexÂ amd64-&gt;IR:Â 0x66Â 0xFÂ 0x3AÂ 0x62Â 0x4AÂ 0x10Â 0x10Â 0x48Â (PCMPxSTRxÂ $0x10)<br>
372195Â Â PowerÂ PC,Â xxselÂ instructionÂ isÂ notÂ alwaysÂ recognized.<br>
372504Â Â HangingÂ onÂ exit_group<br>
372600Â Â processÂ loopsÂ foreverÂ whenÂ fatalÂ signalsÂ areÂ arrivingÂ quickly<br>
372794Â Â LibVEXÂ (arm32Â frontÂ end):Â 'AssertionÂ szBlg2Â &lt;=Â 3'Â failed<br>
373046Â Â StacksÂ registeredÂ byÂ coreÂ areÂ neverÂ deregistered<br>
373069Â Â memcheck/tests/leak_cpp_interiorÂ failsÂ withÂ GCCÂ 5.1+<br>
373086Â Â ImplementÂ additionalÂ XenÂ hypercalls<br>
373192Â Â CallingÂ posix_spawnÂ inÂ glibcÂ 2.24Â completelyÂ broken<br>
373488Â Â SupportÂ forÂ fanotifyÂ APIÂ onÂ ARM64Â architecture<br>
	==Â 368864Â Â WARNING:Â unhandledÂ arm64-linuxÂ syscall:Â 262Â (fanotify_init)<br>
373555Â Â RenameÂ BBPTRÂ toÂ GSPTRÂ asÂ itÂ denotesÂ guestÂ stateÂ pointerÂ only<br>
373938Â Â constÂ IRExprÂ argumentsÂ forÂ matchIRExpr()<br>
374719Â Â someÂ spellingÂ fixes<br>
374963Â Â increaseÂ valgrind'sÂ loadÂ addressÂ toÂ preventÂ mmapÂ failure<br>
375514Â Â valgrind_get_tls_addr()Â doesÂ notÂ workÂ inÂ caseÂ ofÂ staticÂ TLS<br>
375772Â Â +1Â errorÂ inÂ get_elf_symbol_info()Â whenÂ computingÂ valueÂ ofÂ 'hi'Â address<br>
Â Â Â Â Â Â Â Â forÂ ML_(find_rx_mapping)()<br>
375806Â Â TestÂ helgrind/tests/tc22_exit_w_lockÂ failsÂ withÂ glibcÂ 2.24<br>
375839Â Â TemporaryÂ storageÂ exhausted,Â withÂ longÂ sequenceÂ ofÂ vfmadd231psÂ insns<br>
Â Â Â Â Â Â Â Â ==Â 377159Â Â "vex:Â theÂ `impossible'Â happened"Â stillÂ present<br>
Â Â Â Â Â Â Â Â ==Â 375150Â Â AssertionÂ 'tres.statusÂ ==Â VexTransOK'Â failed<br>
Â Â Â Â Â Â Â Â ==Â 378068Â Â valgrindÂ crashesÂ onÂ AVX2Â functionÂ inÂ FFmpeg<br>
376142Â Â SegfaultsÂ onÂ MIPSÂ CaviumÂ OcteonÂ boards<br>
376279Â Â disInstr(arm64):Â unhandledÂ instructionÂ 0xD50320FF<br>
376455Â Â Solaris:Â unhandledÂ syscallÂ lgrpsys(180)<br>
376518Â Â Solaris:Â unhandledÂ fastÂ trapÂ getlgrp(6)<br>
376611Â Â ppc64Â andÂ arm64Â don'tÂ knowÂ aboutÂ prlimit64Â syscall<br>
376729Â Â PPC64,Â removeÂ R2Â fromÂ theÂ clobberÂ list<br>
Â Â Â Â Â Â Â Â ==Â 371668<br>
376956Â Â syswrapÂ ofÂ SNDDRVÂ andÂ DRM_IOCTL_VERSIONÂ causingÂ someÂ addresses<br>
Â Â Â Â Â Â Â Â toÂ beÂ wronglyÂ markedÂ asÂ addressable<br>
377066Â Â SomeÂ ValgrindÂ unitÂ testsÂ failÂ toÂ compileÂ onÂ UbuntuÂ 16.10Â with<br>
Â Â Â Â Â Â Â Â PIEÂ enabledÂ byÂ default<br>
377376Â Â memcheck/tests/linux/getregsetÂ failsÂ withÂ glibc2.24<br>
377427Â Â PPC64,Â lxvÂ instructionÂ failingÂ onÂ oddÂ destinationÂ registerÂ <br>
377478Â Â PPC64:Â ISAÂ 3.0Â setupÂ fixes<br>
377698Â Â MissingÂ memoryÂ checkÂ forÂ futex()Â uaddrÂ argÂ forÂ FUTEX_WAKE<br>
Â Â Â Â Â Â Â Â andÂ FUTEX_WAKE_BITSET,Â checkÂ onlyÂ 4Â argsÂ forÂ FUTEX_WAKE_BITSET,<br>
Â Â Â Â Â Â Â Â andÂ 2Â argsÂ forÂ FUTEX_TRYLOCK_PI<br>
377717Â Â FixÂ massiveÂ spaceÂ leakÂ whenÂ readingÂ compressedÂ debuginfoÂ sections<br>
377891Â Â UpdateÂ XenÂ 4.6Â domctlÂ wrappers<br>
377930Â Â fcntlÂ syscallÂ wrapperÂ isÂ missingÂ flockÂ structureÂ check<br>
378524Â Â libvexmultiarch_testÂ regressionÂ onÂ s390xÂ andÂ ppc64<br>
378535Â Â ValgrindÂ reportsÂ INTERNALÂ ERRORÂ inÂ execveÂ syscallÂ wrapper<br>
378673Â Â UpdateÂ libibertyÂ demangler<br>
378931Â Â AddÂ ISAÂ 3.0BÂ additionalÂ isnstructions,Â addÂ OV32,Â CA32Â settingÂ support<br>
379039Â Â syscallÂ wrapperÂ forÂ prctl(PR_SET_NAME)Â mustÂ notÂ checkÂ moreÂ thanÂ 16Â bytes<br>
379094Â Â ValgrindÂ reportsÂ INTERNALÂ ERRORÂ inÂ rt_sigsuspendÂ syscallÂ wrapper<br>
379371Â Â UNKNOWNÂ taskÂ messageÂ [idÂ 3444,Â toÂ mach_task_self(),Â replyÂ 0x603]<br>
Â Â Â Â Â Â Â Â (task_register_dyld_image_infos)<br>
379372Â Â UNKNOWNÂ taskÂ messageÂ [idÂ 3447,Â toÂ mach_task_self(),Â replyÂ 0x603]<br>
Â Â Â Â Â Â Â Â (task_register_dyld_shared_cache_image_info)<br>
379390Â Â unhandledÂ syscall:Â mach:70Â (host_create_mach_voucher_trap)<br>
379473Â Â MIPS:Â addÂ supportÂ forÂ rdhwrÂ cycleÂ counterÂ register<br>
379504Â Â removeÂ TileGX/LinuxÂ port<br>
379525Â Â SupportÂ moreÂ x86Â nopÂ opcodes<br>
379838Â Â disAMode(x86):Â notÂ anÂ addr!<br>
379703Â Â PCÂ ISAÂ 3.0Â fixes:Â stxvx,Â stxv,Â xscmpexpdpÂ instructions<br>
379890Â Â arm:Â unhandledÂ instruction:Â 0xEBADÂ 0x1B05Â (sub.wÂ fp,Â sp,Â r5,Â lslÂ #4)<br>
379895Â Â clock_gettimeÂ doesÂ notÂ executeÂ POSTÂ syscallÂ wrapper<br>
379925Â Â PPC64,Â mtffsÂ doesÂ notÂ setÂ theÂ FPCCÂ andÂ CÂ bitsÂ inÂ theÂ FPSCRÂ correctly<br>
379966Â Â WARNING:Â unhandledÂ amd64-linuxÂ syscall:Â 313Â (finit_module)<br>
380200Â Â xtreeÂ generatedÂ callgrindÂ filesÂ referÂ toÂ filesÂ withoutÂ directoryÂ name<br>
380202Â Â AssertionÂ failureÂ forÂ cacheÂ lineÂ sizeÂ (clsÂ ==Â 64)Â onÂ aarch64.<br>
380397Â Â s390x:Â __GI_strcspn()Â replacementÂ needed<br>
n-i-bzÂ Â FixÂ pub_tool_basics.hÂ buildÂ issueÂ withÂ g++Â 4.4.7.<br>
<br>
(3.13.0.RC1:Â Â 2Â JuneÂ 2017,Â vexÂ r3386,Â valgrindÂ r16434)<br>
(3.13.0.RC2:Â Â 9Â JuneÂ 2017,Â vexÂ r3389,Â valgrindÂ r16443)<br>
(3.13.0:Â Â Â Â Â 14Â JuneÂ 2017,Â vexÂ r3396,Â valgrindÂ r16446)<br>
<br>
<br>
<br>
ReleaseÂ 3.12.0Â (20Â OctoberÂ 2016)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
<br>
3.12.0Â isÂ aÂ featureÂ releaseÂ withÂ manyÂ improvementsÂ andÂ theÂ usual<br>
collectionÂ ofÂ bugÂ fixes.<br>
<br>
ThisÂ releaseÂ supportsÂ X86/Linux,Â AMD64/Linux,Â ARM32/Linux,<br>
ARM64/Linux,Â PPC32/Linux,Â PPC64BE/Linux,Â PPC64LE/Linux,Â S390X/Linux,<br>
MIPS32/Linux,Â MIPS64/Linux,Â ARM/Android,Â ARM64/Android,<br>
MIPS32/Android,Â X86/Android,Â X86/Solaris,Â AMD64/Solaris,Â X86/MacOSX<br>
10.10Â andÂ AMD64/MacOSXÂ 10.10.Â Â ThereÂ isÂ alsoÂ preliminaryÂ supportÂ for<br>
X86/MacOSXÂ 10.11/12,Â AMD64/MacOSXÂ 10.11/12Â andÂ TILEGX/Linux.<br>
<br>
*Â ==================Â PLATFORMÂ CHANGESÂ =================<br>
<br>
*Â POWER:Â SupportÂ forÂ ISAÂ 3.0Â hasÂ beenÂ added<br>
<br>
*Â mips:Â supportÂ forÂ O32Â FPXXÂ ABIÂ hasÂ beenÂ added.<br>
*Â mips:Â improvedÂ recognitionÂ ofÂ differentÂ processors<br>
*Â mips:Â determinationÂ ofÂ pageÂ sizeÂ nowÂ doneÂ atÂ runÂ time<br>
<br>
*Â amd64:Â PartialÂ supportÂ forÂ AMDÂ FMA4Â instructions.<br>
<br>
*Â arm,Â arm64:Â SupportÂ forÂ v8Â cryptoÂ andÂ CRCÂ instructions.<br>
<br>
*Â ImprovementsÂ andÂ robustificationÂ ofÂ theÂ SolarisÂ port.<br>
<br>
*Â PreliminaryÂ supportÂ forÂ MacOSÂ 10.12Â (Sierra)Â hasÂ beenÂ added.<br>
<br>
WhilstÂ 3.12.0Â continuesÂ toÂ supportÂ theÂ 32-bitÂ x86Â instructionÂ set,Â we<br>
wouldÂ preferÂ usersÂ toÂ migrateÂ toÂ 64-bitÂ x86Â (a.k.aÂ amd64Â orÂ x86_64)<br>
whereÂ possible.Â Â Valgrind'sÂ supportÂ forÂ 32-bitÂ x86Â hasÂ stagnatedÂ in<br>
recentÂ yearsÂ andÂ hasÂ fallenÂ farÂ behindÂ thatÂ forÂ 64-bitÂ x86<br>
instructions.Â Â ByÂ contrastÂ 64-bitÂ x86Â isÂ wellÂ supported,Â upÂ toÂ and<br>
includingÂ AVX2.<br>
<br>
*Â ====================Â TOOLÂ CHANGESÂ ====================<br>
<br>
*Â Memcheck:<br>
<br>
Â Â -Â AddedÂ metaÂ mempoolÂ supportÂ forÂ describingÂ aÂ customÂ allocatorÂ which:<br>
Â Â Â Â Â -Â Auto-freesÂ allÂ chunksÂ assumingÂ thatÂ destroyingÂ aÂ poolÂ destroysÂ all<br>
Â Â Â Â Â Â Â objectsÂ inÂ theÂ pool<br>
Â Â Â Â Â -Â UsesÂ itselfÂ toÂ allocateÂ otherÂ memoryÂ blocks<br>
<br>
Â Â -Â NewÂ flagÂ --ignore-range-below-spÂ toÂ ignoreÂ memoryÂ accessesÂ below<br>
Â Â Â Â theÂ stackÂ pointer,Â ifÂ youÂ reallyÂ haveÂ to.Â Â TheÂ relatedÂ flag<br>
Â Â Â Â --workaround-gcc296-bugs=yesÂ isÂ nowÂ deprecated.Â Â Use<br>
Â Â Â Â --ignore-range-below-sp=1024-1Â asÂ aÂ replacement.<br>
<br>
*Â DRD:<br>
<br>
Â Â -Â ImprovedÂ threadÂ startupÂ timeÂ significantlyÂ onÂ non-LinuxÂ platforms.<br>
<br>
*Â DHAT<br>
<br>
Â Â -Â AddedÂ collectionÂ ofÂ theÂ metricÂ "tot-blocks-allocd"<br>
<br>
*Â ====================Â OTHERÂ CHANGESÂ ====================<br>
<br>
*Â Replacement/wrappingÂ ofÂ malloc/newÂ relatedÂ functionsÂ isÂ nowÂ doneÂ notÂ just<br>
Â Â forÂ systemÂ librariesÂ byÂ default,Â butÂ forÂ anyÂ globallyÂ definedÂ malloc/new<br>
Â Â relatedÂ functionÂ (bothÂ inÂ sharedÂ librariesÂ andÂ staticallyÂ linkedÂ alternative<br>
Â Â mallocÂ implementations).Â Â TheÂ dynamicÂ (runtime)Â linkerÂ isÂ excluded,Â though.<br>
Â Â ToÂ onlyÂ interceptÂ malloc/newÂ relatedÂ functionsÂ in<br>
Â Â systemÂ librariesÂ useÂ --soname-synonyms=somalloc=nouserinterceptsÂ (where<br>
Â Â "nouserintercepts"Â canÂ beÂ anyÂ non-existingÂ libraryÂ name).<br>
Â Â ThisÂ newÂ functionalityÂ isÂ notÂ implementedÂ forÂ MacOSÂ X.<br>
<br>
*Â TheÂ maximumÂ numberÂ ofÂ callersÂ inÂ aÂ suppressionÂ entryÂ isÂ nowÂ equalÂ to<br>
Â Â theÂ maximumÂ sizeÂ forÂ --num-callersÂ (500).<br>
Â Â NoteÂ thatÂ --gen-suppressions=yes|allÂ similarlyÂ generatesÂ suppressions<br>
Â Â containingÂ upÂ toÂ --num-callersÂ frames.<br>
<br>
*Â NewÂ andÂ modifiedÂ GDBÂ serverÂ monitorÂ features:<br>
<br>
Â Â -Â Valgrind'sÂ gdbserverÂ nowÂ acceptsÂ theÂ commandÂ 'catchÂ syscall'.<br>
Â Â Â Â NoteÂ thatÂ youÂ mustÂ haveÂ GDBÂ &gt;=Â 7.11Â toÂ useÂ 'catchÂ syscall'Â with<br>
Â Â Â Â gdbserver.<br>
<br>
*Â NewÂ optionÂ --run-cxx-freeres=&lt;yes|no&gt;Â canÂ beÂ usedÂ toÂ changeÂ whether<br>
Â Â __gnu_cxx::__freeres()Â cleanupÂ functionÂ isÂ calledÂ orÂ not.Â DefaultÂ is<br>
Â Â 'yes'.<br>
<br>
*Â ValgrindÂ isÂ ableÂ toÂ readÂ compressedÂ debuginfoÂ sectionsÂ inÂ twoÂ formats:<br>
Â Â -Â zlibÂ ELFÂ gABIÂ formatÂ withÂ SHF_COMPRESSEDÂ flagÂ (gccÂ optionÂ -gz=zlib)<br>
Â Â -Â zlibÂ GNUÂ formatÂ withÂ .zdebugÂ sectionsÂ (gccÂ optionÂ -gz=zlib-gnu)<br>
<br>
*Â ModestÂ JIT-costÂ improvements:Â theÂ costÂ ofÂ instrumentingÂ codeÂ blocks<br>
Â Â forÂ theÂ mostÂ commonÂ useÂ caseÂ (x86_64-linux,Â Memcheck)Â hasÂ been<br>
Â Â reducedÂ byÂ 10%-15%.<br>
<br>
*Â ImprovedÂ performanceÂ forÂ programsÂ thatÂ doÂ aÂ lotÂ ofÂ discardingÂ of<br>
Â Â instructionÂ addressÂ rangesÂ ofÂ 8KBÂ orÂ less.<br>
<br>
*Â TheÂ C++Â symbolÂ demanglerÂ hasÂ beenÂ updated.<br>
<br>
*Â MoreÂ robustnessÂ againstÂ invalidÂ syscallÂ parametersÂ onÂ Linux.<br>
<br>
*Â ====================Â FIXEDÂ BUGSÂ ====================<br>
<br>
TheÂ followingÂ bugsÂ haveÂ beenÂ fixedÂ orÂ resolved.Â Â NoteÂ thatÂ "n-i-bz"<br>
standsÂ forÂ "notÂ inÂ bugzilla"Â --Â thatÂ is,Â aÂ bugÂ thatÂ wasÂ reportedÂ toÂ us<br>
butÂ neverÂ gotÂ aÂ bugzillaÂ entry.Â Â WeÂ encourageÂ youÂ toÂ fileÂ bugsÂ in<br>
bugzillaÂ (https://bugs.kde.org/enter_bug.cgi?product=valgrind)Â rather<br>
thanÂ mailingÂ theÂ developersÂ (orÂ mailingÂ lists)Â directlyÂ --Â bugsÂ that<br>
areÂ notÂ enteredÂ intoÂ bugzillaÂ tendÂ toÂ getÂ forgottenÂ aboutÂ orÂ ignored.<br>
<br>
ToÂ seeÂ detailsÂ ofÂ aÂ givenÂ bug,Â visit<br>
Â Â https://bugs.kde.org/show_bug.cgi?id=XXXXXX<br>
whereÂ XXXXXXÂ isÂ theÂ bugÂ numberÂ asÂ listedÂ below.<br>
<br>
191069Â Â ExitingÂ dueÂ toÂ signalÂ notÂ reportedÂ inÂ XMLÂ output<br>
199468Â Â Suppressions:Â stackÂ sizeÂ limitedÂ toÂ 25<br>
Â Â Â Â Â Â Â Â whileÂ --num-callersÂ allowsÂ moreÂ frames<br>
212352Â Â vexÂ amd64Â unhandledÂ opc_auxÂ =Â 0xÂ 2,Â first_opcodeÂ ==Â 0xDCÂ (FCOM)<br>
278744Â Â cvtps2pdÂ withÂ redundantÂ RexW<br>
303877Â Â valgrindÂ doesn'tÂ supportÂ compressedÂ debuginfoÂ sections.<br>
345307Â Â WarningÂ aboutÂ "stillÂ reachable"Â memoryÂ whenÂ usingÂ libstdc++Â fromÂ gccÂ 5<br>
348345Â Â AssertionÂ failsÂ forÂ negativeÂ lineno<br>
348924Â Â MIPS:Â LoadÂ doublesÂ throughÂ memoryÂ soÂ theÂ codeÂ compilesÂ withÂ theÂ FPXXÂ ABI<br>
351282Â Â VÂ 3.10.1Â MIPSÂ softfloatÂ buildÂ brokenÂ withÂ GCCÂ 4.9.3Â /Â binutilsÂ 2.25.1<br>
351692Â Â DumpsÂ createdÂ byÂ valgrindÂ areÂ notÂ readableÂ byÂ gdbÂ (mips32Â specific)<br>
351804Â Â CrashÂ onÂ generatingÂ suppressionsÂ forÂ "printf"Â callÂ onÂ OSÂ XÂ 10.10<br>
352197Â Â mips:Â mmap2()Â notÂ wrappedÂ correctlyÂ forÂ pageÂ sizeÂ &gt;Â 4096<br>
353083Â Â arm64Â doesn'tÂ implementÂ variousÂ xattrÂ systemÂ calls<br>
353084Â Â arm64Â doesn'tÂ supportÂ sigpendingÂ systemÂ call<br>
353137Â Â www:Â updateÂ infoÂ forÂ SupportedÂ Platforms<br>
353138Â Â www:Â updateÂ "TheÂ ValgrindÂ Developers"Â page<br>
353370Â Â don'tÂ advertiseÂ RDRANDÂ inÂ cpuidÂ forÂ Core-i7-4910-likeÂ avx2Â machine<br>
Â Â Â Â Â Â Â Â ==Â 365325<br>
Â Â Â Â Â Â Â Â ==Â 357873<br>
353384Â Â amd64-&gt;IR:Â 0x66Â 0xFÂ 0x3AÂ 0x62Â 0xD1Â 0x62Â (pcmpXstrXÂ $0x62)<br>
353398Â Â WARNING:Â unhandledÂ amd64-solarisÂ syscall:Â 207<br>
353660Â Â XMLÂ inÂ auxwhatÂ tagÂ notÂ escapingÂ reservedÂ symbolsÂ properly<br>
353680Â Â s390x:Â CrashÂ withÂ certainÂ glibcÂ versionsÂ dueÂ toÂ non-implementedÂ TBEGIN<br>
353727Â Â amd64-&gt;IR:Â 0x66Â 0xFÂ 0x3AÂ 0x62Â 0xD1Â 0x72Â (pcmpXstrXÂ $0x72)<br>
353802Â Â ELFÂ debugÂ infoÂ readerÂ confusedÂ withÂ multipleÂ .rodataÂ sections<br>
353891Â Â AssertÂ 'bad_scanned_addrÂ &lt;Â VG_ROUNDDN(start+len,Â sizeof(Addr))'Â failed<br>
353917Â Â unhandledÂ amd64-solarisÂ syscallÂ fchdir(120)<br>
353920Â Â unhandledÂ amd64-solarisÂ syscall:Â 170<br>
354274Â Â arm:Â unhandledÂ instruction:Â 0xEBADÂ 0x0AC1Â (sub.wÂ sl,Â sp,Â r1,Â lslÂ #3)<br>
354392Â Â unhandledÂ amd64-solarisÂ syscall:Â 171<br>
354797Â Â VbitÂ testÂ doesÂ notÂ includeÂ IopsÂ forÂ PowerÂ 8Â instructionÂ support<br>
354883Â Â tst-&gt;os_state.pthreadÂ -Â magic_deltaÂ assertionÂ failureÂ onÂ OSXÂ 10.11<br>
Â Â Â Â Â Â Â Â ==Â 361351<br>
Â Â Â Â Â Â Â Â ==Â 362920<br>
Â Â Â Â Â Â Â Â ==Â 366222<br>
354933Â Â FixÂ documentationÂ ofÂ --kernel-variant=android-no-hw-tlsÂ option<br>
355188Â Â valgrindÂ shouldÂ interceptÂ allÂ mallocÂ relatedÂ globalÂ functions<br>
355454Â Â doÂ notÂ interceptÂ mallocÂ relatedÂ symbolsÂ fromÂ theÂ runtimeÂ linker<br>
355455Â Â stderr.expÂ ofÂ testÂ casesÂ wrapmallocÂ andÂ wrapmallocstaticÂ overconstrained<br>
356044Â Â DwarfÂ lineÂ infoÂ readerÂ misinterpretsÂ is_stmtÂ register<br>
356112Â Â mips:Â replaceÂ addiÂ withÂ addiu<br>
356393Â Â valgrindÂ (vex)Â crashesÂ becauseÂ isZeroUÂ happened<br>
Â Â Â Â Â Â Â Â ==Â 363497<br>
Â Â Â Â Â Â Â Â ==Â 364497<br>
356676Â Â arm64-linux:Â unhandledÂ syscallsÂ 125,Â 126Â (sched_get_priority_max/min)<br>
356678Â Â arm64-linux:Â unhandledÂ syscallÂ 232Â (mincore)<br>
356817Â Â valgrind.hÂ triggersÂ compilerÂ errorsÂ onÂ MSVCÂ whenÂ definingÂ NVALGRIND<br>
356823Â Â UnsupportedÂ ARMÂ instruction:Â stlex<br>
357059Â Â x86/amd64:Â SSEÂ cvtpi2psÂ withÂ memoryÂ sourceÂ doesÂ transitionÂ toÂ MMXÂ state<br>
357338Â Â UnhandledÂ instructionÂ forÂ SHAÂ instructionsÂ libcryptoÂ BoringÂ SSL<br>
357673Â Â crashÂ ifÂ IÂ tryÂ toÂ runÂ valgrindÂ withÂ aÂ binaryÂ linkÂ withÂ libcurl<br>
357833Â Â SettingÂ RLIMIT_DATAÂ toÂ zeroÂ breaksÂ withÂ linuxÂ 4.5+<br>
357871Â Â pthread_spin_destroyÂ notÂ properlyÂ wrapped<br>
357887Â Â CallsÂ toÂ VG_(fclose)Â doÂ notÂ closeÂ theÂ fileÂ descriptor<br>
357932Â Â amd64-&gt;IR:Â acceptÂ redundantÂ REXÂ prefixesÂ forÂ {minsd,maxsd}Â m128,Â xmm.<br>
358030Â Â supportÂ directÂ socketÂ callsÂ onÂ x86Â 32bitÂ (newÂ inÂ linuxÂ 4.3)<br>
358478Â Â drd/tests/std_thread.cppÂ doesn'tÂ buildÂ withÂ GCC6<br>
359133Â Â AssertionÂ 'eltSzBÂ &lt;=Â ddpa-&gt;poolSzB'Â failed<br>
359181Â Â BufferÂ OverflowÂ duringÂ Demangling<br>
359201Â Â futexÂ syscallÂ "skips"Â argumentÂ 5Â ifÂ opÂ isÂ FUTEX_WAIT_BITSET<br>
359289Â Â s390x:Â popcntÂ (B9E1)Â notÂ implemented<br>
359472Â Â TheÂ PowerÂ PCÂ vsubuqmÂ instructionÂ doesn'tÂ alwaysÂ giveÂ theÂ correctÂ result<br>
359503Â Â AddÂ missingÂ syscallsÂ forÂ aarch64Â (arm64)<br>
359645Â Â "YouÂ needÂ libc6-dbg"Â helpÂ messageÂ couldÂ beÂ moreÂ helpful<br>
359703Â Â s390:Â wireÂ upÂ separateÂ socketcallsÂ systemÂ calls<br>
359724Â Â getsocknameÂ mightÂ crashÂ -Â deref_UIntÂ shouldÂ callÂ safe_to_deref<br>
359733Â Â amd64Â implementÂ ld.soÂ strchr/indexÂ overrideÂ likeÂ x86<br>
359767Â Â ValgrindÂ doesÂ notÂ supportÂ theÂ IBMÂ POWERÂ ISAÂ 3.0Â instructions,Â partÂ 1/5<br>
359829Â Â PowerÂ PCÂ testÂ suiteÂ none/tests/ppc64/test_isa_2_07.cÂ uses<br>
Â Â Â Â Â Â Â Â uninitializedÂ data<br>
359838Â Â arm64:Â UnhandledÂ instructionÂ 0xD5033F5FÂ (clrex)<br>
359871Â Â IncorrectÂ maskÂ handlingÂ inÂ ppoll<br>
359952Â Â UnrecognisedÂ PCMPESTRMÂ variantsÂ (0x70,Â 0x19)<br>
360008Â Â ContentsÂ ofÂ PowerÂ vrÂ registersÂ contentsÂ isÂ notÂ printedÂ correctlyÂ when<br>
Â Â Â Â Â Â Â Â theÂ --vgdb-shadow-registers=yesÂ optionÂ isÂ used<br>
360035Â Â POWERÂ PCÂ instructionÂ bcdaddÂ andÂ bcdsubtractÂ generateÂ resultÂ with<br>
Â Â Â Â Â Â Â Â non-zeroÂ shadowÂ bits<br>
360378Â Â arm64:Â UnhandledÂ instructionÂ 0x5E280844Â (sha1hÂ Â s4,Â s2)<br>
360425Â Â arm64Â unsupportedÂ instructionÂ ldpsw<br>
Â Â Â Â Â Â Â Â ==Â 364435<br>
360519Â Â none/tests/arm64/memory.vgtestÂ mightÂ failÂ withÂ newerÂ gcc<br>
360571Â Â ErrorÂ aboutÂ theÂ AndroidÂ RuntimeÂ readingÂ belowÂ theÂ stackÂ pointerÂ onÂ ARM<br>
360574Â Â WrongÂ parameterÂ typeÂ forÂ anÂ ashmemÂ ioctl()Â callÂ onÂ AndroidÂ andÂ ARM64<br>
360749Â Â kludgeÂ forÂ multipleÂ .rodataÂ sectionsÂ onÂ SolarisÂ noÂ longerÂ needed<br>
360752Â Â raiseÂ theÂ numberÂ ofÂ reservedÂ fdsÂ inÂ m_main.cÂ fromÂ 10Â toÂ 12<br>
361207Â Â ValgrindÂ doesÂ notÂ supportÂ theÂ IBMÂ POWERÂ ISAÂ 3.0Â instructions,Â partÂ 2/5<br>
361226Â Â s390x:Â risbgnÂ (EC59)Â notÂ implemented<br>
361253Â Â [s390x]Â ex_clone.c:42:Â undefinedÂ referenceÂ toÂ `pthread_create'<br>
361354Â Â ppc64[le]:Â wireÂ upÂ separateÂ socketcallsÂ systemÂ calls<br>
361615Â Â InconsistentÂ terminationÂ forÂ multithreadedÂ processÂ terminatedÂ byÂ signal<br>
361926Â Â UnhandledÂ SolarisÂ syscall:Â sysfs(84)<br>
362009Â Â VÂ dumpsÂ coreÂ onÂ unimplementedÂ functionalityÂ beforeÂ threadsÂ areÂ created<br>
362329Â Â ValgrindÂ doesÂ notÂ supportÂ theÂ IBMÂ POWERÂ ISAÂ 3.0Â instructions,Â partÂ 3/5<br>
362894Â Â missingÂ (broken)Â supportÂ forÂ wbitÂ fieldÂ onÂ mtfsfiÂ instructionÂ (ppc64)<br>
362935Â Â [AsusWRT]Â AssertionÂ 'sizeof(TTEntryC)Â &lt;=Â 88'Â failed<br>
362953Â Â RequestÂ forÂ anÂ updateÂ toÂ theÂ ValgrindÂ DevelopersÂ page<br>
363680Â Â addÂ renameat2()Â support<br>
363705Â Â arm64Â missingÂ syscallÂ name_to_handle_atÂ andÂ open_by_handle_at<br>
363714Â Â ppc64Â missingÂ syscallsÂ sync,Â waitidÂ andÂ name_to/open_by_handle_at<br>
363858Â Â ValgrindÂ doesÂ notÂ supportÂ theÂ IBMÂ POWERÂ ISAÂ 3.0Â instructions,Â partÂ 4/5<br>
364058Â Â clarifyÂ inÂ manualÂ limitationsÂ ofÂ arrayÂ overrunsÂ detections<br>
364413Â Â pselectÂ sycallwrapperÂ mishandlesÂ NULLÂ sigmask<br>
364728Â Â PowerÂ PC,Â missingÂ supportÂ forÂ severalÂ HWÂ registersÂ in<br>
Â Â Â Â Â Â Â Â get_otrack_shadow_offset_wrk()<br>
364948Â Â ValgrindÂ doesÂ notÂ supportÂ theÂ IBMÂ POWERÂ ISAÂ 3.0Â instructions,Â partÂ 5/5<br>
365273Â Â InvalidÂ writeÂ toÂ stackÂ locationÂ reportedÂ afterÂ signalÂ handlerÂ runs<br>
365912Â Â ppc64BEÂ segfaultÂ duringÂ jm-insnsÂ testÂ (RELRO)<br>
366079Â Â FPXXÂ SupportÂ forÂ MIPS32Â Valgrind<br>
366138Â Â FixÂ configureÂ errorsÂ outÂ whenÂ usingÂ XcodeÂ 8Â (clangÂ 8.0.0)<br>
366344Â Â MultipleÂ unhandledÂ instructionÂ forÂ Aarch64<br>
Â Â Â Â Â Â Â Â (0x0EE0E020,Â 0x1AC15800,Â 0x4E284801,Â 0x5E040023,Â 0x5E056060)<br>
367995Â Â IntegrationÂ ofÂ memcheckÂ withÂ customÂ memoryÂ allocator<br>
368120Â Â x86_linuxÂ asmÂ _startÂ functionsÂ doÂ notÂ keepÂ 16-byteÂ alignedÂ stackÂ pointer<br>
368412Â Â FalseÂ positiveÂ resultÂ forÂ altivecÂ capabilityÂ check<br>
368416Â Â AddÂ tc06_two_races_xml.expÂ outputÂ forÂ ppc64<br>
368419Â Â PerfÂ EventsÂ ioctlsÂ notÂ implemented<br>
368461Â Â mmapunmapÂ testÂ failsÂ onÂ ppc64<br>
368823Â Â run_a_thread_NORETURNÂ assemblyÂ codeÂ typoÂ forÂ VGP_arm64_linuxÂ target<br>
369000Â Â AMD64Â fma4Â instructionsÂ unsupported.<br>
369169Â Â ppc64Â failsÂ jm_int_isa_2_07Â test<br>
369175Â Â jm_vec_isa_2_07Â testÂ crashesÂ onÂ ppc64<br>
369209Â Â valgrindÂ loopsÂ andÂ eatsÂ upÂ allÂ memoryÂ ifÂ cwdÂ doesn'tÂ exist.<br>
369356Â Â pre_mem_read_sockaddrÂ syscallÂ wrapperÂ canÂ crashÂ withÂ badÂ sockaddr<br>
369359Â Â msghdr_foreachfieldÂ canÂ crashÂ whenÂ handlingÂ badÂ iovec<br>
369360Â Â BadÂ sigprocmaskÂ oldÂ orÂ newÂ setsÂ canÂ crashÂ valgrind<br>
369361Â Â vmspliceÂ syscallÂ wrapperÂ crashesÂ onÂ badÂ iovec<br>
369362Â Â BadÂ sigactionÂ argumentsÂ crashÂ valgrind<br>
369383Â Â x86Â sys_modify_ldtÂ wrapperÂ crashesÂ onÂ badÂ ptr<br>
369402Â Â BadÂ set/get_thread_areaÂ pointerÂ crashesÂ valgrind<br>
369441Â Â badÂ lvecÂ argumentÂ crashesÂ process_vm_readv/writevÂ syscallÂ wrappers<br>
369446Â Â valgrindÂ crashesÂ onÂ unknownÂ fcntlÂ command<br>
369439Â Â S390x:Â UnhandledÂ insnsÂ RISBLG/RISBHGÂ andÂ LDE/LDERÂ <br>
369468Â Â RemoveÂ quadraticÂ metapoolÂ algorithmÂ usingÂ VG_(HT_remove_at_Iter)<br>
370265Â Â ISAÂ 3.0Â HWÂ capÂ stuffÂ needsÂ updating<br>
371128Â Â BCDÂ addÂ andÂ subtractÂ instructionsÂ onÂ PowerÂ BEÂ inÂ 32-bitÂ modeÂ doÂ notÂ work<br>
372195Â Â PowerÂ PC,Â xxselÂ instructionÂ isÂ notÂ alwaysÂ recognized<br>
<br>
n-i-bzÂ Â FixÂ incorrectÂ (orÂ infiniteÂ loop)Â unwindÂ onÂ RHEL7Â x86Â andÂ amd64<br>
n-i-bzÂ Â massifÂ --pages-as-heap=yesÂ doesÂ notÂ reportÂ peakÂ causedÂ byÂ mmap+munmap<br>
n-i-bzÂ Â falseÂ positiveÂ leaksÂ dueÂ toÂ aspacemgrÂ mergingÂ heapÂ &amp;Â nonÂ heapÂ segments<br>
n-i-bzÂ Â FixÂ ppoll_alarmÂ exclusionÂ onÂ OSÂ X<br>
n-i-bzÂ Â DocumentÂ brkÂ segmentÂ limitation,Â referenceÂ manualÂ inÂ limitÂ reachedÂ msg.<br>
n-i-bzÂ Â FixÂ clobberÂ listÂ inÂ none/tests/amd64/xacq_xrel.cÂ [valgrindÂ r15737]<br>
n-i-bzÂ Â BumpÂ allowedÂ shiftÂ valueÂ forÂ "add.wÂ reg,Â sp,Â reg,Â lslÂ #N"Â [vexÂ r3206]<br>
n-i-bzÂ Â amd64:Â memcheckÂ falseÂ positiveÂ withÂ shrÂ %edx<br>
n-i-bzÂ Â arm3:Â AllowÂ earlyÂ writebackÂ ofÂ SPÂ baseÂ registerÂ inÂ "strdÂ rD,Â [sp,Â #-16]"<br>
n-i-bzÂ Â ppc:Â FixÂ twoÂ casesÂ ofÂ PPCAvFpOpÂ vsÂ PPCFpOpÂ enumÂ confusion<br>
n-i-bzÂ Â arm:Â FixÂ incorrectÂ register-numberÂ constraintÂ checkÂ forÂ LDAEX{,B,H,D}<br>
n-i-bzÂ Â DHAT:Â addedÂ collectionÂ ofÂ theÂ metricÂ "tot-blocks-allocd"Â <br>
<br>
(3.12.0.RC1:Â Â 20Â OctoberÂ 2016,Â vexÂ r3282,Â valgrindÂ r16094)<br>
(3.12.0.RC2:Â Â 20Â OctoberÂ 2016,Â vexÂ r3282,Â valgrindÂ r16096)<br>
(3.12.0:Â Â Â Â Â Â 21Â OctoberÂ 2016,Â vexÂ r3282,Â valgrindÂ r16098)<br>
<br>
<br>
<br>
ReleaseÂ 3.11.0Â (22Â SeptemberÂ 2015)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
<br>
3.11.0Â isÂ aÂ featureÂ releaseÂ withÂ manyÂ improvementsÂ andÂ theÂ usual<br>
collectionÂ ofÂ bugÂ fixes.<br>
<br>
ThisÂ releaseÂ supportsÂ X86/Linux,Â AMD64/Linux,Â ARM32/Linux,<br>
ARM64/Linux,Â PPC32/Linux,Â PPC64BE/Linux,Â PPC64LE/Linux,Â S390X/Linux,<br>
MIPS32/Linux,Â MIPS64/Linux,Â ARM/Android,Â ARM64/Android,<br>
MIPS32/Android,Â X86/Android,Â X86/Solaris,Â AMD64/Solaris,Â X86/MacOSX<br>
10.10Â andÂ AMD64/MacOSXÂ 10.10.Â Â ThereÂ isÂ alsoÂ preliminaryÂ supportÂ for<br>
X86/MacOSXÂ 10.11,Â AMD64/MacOSXÂ 10.11Â andÂ TILEGX/Linux.<br>
<br>
*Â ==================Â PLATFORMÂ CHANGESÂ =================<br>
<br>
*Â SupportÂ forÂ Solaris/x86Â andÂ Solaris/amd64Â hasÂ beenÂ added.<br>
<br>
*Â PreliminaryÂ supportÂ forÂ MacÂ OSÂ XÂ 10.11Â (ElÂ Capitan)Â hasÂ beenÂ added.<br>
<br>
*Â PreliminaryÂ supportÂ forÂ theÂ TileraÂ TileGXÂ architectureÂ hasÂ beenÂ added.<br>
<br>
*Â s390x:Â ItÂ isÂ nowÂ requiredÂ forÂ theÂ hostÂ toÂ haveÂ theÂ "longÂ displacement"<br>
Â Â facility.Â Â TheÂ oldestÂ supportedÂ machineÂ modelÂ isÂ z990.<br>
<br>
*Â x86:Â onÂ anÂ SSE2Â onlyÂ host,Â ValgrindÂ inÂ 32Â bitÂ modeÂ nowÂ claimsÂ toÂ beÂ a<br>
Â Â PentiumÂ 4.Â Â 3.10.1Â wronglyÂ claimedÂ toÂ beÂ aÂ CoreÂ 2,Â whichÂ isÂ SSSE3.<br>
<br>
*Â TheÂ JIT'sÂ registerÂ allocatorÂ isÂ significantlyÂ faster,Â makingÂ theÂ JIT<br>
Â Â asÂ aÂ wholeÂ somewhatÂ faster,Â soÂ JIT-intensiveÂ activities,Â forÂ example<br>
Â Â programÂ startup,Â areÂ modestlyÂ faster,Â aroundÂ 5%.<br>
<br>
*Â ThereÂ haveÂ beenÂ changesÂ toÂ theÂ defaultÂ settingsÂ ofÂ severalÂ command<br>
Â Â lineÂ flags,Â asÂ detailedÂ below.<br>
<br>
*Â IntelÂ AVX2Â supportÂ isÂ moreÂ completeÂ (64Â bitÂ targetsÂ only).Â Â OnÂ AVX2<br>
Â Â capableÂ hosts,Â theÂ simulatedÂ CPUIDÂ willÂ nowÂ indicateÂ AVX2Â support.<br>
<br>
*Â ====================Â TOOLÂ CHANGESÂ ====================<br>
<br>
*Â Memcheck:<br>
<br>
Â Â -Â TheÂ defaultÂ valueÂ forÂ --leak-check-heuristicsÂ hasÂ beenÂ changedÂ from<br>
Â Â Â Â "none"Â toÂ "all".Â ThisÂ helpsÂ toÂ reduceÂ theÂ numberÂ ofÂ possibly<br>
Â Â Â Â lostÂ blocks,Â inÂ particularÂ forÂ C++Â applications.<br>
<br>
Â Â -Â TheÂ defaultÂ valueÂ forÂ --keep-stacktracesÂ hasÂ beenÂ changedÂ from<br>
Â Â Â Â "malloc-then-free"Â toÂ "malloc-and-free".Â Â ThisÂ hasÂ aÂ smallÂ costÂ in<br>
Â Â Â Â memoryÂ (oneÂ wordÂ perÂ malloc-edÂ block)Â butÂ allowsÂ MemcheckÂ toÂ showÂ the<br>
Â Â Â Â 3Â stacktracesÂ ofÂ aÂ danglingÂ reference:Â whereÂ theÂ blockÂ wasÂ allocated,<br>
Â Â Â Â whereÂ itÂ wasÂ freed,Â andÂ whereÂ itÂ isÂ acccessedÂ afterÂ beingÂ freed.<br>
<br>
Â Â -Â TheÂ defaultÂ valueÂ forÂ --partial-loads-okÂ hasÂ beenÂ changedÂ fromÂ "no"Â toÂ <br>
Â Â Â Â "yes",Â soÂ asÂ toÂ avoidÂ falseÂ positiveÂ errorsÂ resultingÂ fromÂ someÂ kinds<br>
Â Â Â Â ofÂ vectorisedÂ loops.<br>
<br>
Â Â -Â AÂ newÂ monitorÂ commandÂ 'xbÂ &lt;addr&gt;Â &lt;len&gt;'Â showsÂ theÂ validityÂ bitsÂ of<br>
Â Â Â Â &lt;len&gt;Â bytesÂ atÂ &lt;addr&gt;.Â Â TheÂ monitorÂ commandÂ 'xb'Â isÂ easierÂ toÂ use<br>
Â Â Â Â thanÂ get_vbitsÂ whenÂ youÂ needÂ toÂ associateÂ byteÂ dataÂ valueÂ with<br>
Â Â Â Â theirÂ correspondingÂ validityÂ bits.<br>
<br>
Â Â -Â TheÂ 'block_list'Â monitorÂ commandÂ hasÂ beenÂ enhanced:<br>
Â Â Â Â Â Â oÂ itÂ canÂ printÂ aÂ rangeÂ ofÂ lossÂ records<br>
Â Â Â Â Â Â oÂ itÂ nowÂ acceptsÂ anÂ optionalÂ argumentÂ 'limitedÂ &lt;max_blocks&gt;'<br>
Â Â Â Â Â Â Â Â toÂ controlÂ theÂ numberÂ ofÂ blocksÂ printed.<br>
Â Â Â Â Â Â oÂ ifÂ aÂ blockÂ hasÂ beenÂ foundÂ usingÂ aÂ heuristic,Â then<br>
Â Â Â Â Â Â Â Â 'block_list'Â nowÂ showsÂ theÂ heuristicÂ afterÂ theÂ blockÂ size.<br>
Â Â Â Â Â Â oÂ theÂ lossÂ records/blocksÂ toÂ printÂ canÂ beÂ limitedÂ toÂ theÂ blocks<br>
Â Â Â Â Â Â Â Â foundÂ viaÂ specifiedÂ heuristics.<br>
<br>
Â Â -Â TheÂ CÂ helperÂ functionsÂ usedÂ toÂ instrumentÂ loadsÂ on<br>
Â Â Â Â x86-{linux,solaris}Â andÂ arm-linuxÂ (bothÂ 32-bitÂ only)Â haveÂ been<br>
Â Â Â Â replacedÂ byÂ handwrittenÂ assemblyÂ sequences.Â Â ThisÂ givesÂ speedups<br>
Â Â Â Â inÂ theÂ regionÂ ofÂ 0%Â toÂ 7%Â forÂ thoseÂ targetsÂ only.<br>
<br>
Â Â -Â AÂ newÂ commandÂ lineÂ option,Â --expensive-definedness-checks=yes|no,<br>
Â Â Â Â hasÂ beenÂ added.Â Â ThisÂ isÂ usefulÂ forÂ avoidingÂ occasionalÂ invalid<br>
Â Â Â Â uninitialised-valueÂ errorsÂ inÂ optimisedÂ code.Â Â WatchÂ outÂ for<br>
Â Â Â Â runtimeÂ degradation,Â asÂ thisÂ canÂ beÂ upÂ toÂ 25%.Â Â AsÂ always,Â though,<br>
Â Â Â Â theÂ slowdownÂ isÂ highlyÂ applicationÂ specific.Â Â TheÂ defaultÂ setting<br>
Â Â Â Â isÂ "no".<br>
<br>
*Â Massif:<br>
<br>
Â Â -Â AÂ newÂ monitorÂ commandÂ 'all_snapshotsÂ &lt;filename&gt;'Â dumpsÂ all<br>
Â Â Â Â snapshotsÂ takenÂ soÂ far.<br>
<br>
*Â Helgrind:<br>
<br>
Â Â -Â SignificantÂ memoryÂ reductionÂ andÂ moderateÂ speedupsÂ for<br>
Â Â Â Â --history-level=fullÂ forÂ applicationsÂ accessingÂ aÂ lotÂ ofÂ memory<br>
Â Â Â Â withÂ manyÂ differentÂ stacktraces.<br>
<br>
Â Â -Â TheÂ defaultÂ valueÂ forÂ --conflict-cache-size=NÂ hasÂ beenÂ doubledÂ to<br>
Â Â Â Â 2000000.Â Â UsersÂ thatÂ wereÂ notÂ usingÂ theÂ defaultÂ valueÂ should<br>
Â Â Â Â preferablyÂ alsoÂ doubleÂ theÂ valueÂ theyÂ give.<br>
<br>
Â Â Â Â TheÂ defaultÂ wasÂ changedÂ dueÂ toÂ theÂ changesÂ inÂ theÂ "fullÂ history"<br>
Â Â Â Â implementation.Â Â DoublingÂ theÂ valueÂ givesÂ onÂ averageÂ aÂ slightlyÂ more<br>
Â Â Â Â completeÂ historyÂ andÂ usesÂ similarÂ memoryÂ (orÂ significantlyÂ lessÂ memory<br>
Â Â Â Â inÂ theÂ worstÂ case)Â thanÂ theÂ previousÂ implementation.<br>
Â Â Â Â <br>
Â Â -Â TheÂ HelgrindÂ monitorÂ commandÂ 'infoÂ locks'Â nowÂ acceptsÂ anÂ optional<br>
Â Â Â Â argumentÂ 'lock_addr',Â whichÂ showsÂ informationÂ aboutÂ theÂ lockÂ atÂ the<br>
Â Â Â Â givenÂ addressÂ only.<br>
<br>
Â Â -Â WhenÂ usingÂ --history-level=full,Â theÂ newÂ HelgrindÂ monitorÂ command<br>
Â Â Â Â 'accesshistoryÂ &lt;addr&gt;Â [&lt;len&gt;]'Â willÂ showÂ theÂ recordedÂ accessesÂ for<br>
Â Â Â Â &lt;len&gt;Â (orÂ 1)Â bytesÂ atÂ &lt;addr&gt;.<br>
<br>
*Â ====================Â OTHERÂ CHANGESÂ ====================<br>
<br>
*Â TheÂ defaultÂ valueÂ forÂ theÂ --smc-checkÂ optionÂ hasÂ beenÂ changedÂ from<br>
Â Â "stack"Â toÂ "all-non-file"Â onÂ targetsÂ thatÂ provideÂ automaticÂ D-I<br>
Â Â cacheÂ coherenceÂ (x86,Â amd64Â andÂ s390x).Â Â TheÂ resultÂ isÂ toÂ provide,<br>
Â Â byÂ default,Â transparentÂ supportÂ forÂ JITÂ generatedÂ andÂ self-modifying<br>
Â Â codeÂ onÂ allÂ targets.<br>
<br>
*Â MacÂ OSÂ XÂ only:Â theÂ defaultÂ valueÂ forÂ theÂ --dsymutilÂ optionÂ hasÂ been<br>
Â Â changedÂ fromÂ "no"Â toÂ "yes",Â sinceÂ anyÂ seriousÂ usageÂ onÂ MacÂ OSÂ X<br>
Â Â alwaysÂ requiredÂ itÂ toÂ beÂ "yes".<br>
<br>
*Â TheÂ commandÂ lineÂ optionsÂ --db-attachÂ andÂ --db-commandÂ haveÂ beenÂ removed.<br>
Â Â TheyÂ wereÂ deprecatedÂ inÂ 3.10.0.<br>
<br>
*Â WhenÂ aÂ processÂ diesÂ dueÂ toÂ aÂ signal,Â ValgrindÂ nowÂ showsÂ theÂ signal<br>
Â Â andÂ theÂ stacktraceÂ atÂ defaultÂ verbosityÂ (i.e.Â verbosityÂ 1).<br>
<br>
*Â TheÂ addressÂ descriptionÂ logicÂ usedÂ byÂ MemcheckÂ andÂ HelgrindÂ now<br>
Â Â describesÂ addressesÂ inÂ anonymousÂ segments,Â fileÂ mmap-edÂ segments,<br>
Â Â sharedÂ memoryÂ segmentsÂ andÂ theÂ brkÂ dataÂ segment.<br>
<br>
*Â TheÂ newÂ optionÂ --error-markers=&lt;begin&gt;,&lt;end&gt;Â canÂ beÂ usedÂ toÂ markÂ the<br>
Â Â begin/endÂ ofÂ errorsÂ inÂ textualÂ outputÂ mode,Â toÂ facilitate<br>
Â Â searching/extractingÂ errorsÂ inÂ outputÂ filesÂ thatÂ mixÂ valgrindÂ errors<br>
Â Â withÂ programÂ output.<br>
<br>
*Â TheÂ newÂ optionÂ --max-threads=&lt;number&gt;Â canÂ beÂ usedÂ toÂ changeÂ theÂ number<br>
Â Â ofÂ threadsÂ valgrindÂ canÂ handle.Â Â TheÂ defaultÂ isÂ 500Â threadsÂ which<br>
Â Â shouldÂ beÂ moreÂ thanÂ enoughÂ forÂ mostÂ applications.<br>
<br>
*Â TheÂ newÂ optionÂ --valgrind-stacksize=&lt;number&gt;Â canÂ beÂ usedÂ toÂ changeÂ the<br>
Â Â sizeÂ ofÂ theÂ privateÂ threadÂ stacksÂ usedÂ byÂ Valgrind.Â Â ThisÂ isÂ useful<br>
Â Â forÂ reducingÂ memoryÂ useÂ orÂ increasingÂ theÂ stackÂ sizeÂ ifÂ Valgrind<br>
Â Â segfaultsÂ dueÂ toÂ stackÂ overflow.<br>
<br>
*Â TheÂ newÂ optionÂ --avg-transtab-entry-size=&lt;number&gt;Â canÂ beÂ usedÂ toÂ specify<br>
Â Â theÂ expectedÂ instrumentedÂ blockÂ size,Â eitherÂ toÂ reduceÂ memoryÂ useÂ or<br>
Â Â toÂ avoidÂ excessiveÂ retranslation.<br>
<br>
*Â ValgrindÂ canÂ beÂ builtÂ withÂ Intel'sÂ ICCÂ compiler,Â versionÂ 14.0Â orÂ later.<br>
<br>
*Â NewÂ andÂ modifiedÂ GDBÂ serverÂ monitorÂ features:<br>
<br>
Â Â -Â WhenÂ aÂ signalÂ isÂ reportedÂ inÂ GDB,Â youÂ canÂ nowÂ useÂ theÂ GDBÂ convenience<br>
Â Â Â Â variableÂ $_siginfoÂ toÂ examineÂ detailedÂ signalÂ information.<br>
Â <br>
Â Â -Â Valgrind'sÂ gdbserverÂ nowÂ allowsÂ theÂ userÂ toÂ changeÂ theÂ signal<br>
Â Â Â Â toÂ deliverÂ toÂ theÂ process.Â Â So,Â useÂ 'signalÂ SIGNAL'Â toÂ continueÂ execution<br>
Â Â Â Â withÂ SIGNALÂ insteadÂ ofÂ theÂ signalÂ reportedÂ toÂ GDB.Â UseÂ 'signalÂ 0'Â to<br>
Â Â Â Â continueÂ withoutÂ passingÂ theÂ signalÂ toÂ theÂ process.<br>
<br>
Â Â -Â WithÂ GDBÂ &gt;=Â 7.10,Â theÂ commandÂ 'targetÂ remote'<br>
Â Â Â Â willÂ automaticallyÂ loadÂ theÂ executableÂ fileÂ ofÂ theÂ processÂ running<br>
Â Â Â Â underÂ Valgrind.Â ThisÂ meansÂ youÂ doÂ notÂ needÂ toÂ specifyÂ theÂ executable<br>
Â Â Â Â fileÂ yourself,Â GDBÂ willÂ discoverÂ itÂ itself.Â Â SeeÂ GDBÂ documentationÂ about<br>
Â Â Â Â 'qXfer:exec-file:read'Â packetÂ forÂ moreÂ info.<br>
<br>
*Â ====================Â FIXEDÂ BUGSÂ ====================<br>
<br>
TheÂ followingÂ bugsÂ haveÂ beenÂ fixedÂ orÂ resolved.Â Â NoteÂ thatÂ "n-i-bz"<br>
standsÂ forÂ "notÂ inÂ bugzilla"Â --Â thatÂ is,Â aÂ bugÂ thatÂ wasÂ reportedÂ toÂ us<br>
butÂ neverÂ gotÂ aÂ bugzillaÂ entry.Â Â WeÂ encourageÂ youÂ toÂ fileÂ bugsÂ in<br>
bugzillaÂ (https://bugs.kde.org/enter_bug.cgi?product=valgrind)Â rather<br>
thanÂ mailingÂ theÂ developersÂ (orÂ mailingÂ lists)Â directlyÂ --Â bugsÂ that<br>
areÂ notÂ enteredÂ intoÂ bugzillaÂ tendÂ toÂ getÂ forgottenÂ aboutÂ orÂ ignored.<br>
<br>
ToÂ seeÂ detailsÂ ofÂ aÂ givenÂ bug,Â visit<br>
Â Â https://bugs.kde.org/show_bug.cgi?id=XXXXXX<br>
whereÂ XXXXXXÂ isÂ theÂ bugÂ numberÂ asÂ listedÂ below.<br>
<br>
116002Â Â VG_(printf):Â ProblemsÂ withÂ justificationÂ ofÂ stringsÂ andÂ integers<br>
155125Â Â avoidÂ cuttingÂ awayÂ file:linenoÂ afterÂ longÂ functionÂ name<br>
197259Â Â UnsupportedÂ arch_prtctlÂ PR_SET_GSÂ option<br>
201152Â Â ppc64:Â AssertionÂ inÂ ppc32g_dirtyhelper_MFSPR_268_269<br>
201216Â Â FixÂ ValgrindÂ doesÂ notÂ supportÂ pthread_sigmask()Â onÂ OSÂ X<br>
201435Â Â FixÂ Darwin:Â -vÂ doesÂ notÂ showÂ kernelÂ version<br>
208217Â Â "Warning:Â notedÂ butÂ unhandledÂ ioctlÂ 0x2000747b"Â onÂ MacÂ OSÂ X<br>
211256Â Â FixedÂ anÂ outdatedÂ commentÂ regardingÂ theÂ defaultÂ platform.<br>
211529Â Â IncompleteÂ callÂ stacksÂ forÂ codeÂ compiledÂ byÂ newerÂ versionsÂ ofÂ MSVC<br>
211926Â Â AvoidÂ compilationÂ warningsÂ inÂ valgrind.hÂ withÂ -pedantic<br>
212291Â Â FixÂ unhandledÂ syscall:Â unix:132Â (mkfifo)Â onÂ OSÂ X<br>
Â Â Â Â Â Â Â Â ==Â 263119<br>
226609Â Â CreditingÂ upstreamÂ authorsÂ inÂ manÂ page<br>
231257Â Â ValgrindÂ omitsÂ pathÂ whenÂ executingÂ scriptÂ fromÂ shebangÂ line<br>
254164Â Â OSÂ XÂ task_info:Â UNKNOWNÂ taskÂ messageÂ [idÂ 3405,Â toÂ mach_task_self()Â [..]<br>
294065Â Â ImproveÂ theÂ pdbÂ fileÂ readerÂ byÂ avoidingÂ hardwiredÂ absoluteÂ pathnames<br>
269360Â Â s390x:Â FixÂ addressingÂ modeÂ selectionÂ forÂ compare-and-swap<br>
302630Â Â Memcheck:Â AssertionÂ failed:Â 'sizeof(UWord)Â ==Â sizeof(UInt)'<br>
Â Â Â Â Â Â Â Â ==Â 326797<br>
312989Â Â ioctlÂ handlingÂ needsÂ toÂ doÂ POSTÂ handlingÂ onÂ genericÂ ioctlsÂ andÂ [..]<br>
319274Â Â FixÂ unhandledÂ syscall:Â unix:410Â (sigsuspend_nocancel)Â onÂ OSÂ X<br>
324181Â Â mmapÂ doesÂ notÂ handleÂ MAP_32BITÂ (handleÂ itÂ now,Â ratherÂ thanÂ failÂ it)<br>
327745Â Â FixÂ valgrindÂ 3.9.0Â buildÂ failsÂ onÂ MacÂ OSÂ XÂ 10.6.8<br>
330147Â Â libmpiwrapÂ PMPI_Get_countÂ returnsÂ undefinedÂ value<br>
333051Â Â mmapÂ ofÂ hugeÂ pagesÂ failsÂ dueÂ toÂ incorrectÂ alignment<br>
Â Â Â Â Â Â Â Â ==Â 339163<br>
334802Â Â valgrindÂ doesÂ notÂ alwaysÂ explainÂ whyÂ aÂ givenÂ optionÂ isÂ bad<br>
335618Â Â mov.wÂ rN,Â pc/spÂ (ARM32)<br>
335785Â Â amd64-&gt;IRÂ 0xC4Â 0xE2Â 0x75Â 0x2FÂ (vmaskmovpd)<br>
Â Â Â Â Â Â Â Â ==Â 307399<br>
Â Â Â Â Â Â Â Â ==Â 343175<br>
Â Â Â Â Â Â Â Â ==Â 342740<br>
Â Â Â Â Â Â Â Â ==Â 346912<br>
335907Â Â segfaultÂ whenÂ runningÂ wine'sÂ ddrawex/tests/surface.cÂ underÂ valgrind<br>
338602Â Â AVX2Â bitÂ inÂ CPUIDÂ missing<br>
338606Â Â StrangeÂ messageÂ forÂ scriptsÂ withÂ invalidÂ interpreter<br>
338731Â Â ppc:Â FixÂ testuiteÂ buildÂ forÂ toolchainsÂ notÂ supportingÂ -maltivec<br>
338995Â Â shmatÂ withÂ hugepagesÂ (SHM_HUGETLB)Â failsÂ withÂ EINVAL<br>
339045Â Â GettingÂ valgrindÂ toÂ compileÂ andÂ runÂ onÂ OSÂ XÂ YosemiteÂ (10.10)<br>
Â Â Â Â Â Â Â Â ==Â 340252<br>
339156Â Â gdbsrvÂ notÂ calledÂ forÂ fatalÂ signal<br>
339215Â Â ValgrindÂ 3.10.0Â containÂ 2013Â inÂ copyrightsÂ notice<br>
339288Â Â supportÂ CaviumÂ OcteonÂ MIPSÂ specificÂ BBIT*32Â instructions<br>
339636Â Â UseÂ fxsave64Â andÂ fxrstor64Â mnemonicsÂ insteadÂ ofÂ old-schoolÂ rex64Â prefix<br>
339442Â Â FixÂ testsuiteÂ buildÂ failureÂ onÂ OSÂ XÂ 10.9<br>
339542Â Â EnableÂ compilationÂ withÂ Intel'sÂ ICCÂ compiler<br>
339563Â Â TheÂ DVBÂ demuxÂ DMX_STOPÂ ioctlÂ doesn'tÂ haveÂ aÂ wrapper<br>
339688Â Â Mac-specificÂ ASMÂ doesÂ notÂ supportÂ .versionÂ directiveÂ (cpuid,<br>
Â Â Â Â Â Â Â Â tronicalÂ andÂ pushfpopfÂ tests)<br>
339745Â Â ValgrindÂ crashÂ whenÂ checkÂ MarmaladeÂ appÂ (partialÂ fix)<br>
339755Â Â FixÂ knownÂ deliberateÂ memoryÂ leakÂ inÂ setenv()Â onÂ MacÂ OSÂ XÂ 10.9<br>
339778Â Â Linux/TileGxÂ platformÂ supportÂ forÂ Valgrind<br>
339780Â Â FixÂ knownÂ uninitialisedÂ readÂ inÂ pthread_rwlock_init()Â onÂ MacÂ OSÂ XÂ 10.9Â <br>
339789Â Â FixÂ none/tests/execveÂ testÂ onÂ MacÂ OSÂ XÂ 10.9<br>
339808Â Â FixÂ none/tests/rlimit64_nofileÂ testÂ onÂ MacÂ OSÂ XÂ 10.9<br>
339820Â Â vexÂ amd64-&gt;IR:Â 0x66Â 0xFÂ 0x3AÂ 0x63Â 0xAÂ 0x42Â 0x74Â 0x9Â (pcmpistriÂ $0x42)<br>
340115Â Â FixÂ none/tests/cmdline[1|2]Â testsÂ onÂ systemsÂ whichÂ defineÂ TMPDIR<br>
340392Â Â AllowÂ userÂ toÂ selectÂ moreÂ accurateÂ definednessÂ checkingÂ inÂ memcheck<br>
Â Â Â Â Â Â Â Â toÂ avoidÂ invalidÂ complaintsÂ onÂ optimisedÂ code<br>
340430Â Â FixÂ someÂ grammaticalÂ weirdnessÂ inÂ theÂ manual.<br>
341238Â Â RecognizeÂ GCC5/DWARFv5Â DW_LANGÂ constantsÂ (Go,Â C11,Â C++11,Â C++14)<br>
341419Â Â SignalÂ handlerÂ ucontext_tÂ notÂ filledÂ outÂ correctlyÂ onÂ OSÂ X<br>
341539Â Â VG_(describe_addr)Â shouldÂ notÂ describeÂ addressÂ asÂ belongingÂ toÂ client<br>
Â Â Â Â Â Â Â Â segmentÂ ifÂ itÂ isÂ pastÂ theÂ heapÂ end<br>
341613Â Â EnableÂ buildingÂ ofÂ manythreadsÂ andÂ thread-exitsÂ testsÂ onÂ MacÂ OSÂ X<br>
341615Â Â FixÂ none/tests/darwin/access_extendedÂ testÂ onÂ MacÂ OSÂ X<br>
341698Â Â Valgrind'sÂ AESKEYGENASSISTÂ givesÂ wrongÂ resultÂ inÂ wordsÂ 0Â andÂ 2Â [..]<br>
341789Â Â aarch64:Â shmatÂ failsÂ withÂ valgrindÂ onÂ ARMv8<br>
341997Â Â MIPS64:Â CaviumÂ OCTEONÂ insnsÂ -Â immediateÂ operandÂ handledÂ incorrectly<br>
342008Â Â valgrind.hÂ needsÂ typeÂ castÂ [..]Â forÂ clang/llvmÂ inÂ 64-bitÂ mode<br>
342038Â Â UnhandledÂ syscallsÂ onÂ aarch64Â (mbind/get/set_mempolicy)<br>
342063Â Â wrongÂ formatÂ specifierÂ forÂ testÂ mcblocklistsearchÂ inÂ gdbserver_tests<br>
342117Â Â HangÂ whenÂ loadingÂ PDBÂ fileÂ forÂ MSVCÂ compiledÂ FirefoxÂ underÂ Wine<br>
342221Â Â socketÂ connectÂ falseÂ positiveÂ uninitÂ memoryÂ forÂ unknownÂ afÂ family<br>
342353Â Â AllowÂ dumpingÂ fullÂ massifÂ outputÂ whileÂ valgrindÂ isÂ stillÂ running<br>
342571Â Â ValgrindÂ chokesÂ onÂ AVXÂ compareÂ intrinsicÂ withÂ _CMP_GE_QS<br>
Â Â Â Â Â Â Â Â ==Â 346476<br>
Â Â Â Â Â Â Â Â ==Â 348387<br>
Â Â Â Â Â Â Â Â ==Â 350593<br>
342603Â Â AddÂ I2C_SMBUSÂ ioctlÂ support<br>
342635Â Â OSÂ XÂ 10.10Â (Yosemite)Â -Â missingÂ systemÂ callsÂ andÂ fcntlÂ code<br>
342683Â Â MarkÂ memoryÂ pastÂ theÂ initialÂ brkÂ limitÂ asÂ unaddressable<br>
342783Â Â arm:Â unhandledÂ instructionÂ 0xEEFE1ACAÂ =Â "vcvt.s32.f32Â s3,Â s3,Â #12"<br>
342795Â Â InternalÂ glibcÂ __GI_mempcpyÂ callÂ shouldÂ beÂ intercepted<br>
342841Â Â s390x:Â SupportÂ instructionsÂ fiebr(a)Â andÂ fidbr(a)<br>
343012Â Â UnhandledÂ syscallÂ 319Â (memfd_create)<br>
343069Â Â PatchÂ updatingÂ v4l2Â APIÂ support<br>
343173Â Â helgrindÂ crashÂ duringÂ stackÂ unwind<br>
343219Â Â fixÂ GET_STARTREGSÂ forÂ arm<br>
343303Â Â FixÂ knownÂ deliberateÂ memoryÂ leakÂ inÂ setenv()Â onÂ MacÂ OSÂ XÂ 10.10<br>
343306Â Â OSÂ XÂ 10.10:Â UNKNOWNÂ mach_msgÂ unhandledÂ MACH_SEND_TRAILERÂ option<br>
343332Â Â UnhandledÂ instructionÂ 0x9E310021Â (fcvtmu)Â onÂ aarch64<br>
343335Â Â unhandledÂ instructionÂ 0x1E638400Â (fccmp)Â aarch64<br>
343523Â Â OSÂ XÂ mach_ports_register:Â UNKNOWNÂ taskÂ messageÂ [idÂ 3403,Â toÂ [..]<br>
343525Â Â OSÂ XÂ host_get_special_port:Â UNKNOWNÂ hostÂ messageÂ [idÂ 412,Â toÂ [..]<br>
343597Â Â ppc64le:Â incorrectÂ useÂ ofÂ offseofÂ macro<br>
343649Â Â OSÂ XÂ host_create_mach_voucher:Â UNKNOWNÂ hostÂ messageÂ [idÂ 222,Â toÂ [..]<br>
343663Â Â OSÂ XÂ 10.10Â Â MemchecjÂ alwaysÂ reportsÂ aÂ leakÂ regardlessÂ ofÂ [..]<br>
343732Â Â UnhandledÂ syscallÂ 144Â (setgid)Â onÂ aarch64<br>
343733Â Â UnhandledÂ syscallÂ 187Â (msgctlÂ andÂ related)Â onÂ aarch64<br>
343802Â Â s390x:Â FalseÂ positiveÂ "conditionalÂ jumpÂ orÂ moveÂ dependsÂ onÂ [..]<br>
343902Â Â --vgdb=yesÂ doesn'tÂ breakÂ whenÂ --xml=yesÂ isÂ used<br>
343967Â Â Don'tÂ warnÂ aboutÂ setuid/setgid/setcapÂ executableÂ forÂ directories<br>
343978Â Â RecognizeÂ DWARF5/GCC5Â DW_LANG_FortranÂ 2003Â andÂ 2008Â constants<br>
344007Â Â accept4Â syscallÂ unhandledÂ onÂ arm64Â (242)Â andÂ ppc64Â (344)<br>
344033Â Â HelgrindÂ onÂ ARM32Â losesÂ trackÂ ofÂ mutexÂ stateÂ inÂ pthread_cond_wait<br>
344054Â Â wwwÂ -Â updateÂ infoÂ forÂ Solaris/illumos<br>
344416Â Â 'makeÂ regtest'Â doesÂ notÂ workÂ cleanlyÂ onÂ OSÂ X<br>
344235Â Â RemoveÂ duplicateÂ includeÂ ofÂ pub_core_aspacemgr.h<br>
344279Â Â syscallÂ sendmmsgÂ onÂ arm64Â (269)Â andÂ ppc32/64Â (349)Â unhandled<br>
344295Â Â syscallÂ recvmmsgÂ onÂ arm64Â (243)Â andÂ ppc32/64Â (343)Â unhandled<br>
344307Â Â 2Â unhandledÂ syscallsÂ onÂ aarch64/arm64:Â umount2(39),Â mountÂ (40)<br>
344314Â Â callgrind_annotateÂ ...Â warningsÂ aboutÂ commandsÂ containingÂ newlines<br>
344318Â Â socketcallÂ shouldÂ wrapÂ recvmmsgÂ andÂ sendmmsg<br>
344337Â Â FixÂ unhandledÂ syscall:Â mach:41Â (_kernelrpc_mach_port_guard_trap)<br>
344416Â Â FixÂ 'makeÂ regtest'Â doesÂ notÂ workÂ cleanlyÂ onÂ OSÂ X<br>
344499Â Â FixÂ compilationÂ forÂ LinuxÂ kernelÂ &gt;=Â 4.0.0<br>
344512Â Â OSÂ X:Â unhandledÂ syscall:Â unix:348Â (__pthread_chdir),Â <br>
Â Â Â Â Â Â Â Â unix:349Â (__pthread_fchdir)<br>
344559Â Â GarbageÂ collectionÂ ofÂ unusedÂ segmentÂ namesÂ inÂ addressÂ spaceÂ manager<br>
344560Â Â FixÂ stackÂ tracesÂ missingÂ penultimateÂ frameÂ onÂ OSÂ X<br>
344621Â Â FixÂ memcheck/tests/err_disable4Â testÂ onÂ OSÂ X<br>
344686Â Â FixÂ suppressionÂ forÂ pthread_rwlock_initÂ onÂ OSÂ XÂ 10.10<br>
344702Â Â FixÂ missingÂ libobjcÂ suppressionsÂ onÂ OSÂ XÂ 10.10<br>
Â Â Â Â Â Â Â Â ==Â 344543<br>
344936Â Â FixÂ unhandledÂ syscall:Â unix:473Â (readlinkat)Â onÂ OSÂ XÂ 10.10<br>
344939Â Â FixÂ memcheck/tests/xml1Â onÂ OSÂ XÂ 10.10<br>
345016Â Â helgrind/tests/locked_vs_unlocked2Â isÂ failingÂ sometimes<br>
345079Â Â FixÂ buildÂ problemsÂ inÂ VEX/useful/test_main.c<br>
345126Â Â IncorrectÂ handlingÂ ofÂ VIDIOC_G_AUDIOÂ andÂ G_AUDOUT<br>
345177Â Â arm64:Â prfmÂ (reg)Â notÂ implemented<br>
345215Â Â PerformanceÂ improvementsÂ forÂ theÂ registerÂ allocator<br>
345248Â Â addÂ supportÂ forÂ SolarisÂ OSÂ inÂ valgrind<br>
345338Â Â TIOCGSERIALÂ andÂ TIOCSSERIALÂ ioctlÂ supportÂ onÂ Linux<br>
345394Â Â FixÂ memcheck/tests/strchrÂ onÂ OSÂ X<br>
345637Â Â FixÂ memcheck/tests/sendmsgÂ onÂ OSÂ X<br>
345695Â Â AddÂ POWERPCÂ supportÂ forÂ AT_DCACHESIZEÂ andÂ HWCAP2<br>
345824Â Â FixÂ aspacemÂ segmentÂ mismatch:Â seenÂ withÂ none/tests/bigcode<br>
345887Â Â FixÂ anÂ assertionÂ inÂ theÂ addressÂ spaceÂ manager<br>
345928Â Â amd64:Â callstackÂ onlyÂ containsÂ currentÂ functionÂ forÂ smallÂ stacks<br>
345984Â Â disInstr(arm):Â unhandledÂ instruction:Â 0xEE193F1E<br>
345987Â Â MIPS64:Â ImplementÂ caviumÂ LHXÂ instruction<br>
346031Â Â MIPS:Â ImplementÂ supportÂ forÂ theÂ CvmCountÂ registerÂ (rhwrÂ %0,Â 31)<br>
346185Â Â FixÂ typoÂ savingÂ altivecÂ registerÂ v24<br>
346267Â Â CompilerÂ warningsÂ forÂ PPC64Â codeÂ onÂ callÂ toÂ LibVEX_GuestPPC64_get_XER()<br>
Â Â Â Â Â Â Â Â andÂ LibVEX_GuestPPC64_get_CR()<br>
346270Â Â RegressionÂ testsÂ none/tests/jm_vec/isa_2_07Â and<br>
Â Â Â Â Â Â Â Â none/tests/test_isa_2_07_part2Â haveÂ failuresÂ onÂ PPC64Â littleÂ endian<br>
346307Â Â fuseÂ filesystemÂ syscallÂ deadlocks<br>
346324Â Â PPC64Â missingÂ supportÂ forÂ lbarx,Â lharx,Â stbcxÂ andÂ sthcxÂ instructions<br>
346411Â Â MIPS:Â SysRes::_valExÂ handlingÂ isÂ incorrect<br>
346416Â Â AddÂ supportÂ forÂ LL_IOC_PATH2FIDÂ andÂ LL_IOC_GETPARENTÂ LustreÂ ioctls<br>
346474Â Â PPC64Â PowerÂ 8,Â sprÂ TEXASRUÂ registerÂ notÂ supported<br>
346487Â Â CompilerÂ generatesÂ "note"Â aboutÂ aÂ futureÂ ABIÂ changeÂ forÂ PPC64<br>
346562Â Â MIPS64:Â lwl/lwrÂ instructionsÂ areÂ performingÂ 64bitÂ loads<br>
Â Â Â Â Â Â Â Â andÂ causingÂ spuriousÂ "invalidÂ readÂ ofÂ sizeÂ 8"Â warnings<br>
346801Â Â FixÂ linkÂ errorÂ onÂ OSÂ X:Â _vgModuleLocal_sf_maybe_extend_stack<br>
347151Â Â FixÂ suppressionÂ forÂ pthread_rwlock_initÂ onÂ OSÂ XÂ 10.8<br>
347233Â Â FixÂ memcheck/tests/strchrÂ onÂ OSÂ XÂ 10.10Â (Haswell)Â <br>
347322Â Â PowerÂ PCÂ regressionÂ testÂ cleanup<br>
347379Â Â valgrindÂ --leak-check=fullÂ leakÂ errorsÂ fromÂ systemÂ libsÂ onÂ OSÂ XÂ 10.8<br>
Â Â Â Â Â Â Â Â ==Â 217236<br>
347389Â Â unhandledÂ syscall:Â 373Â (LinuxÂ ARMÂ syncfs)<br>
347686Â Â PatchÂ setÂ toÂ cleanupÂ PPC64Â regtests<br>
347978Â Â RemoveÂ bashÂ dependenciesÂ whereÂ notÂ needed<br>
347982Â Â OSÂ X:Â undefinedÂ symbolsÂ forÂ architectureÂ x86_64:Â "_global"Â [..]<br>
347988Â Â Memcheck:Â theÂ 'impossible'Â happened:Â unexpectedÂ sizeÂ forÂ AddrÂ (OSX/wine)<br>
Â Â Â Â Â Â Â Â ==Â 345929<br>
348102Â Â PatchÂ updatingÂ v4l2Â APIÂ support<br>
348247Â Â amd64Â frontÂ end:Â jnoÂ jumpsÂ wronglyÂ whenÂ overflowÂ isÂ notÂ set<br>
348269Â Â ImproveÂ mmapÂ MAP_HUGETLBÂ support.<br>
348334Â Â (ppc)Â valgrindÂ doesÂ notÂ simulateÂ dcbflÂ -Â thenÂ myÂ programÂ terminates<br>
348345Â Â AssertionÂ failsÂ forÂ negativeÂ lineno<br>
348377Â Â UnsupportedÂ ARMÂ instruction:Â yield<br>
348565Â Â FixÂ detectionÂ ofÂ commandÂ lineÂ optionÂ availabilityÂ forÂ clang<br>
348574Â Â vexÂ amd64-&gt;IRÂ pcmpistriÂ SSE4.2Â unsupportedÂ (pcmpistriÂ $0x18)<br>
348728Â Â FixÂ brokenÂ checkÂ forÂ VIDIOC_G_ENC_INDEX<br>
348748Â Â FixÂ redundantÂ condition<br>
348890Â Â FixÂ clangÂ warningÂ aboutÂ unsupportedÂ --paramÂ inline-unit-growth=900<br>
348949Â Â BogusÂ "ERROR:Â --ignore-ranges:Â suspiciouslyÂ largeÂ range"<br>
349034Â Â AddÂ LustreÂ ioctlsÂ LL_IOC_GROUP_LOCKÂ andÂ LL_IOC_GROUP_UNLOCK<br>
349086Â Â FixÂ UNKNOWNÂ taskÂ messageÂ [idÂ 3406,Â toÂ mach_task_self(),Â [..]<br>
349087Â Â FixÂ UNKNOWNÂ taskÂ messageÂ [idÂ 3410,Â toÂ mach_task_self(),Â [..]<br>
349626Â Â ImplementedÂ additionalÂ XenÂ hypercalls<br>
349769Â Â Clang/osx:Â ld:Â warning:Â -read_only_relocsÂ cannotÂ beÂ usedÂ withÂ x86_64<br>
349790Â Â CleanÂ upÂ ofÂ theÂ hardwareÂ capabilityÂ checkingÂ utilities.<br>
349828Â Â memcpyÂ interceptsÂ memmoveÂ causingÂ src/dstÂ overlapÂ errorÂ (ppc64Â ld.so)<br>
349874Â Â FixÂ typosÂ inÂ sourceÂ code<br>
349879Â Â memcheck:Â addÂ handwrittenÂ assemblyÂ forÂ helperc_LOADV*<br>
349941Â Â di_notify_mmapÂ mightÂ createÂ wrongÂ start/sizeÂ DebugInfoMapping<br>
350062Â Â vexÂ x86-&gt;IR:Â 0x66Â 0xFÂ 0x3AÂ 0xBÂ (ROUNDSD)Â onÂ OSÂ X<br>
350202Â Â AddÂ limitedÂ paramÂ toÂ 'monitorÂ block_list'<br>
350290Â Â s390x:Â SupportÂ instructionsÂ fixbr(a)<br>
350359Â Â memcheck/tests/x86/fxsaveÂ hangsÂ indefinetelyÂ onÂ OSÂ X<br>
350809Â Â FixÂ none/tests/async-sigsÂ forÂ Solaris<br>
350811Â Â RemoveÂ referenceÂ toÂ --db-attachÂ whichÂ hasÂ beenÂ removed.<br>
350813Â Â Memcheck/x86:Â enableÂ handwrittenÂ assemblyÂ helpersÂ forÂ x86/SolarisÂ too<br>
350854Â Â hard-to-understandÂ codeÂ inÂ VG_(load_ELF)()<br>
351140Â Â arm64Â syscallsÂ setuidÂ (146)Â andÂ setresgidÂ (149)Â notÂ implemented<br>
351386Â Â Solaris:Â CannotÂ runÂ ld.so.1Â underÂ Valgrind<br>
351474Â Â FixÂ VG_(iseqsigset)Â asÂ obvious<br>
351531Â Â TypoÂ inÂ /include/vki/vki-xen-physdev.hÂ headerÂ guard<br>
351756Â Â InterceptÂ platform_memchr$VARIANT$HaswellÂ onÂ OSÂ X<br>
351858Â Â ldsoexecÂ supportÂ onÂ Solaris<br>
351873Â Â NewerÂ gccÂ doesn'tÂ allowÂ __builtin_tabortdc[i]Â inÂ ppc32Â mode<br>
352130Â Â helgrindÂ reportsÂ falseÂ racesÂ forÂ printfsÂ usingÂ mempcpyÂ onÂ FILE*Â state<br>
352284Â Â s390:Â ConditionalÂ jumpÂ dependsÂ onÂ uninitialisedÂ value(s)Â inÂ vfprintfÂ <br>
352320Â Â arm64Â crashÂ onÂ none/tests/nestedfs<br>
352765Â Â VbitÂ testÂ failsÂ onÂ PowerÂ 6<br>
352768Â Â TheÂ mbarÂ instructionÂ isÂ missingÂ fromÂ theÂ PowerÂ PCÂ support<br>
352769Â Â PowerÂ PCÂ programÂ priorityÂ registerÂ (PPR)Â isÂ notÂ supported<br>
n-i-bzÂ Â ProvideÂ implementationsÂ ofÂ certainÂ compilerÂ builtinsÂ toÂ support<br>
Â Â Â Â Â Â Â Â compilersÂ thatÂ mayÂ notÂ provideÂ those<br>
n-i-bzÂ Â OldÂ STABSÂ codeÂ isÂ stillÂ beingÂ compiled,Â butÂ neverÂ used.Â RemoveÂ it.<br>
n-i-bzÂ Â FixÂ compilationÂ onÂ distrosÂ withÂ glibcÂ &lt;Â 2.5<br>
n-i-bzÂ Â (vexÂ 3098)Â AvoidÂ generationÂ ofÂ NeonÂ insnsÂ onÂ non-NeonÂ hosts<br>
n-i-bzÂ Â EnableÂ rt_sigpendingÂ syscallÂ onÂ ppc64Â linux.<br>
n-i-bzÂ Â mremapÂ didÂ notÂ workÂ properlyÂ onÂ sharedÂ memory<br>
n-i-bzÂ Â FixÂ incorrectÂ sizeofÂ expressionÂ inÂ syswrap-xen.cÂ reportedÂ byÂ Coverity<br>
n-i-bzÂ Â InÂ VALGRIND_PRINTFÂ writeÂ outÂ threadÂ name,Â ifÂ any,Â toÂ xml<br>
<br>
(3.11.0.TEST1:Â Â 8Â SeptemberÂ 2015,Â vexÂ r3187,Â valgrindÂ r15646)<br>
(3.11.0.TEST2:Â 21Â SeptemberÂ 2015,Â vexÂ r3193,Â valgrindÂ r15667)<br>
(3.11.0:Â Â Â Â Â Â Â 22Â SeptemberÂ 2015,Â vexÂ r3195,Â valgrindÂ r15674)<br>
<br>
<br>
<br>
ReleaseÂ 3.10.1Â (25Â NovemberÂ 2014)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
3.10.1Â isÂ aÂ bugÂ fixÂ release.Â Â ItÂ fixesÂ variousÂ bugsÂ reportedÂ inÂ 3.10.0<br>
andÂ backportsÂ fixesÂ forÂ allÂ reportedÂ missingÂ AArch64Â ARMv8Â instructions<br>
andÂ syscallsÂ fromÂ theÂ trunk.Â Â IfÂ youÂ packageÂ orÂ deliverÂ 3.10.0Â forÂ others<br>
toÂ use,Â youÂ mightÂ wantÂ toÂ considerÂ upgradingÂ toÂ 3.10.1Â instead.<br>
<br>
TheÂ followingÂ bugsÂ haveÂ beenÂ fixedÂ orÂ resolved.Â Â NoteÂ thatÂ "n-i-bz"<br>
standsÂ forÂ "notÂ inÂ bugzilla"Â --Â thatÂ is,Â aÂ bugÂ thatÂ wasÂ reportedÂ toÂ us<br>
butÂ neverÂ gotÂ aÂ bugzillaÂ entry.Â Â WeÂ encourageÂ youÂ toÂ fileÂ bugsÂ in<br>
bugzillaÂ (https://bugs.kde.org/enter_bug.cgi?product=valgrind)Â rather<br>
thanÂ mailingÂ theÂ developersÂ (orÂ mailingÂ lists)Â directlyÂ --Â bugsÂ that<br>
areÂ notÂ enteredÂ intoÂ bugzillaÂ tendÂ toÂ getÂ forgottenÂ aboutÂ orÂ ignored.<br>
<br>
ToÂ seeÂ detailsÂ ofÂ aÂ givenÂ bug,Â visit<br>
Â Â https://bugs.kde.org/show_bug.cgi?id=XXXXXX<br>
whereÂ XXXXXXÂ isÂ theÂ bugÂ numberÂ asÂ listedÂ below.<br>
<br>
335440Â Â arm64:Â ld1Â (singleÂ structure)Â isÂ notÂ implemented<br>
335713Â Â arm64:Â unhandedÂ instruction:Â prfmÂ (immediate)<br>
339020Â Â ppc64:Â memcheck/tests/ppc64/power_ISA2_05Â failingÂ inÂ nightlyÂ build<br>
339182Â Â ppc64:Â AvSplatÂ oughtÂ toÂ loadÂ destinationÂ vectorÂ registerÂ withÂ [..]<br>
339336Â Â PPC64Â storeÂ quadÂ instructionÂ (stq)Â isÂ notÂ supposedÂ toÂ changeÂ [..]<br>
339433Â Â ppc64Â lxvw4xÂ instructionÂ usesÂ fourÂ 32-byteÂ loads<br>
339645Â Â UseÂ correctÂ tagÂ namesÂ inÂ sys_getdents/64Â wrappers<br>
339706Â Â FixÂ falseÂ positiveÂ forÂ ioctl(TIOCSIG)Â onÂ linux<br>
339721Â Â assertionÂ 'check_siblingÂ ==Â sibling'Â failedÂ inÂ readdwarf3.cÂ ...<br>
339853Â Â arm64Â timesÂ syscallÂ unknown<br>
339855Â Â arm64Â unhandledÂ getsid/setsidÂ syscalls<br>
339858Â Â arm64Â dmbÂ syÂ notÂ implemented<br>
339926Â Â UnhandledÂ instructionÂ 0x1E674001Â (frintx)Â onÂ aarm64<br>
339927Â Â UnhandledÂ instructionÂ 0x9E7100C6Â (fcvtmu)Â onÂ aarch64<br>
339938Â Â disInstr(arm64):Â unhandledÂ instructionÂ 0x4F8010A4Â (fmla)<br>
Â Â Â Â Â Â Â Â ==Â 339950<br>
339940Â Â arm64:Â unhandledÂ syscall:Â 83Â (sys_fdatasync)Â +Â patch<br>
340033Â Â arm64:Â unhandledÂ insnÂ dmbÂ ishldÂ andÂ someÂ otherÂ isb-dmb-dsbÂ variants<br>
340028Â Â unhandledÂ syscallsÂ forÂ arm64Â (msync,Â pread64,Â setreuidÂ andÂ setregid)<br>
340036Â Â arm64:Â UnhandledÂ instructionÂ ld4Â (multipleÂ structures,Â noÂ offset)<br>
340236Â Â arm64:Â unhandledÂ syscalls:Â mknodat,Â fchdir,Â chroot,Â fchownat<br>
340509Â Â arm64:Â unhandledÂ instructionÂ fcvtas<br>
340630Â Â arm64:Â fchmodÂ (52)Â andÂ fchownÂ (55)Â syscallsÂ notÂ recognized<br>
340632Â Â arm64:Â unhandledÂ instructionÂ fcvtas<br>
340722Â Â ResolveÂ "UNKNOWNÂ attrlistÂ flagsÂ 0:0x10000000"<br>
340725Â Â AVX2:Â IncorrectÂ decodingÂ ofÂ vpbroadcast{b,w}Â reg,regÂ forms<br>
340788Â Â warning:Â unhandledÂ syscall:Â 318Â (getrandom)<br>
340807Â Â disInstr(arm):Â unhandledÂ instruction:Â 0xEE989B20<br>
340856Â Â disInstr(arm64):Â unhandledÂ instructionÂ 0x1E634C45Â (fcsel)<br>
340922Â Â arm64:Â unhandledÂ getgroups/setgroupsÂ syscalls<br>
350251Â Â FixÂ typoÂ inÂ VEXÂ utilityÂ programÂ (test_main.c).<br>
350407Â Â arm64:Â unhandledÂ instructionÂ ucvtfÂ (vector,Â integer)<br>
350809Â Â none/tests/async-sigsÂ breaksÂ whenÂ runÂ underÂ cronÂ onÂ Solaris<br>
350811Â Â updateÂ README.solarisÂ afterÂ r15445<br>
350813Â Â UseÂ handwrittenÂ memcheckÂ assemblyÂ helpersÂ onÂ x86/SolarisÂ [..]<br>
350854Â Â strangeÂ codeÂ inÂ VG_(load_ELF)()<br>
351140Â Â arm64Â syscallsÂ setuidÂ (146)Â andÂ setresgidÂ (149)Â notÂ implemented<br>
n-i-bzÂ Â DRDÂ andÂ Helgrind:Â HandleÂ Imbe_CancelReservationÂ (clrexÂ onÂ ARM)<br>
n-i-bzÂ Â AddÂ missingÂ ]]Â toÂ terminateÂ CDATA.<br>
n-i-bzÂ Â GlibcÂ versionsÂ priorÂ toÂ 2.5Â doÂ notÂ defineÂ PTRACE_GETSIGINFO<br>
n-i-bzÂ Â EnableÂ sys_fadvise64_64Â onÂ arm32.<br>
n-i-bzÂ Â AddÂ testÂ casesÂ forÂ allÂ remainingÂ AArch64Â SIMD,Â FPÂ andÂ memoryÂ insns.<br>
n-i-bzÂ Â AddÂ testÂ casesÂ forÂ allÂ knownÂ arm64Â load/storeÂ instructions.<br>
n-i-bzÂ Â PRE(sys_openat):Â whenÂ checkingÂ whetherÂ ARG1Â ==Â VKI_AT_FDCWDÂ [..]<br>
n-i-bzÂ Â AddÂ detectionÂ ofÂ oldÂ ppc32Â magicÂ instructionsÂ fromÂ bugÂ 278808.<br>
n-i-bzÂ Â exp-dhat:Â ImplementÂ missingÂ functionÂ "dh_malloc_usable_size".<br>
n-i-bzÂ Â arm64:Â ImplementÂ "fcvtpuÂ w,Â s".<br>
n-i-bzÂ Â arm64:Â implementÂ ADDPÂ andÂ variousÂ others<br>
n-i-bzÂ Â arm64:Â ImplementÂ {S,U}CVTFÂ (scalar,Â fixedpt).<br>
n-i-bzÂ Â arm64:Â enableÂ FCVT{A,N}SÂ X,S.<br>
<br>
(3.10.1:Â 25Â NovemberÂ 2014,Â vexÂ r3026,Â valgrindÂ r14785)<br>
<br>
<br>
<br>
ReleaseÂ 3.10.0Â (10Â SeptemberÂ 2014)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
<br>
3.10.0Â isÂ aÂ featureÂ releaseÂ withÂ manyÂ improvementsÂ andÂ theÂ usual<br>
collectionÂ ofÂ bugÂ fixes.<br>
<br>
ThisÂ releaseÂ supportsÂ X86/Linux,Â AMD64/Linux,Â ARM32/Linux,Â ARM64/Linux,<br>
PPC32/Linux,Â PPC64BE/Linux,Â PPC64LE/Linux,Â S390X/Linux,Â MIPS32/Linux,<br>
MIPS64/Linux,Â ARM/Android,Â MIPS32/Android,Â X86/Android,Â X86/MacOSXÂ 10.9<br>
andÂ AMD64/MacOSXÂ 10.9.Â Â SupportÂ forÂ MacOSXÂ 10.8Â andÂ 10.9Â is<br>
significantlyÂ improvedÂ relativeÂ toÂ theÂ 3.9.0Â release.<br>
<br>
*Â ==================Â PLATFORMÂ CHANGESÂ =================<br>
<br>
*Â SupportÂ forÂ theÂ 64-bitÂ ARMÂ ArchitectureÂ (AArch64Â ARMv8).Â Â ThisÂ port<br>
Â Â isÂ mostlyÂ complete,Â andÂ isÂ usable,Â butÂ someÂ SIMDÂ instructionsÂ areÂ as<br>
Â Â yetÂ unsupported.<br>
<br>
*Â SupportÂ forÂ little-endianÂ variantÂ ofÂ theÂ 64-bitÂ POWERÂ architecture.<br>
<br>
*Â SupportÂ forÂ AndroidÂ onÂ MIPS32.<br>
<br>
*Â SupportÂ forÂ 64bitÂ FPUÂ onÂ MIPS32Â platforms.<br>
<br>
*Â BothÂ 32-Â andÂ 64-bitÂ executablesÂ areÂ supportedÂ onÂ MacOSXÂ 10.8Â andÂ 10.9.<br>
<br>
*Â ConfigurationÂ forÂ andÂ runningÂ onÂ AndroidÂ targetsÂ hasÂ changed.<br>
Â Â SeeÂ README.androidÂ inÂ theÂ sourceÂ treeÂ forÂ details.<br>
<br>
*Â ==================Â DEPRECATEDÂ FEATURESÂ =================<br>
<br>
*Â --db-attachÂ isÂ nowÂ deprecatedÂ andÂ willÂ beÂ removedÂ inÂ theÂ next<br>
Â Â valgrindÂ featureÂ release.Â Â TheÂ built-inÂ GDBÂ serverÂ capabilitiesÂ are<br>
Â Â superiorÂ andÂ shouldÂ beÂ usedÂ instead.Â LearnÂ moreÂ here:<br>
Â Â http://valgrind.org/docs/manual/manual-core-adv.html#manual-core-adv.gdbserver<br>
<br>
*Â ====================Â TOOLÂ CHANGESÂ ====================<br>
<br>
*Â Memcheck:<br>
<br>
Â Â -Â ClientÂ codeÂ canÂ nowÂ selectivelyÂ disableÂ andÂ re-enableÂ reportingÂ of<br>
Â Â Â Â invalidÂ addressÂ errorsÂ inÂ specificÂ rangesÂ usingÂ theÂ newÂ client<br>
Â Â Â Â requestsÂ VALGRIND_DISABLE_ADDR_ERROR_REPORTING_IN_RANGEÂ and<br>
Â Â Â Â VALGRIND_ENABLE_ADDR_ERROR_REPORTING_IN_RANGE.<br>
<br>
Â Â -Â LeakÂ checker:Â thereÂ isÂ aÂ newÂ leakÂ checkÂ heuristicÂ called<br>
Â Â Â Â "length64".Â Â ThisÂ isÂ usedÂ toÂ detectÂ interiorÂ pointersÂ pointingÂ 8<br>
Â Â Â Â bytesÂ insideÂ aÂ block,Â onÂ theÂ assumptionÂ thatÂ theÂ firstÂ 8Â bytes<br>
Â Â Â Â holdsÂ theÂ valueÂ "blockÂ sizeÂ -Â 8".Â Â ThisÂ isÂ usedÂ by<br>
Â Â Â Â sqlite3MemMalloc,Â forÂ example.<br>
<br>
Â Â -Â CheckingÂ ofÂ systemÂ callÂ parameters:Â ifÂ aÂ syscallÂ parameter<br>
Â Â Â Â (e.g.Â bindÂ structÂ sockaddr,Â sendmsgÂ structÂ msghdr,Â ...)Â has<br>
Â Â Â Â severalÂ fieldsÂ notÂ initialised,Â anÂ errorÂ isÂ nowÂ reportedÂ forÂ each<br>
Â Â Â Â field.Â Previously,Â anÂ errorÂ wasÂ reportedÂ onlyÂ forÂ theÂ first<br>
Â Â Â Â uninitialisedÂ field.<br>
<br>
Â Â -Â MismatchedÂ alloc/freeÂ checking:Â aÂ newÂ flag<br>
Â Â Â Â --show-mismatched-frees=no|yesÂ [yes]Â makesÂ itÂ possibleÂ toÂ turnÂ off<br>
Â Â Â Â suchÂ checksÂ ifÂ necessary.<br>
<br>
*Â Helgrind:<br>
<br>
Â Â -Â ImprovementsÂ toÂ errorÂ messages:<br>
<br>
Â Â Â Â oÂ RaceÂ conditionÂ errorÂ messageÂ involvingÂ heapÂ allocatedÂ blocksÂ also<br>
Â Â Â Â Â Â showÂ theÂ threadÂ numberÂ thatÂ allocatedÂ theÂ raced-onÂ block.<br>
<br>
Â Â Â Â oÂ AllÂ locksÂ referencedÂ byÂ anÂ errorÂ messageÂ areÂ nowÂ announced.<br>
Â Â Â Â Â Â Previously,Â someÂ errorÂ messagesÂ onlyÂ showedÂ theÂ lockÂ addresses.<br>
<br>
Â Â Â Â oÂ TheÂ messageÂ indicatingÂ whereÂ aÂ lockÂ wasÂ firstÂ observedÂ nowÂ also<br>
Â Â Â Â Â Â describesÂ theÂ address/locationÂ ofÂ theÂ lock.<br>
<br>
Â Â -Â HelgrindÂ nowÂ understandsÂ theÂ AdaÂ taskÂ terminationÂ rulesÂ and<br>
Â Â Â Â createsÂ aÂ happens-beforeÂ relationshipÂ betweenÂ aÂ terminatedÂ task<br>
Â Â Â Â andÂ itsÂ master.Â Â ThisÂ avoidsÂ someÂ falseÂ positivesÂ andÂ avoidsÂ aÂ big<br>
Â Â Â Â memoryÂ leakÂ whenÂ aÂ lotÂ ofÂ AdaÂ tasksÂ areÂ createdÂ andÂ terminated.<br>
Â Â Â Â TheÂ interceptionsÂ areÂ onlyÂ activatedÂ withÂ forthcomingÂ releasesÂ of<br>
Â Â Â Â gnatproÂ &gt;=Â 7.3.0w-20140611Â andÂ gccÂ &gt;=Â 5.0.<br>
<br>
Â Â -Â AÂ newÂ GDBÂ serverÂ monitorÂ commandÂ "infoÂ locks"Â givingÂ theÂ listÂ of<br>
Â Â Â Â locks,Â theirÂ location,Â andÂ theirÂ status.<br>
<br>
*Â Callgrind:<br>
<br>
Â Â -Â callgrind_controlÂ nowÂ supportsÂ theÂ --vgdb-prefixÂ argument,<br>
Â Â Â Â whichÂ isÂ neededÂ ifÂ valgrindÂ wasÂ startedÂ withÂ thisÂ sameÂ argument.<br>
<br>
*Â ====================Â OTHERÂ CHANGESÂ ====================<br>
<br>
*Â UnwindingÂ throughÂ inlinedÂ functionÂ calls.Â Â StackÂ unwindingÂ canÂ now<br>
Â Â makeÂ useÂ ofÂ Dwarf3Â inlined-unwindÂ informationÂ ifÂ itÂ isÂ available.<br>
Â Â TheÂ practicalÂ effectÂ isÂ thatÂ inlinedÂ callsÂ becomeÂ visibleÂ inÂ stack<br>
Â Â traces.Â Â TheÂ suppressionÂ matchingÂ machineryÂ hasÂ beenÂ adjusted<br>
Â Â accordingly.Â Â ThisÂ isÂ controlledÂ byÂ theÂ newÂ option<br>
Â Â --read-inline-info=yes|no.Â Â CurrentlyÂ thisÂ isÂ enabledÂ byÂ default<br>
Â Â onlyÂ onÂ LinuxÂ andÂ AndroidÂ targetsÂ andÂ onlyÂ forÂ theÂ toolsÂ Memcheck,<br>
Â Â HelgrindÂ andÂ DRD.<br>
<br>
*Â ValgrindÂ canÂ nowÂ readÂ EXIDXÂ unwindÂ informationÂ onÂ 32-bitÂ ARM<br>
Â Â targets.Â Â IfÂ anÂ objectÂ containsÂ bothÂ CFIÂ andÂ EXIDXÂ unwind<br>
Â Â information,Â ValgrindÂ willÂ preferÂ theÂ CFIÂ overÂ theÂ EXIDX.Â Â This<br>
Â Â facilitatesÂ unwindingÂ throughÂ systemÂ librariesÂ onÂ arm-android<br>
Â Â targets.<br>
<br>
*Â AddressÂ descriptionÂ logicÂ hasÂ beenÂ improvedÂ andÂ isÂ nowÂ common<br>
Â Â betweenÂ MemcheckÂ andÂ Helgrind,Â resultingÂ inÂ betterÂ address<br>
Â Â descriptionsÂ forÂ someÂ kindsÂ ofÂ errorÂ messages.<br>
<br>
*Â ErrorÂ messagesÂ aboutÂ dubiousÂ argumentsÂ (eg,Â toÂ mallocÂ orÂ calloc)Â are<br>
Â Â outputÂ likeÂ otherÂ errors.Â Â ThisÂ meansÂ thatÂ theyÂ canÂ beÂ suppressed<br>
Â Â andÂ theyÂ haveÂ aÂ stackÂ trace.<br>
<br>
*Â TheÂ C++Â demanglerÂ hasÂ beenÂ updatedÂ forÂ betterÂ C++11Â support.<br>
<br>
*Â NewÂ andÂ modifiedÂ GDBÂ serverÂ monitorÂ features:<br>
<br>
Â Â -Â ThreadÂ localÂ variables/storageÂ (__thread)Â canÂ nowÂ beÂ displayed.<br>
<br>
Â Â -Â TheÂ GDBÂ serverÂ monitorÂ commandÂ "v.infoÂ locationÂ &lt;address&gt;"<br>
Â Â Â Â displaysÂ informationÂ aboutÂ anÂ address.Â Â TheÂ informationÂ produced<br>
Â Â Â Â dependsÂ onÂ theÂ toolÂ andÂ onÂ theÂ optionsÂ givenÂ toÂ valgrind.<br>
Â Â Â Â Possibly,Â theÂ followingÂ areÂ described:Â globalÂ variables,Â local<br>
Â Â Â Â (stack)Â variables,Â allocatedÂ orÂ freedÂ blocks,Â ...<br>
<br>
Â Â -Â TheÂ optionÂ "--vgdb-stop-at=event1,event2,..."Â allowsÂ theÂ userÂ to<br>
Â Â Â Â askÂ theÂ GDBÂ serverÂ toÂ stopÂ atÂ theÂ startÂ ofÂ programÂ execution,Â at<br>
Â Â Â Â theÂ endÂ ofÂ theÂ programÂ executionÂ andÂ onÂ ValgrindÂ internalÂ errors.<br>
<br>
Â Â -Â AÂ newÂ monitorÂ commandÂ "v.infoÂ stats"Â showsÂ variousÂ ValgrindÂ core<br>
Â Â Â Â andÂ toolÂ statistics.<br>
<br>
Â Â -Â AÂ newÂ monitorÂ commandÂ "v.setÂ hostvisibility"Â allowsÂ theÂ GDBÂ server<br>
Â Â Â Â toÂ provideÂ accessÂ toÂ ValgrindÂ internalÂ hostÂ status/memory.<br>
<br>
*Â AÂ newÂ optionÂ "--aspace-minaddr=&lt;address&gt;"Â canÂ inÂ someÂ situations<br>
Â Â allowÂ theÂ useÂ ofÂ moreÂ memoryÂ byÂ decreasingÂ theÂ addressÂ aboveÂ which<br>
Â Â ValgrindÂ mapsÂ memory.Â Â ItÂ canÂ alsoÂ beÂ usedÂ toÂ solveÂ address<br>
Â Â conflictsÂ withÂ systemÂ librariesÂ byÂ increasingÂ theÂ defaultÂ value.<br>
Â Â SeeÂ userÂ manualÂ forÂ details.<br>
<br>
*Â TheÂ amountÂ ofÂ memoryÂ usedÂ byÂ ValgrindÂ toÂ storeÂ debugÂ infoÂ (unwind<br>
Â Â info,Â lineÂ numberÂ informationÂ andÂ symbolÂ data)Â hasÂ been<br>
Â Â significantlyÂ reduced,Â evenÂ thoughÂ ValgrindÂ nowÂ readsÂ more<br>
Â Â informationÂ inÂ orderÂ toÂ supportÂ unwindingÂ ofÂ inlinedÂ functionÂ calls.<br>
<br>
*Â Dwarf3Â handlingÂ withÂ --read-var-info=yesÂ hasÂ beenÂ improved:<br>
<br>
Â Â -Â AdaÂ andÂ CÂ structÂ containingÂ VLAsÂ noÂ longerÂ causeÂ aÂ "badÂ DIE"Â error<br>
<br>
Â Â -Â CodeÂ compiledÂ with<br>
Â Â Â Â -ffunction-sectionsÂ -fdata-sectionsÂ -Wl,--gc-sections<br>
Â Â Â Â noÂ longerÂ causesÂ assertionÂ failures.<br>
<br>
*Â ImprovedÂ checkingÂ forÂ theÂ --sim-hints=Â andÂ --kernel-variant=<br>
Â Â options.Â Â UnknownÂ stringsÂ areÂ nowÂ detectedÂ andÂ reportedÂ toÂ theÂ user<br>
Â Â asÂ aÂ usageÂ error.<br>
<br>
*Â TheÂ semanticsÂ ofÂ stackÂ start/endÂ boundariesÂ inÂ theÂ valgrind.h<br>
Â Â VALGRIND_STACK_REGISTERÂ clientÂ requestÂ hasÂ beenÂ clarifiedÂ and<br>
Â Â documented.Â Â TheÂ conventionÂ isÂ thatÂ startÂ andÂ endÂ areÂ respectively<br>
Â Â theÂ lowestÂ andÂ highestÂ addressableÂ bytesÂ ofÂ theÂ stack.<br>
<br>
*Â ====================Â FIXEDÂ BUGSÂ ====================<br>
<br>
TheÂ followingÂ bugsÂ haveÂ beenÂ fixedÂ orÂ resolved.Â Â NoteÂ thatÂ "n-i-bz"<br>
standsÂ forÂ "notÂ inÂ bugzilla"Â --Â thatÂ is,Â aÂ bugÂ thatÂ wasÂ reportedÂ toÂ us<br>
butÂ neverÂ gotÂ aÂ bugzillaÂ entry.Â Â WeÂ encourageÂ youÂ toÂ fileÂ bugsÂ in<br>
bugzillaÂ (https://bugs.kde.org/enter_bug.cgi?product=valgrind)Â rather<br>
thanÂ mailingÂ theÂ developersÂ (orÂ mailingÂ lists)Â directlyÂ --Â bugsÂ that<br>
areÂ notÂ enteredÂ intoÂ bugzillaÂ tendÂ toÂ getÂ forgottenÂ aboutÂ orÂ ignored.<br>
<br>
ToÂ seeÂ detailsÂ ofÂ aÂ givenÂ bug,Â visit<br>
Â Â https://bugs.kde.org/show_bug.cgi?id=XXXXXX<br>
whereÂ XXXXXXÂ isÂ theÂ bugÂ numberÂ asÂ listedÂ below.<br>
<br>
175819Â Â SupportÂ forÂ ipv6Â socketÂ reportingÂ withÂ --track-fds<br>
232510Â Â makeÂ distcheckÂ fails<br>
249435Â Â AnalyzingÂ wineÂ programsÂ withÂ callgrindÂ triggersÂ aÂ crash<br>
278972Â Â supportÂ forÂ inlinedÂ functionÂ callsÂ inÂ stacktracesÂ andÂ suppression<br>
Â Â Â Â Â Â Â Â ==Â 199144<br>
291310Â Â FXSAVEÂ instructionÂ marksÂ memoryÂ asÂ undefinedÂ onÂ amd64<br>
303536Â Â ioctlÂ forÂ SIOCETHTOOLÂ (ethtool(8))Â isn'tÂ wrapped<br>
308729Â Â vexÂ x86-&gt;IR:Â unhandledÂ instructionÂ bytesÂ 0xfÂ 0x5Â (syscall)Â <br>
315199Â Â vgcoreÂ fileÂ forÂ threadedÂ appÂ doesÂ notÂ showÂ whichÂ threadÂ crashed<br>
315952Â Â tun/tapÂ ioctlsÂ areÂ notÂ supported<br>
323178Â Â UnhandledÂ instruction:Â PLDWÂ registerÂ (ARM)Â <br>
323179Â Â UnhandledÂ instruction:Â PLDWÂ immediateÂ (ARM)<br>
324050Â Â Helgrind:Â SEGVÂ becauseÂ ofÂ unalignedÂ stackÂ whenÂ usingÂ movdqa<br>
325110Â Â AddÂ test-casesÂ forÂ PowerÂ ISAÂ 2.06Â insns:Â divdo/divdo.Â andÂ divduo/divduo.<br>
325124Â Â [MIPSEL]Â CompilationÂ error<br>
325477Â Â PhaseÂ 4Â supportÂ forÂ IBMÂ PowerÂ ISAÂ 2.07<br>
325538Â Â caviumÂ octeonÂ mips64,Â valgrindÂ reportedÂ "dumpingÂ core"Â [...]<br>
325628Â Â PhaseÂ 5Â supportÂ forÂ IBMÂ PowerÂ ISAÂ 2.07<br>
325714Â Â EmptyÂ vgcoreÂ butÂ RLIMIT_COREÂ isÂ bigÂ enoughÂ (tooÂ big)Â <br>
325751Â Â MissingÂ theÂ twoÂ privilegedÂ PowerÂ PCÂ TransactionalÂ MemoryÂ Instructions<br>
325816Â Â PhaseÂ 6Â supportÂ forÂ IBMÂ PowerÂ ISAÂ 2.07<br>
325856Â Â MakeÂ SGCheckÂ failÂ gracefullyÂ onÂ unsupportedÂ platforms<br>
326026Â Â IopÂ namesÂ forÂ countÂ leadingÂ zeros/signÂ bitsÂ incorrectlyÂ implyÂ [..]<br>
326436Â Â DRD:Â FalseÂ positiveÂ inÂ libstdc++Â std::list::push_back<br>
326444Â Â CaviumÂ MIPSÂ OcteonÂ SpecificÂ LoadÂ IndexedÂ Instructions<br>
326462Â Â RefactorÂ vgdbÂ toÂ isolateÂ invokerÂ stuffÂ intoÂ separateÂ module<br>
326469Â Â amd64-&gt;IR:Â 0x66Â 0xFÂ 0x3AÂ 0x63Â 0xC1Â 0xEÂ (pcmpistriÂ 0x0E)<br>
326623Â Â DRD:Â falseÂ positiveÂ conflictÂ reportÂ inÂ aÂ fieldÂ assignment<br>
326724Â Â ValgrindÂ doesÂ notÂ compileÂ onÂ OSXÂ 1.9Â Mavericks<br>
326816Â Â InterceptÂ forÂ __strncpy_sse2_unalignedÂ missing?<br>
326921Â Â coregrindÂ failsÂ toÂ compileÂ m_trampoline.SÂ withÂ MIPS/LinuxÂ portÂ ofÂ V<br>
326983Â Â ClearÂ directionÂ flagÂ afterÂ testsÂ onÂ amd64.<br>
327212Â Â DoÂ notÂ prependÂ theÂ currentÂ directoryÂ toÂ absoluteÂ pathÂ names.<br>
327223Â Â SupportÂ forÂ CaviumÂ MIPSÂ OcteonÂ AtomicÂ andÂ CountÂ Instructions<br>
327238Â Â CallgrindÂ AssertionÂ 'passedÂ &lt;=Â last_bb-&gt;cjmp_count'Â failed<br>
327284Â Â s390x:Â FixÂ translationÂ ofÂ theÂ risbgÂ instruction<br>
327639Â Â vexÂ amd64-&gt;IRÂ pcmpestriÂ SSE4.2Â instructionÂ isÂ unsupportedÂ 0x34<br>
327837Â Â dwzÂ compressedÂ alternateÂ .debug_infoÂ andÂ .debug_strÂ notÂ readÂ correctly<br>
327916Â Â DW_TAG_typedefÂ mayÂ haveÂ noÂ name<br>
327943Â Â s390x:Â addÂ aÂ redirectionÂ forÂ theÂ 'index'Â function<br>
328100Â Â XABORTÂ notÂ implemented<br>
328205Â Â ImplementÂ additionalÂ XenÂ hypercalls<br>
328454Â Â addÂ supportÂ BacktracesÂ withÂ ARMÂ unwindÂ tablesÂ (EXIDX)<br>
328455Â Â s390x:Â SIGILLÂ afterÂ emittingÂ wrongÂ registerÂ pairÂ forÂ ldxbr<br>
328711Â Â valgrind.1Â manpageÂ "memcheckÂ options"Â sectionÂ isÂ badlyÂ generated<br>
328878Â Â vexÂ amd64-&gt;IRÂ pcmpestriÂ SSE4.2Â instructionÂ isÂ unsupportedÂ 0x14<br>
329612Â Â IncorrectÂ handlingÂ ofÂ AT_BASEÂ forÂ imageÂ executionÂ <br>
329694Â Â clangÂ warnsÂ aboutÂ usingÂ uninitializedÂ variableÂ <br>
329956Â Â valgrindÂ crashesÂ whenÂ lmw/stmwÂ instructionsÂ areÂ usedÂ onÂ ppc64<br>
330228Â Â mmapÂ mustÂ alignÂ toÂ VKI_SHMLBAÂ onÂ mips32<br>
330257Â Â LLVMÂ doesÂ notÂ supportÂ `-mno-dynamic-no-pic`Â option<br>
330319Â Â amd64-&gt;IR:Â unhandledÂ instructionÂ bytes:Â 0xFÂ 0x1Â 0xD5Â (xend)<br>
330459Â Â --track-fds=yesÂ doesn'tÂ trackÂ eventfds<br>
330469Â Â AddÂ clock_adjtimeÂ syscallÂ support<br>
330594Â Â MissingÂ sysallsÂ onÂ PowerPCÂ /Â uClibc<br>
330622Â Â AddÂ testÂ toÂ regressionÂ suiteÂ forÂ POWERÂ instruction:Â dcbzl<br>
330939Â Â SupportÂ forÂ AMD'sÂ syscallÂ instructionÂ onÂ x86<br>
Â Â Â Â Â Â Â Â ==Â 308729<br>
330941Â Â TypoÂ inÂ PRE(poll)Â syscallÂ wrapper<br>
331057Â Â unhandledÂ instruction:Â 0xEEE01B20Â (vfma.f64)Â (hasÂ patch)<br>
331254Â Â FixÂ expectedÂ outputÂ forÂ memcheck/tests/dw4<br>
331255Â Â FixÂ raceÂ conditionÂ inÂ testÂ none/tests/coolo_sigaction<br>
331257Â Â FixÂ typeÂ ofÂ jumpÂ bufferÂ inÂ testÂ none/tests/faultstatus<br>
331305Â Â configureÂ usesÂ bashÂ specificÂ syntax<br>
331337Â Â s390xÂ WARNING:Â unhandledÂ syscall:Â 326Â (dup3)<br>
331380Â Â SyscallÂ paramÂ timer_create(evp)Â pointsÂ toÂ uninitialisedÂ byte(s)<br>
331476Â Â PatchÂ toÂ handleÂ ioctlÂ 0x5422Â onÂ LinuxÂ (x86Â andÂ amd64)<br>
331829Â Â UnexpectedÂ ioctlÂ opcodeÂ signÂ extension<br>
331830Â Â ppc64:Â WARNING:Â unhandledÂ syscall:Â 96/97<br>
331839Â Â drd/tests/sem_openÂ specifiesÂ invalidÂ semaphoreÂ nameÂ <br>
331847Â Â outcomeÂ ofÂ drd/tests/thread_nameÂ isÂ nondeterministic<br>
332037Â Â ValgrindÂ cannotÂ handleÂ ThumbÂ "addÂ pc,Â reg"<br>
332055Â Â drdÂ assertsÂ onÂ platformsÂ withÂ VG_STACK_REDZONE_SZBÂ ==Â 0Â and<br>
Â Â Â Â Â Â Â Â consistencyÂ checksÂ enabled<br>
332263Â Â interceptsÂ forÂ pthread_rwlock_timedrdlockÂ and<br>
Â Â Â Â Â Â Â Â pthread_rwlock_timedwrlockÂ areÂ incorrect<br>
332265Â Â drdÂ couldÂ doÂ withÂ post-rwlock_initÂ andÂ pre-rwlock_destroy<br>
Â Â Â Â Â Â Â Â clientÂ requests<br>
332276Â Â ImplementÂ additionalÂ XenÂ hypercalls<br>
332658Â Â ldrd.wÂ r1,Â r2,Â [PC,Â #imm]Â doesÂ notÂ adjustÂ forÂ 32bitÂ alignment<br>
332765Â Â FixÂ ms_printÂ toÂ createÂ temporaryÂ filesÂ inÂ aÂ properÂ directory<br>
333072Â Â drd:Â AddÂ semaphoreÂ annotations<br>
333145Â Â TestsÂ forÂ missalignedÂ PC+#immÂ accessÂ forÂ arm<br>
333228Â Â AAarch64Â MissingÂ instructionÂ encoding:Â mrsÂ %[reg],Â ctr_el0<br>
333230Â Â AAarch64Â missingÂ instructionÂ encodings:Â dc,Â ic,Â dsb.<br>
333248Â Â WARNING:Â unhandledÂ syscall:Â unix:443<br>
333428Â Â ldr.wÂ pcÂ [rD,Â #imm]Â instructionÂ leadsÂ toÂ assertion<br>
333501Â Â cachegrind:Â assertion:Â CacheÂ setÂ countÂ isÂ notÂ aÂ powerÂ ofÂ two.<br>
Â Â Â Â Â Â Â Â ==Â 336577<br>
Â Â Â Â Â Â Â Â ==Â 292281<br>
333666Â Â RecognizeÂ MPXÂ instructionsÂ andÂ bndÂ prefix.<br>
333788Â Â ValgrindÂ doesÂ notÂ supportÂ theÂ CDROM_DISC_STATUSÂ ioctlÂ (hasÂ patch)<br>
333817Â Â ValgrindÂ reportsÂ theÂ memoryÂ areasÂ writtenÂ toÂ byÂ theÂ SG_IO<br>
Â Â Â Â Â Â Â Â ioctlÂ asÂ untouched<br>
334049Â Â lzcntÂ failsÂ silentlyÂ (x86_32)<br>
334384Â Â ValgrindÂ doesÂ notÂ haveÂ supportÂ LittleÂ EndianÂ supportÂ for<br>
Â Â Â Â Â Â Â Â IBMÂ POWERÂ PPCÂ 64<br>
334585Â Â recvmmsgÂ unhandledÂ (+patch)Â (arm)<br>
334705Â Â sendmsgÂ andÂ recvmsgÂ shouldÂ guardÂ againstÂ bogusÂ msghdrÂ fields.<br>
334727Â Â BuildÂ failsÂ withÂ -Werror=format-security<br>
334788Â Â clarifyÂ docÂ aboutÂ --log-fileÂ initialÂ programÂ directory<br>
334834Â Â PPC64Â LittleÂ EndianÂ support,Â patchÂ 2<br>
334836Â Â PPC64Â LittleÂ EndianÂ support,Â patchÂ 3Â testcaseÂ fixes<br>
334936Â Â patchÂ toÂ fixÂ falseÂ positivesÂ onÂ alsaÂ SNDRV_CTL_*Â ioctls<br>
335034Â Â UnhandledÂ ioctl:Â HCIGETDEVLIST<br>
335155Â Â vgdb,Â fixÂ errorÂ printÂ statement.<br>
335262Â Â arm64:Â moviÂ 8bitÂ versionÂ isÂ notÂ supported<br>
335263Â Â arm64:Â dmbÂ instructionÂ isÂ notÂ implemented<br>
335441Â Â unhandledÂ ioctlÂ 0x8905Â (SIOCATMARK)Â whenÂ runningÂ wineÂ underÂ valgrind<br>
335496Â Â arm64:Â sbc/abcÂ instructionsÂ areÂ notÂ implemented<br>
335554Â Â arm64:Â unhandledÂ instruction:Â abs<br>
335564Â Â arm64:Â unhandledÂ instruction:Â fcvtpuÂ Â Xn,Â Sn<br>
335735Â Â arm64:Â unhandledÂ instruction:Â cnt<br>
335736Â Â arm64:Â unhandledÂ instruction:Â uaddlv<br>
335848Â Â arm64:Â unhandledÂ instruction:Â {s,u}cvtf<br>
335902Â Â arm64:Â unhandledÂ instruction:Â sli<br>
335903Â Â arm64:Â unhandledÂ instruction:Â umullÂ (vector)<br>
336055Â Â arm64:Â unhandledÂ instruction:Â movÂ (element)<br>
336062Â Â arm64:Â unhandledÂ instruction:Â shrn{,2}<br>
336139Â Â mip64:Â [...]Â valgrindÂ hangsÂ andÂ spinsÂ onÂ aÂ singleÂ coreÂ [...]<br>
336189Â Â arm64:Â unhandledÂ Instruction:Â mvn<br>
336435Â Â ValgrindÂ hangsÂ inÂ pthread_spin_lockÂ consumingÂ 100%Â CPU<br>
336619Â Â valgrindÂ --read-var-info=yesÂ doesn'tÂ handleÂ DW_TAG_restrict_type<br>
336772Â Â MakeÂ moansÂ aboutÂ unknownÂ ioctlsÂ moreÂ informative<br>
336957Â Â AddÂ aÂ sectionÂ aboutÂ theÂ Solaris/illumosÂ portÂ onÂ theÂ webpage<br>
337094Â Â ifuncÂ wrapperÂ isÂ brokenÂ onÂ ppc64<br>
337285Â Â fcntlÂ commandsÂ F_OFD_SETLK,Â F_OFD_SETLKW,Â andÂ F_OFD_GETLKÂ notÂ supported<br>
337528Â Â leakÂ checkÂ heuristicÂ forÂ blockÂ prefixedÂ byÂ lengthÂ asÂ 64bitÂ number<br>
337740Â Â ImplementÂ additionalÂ XenÂ hypercalls<br>
337762Â Â guest_arm64_toIR.c:4166Â (dis_ARM64_load_store):Â AssertionÂ `0'Â failed.<br>
337766Â Â arm64-linux:Â unhandledÂ syscallsÂ mlockÂ (228)Â andÂ mlockallÂ (230)<br>
337871Â Â deprecateÂ --db-attach<br>
338023Â Â AddÂ supportÂ forÂ allÂ V4L2/mediaÂ ioctls<br>
338024Â Â inlinedÂ functionsÂ areÂ notÂ shownÂ ifÂ DW_AT_rangesÂ isÂ used<br>
338106Â Â AddÂ supportÂ forÂ 'kcmp'Â syscall<br>
338115Â Â DRD:Â computedÂ conflictÂ setÂ differsÂ fromÂ actualÂ afterÂ fork<br>
338160Â Â implementÂ displayÂ ofÂ threadÂ localÂ storageÂ inÂ gdbsrv<br>
338205Â Â configure.acÂ andÂ checkÂ forÂ -Wno-tautological-compare<br>
338300Â Â coredumpsÂ areÂ missingÂ oneÂ byteÂ ofÂ everyÂ segment<br>
338445Â Â amd64Â vbit-testÂ failsÂ withÂ unknownÂ opcodesÂ usedÂ byÂ arm64Â VEX<br>
338499Â Â --sim-hintsÂ parsingÂ brokenÂ dueÂ toÂ wrongÂ orderÂ inÂ tokens<br>
338615Â Â suppressÂ glibcÂ 2.20Â optimizedÂ strcmpÂ implementationÂ forÂ ARMv7<br>
338681Â Â UnableÂ toÂ unwindÂ throughÂ cloneÂ threadÂ createdÂ onÂ i386-linux<br>
338698Â Â raceÂ conditionÂ betweenÂ gdbsrvÂ andÂ vgdbÂ onÂ startup<br>
338703Â Â helgrindÂ onÂ arm-linuxÂ getsÂ falseÂ positivesÂ inÂ dynamicÂ loader<br>
338791Â Â altÂ dwzÂ filesÂ canÂ beÂ relativeÂ ofÂ debug/mainÂ file<br>
338878Â Â onÂ MacOS:Â assertionÂ 'VG_IS_PAGE_ALIGNED(clstack_end+1)'Â failed<br>
338932Â Â buildÂ V-trunkÂ withÂ gcc-trunk<br>
338974Â Â glibcÂ 2.20Â changedÂ sizeÂ ofÂ structÂ sigactionÂ sa_flagsÂ fieldÂ onÂ s390<br>
345079Â Â FixÂ buildÂ problemsÂ inÂ VEX/useful/test_main.c<br>
n-i-bzÂ Â FixÂ KVM_CREATE_IRQCHIPÂ ioctlÂ handling<br>
n-i-bzÂ Â s390x:Â FixÂ memoryÂ corruptionÂ forÂ multithreadedÂ applications<br>
n-i-bzÂ Â vexÂ arm-&gt;IR:Â allowÂ PCÂ asÂ baseregÂ inÂ someÂ LDRDÂ cases<br>
n-i-bzÂ Â internalÂ errorÂ inÂ ValgrindÂ ifÂ vgdbÂ transmitÂ signalsÂ whenÂ ptraceÂ invoked<br>
n-i-bzÂ Â FixÂ mingw64Â supportÂ inÂ valgrind.hÂ (dev@,Â 9Â MayÂ 2014)<br>
n-i-bzÂ Â drdÂ manual:Â DocumentÂ howÂ toÂ C++11Â programsÂ thatÂ useÂ classÂ "std::thread"<br>
n-i-bzÂ Â AddÂ command-lineÂ optionÂ --default-suppressions<br>
n-i-bzÂ Â AddÂ supportÂ forÂ BLKDISCARDZEROESÂ ioctl<br>
n-i-bzÂ Â ppc32/64:Â fixÂ aÂ regressionÂ withÂ theÂ mtfsb0/mtfsb1Â instructions<br>
n-i-bzÂ Â AddÂ supportÂ for	sys_pivot_rootÂ andÂ sys_unshare<br>
<br>
(3.10.0.BETA1:Â Â 2Â SeptemberÂ 2014,Â vexÂ r2940,Â valgrindÂ r14428)<br>
(3.10.0.BETA2:Â Â 8Â SeptemberÂ 2014,Â vexÂ r2950,Â valgrindÂ r14503)<br>
(3.10.0:Â Â Â Â Â Â Â 10Â SeptemberÂ 2014,Â vexÂ r2950,Â valgrindÂ r14514)<br>
<br>
<br>
<br>
ReleaseÂ 3.9.0Â (31Â OctoberÂ 2013)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
3.9.0Â isÂ aÂ featureÂ releaseÂ withÂ manyÂ improvementsÂ andÂ theÂ usual<br>
collectionÂ ofÂ bugÂ fixes.<br>
<br>
ThisÂ releaseÂ supportsÂ X86/Linux,Â AMD64/Linux,Â ARM/Linux,Â PPC32/Linux,<br>
PPC64/Linux,Â S390X/Linux,Â MIPS32/Linux,Â MIPS64/Linux,Â ARM/Android,<br>
X86/Android,Â X86/MacOSXÂ 10.7Â andÂ AMD64/MacOSXÂ 10.7.Â Â SupportÂ for<br>
MacOSXÂ 10.8Â isÂ significantlyÂ improvedÂ relativeÂ toÂ theÂ 3.8.0Â release.<br>
<br>
*Â ==================Â PLATFORMÂ CHANGESÂ =================<br>
<br>
*Â SupportÂ forÂ MIPS64Â LEÂ andÂ BEÂ runningÂ Linux.Â Â ValgrindÂ hasÂ been<br>
Â Â testedÂ onÂ MIPS64Â DebianÂ SqueezeÂ andÂ DebianÂ WheezyÂ distributions.<br>
<br>
*Â SupportÂ forÂ MIPSÂ DSPÂ ASEÂ onÂ MIPS32Â platforms.<br>
<br>
*Â SupportÂ forÂ s390xÂ DecimalÂ FloatingÂ PointÂ instructionsÂ onÂ hostsÂ that<br>
Â Â haveÂ theÂ DFPÂ facilityÂ installed.<br>
<br>
*Â SupportÂ forÂ POWER8Â (PowerÂ ISAÂ 2.07)Â instructions<br>
<br>
*Â SupportÂ forÂ IntelÂ AVX2Â instructions.Â Â ThisÂ isÂ availableÂ onlyÂ onÂ 64<br>
Â Â bitÂ code.<br>
<br>
*Â InitialÂ supportÂ forÂ IntelÂ TransactionalÂ SynchronizationÂ Extensions,<br>
Â Â bothÂ RTMÂ andÂ HLE.<br>
<br>
*Â InitialÂ supportÂ forÂ HardwareÂ TransactionalÂ MemoryÂ onÂ POWER.<br>
<br>
*Â ImprovedÂ supportÂ forÂ MacOSXÂ 10.8Â (64-bitÂ only).Â Â MemcheckÂ canÂ now<br>
Â Â runÂ largeÂ GUIÂ appsÂ tolerablyÂ well.<br>
<br>
*Â ====================Â TOOLÂ CHANGESÂ ====================<br>
<br>
*Â Memcheck:<br>
<br>
Â Â -Â ImprovementsÂ inÂ handlingÂ ofÂ vectorisedÂ code,Â leadingÂ to<br>
Â Â Â Â significantlyÂ fewerÂ falseÂ errorÂ reports.Â Â YouÂ needÂ toÂ useÂ theÂ flag<br>
Â Â Â Â --partial-loads-ok=yesÂ toÂ getÂ theÂ benefitsÂ ofÂ theseÂ changes.<br>
<br>
Â Â -Â BetterÂ controlÂ overÂ theÂ leakÂ checker.Â Â ItÂ isÂ nowÂ possibleÂ to<br>
Â Â Â Â specifyÂ whichÂ leakÂ kindsÂ (definite/indirect/possible/reachable)<br>
Â Â Â Â shouldÂ beÂ displayed,Â whichÂ shouldÂ beÂ regardedÂ asÂ errors,Â andÂ which<br>
Â Â Â Â shouldÂ beÂ suppressedÂ byÂ aÂ givenÂ leakÂ suppression.Â Â ThisÂ isÂ done<br>
Â Â Â Â usingÂ theÂ optionsÂ --show-leak-kinds=kind1,kind2,..,<br>
Â Â Â Â --errors-for-leak-kinds=kind1,kind2,..Â andÂ anÂ optional<br>
Â Â Â Â "match-leak-kinds:"Â lineÂ inÂ suppressionÂ entries,Â respectively.<br>
<br>
Â Â Â Â NoteÂ thatÂ generatedÂ leakÂ suppressionsÂ containÂ thisÂ newÂ lineÂ and<br>
Â Â Â Â areÂ thereforeÂ moreÂ specificÂ thanÂ inÂ previousÂ releases.Â Â ToÂ getÂ the<br>
Â Â Â Â sameÂ behaviourÂ asÂ previousÂ releases,Â removeÂ theÂ "match-leak-kinds:"<br>
Â Â Â Â lineÂ fromÂ generatedÂ suppressionsÂ beforeÂ usingÂ them.<br>
<br>
Â Â -Â ReducedÂ "possibleÂ leak"Â reportsÂ fromÂ theÂ leakÂ checkerÂ byÂ theÂ use<br>
Â Â Â Â ofÂ betterÂ heuristics.Â Â TheÂ availableÂ heuristicsÂ provideÂ detection<br>
Â Â Â Â ofÂ validÂ interiorÂ pointersÂ toÂ std::stdstring,Â toÂ new[]Â allocated<br>
Â Â Â Â arraysÂ withÂ elementsÂ havingÂ destructorsÂ andÂ toÂ interiorÂ pointers<br>
Â Â Â Â pointingÂ toÂ anÂ innerÂ partÂ ofÂ aÂ C++Â objectÂ usingÂ multiple<br>
Â Â Â Â inheritance.Â Â TheyÂ canÂ beÂ selectedÂ individuallyÂ usingÂ the<br>
Â Â Â Â optionÂ --leak-check-heuristics=heur1,heur2,...<br>
<br>
Â Â -Â BetterÂ controlÂ ofÂ stacktraceÂ acquisitionÂ forÂ heap-allocated<br>
Â Â Â Â blocks.Â Â UsingÂ theÂ --keep-stacktracesÂ option,Â itÂ isÂ possibleÂ to<br>
Â Â Â Â controlÂ independentlyÂ whetherÂ aÂ stackÂ traceÂ isÂ acquiredÂ forÂ each<br>
Â Â Â Â allocationÂ andÂ deallocation.Â Â ThisÂ canÂ beÂ usedÂ toÂ createÂ better<br>
Â Â Â Â "useÂ afterÂ free"Â errorsÂ orÂ toÂ decreaseÂ Valgrind'sÂ resource<br>
Â Â Â Â consumptionÂ byÂ recordingÂ lessÂ information.<br>
<br>
Â Â -Â BetterÂ reportingÂ ofÂ leakÂ suppressionÂ usage.Â Â TheÂ listÂ ofÂ used<br>
Â Â Â Â suppressionsÂ (shownÂ whenÂ theÂ -vÂ optionÂ isÂ given)Â nowÂ shows,Â for<br>
Â Â Â Â eachÂ leakÂ suppressions,Â howÂ manyÂ blocksÂ andÂ bytesÂ itÂ suppressed<br>
Â Â Â Â duringÂ theÂ lastÂ leakÂ search.<br>
<br>
*Â Helgrind:<br>
<br>
Â Â -Â FalseÂ errorsÂ resultingÂ fromÂ theÂ useÂ ofÂ staticallyÂ initialised<br>
Â Â Â Â mutexesÂ andÂ conditionÂ variablesÂ (PTHREAD_MUTEX_INITIALISER,Â etc)<br>
Â Â Â Â haveÂ beenÂ removed.<br>
<br>
Â Â -Â FalseÂ errorsÂ resultingÂ fromÂ theÂ useÂ ofÂ pthread_cond_waitsÂ that<br>
Â Â Â Â timeout,Â haveÂ beenÂ removed.<br>
<br>
*Â ====================Â OTHERÂ CHANGESÂ ====================<br>
<br>
*Â SomeÂ attemptÂ toÂ tuneÂ Valgrind'sÂ spaceÂ requirementsÂ toÂ theÂ expected<br>
Â Â capabilitiesÂ ofÂ theÂ target:<br>
<br>
Â Â -Â TheÂ defaultÂ sizeÂ ofÂ theÂ translationÂ cacheÂ hasÂ beenÂ reducedÂ fromÂ 8<br>
Â Â Â Â sectorsÂ toÂ 6Â onÂ AndroidÂ platforms,Â sinceÂ eachÂ sectorÂ occupies<br>
Â Â Â Â aboutÂ 40MBÂ whenÂ usingÂ Memcheck.<br>
<br>
Â Â -Â TheÂ defaultÂ sizeÂ ofÂ theÂ translationÂ cacheÂ hasÂ beenÂ increasedÂ toÂ 16<br>
Â Â Â Â sectorsÂ onÂ allÂ otherÂ platforms,Â reflectingÂ theÂ factÂ thatÂ large<br>
Â Â Â Â applicationsÂ requireÂ instrumentationÂ andÂ storageÂ ofÂ hugeÂ amounts<br>
Â Â Â Â ofÂ code.Â Â ForÂ similarÂ reasons,Â theÂ numberÂ ofÂ memoryÂ mapped<br>
Â Â Â Â segmentsÂ thatÂ canÂ beÂ trackedÂ hasÂ beenÂ increasedÂ byÂ aÂ factorÂ ofÂ 6.<br>
<br>
Â Â -Â InÂ allÂ cases,Â theÂ maximumÂ numberÂ ofÂ sectorsÂ inÂ theÂ translation<br>
Â Â Â Â cacheÂ canÂ beÂ controlledÂ byÂ theÂ newÂ flagÂ --num-transtab-sectors.<br>
<br>
*Â ChangesÂ inÂ howÂ debugÂ infoÂ (lineÂ numbers,Â etc)Â isÂ read:<br>
<br>
Â Â -Â ValgrindÂ noÂ longerÂ temporarilyÂ mmapsÂ theÂ entireÂ objectÂ toÂ read<br>
Â Â Â Â fromÂ it.Â Â Instead,Â readingÂ isÂ doneÂ throughÂ aÂ smallÂ fixedÂ sized<br>
Â Â Â Â buffer.Â Â ThisÂ avoidsÂ virtualÂ memoryÂ usageÂ spikesÂ whenÂ Valgrind<br>
Â Â Â Â readsÂ debuginfoÂ fromÂ largeÂ sharedÂ objects.<br>
<br>
Â Â -Â AÂ newÂ experimentalÂ remoteÂ debugÂ infoÂ server.Â Â ValgrindÂ canÂ read<br>
Â Â Â Â debugÂ infoÂ fromÂ aÂ differentÂ machineÂ (typically,Â aÂ buildÂ host)<br>
Â Â Â Â whereÂ debuginfoÂ objectsÂ areÂ stored.Â Â ThisÂ canÂ saveÂ aÂ lotÂ ofÂ time<br>
Â Â Â Â andÂ hassleÂ whenÂ runningÂ ValgrindÂ onÂ resource-constrainedÂ targets<br>
Â Â Â Â (phones,Â tablets)Â whenÂ theÂ fullÂ debuginfoÂ objectsÂ areÂ stored<br>
Â Â Â Â somewhereÂ else.Â Â ThisÂ isÂ enabledÂ byÂ theÂ --debuginfo-server=<br>
Â Â Â Â option.<br>
<br>
Â Â -Â ConsistencyÂ checkingÂ betweenÂ mainÂ andÂ debugÂ objectsÂ canÂ be<br>
Â Â Â Â disabledÂ usingÂ theÂ --allow-mismatched-debuginfoÂ option.<br>
<br>
*Â StackÂ unwindingÂ byÂ stackÂ scanning,Â onÂ ARM.Â Â UnwindingÂ byÂ stack<br>
Â Â scanningÂ canÂ recoverÂ stackÂ tracesÂ inÂ someÂ casesÂ whenÂ theÂ normal<br>
Â Â unwindÂ mechanismsÂ fail.Â Â StackÂ scanningÂ isÂ bestÂ describedÂ asÂ "a<br>
Â Â nasty,Â dangerousÂ andÂ misleadingÂ hack"Â andÂ soÂ isÂ disabledÂ byÂ default.<br>
Â Â UseÂ --unw-stack-scan-threshÂ andÂ --unw-stack-scan-framesÂ toÂ enable<br>
Â Â andÂ controlÂ it.<br>
<br>
*Â DetectionÂ andÂ mergingÂ ofÂ recursiveÂ stackÂ frameÂ cycles.Â Â WhenÂ your<br>
Â Â programÂ hasÂ recursiveÂ algorithms,Â thisÂ limitsÂ theÂ memoryÂ usedÂ by<br>
Â Â ValgrindÂ forÂ recordedÂ stackÂ tracesÂ andÂ avoidsÂ recording<br>
Â Â uninterestingÂ repeatedÂ calls.Â Â ThisÂ isÂ controlledÂ byÂ theÂ command<br>
Â Â lineÂ optionÂ --merge-recursive-frameÂ andÂ byÂ theÂ monitorÂ command<br>
Â Â "v.setÂ merge-recursive-frames".<br>
<br>
*Â FileÂ nameÂ andÂ lineÂ numbersÂ forÂ usedÂ suppressions.Â Â TheÂ listÂ ofÂ used<br>
Â Â suppressionsÂ (shownÂ whenÂ theÂ -vÂ optionÂ isÂ given)Â nowÂ shows,Â forÂ each<br>
Â Â usedÂ suppression,Â theÂ fileÂ nameÂ andÂ lineÂ numberÂ whereÂ theÂ suppression<br>
Â Â isÂ defined.<br>
<br>
*Â NewÂ andÂ modifiedÂ GDBÂ serverÂ monitorÂ features:<br>
<br>
Â Â -Â valgrind.hÂ hasÂ aÂ newÂ clientÂ request,Â VALGRIND_MONITOR_COMMAND,<br>
Â Â Â Â thatÂ canÂ beÂ usedÂ toÂ executeÂ gdbserverÂ monitorÂ commandsÂ fromÂ the<br>
Â Â Â Â clientÂ program.<br>
<br>
Â Â -Â AÂ newÂ monitorÂ command,Â "v.infoÂ open_fds",Â thatÂ givesÂ theÂ listÂ of<br>
Â Â Â Â openÂ fileÂ descriptorsÂ andÂ additionalÂ details.<br>
<br>
Â Â -Â AnÂ optionalÂ messageÂ inÂ theÂ "v.infoÂ n_errs_found"Â monitorÂ command,<br>
Â Â Â Â forÂ exampleÂ "v.infoÂ n_errs_foundÂ testÂ 1234Â finished",Â allowingÂ a<br>
Â Â Â Â commentÂ stringÂ toÂ beÂ addedÂ toÂ theÂ processÂ output,Â perhapsÂ forÂ the<br>
Â Â Â Â purposeÂ ofÂ separatingÂ errorsÂ ofÂ differentÂ testsÂ orÂ testÂ phases.<br>
<br>
Â Â -Â AÂ newÂ monitorÂ commandÂ "v.infoÂ execontext"Â thatÂ showsÂ information<br>
Â Â Â Â aboutÂ theÂ stackÂ tracesÂ recordedÂ byÂ Valgrind.<br>
<br>
Â Â -Â AÂ newÂ monitorÂ commandÂ "v.doÂ expensive_sanity_check_general"Â toÂ run<br>
Â Â Â Â someÂ internalÂ consistencyÂ checks.<br>
<br>
*Â NewÂ flagÂ --sigill-diagnosticsÂ toÂ controlÂ whetherÂ aÂ diagnostic<br>
Â Â messageÂ isÂ printedÂ whenÂ theÂ JITÂ encountersÂ anÂ instructionÂ itÂ can't<br>
Â Â translate.Â Â TheÂ actualÂ behaviorÂ --Â deliveryÂ ofÂ SIGILLÂ toÂ the<br>
Â Â applicationÂ --Â isÂ unchanged.<br>
<br>
*Â TheÂ maximumÂ amountÂ ofÂ memoryÂ thatÂ ValgrindÂ canÂ useÂ onÂ 64Â bitÂ targets<br>
Â Â hasÂ beenÂ increasedÂ fromÂ 32GBÂ toÂ 64GB.Â Â ThisÂ shouldÂ makeÂ itÂ possible<br>
Â Â toÂ runÂ applicationsÂ onÂ MemcheckÂ thatÂ nativelyÂ requireÂ upÂ toÂ aboutÂ 35GB.<br>
<br>
*Â ====================Â FIXEDÂ BUGSÂ ====================<br>
<br>
TheÂ followingÂ bugsÂ haveÂ beenÂ fixedÂ orÂ resolved.Â Â NoteÂ thatÂ "n-i-bz"<br>
standsÂ forÂ "notÂ inÂ bugzilla"Â --Â thatÂ is,Â aÂ bugÂ thatÂ wasÂ reportedÂ toÂ us<br>
butÂ neverÂ gotÂ aÂ bugzillaÂ entry.Â Â WeÂ encourageÂ youÂ toÂ fileÂ bugsÂ in<br>
bugzillaÂ (https://bugs.kde.org/enter_bug.cgi?product=valgrind)Â rather<br>
thanÂ mailingÂ theÂ developersÂ (orÂ mailingÂ lists)Â directlyÂ --Â bugsÂ that<br>
areÂ notÂ enteredÂ intoÂ bugzillaÂ tendÂ toÂ getÂ forgottenÂ aboutÂ orÂ ignored.<br>
<br>
ToÂ seeÂ detailsÂ ofÂ aÂ givenÂ bug,Â visit<br>
Â Â https://bugs.kde.org/show_bug.cgi?id=XXXXXX<br>
whereÂ XXXXXXÂ isÂ theÂ bugÂ numberÂ asÂ listedÂ below.<br>
<br>
123837Â Â systemÂ call:Â 4thÂ argumentÂ isÂ optional,Â dependingÂ onÂ cmd<br>
135425Â Â memcheckÂ shouldÂ tellÂ youÂ whereÂ FreedÂ blocksÂ wereÂ Mallocd<br>
164485Â Â VG_N_SEGNAMESÂ andÂ VG_N_SEGMENTSÂ areÂ (still)Â tooÂ small<br>
207815Â Â AddsÂ someÂ ofÂ theÂ drmÂ ioctlsÂ toÂ syswrap-linux.cÂ <br>
251569Â Â vexÂ amd64-&gt;IR:Â 0xFÂ 0x1Â 0xF9Â 0xBFÂ 0x90Â 0xD0Â 0x3Â 0x0Â (RDTSCP)<br>
252955Â Â ImpossibleÂ toÂ compileÂ withÂ ccache<br>
253519Â Â MemcheckÂ reportsÂ auxvÂ pointerÂ accessesÂ asÂ invalidÂ reads.<br>
263034Â Â CrashÂ whenÂ loadingÂ someÂ PPC64Â binaries<br>
269599Â Â IncreaseÂ deepestÂ backtrace<br>
274695Â Â s390x:Â SupportÂ "compareÂ to/fromÂ logical"Â instructionsÂ (z196)<br>
275800Â Â s390x:Â AutodetectÂ cacheÂ infoÂ (partÂ 2)<br>
280271Â Â ValgrindÂ reportsÂ possibleÂ memoryÂ leaksÂ onÂ still-reachableÂ std::string<br>
284540Â Â MemcheckÂ shouldn'tÂ countÂ suppressionsÂ matchingÂ still-reachableÂ [..]<br>
289578Â Â BacktracesÂ withÂ ARMÂ unwindÂ tablesÂ (stackÂ scanÂ flags)<br>
296311Â Â WrongÂ stackÂ tracesÂ dueÂ toÂ -fomit-frame-pointerÂ (x86)Â <br>
304832Â Â ppc32:Â buildÂ failure<br>
305431Â Â UseÂ find_buildidÂ shdrÂ fallbackÂ forÂ separateÂ .debugÂ files<br>
305728Â Â AddÂ supportÂ forÂ AVX2Â instructions<br>
305948Â Â ppc64:Â codeÂ generationÂ forÂ ShlD64Â /Â ShrD64Â asserts<br>
306035Â Â s390x:Â FixÂ IRÂ generationÂ forÂ LAAGÂ andÂ friends<br>
306054Â Â s390x:Â ConditionÂ codeÂ computationÂ forÂ convert-to-int/logical<br>
306098Â Â s390x:Â alternateÂ opcodeÂ formÂ forÂ convertÂ to/fromÂ fixed<br>
306587Â Â FixÂ cacheÂ lineÂ detectionÂ fromÂ auxiliaryÂ vectorÂ forÂ PPC.<br>
306783Â Â MipsÂ unhandledÂ syscallÂ :Â Â 4025Â Â /Â Â 4079Â Â /Â 4182<br>
307038Â Â DWARF2Â CFIÂ reader:Â unhandledÂ DW_OP_Â opcodeÂ 0x8Â (DW_OP_const1uÂ etÂ al)<br>
307082Â Â HGÂ falseÂ positive:Â pthread_cond_destroy:Â destructionÂ ofÂ unknownÂ CV<br>
307101Â Â sys_capgetÂ secondÂ argumentÂ canÂ beÂ NULL<br>
307103Â Â sys_openat:Â IfÂ pathnameÂ isÂ absolute,Â thenÂ dirfdÂ isÂ ignored.<br>
307106Â Â amd64-&gt;IR:Â f0Â 0fÂ c0Â 02Â (lockÂ xaddÂ byte)<br>
307113Â Â s390x:Â DFPÂ support<br>
307141Â Â valgrindÂ does'tÂ workÂ inÂ mips-linuxÂ system<br>
307155Â Â filter_gdbÂ shouldÂ filterÂ outÂ syscall-template.SÂ T_PSEUDO<br>
307285Â Â x86_amd64Â featureÂ testÂ forÂ avxÂ inÂ testÂ suiteÂ isÂ wrong<br>
307290Â Â memcheckÂ overlapÂ testcaseÂ needsÂ memcpyÂ versionÂ filter<br>
307463Â Â PleaseÂ addÂ "&amp;limit=0"Â toÂ theÂ "allÂ openÂ bugs"Â link<br>
307465Â Â --show-possibly-lost=noÂ shouldÂ reduceÂ theÂ errorÂ countÂ /Â exitÂ code<br>
307557Â Â LeaksÂ onÂ MacÂ OSÂ XÂ 10.7.5Â librariesÂ atÂ ImageLoader::recursiveInit[..]<br>
307729Â Â pkgconfigÂ supportÂ brokenÂ valgrind.pc<br>
307828Â Â MemcheckÂ falseÂ errorsÂ SSEÂ optimizedÂ wcscpy,Â wcscmp,Â wcsrchr,Â wcschr<br>
307955Â Â BuildingÂ valgrindÂ 3.7.0-r4Â failsÂ inÂ GentooÂ AMD64Â whenÂ usingÂ clang<br>
308089Â Â UnhandledÂ syscallÂ onÂ ppc64:Â prctl<br>
308135Â Â PPC32Â MPC8xxÂ hasÂ 16Â bytesÂ cacheÂ size<br>
308321Â Â testsuiteÂ memcheckÂ filterÂ interferesÂ withÂ gdb_filterÂ <br>
308333Â ==Â 307106<br>
308341Â Â vgdbÂ shouldÂ reportÂ processÂ exitÂ (orÂ fatalÂ signal)<br>
308427Â Â s390Â memcheckÂ reportsÂ tsearchÂ cjump/cmoveÂ dependsÂ onÂ uninit<br>
308495Â Â RemoveÂ buildÂ dependencyÂ onÂ installedÂ XenÂ headers<br>
308573Â Â InternalÂ errorÂ onÂ 64-bitÂ instructionÂ executedÂ inÂ 32-bitÂ mode<br>
308626Â Â ==Â 308627<br>
308627Â Â pmovmskbÂ validityÂ bitÂ propagationÂ isÂ imprecise<br>
308644Â Â vgdbÂ commandÂ forÂ havingÂ theÂ infoÂ forÂ theÂ track-fdsÂ option<br>
308711Â Â giveÂ moreÂ infoÂ aboutÂ aspacemgrÂ andÂ arenasÂ inÂ out_of_memory<br>
308717Â Â ARM:Â implementÂ fixed-pointÂ VCVT.F64.[SU]32<br>
308718Â Â ARMÂ implementÂ SMLALBBÂ familyÂ ofÂ instructions<br>
308886Â Â MissingÂ supportÂ forÂ PTRACE_SET/GETREGSETÂ <br>
308930Â Â syscallÂ name_to_handle_atÂ (303Â onÂ amd64)Â notÂ handled<br>
309229Â Â V-bitÂ testerÂ doesÂ notÂ reportÂ numberÂ ofÂ testsÂ generated<br>
309323Â Â printÂ unrecognizedÂ instuctionÂ onÂ MIPS<br>
309425Â Â ProvideÂ aÂ --sigill-diagnosticsÂ flagÂ toÂ suppressÂ illegalÂ [..]<br>
309427Â Â SSEÂ optimizedÂ stpncpyÂ triggerÂ uninitialisedÂ valueÂ [..]Â errors<br>
309430Â Â SelfÂ hostingÂ ppc64Â encountersÂ aÂ vassertÂ errorÂ onÂ operandÂ type<br>
309600Â Â valgrindÂ isÂ aÂ bitÂ confusedÂ aboutÂ 0-sizedÂ sections<br>
309823Â Â GenerateÂ errorsÂ forÂ stillÂ reachableÂ blocks<br>
309921Â Â PCMPISTRIÂ validityÂ bitÂ propagationÂ isÂ imprecise<br>
309922Â Â none/tests/ppc64/test_dfp5Â sometimesÂ fails<br>
310169Â Â TheÂ Iop_CmpORDÂ classÂ ofÂ IopsÂ isÂ notÂ supportedÂ byÂ theÂ vbitÂ checker.<br>
310424Â Â --read-var-infoÂ doesÂ notÂ properlyÂ describeÂ staticÂ variablesÂ <br>
310792Â Â searchÂ additionalÂ pathÂ forÂ debugÂ symbols<br>
310931Â Â s390x:Â Message-securityÂ assistÂ (MSA)Â instructionÂ extensionÂ [..]<br>
311100Â Â PPCÂ DFPÂ implementationÂ ofÂ theÂ integerÂ operandsÂ isÂ inconsistentÂ [..]<br>
311318Â Â ARM:Â "128-bitÂ constantÂ isÂ notÂ implemented"Â errorÂ message<br>
311407Â Â ssse3Â bcopyÂ (actuallyÂ convertedÂ memcpy)Â causesÂ invalidÂ readÂ [..]<br>
311690Â Â VÂ crashesÂ becauseÂ itÂ redirectsÂ branchesÂ insideÂ ofÂ aÂ redirectedÂ function<br>
311880Â Â x86_64:Â makeÂ regtestÂ hangsÂ atÂ shell_valid1<br>
311922Â Â WARNING:Â unhandledÂ syscall:Â 170<br>
311933Â Â ==Â 251569<br>
312171Â Â ppc:Â insnÂ selectionÂ forÂ DFP<br>
312571Â Â RoundingÂ modeÂ callÂ wrongÂ forÂ theÂ DFPÂ IopsÂ [..]<br>
312620Â Â ChangeÂ toÂ Iop_D32toD64Â [..]Â forÂ s390Â DFPÂ supportÂ brokeÂ ppcÂ [..]<br>
312913Â Â DanglingÂ pointersÂ errorÂ shouldÂ alsoÂ reportÂ theÂ allocÂ stackÂ trace<br>
312980Â Â BuildingÂ onÂ MountainÂ LionÂ generatesÂ someÂ compilerÂ warnings<br>
313267Â Â AddingÂ MIPS64/LinuxÂ portÂ toÂ Valgrind<br>
313348Â Â ==Â 251569<br>
313354Â Â ==Â 251569<br>
313811Â Â BufferÂ overflowÂ inÂ assert_fail<br>
314099Â Â coverityÂ pointedÂ outÂ errorÂ inÂ VEXÂ guest_ppc_toIR.cÂ insn_suffix<br>
314269Â Â ppc:Â deadÂ codeÂ inÂ insnÂ selection<br>
314718Â Â ARM:Â implementÂ integerÂ divideÂ instructionÂ (sdivÂ andÂ udiv)<br>
315345Â Â cl-format.xmlÂ andÂ callgrind/dump.cÂ don'tÂ agreeÂ onÂ usingÂ cfl=Â orÂ cfi=<br>
315441Â Â sendmsgÂ syscallÂ shouldÂ ignoreÂ unsetÂ msghdrÂ msg_flags<br>
315534Â Â msgrcvÂ insideÂ aÂ threadÂ causesÂ valgrindÂ toÂ hangÂ (block)<br>
315545Â Â AssertionÂ '(UChar*)sec-&gt;tt[tteNo].tcptrÂ &lt;=Â (UChar*)hcode'Â failed<br>
315689Â Â disInstr(thumb):Â unhandledÂ instruction:Â 0xF852Â 0x0E10Â (LDRT)<br>
315738Â Â disInstr(arm):Â unhandledÂ instruction:Â 0xEEBE0BEEÂ (vcvt.s32.f64)<br>
315959Â Â valgrindÂ manÂ pageÂ hasÂ bogusÂ SGCHECKÂ (andÂ noÂ BBV)Â OPTIONSÂ section<br>
316144Â Â valgrind.1Â manpageÂ containsÂ unknownÂ ???Â stringsÂ [..]<br>
316145Â Â callgrindÂ commandÂ lineÂ optionsÂ inÂ manpageÂ referenceÂ (unknown)Â [..]<br>
316145Â Â callgrindÂ commandÂ lineÂ optionsÂ inÂ manpageÂ referenceÂ [..]<br>
316181Â Â drd:Â FixedÂ aÂ 4xÂ slowdownÂ forÂ certainÂ applications<br>
316503Â Â ValgrindÂ doesÂ notÂ supportÂ SSE4Â "movntdqa"Â instruction<br>
316535Â Â UseÂ ofÂ |signedÂ int|Â insteadÂ ofÂ |size_t|Â inÂ valgrindÂ messages<br>
316696Â Â Â fluidanimateÂ programÂ ofÂ parsecÂ 2.1Â stuckÂ <br>
316761Â Â syscallÂ open_by_handle_atÂ (304Â onÂ amd64,Â 342Â onÂ x86)Â notÂ handled<br>
317091Â Â UseÂ -Wl,-Ttext-segmentÂ whenÂ staticÂ linkingÂ ifÂ possibleÂ [..]<br>
317186Â Â "ImpossibleÂ happens"Â whenÂ occursÂ VCVTÂ instructionÂ onÂ ARM<br>
317318Â Â SupportÂ forÂ ThreadingÂ BuildingÂ BlocksÂ "scalable_malloc"<br>
317444Â Â amd64-&gt;IR:Â 0xC4Â 0x41Â 0x2CÂ 0xC2Â 0xD2Â 0x8Â (vcmpeq_uqps)<br>
317461Â Â FixÂ BMIÂ assemblerÂ configureÂ checkÂ andÂ avx2/bmi/fmaÂ vgtestÂ prereqs<br>
317463Â Â bmiÂ testcaseÂ IRÂ SANITYÂ CHECKÂ FAILURE<br>
317506Â Â memcheck/tests/vbit-testÂ failsÂ withÂ unknownÂ opcodeÂ afterÂ [..]<br>
318050Â Â libmpiwrapÂ failsÂ toÂ compileÂ withÂ out-of-sourceÂ build<br>
318203Â Â setsockoptÂ handlingÂ needsÂ toÂ handleÂ SOL_SOCKET/SO_ATTACH_FILTER<br>
318643Â Â annotate_trace_memoryÂ testsÂ infiniteÂ loopÂ onÂ armÂ andÂ ppcÂ [..]<br>
318773Â Â amd64-&gt;IR:Â 0xF3Â 0x48Â 0x0FÂ 0xBCÂ 0xC2Â 0xC3Â 0x66Â 0x0F<br>
318929Â Â CrashÂ with:Â disInstr(thumb):Â 0xF321Â 0x0001Â (ssat16)<br>
318932Â Â AddÂ missingÂ PPC64Â andÂ PPC32Â systemÂ callÂ support<br>
319235Â Â --db-attach=yesÂ isÂ brokenÂ withÂ YamaÂ (ptraceÂ scoping)Â enabled<br>
319395Â Â CrashÂ withÂ unhandledÂ instructionÂ onÂ STRTÂ (Thumb)Â instructions<br>
319494Â Â VEXÂ Makefile-gccÂ standaloneÂ buildÂ updateÂ afterÂ r2702<br>
319505Â Â [MIPSEL]Â Crash:Â unhandledÂ UNRAYÂ operator.<br>
319858Â Â disInstr(thumb):Â unhandledÂ instructionÂ onÂ instructionÂ STRBT<br>
319932Â Â disInstr(thumb):Â unhandledÂ instructionÂ onÂ instructionÂ STRHT<br>
320057Â Â ProblemsÂ whenÂ weÂ tryÂ toÂ mmapÂ moreÂ thanÂ 12Â memoryÂ pagesÂ onÂ MIPS32<br>
320063Â Â MemoryÂ fromÂ PTRACE_GET_THREAD_AREAÂ isÂ reportedÂ uninitialised<br>
320083Â Â disInstr(thumb):Â unhandledÂ instructionÂ onÂ instructionÂ LDRBT<br>
320116Â Â bindÂ onÂ AF_BLUETOOTHÂ producesÂ warningsÂ becauseÂ ofÂ sockaddr_rcÂ padding<br>
320131Â Â WARNING:Â unhandledÂ syscall:Â 369Â onÂ ARMÂ (prlimit64)<br>
320211Â Â StackÂ bufferÂ overflowÂ inÂ ./coregrind/m_main.cÂ withÂ hugeÂ TMPDIR<br>
320661Â Â vgModuleLocal_read_elf_debug_info():Â "AssertionÂ '!di-&gt;soname'<br>
320895Â Â addÂ fanotifyÂ supportÂ (patchÂ included)<br>
320998Â Â vexÂ amd64-&gt;IRÂ pcmpestriÂ andÂ pcmpestrmÂ SSE4.2Â instruction<br>
321065Â Â ValgrindÂ updatesÂ forÂ XenÂ 4.3<br>
321148Â Â UnhandledÂ instruction:Â PLIÂ (ThumbÂ 1,Â 2,Â 3)<br>
321363Â Â UnhandledÂ instruction:Â SSAXÂ (ARMÂ +Â Thumb)<br>
321364Â Â UnhandledÂ instruction:Â SXTAB16Â (ARMÂ +Â Thumb)<br>
321466Â Â UnhandledÂ instruction:Â SHASXÂ (ARMÂ +Â Thumb)<br>
321467Â Â UnhandledÂ instruction:Â SHSAXÂ (ARMÂ +Â Thumb)<br>
321468Â Â UnhandledÂ instruction:Â SHSUB16Â (ARMÂ +Â Thumb)<br>
321619Â Â UnhandledÂ instruction:Â SHSUB8Â (ARMÂ +Â Thumb)<br>
321620Â Â UnhandledÂ instruction:Â UASXÂ (ARMÂ +Â Thumb)<br>
321621Â Â UnhandledÂ instruction:Â USAXÂ (ARMÂ +Â Thumb)<br>
321692Â Â UnhandledÂ instruction:Â UQADD16Â (ARMÂ +Â Thumb)<br>
321693Â Â UnhandledÂ instruction:Â LDRSBTÂ (Thumb)<br>
321694Â Â UnhandledÂ instruction:Â UQASXÂ (ARMÂ +Â Thumb)<br>
321696Â Â UnhandledÂ instruction:Â UQSAXÂ (ThumbÂ +Â ARM)<br>
321697Â Â UnhandledÂ instruction:Â UHASXÂ (ARMÂ +Â Thumb)<br>
321703Â Â UnhandledÂ instruction:Â UHSAXÂ (ARMÂ +Â Thumb)<br>
321704Â Â UnhandledÂ instruction:Â REVSHÂ (ARMÂ +Â Thumb)<br>
321730Â Â AddÂ cg_diffÂ andÂ cg_mergeÂ manÂ pages<br>
321738Â Â AddÂ vgdbÂ andÂ valgrind-listenerÂ manÂ pages<br>
321814Â Â ==Â 315545<br>
321891Â Â UnhandledÂ instruction:Â LDRHTÂ (Thumb)<br>
321960Â Â pthread_create()Â thenÂ alloca()Â causingÂ invalidÂ stackÂ writeÂ errors<br>
321969Â Â ppc32Â andÂ ppc64Â don'tÂ supportÂ [lf]setxattr<br>
322254Â Â ShowÂ threadnameÂ togetherÂ withÂ tidÂ ifÂ setÂ byÂ application<br>
322294Â Â AddÂ initialÂ supportÂ forÂ IBMÂ PowerÂ ISAÂ 2.07<br>
322368Â Â AssertionÂ failureÂ inÂ wqthread_hijackÂ underÂ OSÂ XÂ 10.8<br>
322563Â Â vexÂ mips-&gt;IR:Â 0x70Â 0x83Â 0xF0Â 0x3A<br>
322807Â Â VALGRIND_PRINTF_BACKTRACEÂ writesÂ callstackÂ toÂ xmlÂ andÂ textÂ toÂ stderr<br>
322851Â Â 0bXXXÂ binaryÂ literalÂ syntaxÂ isÂ notÂ standardÂ <br>
323035Â Â UnhandledÂ instruction:Â LDRSHT(Thumb)<br>
323036Â Â UnhandledÂ instruction:Â SMMLSÂ (ARMÂ andÂ Thumb)<br>
323116Â Â TheÂ memcheck/tests/ppc64/power_ISA2_05.cÂ failsÂ toÂ buildÂ [..]<br>
323175Â Â UnhandledÂ instruction:Â SMLALDÂ (ARMÂ +Â Thumb)<br>
323177Â Â UnhandledÂ instruction:Â SMLSLDÂ (ARMÂ +Â Thumb)<br>
323432Â Â CallingÂ pthread_cond_destroy()Â orÂ pthread_mutex_destroy()Â [..]<br>
323437Â Â PhaseÂ 2Â supportÂ forÂ IBMÂ PowerÂ ISAÂ 2.07<br>
323713Â Â SupportÂ mmxextÂ (integerÂ sse)Â subsetÂ onÂ i386Â (athlon)<br>
323803Â Â TransactionalÂ memoryÂ instructionsÂ areÂ notÂ supportedÂ forÂ Power<br>
323893Â Â SSE3Â notÂ availableÂ onÂ amdÂ cpusÂ inÂ valgrind<br>
323905Â Â ProbableÂ falseÂ positiveÂ fromÂ Valgrind/drdÂ onÂ close()<br>
323912Â Â valgrind.hÂ headerÂ isn'tÂ compatibleÂ forÂ mingw64<br>
324047Â Â ValgrindÂ doesn'tÂ supportÂ [LDR,ST]{S}[B,H]TÂ ARMÂ instructions<br>
324149Â Â helgrind:Â WhenÂ pthread_cond_timedwaitÂ returnsÂ ETIMEDOUTÂ [..]<br>
324181Â Â mmapÂ doesÂ notÂ handleÂ MAP_32BIT<br>
324227Â Â memcheckÂ falseÂ positiveÂ leakÂ whenÂ aÂ threadÂ callsÂ exit+blockÂ [..]<br>
324421Â Â SupportÂ forÂ fanotifyÂ APIÂ onÂ ARMÂ architecture<br>
324514Â Â gdbserverÂ monitorÂ cmdÂ outputÂ behaviourÂ consistencyÂ [..]<br>
324518Â Â ppc64:Â EmulationÂ ofÂ dcbtÂ instructionsÂ doesÂ notÂ handleÂ [..]<br>
324546Â Â none/tests/ppc32Â test_isa_2_07_part2Â requestsÂ -m64<br>
324582Â Â WhenÂ accessÂ isÂ madeÂ toÂ freedÂ memory,Â reportÂ bothÂ allocationÂ [..]<br>
324594Â Â FixÂ overflowÂ computationÂ forÂ PowerÂ ISAÂ 2.06Â insns:Â mulldo/mulldo.<br>
324765Â Â ppc64:Â illegalÂ instructionÂ whenÂ executingÂ none/tests/ppc64/jm-misc<br>
324816Â Â IncorrectÂ VEXÂ implementationÂ forÂ xscvspdp/xvcvspdpÂ forÂ SNaNÂ inputs<br>
324834Â Â UnhandledÂ instructionsÂ inÂ MicrosoftÂ CÂ run-timeÂ forÂ x86_64<br>
324894Â Â PhaseÂ 3Â supportÂ forÂ IBMÂ PowerÂ ISAÂ 2.07<br>
326091Â Â drd:Â AvoidÂ falseÂ raceÂ reportsÂ fromÂ optimizedÂ strlen()Â impls<br>
326113Â Â valgrindÂ libvexÂ hwcapsÂ errorÂ onÂ AMD64Â <br>
n-i-bzÂ Â SomeÂ wrongÂ commandÂ lineÂ optionsÂ couldÂ beÂ ignored<br>
n-i-bzÂ Â patchÂ toÂ allowÂ fair-schedÂ onÂ android<br>
n-i-bzÂ Â reportÂ errorÂ forÂ vgdbÂ snapshotÂ requestedÂ beforeÂ execution<br>
n-i-bzÂ Â sameÂ asÂ 303624Â (fixedÂ inÂ 3.8.0),Â butÂ forÂ x86Â android<br>
<br>
(3.9.0:Â 31Â OctoberÂ 2013,Â vexÂ r2796,Â valgrindÂ r13708)<br>
<br>
<br>
<br>
ReleaseÂ 3.8.1Â (19Â SeptemberÂ 2012)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
3.8.1Â isÂ aÂ bugÂ fixÂ release.Â Â ItÂ fixesÂ someÂ assertionÂ failuresÂ inÂ 3.8.0<br>
thatÂ occurÂ moderatelyÂ frequentlyÂ inÂ realÂ useÂ cases,Â addsÂ supportÂ for<br>
someÂ missingÂ instructionsÂ onÂ ARM,Â andÂ fixesÂ aÂ deadlockÂ conditionÂ on<br>
MacOSX.Â Â IfÂ youÂ packageÂ orÂ deliverÂ 3.8.0Â forÂ othersÂ toÂ use,Â youÂ might<br>
wantÂ toÂ considerÂ upgradingÂ toÂ 3.8.1Â instead.<br>
<br>
TheÂ followingÂ bugsÂ haveÂ beenÂ fixedÂ orÂ resolved.Â Â NoteÂ thatÂ "n-i-bz"<br>
standsÂ forÂ "notÂ inÂ bugzilla"Â --Â thatÂ is,Â aÂ bugÂ thatÂ wasÂ reportedÂ toÂ us<br>
butÂ neverÂ gotÂ aÂ bugzillaÂ entry.Â Â WeÂ encourageÂ youÂ toÂ fileÂ bugsÂ in<br>
bugzillaÂ (https://bugs.kde.org/enter_bug.cgi?product=valgrind)Â rather<br>
thanÂ mailingÂ theÂ developersÂ (orÂ mailingÂ lists)Â directlyÂ --Â bugsÂ that<br>
areÂ notÂ enteredÂ intoÂ bugzillaÂ tendÂ toÂ getÂ forgottenÂ aboutÂ orÂ ignored.<br>
<br>
ToÂ seeÂ detailsÂ ofÂ aÂ givenÂ bug,Â visit<br>
Â Â https://bugs.kde.org/show_bug.cgi?id=XXXXXX<br>
whereÂ XXXXXXÂ isÂ theÂ bugÂ numberÂ asÂ listedÂ below.<br>
<br>
284004Â Â ==Â 301281<br>
289584Â Â UnhandledÂ instruction:Â 0xFÂ 0x29Â 0xE5Â (MOVAPS)<br>
295808Â Â amd64-&gt;IR:Â 0xF3Â 0xFÂ 0xBCÂ 0xC0Â (TZCNT)<br>
298281Â Â wcslenÂ causesÂ false(?)Â uninitialisedÂ valueÂ warnings<br>
301281Â Â valgrindÂ hangsÂ onÂ OSÂ XÂ whenÂ theÂ processÂ callsÂ system()<br>
304035Â Â disInstr(arm):Â unhandledÂ instructionÂ 0xE1023053<br>
304867Â Â implementÂ MOVBEÂ instructionÂ inÂ x86Â mode<br>
304980Â Â AssertionÂ 'loÂ &lt;=Â hi'Â failedÂ inÂ vgModuleLocal_find_rx_mapping<br>
305042Â Â amd64:Â implementÂ 0FÂ 7FÂ encodingÂ ofÂ movqÂ betweenÂ twoÂ registers<br>
305199Â Â ARM:Â implementÂ QDADDÂ andÂ QDSUB<br>
305321Â Â amd64-&gt;IR:Â 0xFÂ 0xDÂ 0xCÂ (prefetchw)<br>
305513Â Â killedÂ byÂ fatalÂ signal:Â SIGSEGV<br>
305690Â Â DRDÂ reportingÂ invalidÂ semaphoreÂ whenÂ sem_trywaitÂ fails<br>
305926Â Â InvalidÂ alignmentÂ checksÂ forÂ someÂ AVXÂ instructions<br>
306297Â Â disInstr(thumb):Â unhandledÂ instructionÂ 0xE883Â 0x000C<br>
306310Â Â 3.8.0Â releaseÂ tarballÂ missingÂ someÂ files<br>
306612Â Â RHELÂ 6Â glibc-2.XÂ defaultÂ suppressionsÂ needÂ /lib*/libc-*patterns<br>
306664Â Â vexÂ amd64-&gt;IR:Â 0x66Â 0xFÂ 0x3AÂ 0x62Â 0xD1Â 0x46Â 0x66Â 0xF<br>
n-i-bzÂ Â shmatÂ ofÂ aÂ segmentÂ &gt;Â 4GbÂ doesÂ notÂ workÂ <br>
n-i-bzÂ Â simulate_control_cÂ scriptÂ wrongÂ USR1Â signalÂ numberÂ onÂ mips<br>
n-i-bzÂ Â vgdbÂ ptraceÂ callsÂ wrongÂ onÂ mipsÂ [...]<br>
n-i-bzÂ Â FixesÂ forÂ moreÂ MPIÂ falseÂ positives<br>
n-i-bzÂ Â exp-sgcheck'sÂ memcpyÂ causesÂ programsÂ toÂ segfault<br>
n-i-bzÂ Â OSXÂ buildÂ w/Â clang:Â assertsÂ atÂ startup<br>
n-i-bzÂ Â IncorrectÂ undef'dnessÂ propÂ forÂ Iop_DPBtoBCDÂ andÂ Iop_BCDtoDPB<br>
n-i-bzÂ Â fixÂ aÂ coupleÂ ofÂ unionÂ tag-vs-fieldÂ mixups<br>
n-i-bzÂ Â OSX:Â useÂ __NR_poll_nocancelÂ ratherÂ thanÂ __NR_poll<br>
<br>
TheÂ followingÂ bugsÂ wereÂ fixedÂ inÂ 3.8.0Â butÂ notÂ listedÂ inÂ thisÂ NEWS<br>
fileÂ atÂ theÂ time:<br>
<br>
254088Â Â ValgrindÂ shouldÂ knowÂ aboutÂ UD2Â instruction<br>
301280Â Â ==Â 254088<br>
301902Â Â ==Â 254088<br>
304754Â Â NEWSÂ blowsÂ TeX'sÂ littleÂ mind<br>
<br>
(3.8.1:Â 19Â SeptemberÂ 2012,Â vexÂ r2537,Â valgrindÂ r12996)<br>
<br>
<br>
<br>
ReleaseÂ 3.8.0Â (10Â AugustÂ 2012)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
3.8.0Â isÂ aÂ featureÂ releaseÂ withÂ manyÂ improvementsÂ andÂ theÂ usual<br>
collectionÂ ofÂ bugÂ fixes.<br>
<br>
ThisÂ releaseÂ supportsÂ X86/Linux,Â AMD64/Linux,Â ARM/Linux,Â PPC32/Linux,<br>
PPC64/Linux,Â S390X/Linux,Â MIPS/Linux,Â ARM/Android,Â X86/Android,<br>
X86/MacOSXÂ 10.6/10.7Â andÂ AMD64/MacOSXÂ 10.6/10.7.Â Â SupportÂ forÂ recent<br>
distrosÂ andÂ toolchainÂ componentsÂ (glibcÂ 2.16,Â gccÂ 4.7)Â hasÂ beenÂ added.<br>
ThereÂ isÂ initialÂ supportÂ forÂ MacOSXÂ 10.8,Â butÂ itÂ isÂ notÂ usableÂ for<br>
seriousÂ workÂ atÂ present.<br>
<br>
*Â ==================Â PLATFORMÂ CHANGESÂ =================<br>
<br>
*Â SupportÂ forÂ MIPS32Â platformsÂ runningÂ Linux.Â Â ValgrindÂ hasÂ been<br>
Â Â testedÂ onÂ MIPS32Â andÂ MIPS32r2Â platformsÂ runningÂ differentÂ Debian<br>
Â Â SqueezeÂ andÂ MeeGoÂ distributions.Â Â BothÂ little-endianÂ andÂ big-endian<br>
Â Â coresÂ areÂ supported.Â Â TheÂ toolsÂ Memcheck,Â MassifÂ andÂ LackeyÂ have<br>
Â Â beenÂ testedÂ andÂ areÂ knownÂ toÂ work.Â SeeÂ README.mipsÂ forÂ moreÂ details.<br>
<br>
*Â PreliminaryÂ supportÂ forÂ AndroidÂ runningÂ onÂ x86.<br>
<br>
*Â PreliminaryÂ (as-yetÂ largelyÂ unusable)Â supportÂ forÂ MacOSXÂ 10.8.<br>
<br>
*Â SupportÂ forÂ IntelÂ AVXÂ instructionsÂ andÂ forÂ AESÂ instructions.Â Â This<br>
Â Â supportÂ isÂ availableÂ onlyÂ forÂ 64Â bitÂ code.<br>
<br>
*Â SupportÂ forÂ POWERÂ DecimalÂ FloatingÂ PointÂ instructions.<br>
<br>
*Â ====================Â TOOLÂ CHANGESÂ ====================<br>
<br>
*Â Non-libcÂ mallocÂ implementationsÂ areÂ nowÂ supported.Â Â ThisÂ isÂ useful<br>
Â Â forÂ toolsÂ thatÂ replaceÂ mallocÂ (Memcheck,Â Massif,Â DRD,Â Helgrind).<br>
Â Â UsingÂ theÂ newÂ optionÂ --soname-synonyms,Â suchÂ toolsÂ canÂ beÂ informed<br>
Â Â thatÂ theÂ mallocÂ implementationÂ isÂ eitherÂ linkedÂ staticallyÂ intoÂ the<br>
Â Â executable,Â orÂ isÂ presentÂ inÂ someÂ otherÂ sharedÂ libraryÂ different<br>
Â Â fromÂ libc.so.Â Â ThisÂ makesÂ itÂ possibleÂ toÂ processÂ staticallyÂ linked<br>
Â Â programs,Â andÂ programsÂ usingÂ otherÂ mallocÂ libraries,Â forÂ example<br>
Â Â TCMallocÂ orÂ JEMalloc.<br>
<br>
*Â ForÂ toolsÂ thatÂ provideÂ theirÂ ownÂ replacementÂ forÂ mallocÂ etÂ al,Â the<br>
Â Â optionÂ --redzone-size=&lt;number&gt;Â allowsÂ usersÂ toÂ specifyÂ theÂ sizeÂ of<br>
Â Â theÂ paddingÂ blocksÂ (redzones)Â addedÂ beforeÂ andÂ afterÂ eachÂ client<br>
Â Â allocatedÂ block.Â Â SmallerÂ redzonesÂ decreaseÂ theÂ memoryÂ neededÂ by<br>
Â Â Valgrind.Â Â BiggerÂ redzonesÂ increaseÂ theÂ chanceÂ toÂ detectÂ blocks<br>
Â Â overrunÂ orÂ underrun.Â Â PriorÂ toÂ thisÂ change,Â theÂ redzoneÂ sizeÂ was<br>
Â Â hardwiredÂ toÂ 16Â bytesÂ inÂ Memcheck.<br>
<br>
*Â Memcheck:<br>
<br>
Â Â -Â TheÂ leak_checkÂ GDBÂ serverÂ monitorÂ commandÂ nowÂ can<br>
Â Â Â Â controlÂ theÂ maximumÂ nrÂ ofÂ lossÂ recordsÂ toÂ output.<br>
<br>
Â Â -Â ReductionÂ ofÂ memoryÂ useÂ forÂ applicationsÂ allocating<br>
Â Â Â Â manyÂ blocksÂ and/orÂ havingÂ manyÂ partiallyÂ definedÂ bytes.<br>
<br>
Â Â -Â AdditionÂ ofÂ GDBÂ serverÂ monitorÂ commandÂ 'block_list'Â thatÂ lists<br>
Â Â Â Â theÂ addresses/sizesÂ ofÂ theÂ blocksÂ ofÂ aÂ leakÂ searchÂ lossÂ record.<br>
<br>
Â Â -Â AdditionÂ ofÂ GDBÂ serverÂ monitorÂ commandÂ 'who_points_at'Â thatÂ lists<br>
Â Â Â Â theÂ locationsÂ pointingÂ atÂ aÂ block.<br>
<br>
Â Â -Â IfÂ aÂ redzoneÂ sizeÂ &gt;Â 0Â isÂ given,Â VALGRIND_MALLOCLIKE_BLOCKÂ nowÂ will<br>
Â Â Â Â detectÂ anÂ invalidÂ accessÂ ofÂ theseÂ redzones,Â byÂ markingÂ them<br>
Â Â Â Â noaccess.Â Â Similarly,Â ifÂ aÂ redzoneÂ sizeÂ isÂ givenÂ forÂ aÂ memory<br>
Â Â Â Â pool,Â VALGRIND_MEMPOOL_ALLOCÂ willÂ markÂ theÂ redzonesÂ noÂ access.<br>
Â Â Â Â ThisÂ stillÂ allowsÂ toÂ findÂ someÂ bugsÂ ifÂ theÂ userÂ hasÂ forgottenÂ to<br>
Â Â Â Â markÂ theÂ poolÂ superblockÂ noaccess.<br>
<br>
Â Â -Â PerformanceÂ ofÂ memoryÂ leakÂ checkÂ hasÂ beenÂ improved,Â especiallyÂ in<br>
Â Â Â Â casesÂ whereÂ thereÂ areÂ manyÂ leakedÂ blocksÂ and/orÂ manyÂ suppression<br>
Â Â Â Â rulesÂ usedÂ toÂ suppressÂ leakÂ reports.<br>
<br>
Â Â -Â ReducedÂ noiseÂ (falseÂ positive)Â levelÂ onÂ MacOSXÂ 10.6/10.7,Â dueÂ to<br>
Â Â Â Â moreÂ preciseÂ analysis,Â whichÂ isÂ importantÂ forÂ LLVM/Clang<br>
Â Â Â Â generatedÂ code.Â Â ThisÂ isÂ atÂ theÂ costÂ ofÂ somewhatÂ reduced<br>
Â Â Â Â performance.Â Â NoteÂ thereÂ isÂ noÂ changeÂ toÂ analysisÂ precisionÂ or<br>
Â Â Â Â costsÂ onÂ LinuxÂ targets.<br>
<br>
*Â DRD:<br>
<br>
Â Â -Â AddedÂ evenÂ moreÂ facilitiesÂ thatÂ canÂ helpÂ findingÂ theÂ causeÂ ofÂ aÂ data<br>
Â Â Â Â race,Â namelyÂ theÂ command-lineÂ optionÂ --ptrace-addrÂ andÂ theÂ macro<br>
Â Â Â Â DRD_STOP_TRACING_VAR(x).Â MoreÂ informationÂ canÂ beÂ foundÂ inÂ theÂ manual.<br>
<br>
Â Â -Â FixedÂ aÂ subtleÂ bugÂ thatÂ couldÂ causeÂ falseÂ positiveÂ dataÂ raceÂ reports.<br>
<br>
*Â ====================Â OTHERÂ CHANGESÂ ====================<br>
<br>
*Â TheÂ C++Â demanglerÂ hasÂ beenÂ updatedÂ soÂ asÂ toÂ workÂ wellÂ withÂ C++Â <br>
Â Â compiledÂ byÂ upÂ toÂ atÂ leastÂ g++Â 4.6.<br>
<br>
*Â ToolÂ developersÂ canÂ makeÂ replacement/wrappingÂ moreÂ flexibleÂ thanks<br>
Â Â toÂ theÂ newÂ optionÂ --soname-synonyms.Â Â ThisÂ wasÂ reportedÂ above,Â but<br>
Â Â inÂ factÂ isÂ veryÂ generalÂ andÂ appliesÂ toÂ allÂ function<br>
Â Â replacement/wrapping,Â notÂ justÂ toÂ malloc-familyÂ functions.<br>
<br>
*Â Round-robinÂ schedulingÂ ofÂ threadsÂ canÂ beÂ selected,Â usingÂ theÂ new<br>
Â Â optionÂ --fair-sched=Â yes.Â Â PriorÂ toÂ thisÂ change,Â theÂ pipe-based<br>
Â Â threadÂ serialisationÂ mechanismÂ (whichÂ isÂ stillÂ theÂ default)Â could<br>
Â Â giveÂ veryÂ unfairÂ scheduling.Â Â --fair-sched=yesÂ improves<br>
Â Â responsivenessÂ ofÂ interactiveÂ multithreadedÂ applications,Â and<br>
Â Â improvesÂ repeatabilityÂ ofÂ resultsÂ fromÂ theÂ threadÂ checkersÂ Helgrind<br>
Â Â andÂ DRD.<br>
<br>
*Â ForÂ toolÂ developers:Â supportÂ toÂ runÂ ValgrindÂ onÂ ValgrindÂ hasÂ been<br>
Â Â improved.Â Â WeÂ canÂ nowÂ routinelyÂ ValgrindÂ onÂ HelgrindÂ orÂ Memcheck.<br>
<br>
*Â gdbserverÂ nowÂ showsÂ theÂ floatÂ shadowÂ registersÂ asÂ integer<br>
Â Â ratherÂ thanÂ floatÂ values,Â asÂ theÂ shadowÂ valuesÂ areÂ mostly<br>
Â Â usedÂ asÂ bitÂ patterns.<br>
<br>
*Â IncreasedÂ limitÂ forÂ theÂ --num-callersÂ commandÂ lineÂ flagÂ toÂ 500.<br>
<br>
*Â PerformanceÂ improvementsÂ forÂ errorÂ matchingÂ whenÂ thereÂ areÂ many<br>
Â Â suppressionÂ recordsÂ inÂ use.<br>
<br>
*Â ImprovedÂ supportÂ forÂ DWARF4Â debuggingÂ informationÂ (bugÂ 284184).<br>
<br>
*Â InitialÂ supportÂ forÂ DWZÂ compressedÂ DwarfÂ debugÂ info.<br>
<br>
*Â ImprovedÂ controlÂ overÂ theÂ IRÂ optimiser'sÂ handlingÂ ofÂ theÂ tradeoff<br>
Â Â betweenÂ performanceÂ andÂ precisionÂ ofÂ exceptions.Â Â Specifically,<br>
Â Â --vex-iropt-precise-memory-exnsÂ hasÂ beenÂ removedÂ andÂ replacedÂ by<br>
Â Â --vex-iropt-register-updates,Â withÂ extendedÂ functionality.Â Â This<br>
Â Â allowsÂ theÂ ValgrindÂ gdbserverÂ toÂ alwaysÂ showÂ upÂ toÂ dateÂ register<br>
Â Â valuesÂ toÂ GDB.<br>
<br>
*Â ModestÂ performanceÂ gainsÂ throughÂ theÂ useÂ ofÂ translationÂ chainingÂ for<br>
Â Â JIT-generatedÂ code.<br>
<br>
*Â ====================Â FIXEDÂ BUGSÂ ====================<br>
<br>
TheÂ followingÂ bugsÂ haveÂ beenÂ fixedÂ orÂ resolved.Â Â NoteÂ thatÂ "n-i-bz"<br>
standsÂ forÂ "notÂ inÂ bugzilla"Â --Â thatÂ is,Â aÂ bugÂ thatÂ wasÂ reportedÂ toÂ us<br>
butÂ neverÂ gotÂ aÂ bugzillaÂ entry.Â Â WeÂ encourageÂ youÂ toÂ fileÂ bugsÂ in<br>
bugzillaÂ (https://bugs.kde.org/enter_bug.cgi?product=valgrind)Â rather<br>
thanÂ mailingÂ theÂ developersÂ (orÂ mailingÂ lists)Â directlyÂ --Â bugsÂ that<br>
areÂ notÂ enteredÂ intoÂ bugzillaÂ tendÂ toÂ getÂ forgottenÂ aboutÂ orÂ ignored.<br>
<br>
ToÂ seeÂ detailsÂ ofÂ aÂ givenÂ bug,Â visit<br>
Â Â https://bugs.kde.org/show_bug.cgi?id=XXXXXX<br>
whereÂ XXXXXXÂ isÂ theÂ bugÂ numberÂ asÂ listedÂ below.<br>
<br>
197914Â Â BuildingÂ valgrindÂ fromÂ svnÂ nowÂ requiresÂ automake-1.10<br>
203877Â Â increaseÂ toÂ 16MbÂ maximumÂ allowedÂ alignmentÂ forÂ memalignÂ etÂ al<br>
219156Â Â HandleÂ staticallyÂ linkedÂ mallocÂ orÂ otherÂ mallocÂ libÂ (e.g.Â tcmalloc)Â <br>
247386Â Â makeÂ perfÂ doesÂ notÂ runÂ allÂ performanceÂ tests<br>
270006Â Â ValgrindÂ schedulerÂ unfairÂ <br>
270777Â Â AddingÂ MIPS/LinuxÂ portÂ toÂ Valgrind<br>
270796Â Â s390x:Â RemovedÂ brokenÂ supportÂ forÂ theÂ TSÂ insn<br>
271438Â Â FixÂ configureÂ forÂ properÂ SSE4.2Â detection<br>
273114Â Â s390x:Â SupportÂ TR,Â TRE,Â TROO,Â TROT,Â TRTO,Â andÂ TRTTÂ instructions<br>
273475Â Â AddÂ supportÂ forÂ AVXÂ instructions<br>
274078Â Â improvedÂ configureÂ logicÂ forÂ mpicc<br>
276993Â Â fixÂ mremapÂ 'noÂ thrashÂ checks'Â <br>
278313Â Â FedoraÂ 15/x64:Â errÂ readÂ debugÂ infoÂ withÂ --read-var-info=yesÂ flag<br>
281482Â Â memcheckÂ incorrectÂ byteÂ allocationÂ countÂ inÂ realloc()Â forÂ sillyÂ argument<br>
282230Â Â groupÂ allocatorÂ forÂ smallÂ fixedÂ size,Â useÂ itÂ forÂ MC_Chunk/SEcÂ vbit<br>
283413Â Â FixÂ wrongÂ sanityÂ check<br>
283671Â Â RobustizeÂ alignmentÂ computationÂ inÂ LibVEX_Alloc<br>
283961Â Â AddingÂ supportÂ forÂ someÂ HCIÂ IOCTLs<br>
284124Â Â parse_type_DIE:Â confusedÂ by:Â DWARFÂ 4<br>
284864Â Â ==Â 273475Â (AddÂ supportÂ forÂ AVXÂ instructions)<br>
285219Â Â Too-restrictiveÂ constraintsÂ forÂ Thumb2Â "SPÂ plus/minusÂ register"<br>
285662Â Â (MacOSX):Â MemcheckÂ needsÂ toÂ replaceÂ memcpy/memmove<br>
285725Â Â ==Â 273475Â (AddÂ supportÂ forÂ AVXÂ instructions)<br>
286261Â Â addÂ wrapperÂ forÂ linuxÂ I2C_RDWRÂ ioctl<br>
286270Â Â vgpreloadÂ isÂ notÂ friendlyÂ toÂ 64-&gt;32Â bitÂ execs,Â givesÂ ld.soÂ warnings<br>
286374Â Â RunningÂ cachegrindÂ withÂ --branch-sim=yesÂ onÂ 64-bitÂ PowerPCÂ programÂ fails<br>
286384Â Â configureÂ failsÂ "checkingÂ forÂ aÂ supportedÂ versionÂ ofÂ gcc"<br>
286497Â Â ==Â 273475Â (AddÂ supportÂ forÂ AVXÂ instructions)<br>
286596Â Â ==Â 273475Â (AddÂ supportÂ forÂ AVXÂ instructions)<br>
286917Â Â disInstr(arm):Â unhandledÂ instruction:Â QADDÂ (alsoÂ QSUB)<br>
287175Â Â ARM:Â scalarÂ VFPÂ fixed-pointÂ VCVTÂ instructionsÂ notÂ handled<br>
287260Â Â IncorrectÂ conditionalÂ jumpÂ orÂ moveÂ dependsÂ onÂ uninitialisedÂ value(s)<br>
287301Â Â vexÂ amd64-&gt;IR:Â 0x66Â 0xFÂ 0x38Â 0x41Â 0xC0Â 0xB8Â 0x0Â 0x0Â (PHMINPOSUW)<br>
287307Â Â ==Â 273475Â (AddÂ supportÂ forÂ AVXÂ instructions)<br>
287858Â Â VG_(strerror):Â unknownÂ errorÂ <br>
288298Â Â (MacOSX)Â unhandledÂ syscallÂ shm_unlink<br>
288995Â Â ==Â 273475Â (AddÂ supportÂ forÂ AVXÂ instructions)<br>
289470Â Â LoadingÂ ofÂ largeÂ Mach-OÂ thinÂ binariesÂ fails.<br>
289656Â Â ==Â 273475Â (AddÂ supportÂ forÂ AVXÂ instructions)<br>
289699Â Â vgdbÂ connectionÂ inÂ relayÂ modeÂ erroneouslyÂ closedÂ dueÂ toÂ bufferÂ overrunÂ <br>
289823Â Â ==Â Â 293754Â (PCMPxSTRxÂ notÂ implementedÂ forÂ 16-bitÂ characters)<br>
289839Â Â s390x:Â ProvideÂ supportÂ forÂ unicodeÂ conversionÂ instructions<br>
289939Â Â monitorÂ cmdÂ 'leak_check'Â withÂ detailsÂ aboutÂ leakedÂ orÂ reachableÂ blocks<br>
290006Â Â memcheckÂ doesn'tÂ markÂ %xmmÂ asÂ initializedÂ afterÂ "pcmpeqwÂ %xmmÂ %xmm"<br>
290655Â Â AddÂ supportÂ forÂ AESKEYGENASSISTÂ instructionÂ <br>
290719Â Â valgrind-3.7.0Â failsÂ withÂ automake-1.11.2Â dueÂ to"pkglibdir"Â usage<br>
290974Â Â vgdbÂ mustÂ alignÂ pagesÂ toÂ VKI_SHMLBAÂ (16KB)Â onÂ ARMÂ <br>
291253Â Â ESÂ registerÂ notÂ initialisedÂ inÂ valgrindÂ simulation<br>
291568Â Â FixÂ 3DNOW-relatedÂ crashesÂ withÂ baselineÂ x86_64Â CPUÂ (wÂ patch)<br>
291865Â Â s390x:Â SupportÂ theÂ "CompareÂ DoubleÂ andÂ Swap"Â familyÂ ofÂ instructions<br>
292300Â Â ==Â 273475Â (AddÂ supportÂ forÂ AVXÂ instructions)<br>
292430Â Â unrecognizedÂ instructionÂ inÂ __intel_get_new_mem_ops_cpuid<br>
292493Â Â ==Â 273475Â (AddÂ supportÂ forÂ AVXÂ instructions)<br>
292626Â Â MissingÂ fcntlÂ F_SETOWN_EXÂ andÂ F_GETOWN_EXÂ support<br>
292627Â Â MissingÂ supportÂ forÂ someÂ SCSIÂ ioctls<br>
292628Â Â none/tests/x86/bug125959-x86.cÂ triggersÂ undefinedÂ behavior<br>
292841Â Â ==Â 273475Â (AddÂ supportÂ forÂ AVXÂ instructions)<br>
292993Â Â implementÂ theÂ getcpuÂ syscallÂ onÂ amd64-linux<br>
292995Â Â ImplementÂ theÂ âcrossÂ memoryÂ attachâÂ syscallsÂ introducedÂ inÂ LinuxÂ 3.2<br>
293088Â Â AddÂ someÂ VEXÂ sanityÂ checksÂ forÂ ppc64Â unhandledÂ instructions<br>
293751Â Â ==Â 290655Â (AddÂ supportÂ forÂ AESKEYGENASSISTÂ instruction)<br>
293754Â Â PCMPxSTRxÂ notÂ implementedÂ forÂ 16-bitÂ characters<br>
293755Â Â ==Â 293754Â (NoÂ testsÂ forÂ PCMPxSTRxÂ onÂ 16-bitÂ characters)<br>
293808Â Â CLFLUSHÂ notÂ supportedÂ byÂ latestÂ VEXÂ forÂ amd64<br>
294047Â Â valgrindÂ doesÂ notÂ correctlyÂ emulateÂ prlimit64(...,Â RLIMIT_NOFILE,Â ...)<br>
294048Â Â MPSADBWÂ instructionÂ notÂ implemented<br>
294055Â Â regtestÂ none/tests/shellÂ failsÂ whenÂ localeÂ isÂ notÂ setÂ toÂ C<br>
294185Â Â INTÂ 0x44Â (andÂ others)Â notÂ supportedÂ onÂ x86Â guest,Â butÂ usedÂ byÂ JikesÂ RVM<br>
294190Â Â --vgdb-error=xxxÂ canÂ beÂ outÂ ofÂ syncÂ withÂ errorsÂ shownÂ toÂ theÂ user<br>
294191Â Â amd64:Â fnsave/frstorÂ andÂ 0x66Â sizeÂ prefixesÂ onÂ FPÂ instructions<br>
294260Â Â disInstr_AMD64:Â disInstrÂ miscalculatedÂ nextÂ %rip<br>
294523Â Â --partial-loads-ok=yesÂ causesÂ falseÂ negatives<br>
294617Â Â vexÂ amd64-&gt;IR:Â 0x66Â 0xFÂ 0x3AÂ 0xDFÂ 0xD1Â 0x1Â 0xE8Â 0x6A<br>
294736Â Â vexÂ amd64-&gt;IR:Â 0x48Â 0xFÂ 0xD7Â 0xD6Â 0x48Â 0x83<br>
294812Â Â patchÂ allowingÂ toÂ runÂ (onÂ x86Â atÂ least)Â helgrind/drdÂ onÂ tool.<br>
295089Â Â canÂ notÂ annotateÂ sourceÂ forÂ bothÂ helgrindÂ andÂ drd<br>
295221Â Â POWERÂ ProcessorÂ decimalÂ floatingÂ pointÂ instructionÂ supportÂ missing<br>
295427Â Â buildingÂ forÂ i386Â withÂ clangÂ onÂ darwin11Â requiresÂ "-new_linkerÂ linker"<br>
295428Â Â coregrind/m_main.cÂ hasÂ incorrectÂ x86Â assemblyÂ forÂ darwin<br>
295590Â Â Helgrind:Â AssertionÂ 'cvi-&gt;nWaitersÂ &gt;Â 0'Â failed<br>
295617Â Â ARMÂ -Â AddÂ someÂ missingÂ syscalls<br>
295799Â Â MissingÂ \nÂ withÂ get_vbitsÂ inÂ gdbserverÂ whenÂ lineÂ isÂ %Â 80Â [...]<br>
296229Â Â LinuxÂ userÂ inputÂ deviceÂ ioctlsÂ missingÂ wrappers<br>
296318Â Â ELFÂ DebugÂ infoÂ improvementsÂ (moreÂ thanÂ oneÂ rx/rwÂ mapping)<br>
296422Â Â AddÂ translationÂ chainingÂ support<br>
296457Â Â vexÂ amd64-&gt;IR:Â 0x66Â 0xFÂ 0x3AÂ 0xDFÂ 0xD1Â 0x1Â 0xE8Â 0x6AÂ (dupÂ ofÂ AES)<br>
296792Â Â valgrindÂ 3.7.0:Â addÂ SIOCSHWTSTAMPÂ (0x89B0)Â ioctlÂ wrapper<br>
296983Â Â FixÂ buildÂ issuesÂ onÂ x86_64/ppc64Â withoutÂ 32-bitÂ toolchains<br>
297078Â Â gdbserverÂ signalÂ handlingÂ problemsÂ [..]<br>
297147Â Â drdÂ falseÂ positivesÂ onÂ newlyÂ allocatedÂ memory<br>
297329Â Â disallowÂ decodingÂ ofÂ IBMÂ PowerÂ DFPÂ insnsÂ onÂ someÂ machines<br>
297497Â Â POWERÂ ProcessorÂ decimalÂ floatingÂ pointÂ instructionÂ supportÂ missing<br>
297701Â Â AnotherÂ aliasÂ forÂ strncasecmp_lÂ inÂ libc-2.13.so<br>
297911Â Â 'invalidÂ write'Â notÂ reportedÂ whenÂ usingÂ APIsÂ forÂ customÂ memÂ allocators.<br>
297976Â Â s390x:Â revisitÂ EXÂ implementation<br>
297991Â Â ValgrindÂ interferesÂ withÂ mmap()+ftell()Â <br>
297992Â Â SupportÂ systemsÂ missingÂ WIFCONTINUEDÂ (e.g.Â pre-2.6.10Â Linux)Â <br>
297993Â Â FixÂ compilationÂ ofÂ valgrindÂ withÂ gccÂ -g3.<br>
298080Â Â POWERÂ ProcessorÂ DFPÂ supportÂ missing,Â partÂ 3<br>
298227Â Â ==Â 273475Â (AddÂ supportÂ forÂ AVXÂ instructions)<br>
298335Â Â ==Â 273475Â (AddÂ supportÂ forÂ AVXÂ instructions)<br>
298354Â Â UnhandledÂ ARMÂ ThumbÂ instructionÂ 0xEB0DÂ 0x0585Â (streq)<br>
298394Â Â s390x:Â Don'tÂ bailÂ outÂ onÂ anÂ unknownÂ machineÂ model.Â Â [..]<br>
298421Â Â accept4()Â syscallÂ (366)Â supportÂ isÂ missingÂ forÂ ARM<br>
298718Â Â vexÂ amd64-&gt;IR:Â 0xFÂ 0xB1Â 0xCBÂ 0x9CÂ 0x8FÂ 0x45<br>
298732Â Â valgrindÂ installationÂ problemÂ inÂ ubuntuÂ withÂ kernelÂ versionÂ 3.x<br>
298862Â Â POWERÂ ProcessorÂ DFPÂ instructionÂ supportÂ missing,Â partÂ 4<br>
298864Â Â DWARFÂ readerÂ mis-parsesÂ DW_FORM_ref_addr<br>
298943Â Â massifÂ assertsÂ withÂ --pages-as-heap=yesÂ whenÂ brkÂ isÂ changingÂ [..]<br>
299053Â Â SupportÂ DWARF4Â DW_AT_high_pcÂ constantÂ form<br>
299104Â Â ==Â 273475Â (AddÂ supportÂ forÂ AVXÂ instructions)<br>
299316Â Â Helgrind:Â hg_main.c:628Â (map_threads_lookup):Â AssertionÂ 'thr'Â failed.<br>
299629Â Â dup3()Â syscallÂ (358)Â supportÂ isÂ missingÂ forÂ ARM<br>
299694Â Â POWERÂ ProcessorÂ DFPÂ instructionÂ supportÂ missing,Â partÂ 5<br>
299756Â Â IgnoreÂ --free-fillÂ forÂ MEMPOOL_FREEÂ andÂ FREELIKEÂ clientÂ requests<br>
299803Â Â ==Â 273475Â (AddÂ supportÂ forÂ AVXÂ instructions)<br>
299804Â Â ==Â 273475Â (AddÂ supportÂ forÂ AVXÂ instructions)<br>
299805Â Â ==Â 273475Â (AddÂ supportÂ forÂ AVXÂ instructions)<br>
300140Â Â ARMÂ -Â MissingÂ (T1)Â SMMUL<br>
300195Â Â ==Â 296318Â (ELFÂ DebugÂ infoÂ improvementsÂ (moreÂ thanÂ oneÂ rx/rwÂ mapping))<br>
300389Â Â AssertionÂ `are_valid_hwcaps(VexArchAMD64,Â [..])'Â failed.<br>
300414Â Â FCOMÂ andÂ FCOMPÂ unimplementedÂ forÂ amd64Â guest<br>
301204Â Â infiniteÂ loopÂ inÂ canonicaliseSymtabÂ withÂ ifuncÂ symbol<br>
301229Â Â ==Â 203877Â (increaseÂ toÂ 16MbÂ maximumÂ allowedÂ alignmentÂ forÂ memalignÂ etc)<br>
301265Â Â addÂ x86Â supportÂ toÂ AndroidÂ buildÂ <br>
301984Â Â configureÂ scriptÂ doesn'tÂ detectÂ certainÂ versionsÂ ofÂ clang<br>
302205Â Â FixÂ compilerÂ warningsÂ forÂ POWERÂ VEXÂ codeÂ andÂ POWERÂ testÂ cases<br>
302287Â Â UnhandledÂ movbeÂ instructionÂ onÂ AtomÂ processors<br>
302370Â Â PPC:Â fnmadd,Â fnmsub,Â fnmadds,Â fnmsubsÂ insnsÂ alwaysÂ negateÂ theÂ result<br>
302536Â Â FixÂ forÂ theÂ POWERÂ ValgrindÂ regressionÂ test:Â memcheck-ISA2.0.<br>
302578Â Â UnrecognizedÂ isntructionÂ 0xc5Â 0x32Â 0xc2Â 0xcaÂ 0x09Â vcmpngess<br>
302656Â Â ==Â 273475Â (AddÂ supportÂ forÂ AVXÂ instructions)<br>
302709Â Â valgrindÂ forÂ ARMÂ needsÂ extraÂ tlsÂ supportÂ forÂ androidÂ emulatorÂ [..]<br>
302827Â Â addÂ wrapperÂ forÂ CDROM_GET_CAPABILITY<br>
302901Â Â ValgrindÂ crashesÂ withÂ dwzÂ optimizedÂ debuginfo<br>
302918Â Â EnableÂ testingÂ ofÂ theÂ vmaddfpÂ andÂ vnsubfpÂ instructionsÂ inÂ theÂ testsuite<br>
303116Â Â AddÂ supportÂ forÂ theÂ POWERÂ instructionÂ popcntb<br>
303127Â Â PowerÂ testÂ suiteÂ fixesÂ forÂ frsqrte,Â vrefp,Â andÂ vrsqrtefpÂ instructions.<br>
303250Â Â AssertionÂ `instrs_in-&gt;arr_usedÂ &lt;=Â 10000'Â failedÂ w/Â OpenSSLÂ code<br>
303466Â Â ==Â 273475Â (AddÂ supportÂ forÂ AVXÂ instructions)<br>
303624Â Â segmentationÂ faultÂ onÂ AndroidÂ 4.1Â (e.g.Â onÂ GalaxyÂ NexusÂ OMAP)Â <br>
303963Â Â strstr()Â functionÂ producesÂ wrongÂ resultsÂ underÂ valgrindÂ callgrind<br>
304054Â Â CALL_FN_xxÂ macrosÂ needÂ toÂ enforceÂ stackÂ alignment<br>
304561Â Â teeÂ systemÂ callÂ notÂ supported<br>
715750Â Â (MacOSX):Â IncorrectÂ invalid-addressÂ errorsÂ nearÂ 0xFFFFxxxxÂ (mozbug#)<br>
n-i-bzÂ Â AddÂ missingÂ gdbserverÂ xmlÂ filesÂ forÂ shadowÂ registersÂ forÂ ppc32<br>
n-i-bzÂ Â BypassÂ gcc4.4/4.5Â codeÂ genÂ bugsÂ causingÂ outÂ ofÂ memoryÂ orÂ asserts<br>
n-i-bzÂ Â FixÂ assertÂ inÂ gdbserverÂ forÂ watchpointsÂ watchingÂ theÂ sameÂ address<br>
n-i-bzÂ Â FixÂ falseÂ positiveÂ inÂ sys_cloneÂ onÂ amd64Â whenÂ optionalÂ argsÂ [..]<br>
n-i-bzÂ Â s390x:Â ShadowÂ registersÂ canÂ nowÂ beÂ examinedÂ usingÂ vgdb<br>
<br>
(3.8.0-TEST3:Â Â 9Â AugustÂ 2012,Â vexÂ r2465,Â valgrindÂ r12865)<br>
(3.8.0:Â Â Â Â Â Â Â 10Â AugustÂ 2012,Â vexÂ r2465,Â valgrindÂ r12866)<br>
<br>
<br>
<br>
ReleaseÂ 3.7.0Â (5Â NovemberÂ 2011)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
3.7.0Â isÂ aÂ featureÂ releaseÂ withÂ manyÂ significantÂ improvementsÂ andÂ the<br>
usualÂ collectionÂ ofÂ bugÂ fixes.<br>
<br>
ThisÂ releaseÂ supportsÂ X86/Linux,Â AMD64/Linux,Â ARM/Linux,Â PPC32/Linux,<br>
PPC64/Linux,Â S390X/Linux,Â ARM/Android,Â X86/DarwinÂ andÂ AMD64/Darwin.<br>
SupportÂ forÂ recentÂ distrosÂ andÂ toolchainÂ componentsÂ (glibcÂ 2.14,Â gcc<br>
4.6,Â MacOSXÂ 10.7)Â hasÂ beenÂ added.<br>
<br>
*Â ==================Â PLATFORMÂ CHANGESÂ =================<br>
<br>
*Â SupportÂ forÂ IBMÂ z/ArchitectureÂ (s390x)Â runningÂ Linux.Â Â ValgrindÂ can<br>
Â Â analyseÂ 64-bitÂ programsÂ runningÂ onÂ z/Architecture.Â Â MostÂ userÂ space<br>
Â Â instructionsÂ upÂ toÂ andÂ includingÂ z10Â areÂ supported.Â Â ValgrindÂ has<br>
Â Â beenÂ testedÂ extensivelyÂ onÂ z9,Â z10,Â andÂ z196Â machinesÂ runningÂ SLES<br>
Â Â 10/11,Â RedHatÂ 5/6m,Â andÂ Fedora.Â TheÂ MemcheckÂ andÂ MassifÂ toolsÂ are<br>
Â Â knownÂ toÂ workÂ well.Â Callgrind,Â Helgrind,Â andÂ DRDÂ workÂ reasonably<br>
Â Â wellÂ onÂ z9Â andÂ laterÂ models.Â SeeÂ README.s390Â forÂ moreÂ details.<br>
<br>
*Â PreliminaryÂ supportÂ forÂ MacOSXÂ 10.7Â andÂ XCodeÂ 4.Â Â BothÂ 32-Â and<br>
Â Â 64-bitÂ processesÂ areÂ supported.Â Â SomeÂ complexÂ threadedÂ applications<br>
Â Â (Firefox)Â areÂ observedÂ toÂ hangÂ whenÂ runÂ asÂ 32Â bitÂ applications,<br>
Â Â whereasÂ 64-bitÂ versionsÂ runÂ OK.Â Â TheÂ causeÂ isÂ unknown.Â Â Memcheck<br>
Â Â willÂ likelyÂ reportÂ someÂ falseÂ errors.Â Â InÂ general,Â expectÂ someÂ rough<br>
Â Â spots.Â Â ThisÂ releaseÂ alsoÂ supportsÂ MacOSXÂ 10.6,Â butÂ dropsÂ support<br>
Â Â forÂ 10.5.<br>
<br>
*Â PreliminaryÂ supportÂ forÂ AndroidÂ (onÂ ARM).Â Â ValgrindÂ canÂ nowÂ run<br>
Â Â largeÂ applicationsÂ (eg,Â Firefox)Â onÂ (eg)Â aÂ SamsungÂ NexusÂ S.Â Â See<br>
Â Â README.androidÂ forÂ moreÂ details,Â plusÂ instructionsÂ onÂ howÂ toÂ get<br>
Â Â started.<br>
<br>
*Â SupportÂ forÂ theÂ IBMÂ PowerÂ ISAÂ 2.06Â (Power7Â instructions)<br>
<br>
*Â GeneralÂ correctnessÂ andÂ performanceÂ improvementsÂ forÂ ARM/Linux,Â and,<br>
Â Â byÂ extension,Â ARM/Android.<br>
<br>
*Â FurtherÂ solidificationÂ ofÂ supportÂ forÂ SSEÂ 4.2Â inÂ 64-bitÂ mode.Â Â AVX<br>
Â Â instructionÂ setÂ supportÂ isÂ underÂ developmentÂ butÂ isÂ notÂ availableÂ in<br>
Â Â thisÂ release.<br>
<br>
*Â SupportÂ forÂ AIX5Â hasÂ beenÂ removed.<br>
<br>
*Â ====================Â TOOLÂ CHANGESÂ ====================<br>
<br>
*Â Memcheck:Â someÂ incrementalÂ changes:<br>
<br>
Â Â -Â reductionÂ ofÂ memoryÂ useÂ inÂ someÂ circumstances<br>
<br>
Â Â -Â improvedÂ handlingÂ ofÂ freedÂ memory,Â whichÂ inÂ someÂ circumstancesÂ <br>
Â Â Â Â canÂ causeÂ detectionÂ ofÂ use-after-freeÂ thatÂ wouldÂ previouslyÂ have<br>
Â Â Â Â beenÂ missed<br>
<br>
Â Â -Â fixÂ ofÂ aÂ longstandingÂ bugÂ thatÂ couldÂ causeÂ falseÂ negativesÂ (missed<br>
Â Â Â Â errors)Â inÂ programsÂ doingÂ vectorÂ saturatedÂ narrowingÂ instructions.<br>
<br>
*Â Helgrind:Â performanceÂ improvementsÂ andÂ majorÂ memoryÂ useÂ reductions,<br>
Â Â particularlyÂ forÂ large,Â longÂ runningÂ applicationsÂ whichÂ performÂ many<br>
Â Â synchronisationÂ (lock,Â unlock,Â etc)Â events.Â Â PlusÂ manyÂ smaller<br>
Â Â changes:<br>
<br>
Â Â -Â displayÂ ofÂ locksetsÂ forÂ bothÂ threadsÂ involvedÂ inÂ aÂ race<br>
<br>
Â Â -Â generalÂ improvementsÂ inÂ formatting/clarityÂ ofÂ errorÂ messages<br>
<br>
Â Â -Â additionÂ ofÂ facilitiesÂ andÂ documentationÂ regardingÂ annotation<br>
Â Â Â Â ofÂ threadÂ safeÂ referenceÂ countedÂ C++Â classes<br>
<br>
Â Â -Â newÂ flagÂ --check-stack-refs=no|yesÂ [yes],Â toÂ disableÂ raceÂ checking<br>
Â Â Â Â onÂ threadÂ stacksÂ (aÂ performanceÂ hack)<br>
<br>
Â Â -Â newÂ flagÂ --free-is-write=no|yesÂ [no],Â toÂ enableÂ detectionÂ ofÂ races<br>
Â Â Â Â whereÂ oneÂ threadÂ accessesÂ heapÂ memoryÂ butÂ anotherÂ oneÂ freesÂ it,<br>
Â Â Â Â withoutÂ anyÂ coordinatingÂ synchronisationÂ event<br>
<br>
*Â DRD:Â enabledÂ XMLÂ output;Â addedÂ supportÂ forÂ delayedÂ threadÂ deletion<br>
Â Â inÂ orderÂ toÂ detectÂ racesÂ thatÂ occurÂ closeÂ toÂ theÂ endÂ ofÂ aÂ thread<br>
Â Â (--join-list-vol);Â fixedÂ aÂ memoryÂ leakÂ triggeredÂ byÂ repeatedÂ client<br>
Â Â memoryÂ allocatationÂ andÂ deallocation;Â improvedÂ DarwinÂ support.<br>
<br>
*Â exp-ptrcheck:Â thisÂ toolÂ hasÂ beenÂ renamedÂ toÂ exp-sgcheck<br>
<br>
*Â exp-sgcheck:Â thisÂ toolÂ hasÂ beenÂ reducedÂ inÂ scopeÂ soÂ asÂ toÂ improve<br>
Â Â performanceÂ andÂ removeÂ checkingÂ thatÂ MemcheckÂ doesÂ better.<br>
Â Â Specifically,Â theÂ abilityÂ toÂ checkÂ forÂ overrunsÂ forÂ stackÂ andÂ global<br>
Â Â arraysÂ isÂ unchanged,Â butÂ theÂ abilityÂ toÂ checkÂ forÂ overrunsÂ ofÂ heap<br>
Â Â blocksÂ hasÂ beenÂ removed.Â Â TheÂ toolÂ hasÂ accordinglyÂ beenÂ renamedÂ to<br>
Â Â exp-sgcheckÂ ("StackÂ andÂ GlobalÂ ArrayÂ Checking").<br>
<br>
*Â ====================Â OTHERÂ CHANGESÂ ====================<br>
<br>
*Â GDBÂ server:Â ValgrindÂ nowÂ hasÂ anÂ embeddedÂ GDBÂ server.Â Â ThatÂ meansÂ it<br>
Â Â isÂ possibleÂ toÂ controlÂ aÂ ValgrindÂ runÂ fromÂ GDB,Â doingÂ allÂ theÂ usual<br>
Â Â thingsÂ thatÂ GDBÂ canÂ doÂ (singleÂ stepping,Â breakpoints,Â examining<br>
Â Â data,Â etc).Â Â Tool-specificÂ functionalityÂ isÂ alsoÂ available.Â Â For<br>
Â Â example,Â itÂ isÂ possibleÂ toÂ queryÂ theÂ definednessÂ stateÂ ofÂ variables<br>
Â Â orÂ memoryÂ fromÂ withinÂ GDBÂ whenÂ runningÂ Memcheck;Â arbitrarilyÂ large<br>
Â Â memoryÂ watchpointsÂ areÂ supported,Â etc.Â Â ToÂ useÂ theÂ GDBÂ server,Â start<br>
Â Â ValgrindÂ withÂ theÂ flagÂ --vgdb-error=0Â andÂ followÂ theÂ on-screen<br>
Â Â instructions.<br>
<br>
*Â ImprovedÂ supportÂ forÂ unfriendlyÂ self-modifyingÂ code:Â aÂ newÂ option<br>
Â Â --smc-check=all-non-fileÂ isÂ available.Â Â ThisÂ addsÂ theÂ relevant<br>
Â Â consistencyÂ checksÂ onlyÂ toÂ codeÂ thatÂ originatesÂ inÂ non-file-backed<br>
Â Â mappings.Â Â InÂ effectÂ thisÂ confinesÂ theÂ consistencyÂ checkingÂ onlyÂ to<br>
Â Â codeÂ thatÂ isÂ orÂ mightÂ beÂ JITÂ generated,Â andÂ avoidsÂ checksÂ onÂ code<br>
Â Â thatÂ mustÂ haveÂ beenÂ compiledÂ aheadÂ ofÂ time.Â Â ThisÂ significantly<br>
Â Â improvesÂ performanceÂ onÂ applicationsÂ thatÂ generateÂ codeÂ atÂ runÂ time.<br>
<br>
*Â ItÂ isÂ nowÂ possibleÂ toÂ buildÂ aÂ workingÂ ValgrindÂ usingÂ Clang-2.9Â on<br>
Â Â Linux.<br>
<br>
*Â newÂ clientÂ requestsÂ VALGRIND_{DISABLE,ENABLE}_ERROR_REPORTING.<br>
Â Â TheseÂ enableÂ andÂ disableÂ errorÂ reportingÂ onÂ aÂ per-thread,Â and<br>
Â Â nestable,Â basis.Â Â ThisÂ isÂ usefulÂ forÂ hidingÂ errorsÂ inÂ particularly<br>
Â Â troublesomeÂ piecesÂ ofÂ code.Â Â TheÂ MPIÂ wrapperÂ libraryÂ (libmpiwrap.c)<br>
Â Â nowÂ usesÂ thisÂ facility.<br>
<br>
*Â AddedÂ theÂ --mod-funcnameÂ optionÂ toÂ cg_diff.<br>
<br>
*Â ====================Â FIXEDÂ BUGSÂ ====================<br>
<br>
TheÂ followingÂ bugsÂ haveÂ beenÂ fixedÂ orÂ resolved.Â Â NoteÂ thatÂ "n-i-bz"<br>
standsÂ forÂ "notÂ inÂ bugzilla"Â --Â thatÂ is,Â aÂ bugÂ thatÂ wasÂ reportedÂ toÂ us<br>
butÂ neverÂ gotÂ aÂ bugzillaÂ entry.Â Â WeÂ encourageÂ youÂ toÂ fileÂ bugsÂ in<br>
bugzillaÂ (http://bugs.kde.org/enter_valgrind_bug.cgi)Â ratherÂ than<br>
mailingÂ theÂ developersÂ (orÂ mailingÂ lists)Â directlyÂ --Â bugsÂ thatÂ are<br>
notÂ enteredÂ intoÂ bugzillaÂ tendÂ toÂ getÂ forgottenÂ aboutÂ orÂ ignored.<br>
<br>
ToÂ seeÂ detailsÂ ofÂ aÂ givenÂ bug,Â visit<br>
https://bugs.kde.org/show_bug.cgi?id=XXXXXX<br>
whereÂ XXXXXXÂ isÂ theÂ bugÂ numberÂ asÂ listedÂ below.<br>
<br>
Â 79311Â Â mallocÂ sillyÂ argÂ warningÂ doesÂ notÂ giveÂ stackÂ trace<br>
210935Â Â portÂ valgrind.hÂ (notÂ valgrind)Â toÂ win32Â toÂ supportÂ clientÂ requests<br>
214223Â Â valgrindÂ SIGSEGVÂ onÂ startupÂ gccÂ 4.4.1Â ppc32Â (G4)Â UbuntuÂ 9.10<br>
243404Â Â PortÂ toÂ zSeries<br>
243935Â Â Helgrind:Â incorrectÂ handlingÂ ofÂ ANNOTATE_HAPPENS_BEFORE()/AFTER()<br>
247223Â Â non-x86:Â SuppressÂ warning:Â 'regparm'Â attributeÂ directiveÂ ignored<br>
250101Â Â hugeÂ "free"Â memoryÂ usageÂ dueÂ toÂ m_mallocfree.cÂ fragmentation<br>
253206Â Â SomeÂ fixesÂ forÂ theÂ faultstatusÂ testcase<br>
255223Â Â capgetÂ testcaseÂ failsÂ whenÂ runningÂ asÂ root<br>
256703Â Â xlc_dbl_u32.cÂ testcaseÂ broken<br>
256726Â Â HelgrindÂ testsÂ haveÂ brokenÂ inlineÂ asmÂ <br>
259977Â Â ==Â 214223Â (ValgrindÂ segfaultsÂ doingÂ __builtin_longjmp)<br>
264800Â Â testcaseÂ compileÂ failureÂ onÂ zseries<br>
265762Â Â makeÂ publicÂ VEXÂ headersÂ compilableÂ byÂ G++Â 3.x<br>
265771Â Â assertionÂ inÂ jumps.cÂ (r11523)Â failsÂ withÂ glibc-2.3<br>
266753Â Â configureÂ scriptÂ doesÂ notÂ giveÂ theÂ userÂ theÂ optionÂ toÂ notÂ useÂ QtCore<br>
266931Â Â gen_insn_test.plÂ isÂ broken<br>
266961Â Â ld-linux.so.2Â i?86-linuxÂ strlenÂ issues<br>
266990Â Â setnsÂ instructionÂ causesÂ falseÂ positive<br>
267020Â Â MakeÂ directoryÂ forÂ temporaryÂ filesÂ configurableÂ atÂ run-time.<br>
267342Â Â ==Â 267997Â (segmentationÂ faultÂ onÂ MacÂ OSÂ 10.6)<br>
267383Â Â AssertionÂ 'vgPlain_strlen(dir)Â +Â vgPlain_strlen(file)Â +Â 1Â &lt;Â 256'Â failed<br>
267413Â Â AssertionÂ 'DRD_(g_threadinfo)[tid].synchr_nestingÂ &gt;=Â 1'Â failed.<br>
267488Â Â regtest:Â darwinÂ supportÂ forÂ 64-bitÂ build<br>
267552Â Â SIGSEGVÂ (misaligned_stack_error)Â withÂ DRD,Â butÂ notÂ withÂ otherÂ tools<br>
267630Â Â AddÂ supportÂ forÂ IBMÂ PowerÂ ISAÂ 2.06Â --Â stageÂ 1<br>
267769Â Â ==Â 267997Â (Darwin:Â memcheckÂ triggersÂ segmentationÂ fault)<br>
267819Â Â AddÂ clientÂ requestÂ forÂ informingÂ theÂ coreÂ aboutÂ reallocation<br>
267925Â Â laogÂ dataÂ structureÂ quadraticÂ forÂ aÂ singleÂ sequenceÂ ofÂ lock<br>
267968Â Â drd:Â (vgDrd_thread_set_joinable):Â AssertionÂ '0Â &lt;=Â (int)tidÂ ..'Â failed<br>
267997Â Â MacOSX:Â 64-bitÂ VÂ segfaultsÂ onÂ launchÂ whenÂ builtÂ withÂ XcodeÂ 4.0.1<br>
268513Â Â missedÂ optimizationsÂ inÂ fold_Expr<br>
268619Â Â s390x:Â fprÂ -Â gprÂ transferÂ facilityÂ <br>
268620Â Â s390x:Â reconsiderÂ "longÂ displacement"Â requirementÂ <br>
268621Â Â s390x:Â improveÂ IRÂ generationÂ forÂ XC<br>
268715Â Â s390x:Â FLOGRÂ isÂ notÂ universallyÂ available<br>
268792Â Â ==Â 267997Â (valgrindÂ segÂ faultsÂ onÂ startupÂ whenÂ compiledÂ withÂ XcodeÂ 4)<br>
268930Â Â s390x:Â MHYÂ isÂ notÂ universallyÂ available<br>
269078Â Â arm-&gt;IR:Â unhandledÂ instructionÂ SUBÂ (SPÂ minusÂ immediate/register)Â <br>
269079Â Â SupportÂ ptraceÂ systemÂ callÂ onÂ ARM<br>
269144Â Â missingÂ "BadÂ option"Â errorÂ message<br>
269209Â Â conditionalÂ loadÂ andÂ storeÂ facilityÂ (z196)<br>
269354Â Â ShiftÂ byÂ zeroÂ onÂ x86Â canÂ incorrectlyÂ clobberÂ CC_NDEP<br>
269641Â Â ==Â 267997Â (valgrindÂ segfaultsÂ immediatelyÂ (segmentationÂ fault))<br>
269736Â Â s390x:Â minorÂ codeÂ generationÂ tweaks<br>
269778Â Â ==Â 272986Â (valgrind.h:Â swapÂ rolesÂ ofÂ VALGRIND_DO_CLIENT_REQUEST()Â ..)<br>
269863Â Â s390x:Â removeÂ unusedÂ functionÂ parameters<br>
269864Â Â s390x:Â tweakÂ s390_emit_load_ccÂ <br>
269884Â Â ==Â 250101Â (overheadÂ forÂ hugeÂ blocksÂ exhaustsÂ spaceÂ tooÂ soon)<br>
270082Â Â s390x:Â MakeÂ sureÂ toÂ pointÂ theÂ PSWÂ addressÂ toÂ theÂ nextÂ addressÂ onÂ SIGILL<br>
270115Â Â s390x:Â rewriteÂ someÂ testcases<br>
270309Â Â ==Â 267997Â (valgrindÂ crashÂ onÂ startup)<br>
270320Â Â addÂ supportÂ forÂ LinuxÂ FIOQSIZEÂ ioctl()Â call<br>
270326Â Â segfaultÂ whileÂ tryingÂ toÂ sanitizeÂ theÂ environmentÂ passedÂ toÂ execle<br>
270794Â Â IBMÂ POWER7Â supportÂ patchÂ causesÂ regressionÂ inÂ none/tests<br>
270851Â Â IBMÂ POWER7Â fcfidusÂ instructionÂ causesÂ memcheckÂ toÂ fail<br>
270856Â Â IBMÂ POWER7Â xsnmaddadpÂ instructionÂ causesÂ memcheckÂ toÂ failÂ onÂ 32bitÂ appÂ <br>
270925Â Â hyper-optimizedÂ strspn()Â inÂ /lib64/libc-2.13.soÂ needsÂ fix<br>
270959Â Â s390x:Â invalidÂ useÂ ofÂ R0Â asÂ baseÂ register<br>
271042Â Â VSXÂ configureÂ checkÂ failsÂ whenÂ itÂ shouldÂ notÂ <br>
271043Â Â ValgrindÂ buildÂ failsÂ withÂ assemblerÂ errorÂ onÂ ppc64Â withÂ binutilsÂ 2.21Â <br>
271259Â Â s390x:Â fixÂ codeÂ confusionÂ <br>
271337Â Â ==Â 267997Â (ValgrindÂ segfaultsÂ onÂ MacOSÂ X)<br>
271385Â Â s390x:Â ImplementÂ Ist_MBEÂ <br>
271501Â Â s390x:Â miscÂ cleanupsÂ <br>
271504Â Â s390x:Â promoteÂ likelyÂ andÂ unlikelyÂ <br>
271579Â Â ppc:Â usingÂ wrongÂ enumÂ typeÂ <br>
271615Â Â unhandledÂ instructionÂ "popcnt"Â (arch=amd10h)Â <br>
271730Â Â FixÂ bugÂ whenÂ checkingÂ ioctls:Â duplicateÂ checkÂ <br>
271776Â Â s390x:Â provideÂ STFLEÂ instructionÂ supportÂ <br>
271779Â Â s390x:Â provideÂ clockÂ instructionsÂ likeÂ STCKÂ <br>
271799Â Â Darwin:Â ioctlsÂ withoutÂ anÂ argÂ reportÂ aÂ memoryÂ errorÂ <br>
271820Â Â arm:Â fixÂ typeÂ confusionÂ <br>
271917Â Â pthread_cond_timedwaitÂ failureÂ leadsÂ toÂ not-lockedÂ falseÂ positiveÂ <br>
272067Â Â s390x:Â fixÂ DISP20Â macroÂ <br>
272615Â Â AÂ typoÂ inÂ debugÂ outputÂ inÂ mc_leakcheck.c<br>
272661Â Â callgrind_annotateÂ chokesÂ whenÂ runÂ fromÂ pathsÂ containingÂ regexÂ chars<br>
272893Â Â amd64-&gt;IR:Â 0x66Â 0xFÂ 0x38Â 0x2BÂ 0xC1Â 0x66Â 0xFÂ 0x7FÂ ==Â (closedÂ asÂ dup)<br>
272955Â Â UnhandledÂ syscallÂ errorÂ forÂ pwrite64Â onÂ ppc64Â archÂ <br>
272967Â Â makeÂ documentationÂ build-systemÂ moreÂ robustÂ <br>
272986Â Â FixÂ gcc-4.6Â warningsÂ withÂ valgrind.h<br>
273318Â Â amd64-&gt;IR:Â 0x66Â 0xFÂ 0x3AÂ 0x61Â 0xC1Â 0x38Â (missingÂ PCMPxSTRxÂ case)<br>
273318Â Â unhandledÂ PCMPxSTRxÂ case:Â vexÂ amd64-&gt;IR:Â 0x66Â 0xFÂ 0x3AÂ 0x61Â 0xC1Â 0x38Â <br>
273431Â Â valgrindÂ segfaultsÂ inÂ evalCfiExprÂ (debuginfo.c:2039)<br>
273465Â Â Callgrind:Â jumps.c:164Â (new_jcc):Â AssertionÂ '(0Â &lt;=Â jmp)Â &amp;&amp;Â ...'<br>
273536Â Â BuildÂ error:Â multipleÂ definitionÂ ofÂ `vgDrd_pthread_cond_initializer'<br>
273640Â Â ppc64-linux:Â unhandledÂ syscallsÂ setresuid(164)Â andÂ setresgid(169)<br>
273729Â Â ==Â 283000Â (IllegalÂ opcodeÂ forÂ SSE2Â "roundsd"Â instruction)<br>
273778Â Â exp-ptrcheck:Â unhandledÂ sysnoÂ ==Â 259<br>
274089Â Â exp-ptrcheck:Â unhandledÂ sysnoÂ ==Â 208<br>
274378Â Â s390x:Â VariousÂ dispatcherÂ tweaks<br>
274447Â Â WARNING:Â unhandledÂ syscall:Â 340<br>
274776Â Â amd64-&gt;IR:Â 0x66Â 0xFÂ 0x38Â 0x2BÂ 0xC5Â 0x66<br>
274784Â Â ==Â 267997Â (valgrindÂ lsÂ -lÂ resultsÂ inÂ SegmentationÂ Fault)<br>
274926Â Â valgrindÂ doesÂ notÂ buildÂ againstÂ linux-3<br>
275148Â Â configureÂ FAILÂ withÂ glibc-2.14<br>
275151Â Â FedoraÂ 15Â /Â glibc-2.14Â 'makeÂ regtest'Â FAIL<br>
275168Â Â MakeÂ ValgrindÂ workÂ forÂ MacOSXÂ 10.7Â Lion<br>
275212Â Â ==Â 275284Â (lotsÂ ofÂ falseÂ positivesÂ fromÂ __memcpy_ssse3_backÂ etÂ al)<br>
275278Â Â valgrindÂ doesÂ notÂ buildÂ onÂ LinuxÂ kernelÂ 3.0.*Â dueÂ toÂ silly<br>
275284Â Â ValgrindÂ memcpy/memmoveÂ redirectionÂ stoppedÂ workingÂ inÂ glibcÂ 2.14/x86_64<br>
275308Â Â FixÂ implementationÂ forÂ ppc64Â fresÂ instruc<br>
275339Â Â s390x:Â fixÂ testcaseÂ compileÂ warnings<br>
275517Â Â s390x:Â ProvideÂ supportÂ forÂ CKSMÂ instruction<br>
275710Â Â s390x:Â getÂ ridÂ ofÂ redundantÂ addressÂ modeÂ calculation<br>
275815Â Â ==Â 247894Â (ValgrindÂ doesn'tÂ knowÂ aboutÂ LinuxÂ readahead(2)Â syscall)<br>
275852Â Â ==Â 250101Â (valgrindÂ usesÂ allÂ swapÂ spaceÂ andÂ isÂ killed)<br>
276784Â Â AddÂ supportÂ forÂ IBMÂ PowerÂ ISAÂ 2.06Â --Â stageÂ 3<br>
276987Â Â gdbsrv:Â fixÂ testsÂ followingÂ recentÂ commits<br>
277045Â Â ValgrindÂ crashesÂ withÂ Â unhandledÂ DW_OP_Â opcodeÂ 0x2a<br>
277199Â Â TheÂ test_isa_2_06_part1.cÂ inÂ none/tests/ppc64Â shouldÂ beÂ aÂ symlink<br>
277471Â Â UnhandledÂ syscall:Â 340<br>
277610Â Â valgrindÂ crashesÂ inÂ VG_(lseek)(core_fd,Â phdrs[idx].p_offset,Â ...)<br>
277653Â Â ARM:Â supportÂ Thumb2Â PLDÂ instruction<br>
277663Â Â ARM:Â NEONÂ floatÂ VMULÂ byÂ scalarÂ incorrect<br>
277689Â Â ARM:Â testsÂ forÂ VSTnÂ withÂ registerÂ post-indexÂ areÂ broken<br>
277694Â Â ARM:Â BLXÂ LRÂ instructionÂ brokenÂ inÂ ARMÂ mode<br>
277780Â Â ARM:Â VMOV.F32Â (immediate)Â instructionÂ isÂ broken<br>
278057Â Â fuseÂ filesystemÂ syscallÂ deadlocks<br>
278078Â Â UnimplementedÂ syscallÂ 280Â onÂ ppc32<br>
278349Â Â F_GETPIPE_SZÂ andÂ Â F_SETPIPE_SZÂ LinuxÂ fcntlÂ commands<br>
278454Â Â VALGRIND_STACK_DEREGISTERÂ hasÂ wrongÂ outputÂ type<br>
278502Â Â ==Â 275284Â (ValgrindÂ confusesÂ memcpy()Â andÂ memmove())<br>
278892Â Â gdbsrv:Â factorizeÂ gdbÂ versionÂ handling,Â fixÂ docÂ andÂ typos<br>
279027Â Â SupportÂ forÂ MVCLÂ andÂ CLCLÂ instruction<br>
279027Â Â s390x:Â ProvideÂ supportÂ forÂ CLCLÂ andÂ MVCLÂ instructions<br>
279062Â Â RemoveÂ aÂ redundantÂ checkÂ inÂ theÂ insnÂ selectorÂ forÂ ppc.<br>
279071Â Â JDKÂ createsÂ PTESTÂ withÂ redundantÂ REX.WÂ prefix<br>
279212Â Â gdbsrv:Â addÂ monitorÂ cmdÂ v.infoÂ scheduler.<br>
279378Â Â exp-ptrcheck:Â theÂ 'impossible'Â happenedÂ onÂ mkfifoÂ call<br>
279698Â Â memcheckÂ discardsÂ valid-bitsÂ forÂ packuswb<br>
279795Â Â memcheckÂ reportsÂ uninitialisedÂ valuesÂ forÂ mincoreÂ onÂ amd64<br>
279994Â Â AddÂ supportÂ forÂ IBMÂ PowerÂ ISAÂ 2.06Â --Â stageÂ 3<br>
280083Â Â mempolicyÂ syscallÂ checkÂ errors<br>
280290Â Â vexÂ amd64-&gt;IR:Â 0x66Â 0xFÂ 0x38Â 0x28Â 0xC1Â 0x66Â 0xFÂ 0x6F<br>
280710Â Â s390x:Â configÂ filesÂ forÂ nightlyÂ builds<br>
280757Â Â /tmpÂ dirÂ stillÂ usedÂ byÂ valgrindÂ evenÂ ifÂ TMPDIRÂ isÂ specified<br>
280965Â Â ValgrindÂ breaksÂ fcntlÂ locksÂ whenÂ programÂ doesÂ mmap<br>
281138Â Â WARNING:Â unhandledÂ syscall:Â 340<br>
281241Â Â ==Â 275168Â (valgrindÂ uselessÂ onÂ MacosÂ 10.7.1Â Lion)<br>
281304Â Â ==Â 275168Â (Darwin:Â dyldÂ "cannotÂ loadÂ insertedÂ library")<br>
281305Â Â ==Â 275168Â (unhandledÂ syscall:Â unix:357Â onÂ DarwinÂ 11.1)<br>
281468Â Â s390x:Â handleÂ do_cloneÂ andÂ gccÂ clonesÂ inÂ callÂ traces<br>
281488Â Â ARM:Â VFPÂ registerÂ corruption<br>
281828Â Â ==Â 275284Â (falseÂ memmoveÂ warning:Â "SourceÂ andÂ destinationÂ overlap")<br>
281883Â Â s390x:Â FixÂ systemÂ callÂ wrapperÂ forÂ "clone".<br>
282105Â Â generaliseÂ 'reclaimSuperBlock'Â toÂ alsoÂ reclaimÂ splittableÂ superblock<br>
282112Â Â UnhandledÂ instructionÂ bytes:Â 0xDEÂ 0xD9Â 0x9BÂ 0xDFÂ (fcompp)<br>
282238Â Â SLES10:Â makeÂ checkÂ fails<br>
282979Â Â strcasestrÂ needsÂ replacementÂ withÂ recent(&gt;=2.12)Â glibc<br>
283000Â Â vexÂ amd64-&gt;IR:Â 0x66Â 0xFÂ 0x3AÂ 0xAÂ 0xC0Â 0x9Â 0xF3Â 0xF<br>
283243Â Â RegressionÂ inÂ ppc64Â memcheckÂ tests<br>
283325Â Â ==Â 267997Â (Darwin:Â VÂ segfaultsÂ onÂ startupÂ whenÂ builtÂ withÂ XcodeÂ 4.0)<br>
283427Â Â re-connectÂ epoll_pwaitÂ syscallÂ onÂ ARMÂ linux<br>
283600Â Â gdbsrv:Â android:Â portÂ vgdb.c<br>
283709Â Â none/tests/faultstatusÂ needsÂ toÂ accountÂ forÂ pageÂ size<br>
284305Â Â filter_gdbÂ needsÂ enhancementÂ toÂ workÂ onÂ ppc64<br>
284384Â Â clangÂ 3.1Â -Wunused-valueÂ warningsÂ inÂ valgrind.h,Â memcheck.h<br>
284472Â Â Thumb2Â ROR.WÂ encodingÂ T2Â notÂ implemented<br>
284621Â Â XML-escapeÂ processÂ commandÂ lineÂ inÂ XMLÂ output<br>
n-i-bzÂ Â cachegrind/callgrind:Â handleÂ CPUIDÂ informationÂ forÂ CoreÂ iXÂ IntelÂ CPUs<br>
Â Â Â Â Â Â Â Â thatÂ haveÂ non-power-of-2Â sizesÂ (alsoÂ AMDs)<br>
n-i-bzÂ Â don'tÂ beÂ spookedÂ byÂ librariesÂ mashedÂ byÂ elfhack<br>
n-i-bzÂ Â don'tÂ beÂ spookedÂ byÂ libxul.soÂ linkedÂ withÂ gold<br>
n-i-bzÂ Â improvedÂ checkingÂ forÂ VALGRIND_CHECK_MEM_IS_DEFINED<br>
<br>
(3.7.0-TEST1:Â 27Â Â OctoberÂ 2011,Â vexÂ r2228,Â valgrindÂ r12245)<br>
(3.7.0.RC1:Â Â Â Â 1Â NovemberÂ 2011,Â vexÂ r2231,Â valgrindÂ r12257)<br>
(3.7.0:Â Â Â Â Â Â Â Â 5Â NovemberÂ 2011,Â vexÂ r2231,Â valgrindÂ r12258)<br>
<br>
<br>
<br>
ReleaseÂ 3.6.1Â (16Â FebruaryÂ 2011)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
3.6.1Â isÂ aÂ bugÂ fixÂ release.Â Â ItÂ addsÂ supportÂ forÂ someÂ SSE4<br>
instructionsÂ thatÂ wereÂ omittedÂ inÂ 3.6.0Â dueÂ toÂ lackÂ ofÂ time.Â Â Initial<br>
supportÂ forÂ glibc-2.13Â hasÂ beenÂ added.Â Â AÂ numberÂ ofÂ bugsÂ causing<br>
crashingÂ orÂ assertionÂ failuresÂ haveÂ beenÂ fixed.<br>
<br>
TheÂ followingÂ bugsÂ haveÂ beenÂ fixedÂ orÂ resolved.Â Â NoteÂ thatÂ "n-i-bz"<br>
standsÂ forÂ "notÂ inÂ bugzilla"Â --Â thatÂ is,Â aÂ bugÂ thatÂ wasÂ reportedÂ toÂ us<br>
butÂ neverÂ gotÂ aÂ bugzillaÂ entry.Â Â WeÂ encourageÂ youÂ toÂ fileÂ bugsÂ in<br>
bugzillaÂ (http://bugs.kde.org/enter_valgrind_bug.cgi)Â ratherÂ than<br>
mailingÂ theÂ developersÂ (orÂ mailingÂ lists)Â directlyÂ --Â bugsÂ thatÂ are<br>
notÂ enteredÂ intoÂ bugzillaÂ tendÂ toÂ getÂ forgottenÂ aboutÂ orÂ ignored.<br>
<br>
ToÂ seeÂ detailsÂ ofÂ aÂ givenÂ bug,Â visit<br>
https://bugs.kde.org/show_bug.cgi?id=XXXXXX<br>
whereÂ XXXXXXÂ isÂ theÂ bugÂ numberÂ asÂ listedÂ below.<br>
<br>
188572Â Â ValgrindÂ onÂ MacÂ shouldÂ suppressÂ setenv()Â memÂ leak<br>
194402Â Â vexÂ amd64-&gt;IR:Â 0x48Â 0xFÂ 0xAEÂ 0x4Â (properÂ FX{SAVE,RSTOR}Â support)<br>
210481Â Â vexÂ amd64-&gt;IR:Â AssertionÂ `szÂ ==Â 2Â ||Â szÂ ==Â 4'Â failedÂ (REX.WÂ POPQ)<br>
246152Â Â callgrindÂ internalÂ errorÂ afterÂ pthread_cancelÂ onÂ 32Â BitÂ Linux<br>
250038Â Â ppc64:Â AltivecÂ LVSRÂ andÂ LVSLÂ instructionsÂ failÂ theirÂ regtest<br>
254420Â Â memoryÂ poolÂ trackingÂ brokenÂ <br>
254957Â Â TestÂ codeÂ failingÂ toÂ compileÂ dueÂ toÂ changesÂ inÂ memcheck.h<br>
255009Â Â helgrind/drd:Â crashÂ onÂ chmodÂ withÂ invalidÂ parameter<br>
255130Â Â readdwarf3.cÂ parse_type_DIEÂ confusedÂ byÂ GNATÂ AdaÂ types<br>
255355Â Â helgrind/drd:Â crashÂ onÂ threadedÂ programsÂ doingÂ fork<br>
255358Â Â ==Â 255355<br>
255418Â Â (SSE4.x)Â rintÂ callÂ compiledÂ withÂ ICC<br>
255822Â Â --gen-suppressionsÂ canÂ createÂ invalidÂ files:Â "tooÂ manyÂ callersÂ [...]"<br>
255888Â Â closingÂ valgrindoutputÂ tagÂ outputtedÂ toÂ log-streamÂ onÂ error<br>
255963Â Â (SSE4.x)Â vexÂ amd64-&gt;IR:Â 0x66Â 0xFÂ 0x3AÂ 0x9Â 0xDBÂ 0x0Â (ROUNDPD)<br>
255966Â Â SlownessÂ whenÂ usingÂ mempoolÂ annotations<br>
256387Â Â vexÂ x86-&gt;IR:Â 0xD4Â 0xAÂ 0x2Â 0x7Â (AADÂ andÂ AAM)<br>
256600Â Â super-optimizedÂ strcasecmp()Â falseÂ positive<br>
256669Â Â vexÂ amd64-&gt;IR:Â UnhandledÂ LOOPNELÂ insnÂ onÂ amd64<br>
256968Â Â (SSE4.x)Â vexÂ amd64-&gt;IR:Â 0x66Â 0xFÂ 0x38Â 0x10Â 0xD3Â 0x66Â (BLENDVPx)<br>
257011Â Â (SSE4.x)Â vexÂ amd64-&gt;IR:Â 0x66Â 0xFÂ 0x3AÂ 0xEÂ 0xFDÂ 0xA0Â (PBLENDW)<br>
257063Â Â (SSE4.x)Â vexÂ amd64-&gt;IR:Â 0x66Â 0xFÂ 0x3AÂ 0x8Â 0xC0Â 0x0Â (ROUNDPS)<br>
257276Â Â MissingÂ caseÂ inÂ memcheckÂ --track-origins=yes<br>
258870Â Â (SSE4.x)Â AddÂ supportÂ forÂ EXTRACTPSÂ SSEÂ 4.1Â instruction<br>
261966Â Â (SSE4.x)Â supportÂ forÂ CRC32BÂ andÂ CRC32QÂ isÂ lackingÂ (alsoÂ CRC32{W,L})<br>
262985Â Â VEXÂ regressionÂ inÂ valgrindÂ 3.6.0Â inÂ handlingÂ PowerPCÂ VMX<br>
262995Â Â (SSE4.x)Â crashÂ whenÂ tryingÂ toÂ valgrindÂ gcc-snapshotÂ (PCMPxSTRxÂ $0)<br>
263099Â Â callgrind_annotateÂ countsÂ IrÂ improperlyÂ [...]<br>
263877Â Â undefinedÂ coprocessorÂ instructionÂ onÂ ARMv7<br>
265964Â Â configureÂ FAILÂ withÂ glibc-2.13<br>
n-i-bzÂ Â FixÂ compileÂ errorÂ w/Â icc-12.xÂ inÂ guest_arm_toIR.c<br>
n-i-bzÂ Â Docs:Â fixÂ bogusÂ descriptionsÂ forÂ VALGRIND_CREATE_BLOCKÂ etÂ al<br>
n-i-bzÂ Â Massif:Â don'tÂ assertÂ onÂ shmat()Â withÂ --pages-as-heap=yes<br>
n-i-bzÂ Â BugÂ fixesÂ andÂ majorÂ speedupsÂ forÂ theÂ exp-DHATÂ spaceÂ profiler<br>
n-i-bzÂ Â DRD:Â disableÂ --free-is-writeÂ dueÂ toÂ implementationÂ difficulties<br>
<br>
(3.6.1:Â 16Â FebruaryÂ 2011,Â vexÂ r2103,Â valgrindÂ r11561).<br>
<br>
<br>
<br>
ReleaseÂ 3.6.0Â (21Â OctoberÂ 2010)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
3.6.0Â isÂ aÂ featureÂ releaseÂ withÂ manyÂ significantÂ improvementsÂ andÂ the<br>
usualÂ collectionÂ ofÂ bugÂ fixes.<br>
<br>
ThisÂ releaseÂ supportsÂ X86/Linux,Â AMD64/Linux,Â ARM/Linux,Â PPC32/Linux,<br>
PPC64/Linux,Â X86/DarwinÂ andÂ AMD64/Darwin.Â Â SupportÂ forÂ recentÂ distros<br>
andÂ toolchainÂ componentsÂ (glibcÂ 2.12,Â gccÂ 4.5,Â OSXÂ 10.6)Â hasÂ beenÂ added.<br>
<br>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â -------------------------<br>
<br>
HereÂ areÂ someÂ highlights.Â Â DetailsÂ areÂ shownÂ furtherÂ down:<br>
<br>
*Â SupportÂ forÂ ARM/Linux.<br>
<br>
*Â SupportÂ forÂ recentÂ LinuxÂ distros:Â UbuntuÂ 10.10Â andÂ FedoraÂ 14.<br>
<br>
*Â SupportÂ forÂ MacÂ OSÂ XÂ 10.6,Â bothÂ 32-Â andÂ 64-bitÂ executables.<br>
<br>
*Â SupportÂ forÂ theÂ SSE4.2Â instructionÂ set.<br>
<br>
*Â EnhancementsÂ toÂ theÂ CallgrindÂ profiler,Â includingÂ theÂ abilityÂ to<br>
Â Â handleÂ CPUsÂ withÂ threeÂ levelsÂ ofÂ cache.<br>
<br>
*Â AÂ newÂ experimentalÂ heapÂ profiler,Â DHAT.<br>
<br>
*Â AÂ hugeÂ numberÂ ofÂ bugÂ fixesÂ andÂ smallÂ enhancements.<br>
<br>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â -------------------------<br>
<br>
HereÂ areÂ detailsÂ ofÂ theÂ aboveÂ changes,Â togetherÂ withÂ descriptionsÂ of<br>
manyÂ otherÂ changes,Â andÂ aÂ listÂ ofÂ fixedÂ bugs.<br>
<br>
*Â ==================Â PLATFORMÂ CHANGESÂ =================<br>
<br>
*Â SupportÂ forÂ ARM/Linux.Â Â ValgrindÂ nowÂ runsÂ onÂ ARMv7Â capableÂ CPUs<br>
Â Â runningÂ Linux.Â Â ItÂ isÂ knownÂ toÂ workÂ onÂ UbuntuÂ 10.04,Â UbuntuÂ 10.10,<br>
Â Â andÂ MaemoÂ 5,Â soÂ youÂ canÂ runÂ ValgrindÂ onÂ yourÂ NokiaÂ N900Â ifÂ youÂ want.<br>
<br>
Â Â ThisÂ requiresÂ aÂ CPUÂ capableÂ ofÂ runningÂ theÂ ARMv7-AÂ instructionÂ set<br>
Â Â (CortexÂ A5,Â A8Â andÂ A9).Â Â ValgrindÂ providesÂ fairlyÂ completeÂ coverage<br>
Â Â ofÂ theÂ userÂ spaceÂ instructionÂ set,Â includingÂ ARMÂ andÂ ThumbÂ integer<br>
Â Â code,Â VFPv3,Â NEONÂ andÂ V6Â mediaÂ instructions.Â Â TheÂ Memcheck,<br>
Â Â CachegrindÂ andÂ MassifÂ toolsÂ workÂ properly;Â otherÂ toolsÂ workÂ to<br>
Â Â varyingÂ degrees.<br>
<br>
*Â SupportÂ forÂ recentÂ LinuxÂ distrosÂ (UbuntuÂ 10.10Â andÂ FedoraÂ 14),Â along<br>
Â Â withÂ supportÂ forÂ recentÂ releasesÂ ofÂ theÂ underlyingÂ toolchain<br>
Â Â components,Â notablyÂ gcc-4.5Â andÂ glibc-2.12.<br>
<br>
*Â SupportÂ forÂ MacÂ OSÂ XÂ 10.6,Â bothÂ 32-Â andÂ 64-bitÂ executables.Â Â 64-bit<br>
Â Â supportÂ alsoÂ worksÂ muchÂ betterÂ onÂ OSÂ XÂ 10.5,Â andÂ isÂ asÂ solidÂ as<br>
Â Â 32-bitÂ supportÂ now.<br>
<br>
*Â SupportÂ forÂ theÂ SSE4.2Â instructionÂ set.Â Â SSE4.2Â isÂ supportedÂ in<br>
Â Â 64-bitÂ mode.Â Â InÂ 32-bitÂ mode,Â supportÂ isÂ onlyÂ availableÂ upÂ toÂ and<br>
Â Â includingÂ SSSE3.Â Â SomeÂ exceptions:Â SSE4.2Â AESÂ instructionsÂ areÂ not<br>
Â Â supportedÂ inÂ 64-bitÂ mode,Â andÂ 32-bitÂ modeÂ doesÂ inÂ factÂ supportÂ the<br>
Â Â bareÂ minimumÂ SSE4Â instructionsÂ toÂ neededÂ toÂ runÂ programsÂ onÂ MacÂ OSÂ X<br>
Â Â 10.6Â onÂ 32-bitÂ targets.<br>
<br>
*Â SupportÂ forÂ IBMÂ POWER6Â cpusÂ hasÂ beenÂ improved.Â Â TheÂ PowerÂ ISAÂ upÂ to<br>
Â Â andÂ includingÂ versionÂ 2.05Â isÂ supported.<br>
<br>
*Â ====================Â TOOLÂ CHANGESÂ ====================<br>
<br>
*Â CachegrindÂ hasÂ aÂ newÂ processingÂ script,Â cg_diff,Â whichÂ findsÂ the<br>
Â Â differenceÂ betweenÂ twoÂ profiles.Â Â It'sÂ veryÂ usefulÂ forÂ evaluating<br>
Â Â theÂ performanceÂ effectsÂ ofÂ aÂ changeÂ inÂ aÂ program.<br>
Â Â <br>
Â Â RelatedÂ toÂ thisÂ change,Â theÂ meaningÂ ofÂ cg_annotate'sÂ (rarely-used)<br>
Â Â --thresholdÂ optionÂ hasÂ changed;Â thisÂ isÂ unlikelyÂ toÂ affectÂ many<br>
Â Â people,Â ifÂ youÂ doÂ useÂ itÂ pleaseÂ seeÂ theÂ userÂ manualÂ forÂ details.<br>
<br>
*Â CallgrindÂ nowÂ canÂ doÂ branchÂ predictionÂ simulation,Â similarÂ to<br>
Â Â Cachegrind.Â Â InÂ addition,Â itÂ optionallyÂ canÂ countÂ theÂ numberÂ of<br>
Â Â executedÂ globalÂ busÂ events.Â Â BothÂ canÂ beÂ usedÂ forÂ aÂ better<br>
Â Â approximationÂ ofÂ aÂ "CycleÂ Estimation"Â asÂ derivedÂ eventÂ (youÂ needÂ to<br>
Â Â updateÂ theÂ eventÂ formulaÂ inÂ KCachegrindÂ yourself).<br>
<br>
*Â CachegrindÂ andÂ CallgrindÂ nowÂ referÂ toÂ theÂ LLÂ (last-level)Â cache<br>
Â Â ratherÂ thanÂ theÂ L2Â cache.Â Â ThisÂ isÂ toÂ accommodateÂ machinesÂ with<br>
Â Â threeÂ levelsÂ ofÂ cachesÂ --Â ifÂ Cachegrind/CallgrindÂ auto-detectsÂ the<br>
Â Â cacheÂ configurationÂ ofÂ suchÂ aÂ machineÂ itÂ willÂ runÂ theÂ simulationÂ as<br>
Â Â ifÂ theÂ L2Â cacheÂ isn'tÂ present.Â Â ThisÂ meansÂ theÂ resultsÂ areÂ less<br>
Â Â likelyÂ toÂ matchÂ theÂ trueÂ resultÂ forÂ theÂ machine,Â but<br>
Â Â Cachegrind/Callgrind'sÂ resultsÂ areÂ alreadyÂ onlyÂ approximate,Â and<br>
Â Â shouldÂ notÂ beÂ consideredÂ authoritative.Â Â TheÂ resultsÂ areÂ still<br>
Â Â usefulÂ forÂ givingÂ aÂ generalÂ ideaÂ aboutÂ aÂ program'sÂ locality.<br>
<br>
*Â MassifÂ hasÂ aÂ newÂ option,Â --pages-as-heap,Â whichÂ isÂ disabledÂ by<br>
Â Â default.Â Â WhenÂ enabled,Â insteadÂ ofÂ trackingÂ allocationsÂ atÂ theÂ level<br>
Â Â ofÂ heapÂ blocksÂ (asÂ allocatedÂ withÂ malloc/new/new[]),Â itÂ instead<br>
Â Â tracksÂ memoryÂ allocationsÂ atÂ theÂ levelÂ ofÂ memoryÂ pagesÂ (asÂ mappedÂ by<br>
Â Â mmap,Â brk,Â etc).Â Â EachÂ mappedÂ pageÂ isÂ treatedÂ asÂ itsÂ ownÂ block.<br>
Â Â InterpretingÂ theÂ page-levelÂ outputÂ isÂ harderÂ thanÂ theÂ heap-level<br>
Â Â output,Â butÂ thisÂ optionÂ isÂ usefulÂ ifÂ youÂ wantÂ toÂ accountÂ forÂ every<br>
Â Â byteÂ ofÂ memoryÂ usedÂ byÂ aÂ program.<br>
<br>
*Â DRDÂ hasÂ twoÂ newÂ command-lineÂ options:Â --free-is-writeÂ and<br>
Â Â --trace-alloc.Â Â TheÂ formerÂ allowsÂ toÂ detectÂ readingÂ fromÂ alreadyÂ freed<br>
Â Â memory,Â andÂ theÂ latterÂ allowsÂ tracingÂ ofÂ allÂ memoryÂ allocationsÂ and<br>
Â Â deallocations.<br>
<br>
*Â DRDÂ hasÂ severalÂ newÂ annotations.Â Â CustomÂ barrierÂ implementationsÂ can<br>
Â Â nowÂ beÂ annotated,Â asÂ wellÂ asÂ benignÂ racesÂ onÂ staticÂ variables.<br>
<br>
*Â DRD'sÂ happensÂ beforeÂ /Â happensÂ afterÂ annotationsÂ haveÂ beenÂ madeÂ more<br>
Â Â powerful,Â soÂ thatÂ theyÂ canÂ nowÂ alsoÂ beÂ usedÂ toÂ annotateÂ e.g.Â aÂ smart<br>
Â Â pointerÂ implementation.<br>
<br>
*Â Helgrind'sÂ annotationÂ setÂ hasÂ alsoÂ beenÂ drasticallyÂ improved,Â soÂ as<br>
Â Â toÂ provideÂ toÂ usersÂ aÂ generalÂ setÂ ofÂ annotationsÂ toÂ describeÂ locks,<br>
Â Â semaphores,Â barriersÂ andÂ conditionÂ variables.Â Â AnnotationsÂ to<br>
Â Â describeÂ thread-safeÂ referenceÂ countedÂ heapÂ objectsÂ haveÂ alsoÂ been<br>
Â Â added.<br>
<br>
*Â MemcheckÂ hasÂ aÂ newÂ command-lineÂ option,Â --show-possibly-lost,Â which<br>
Â Â isÂ enabledÂ byÂ default.Â Â WhenÂ disabled,Â theÂ leakÂ detectorÂ willÂ not<br>
Â Â showÂ possibly-lostÂ blocks.<br>
<br>
*Â AÂ newÂ experimentalÂ heapÂ profiler,Â DHATÂ (DynamicÂ HeapÂ AnalysisÂ Tool),<br>
Â Â hasÂ beenÂ added.Â Â DHATÂ keepsÂ trackÂ ofÂ allocatedÂ heapÂ blocks,Â andÂ also<br>
Â Â inspectsÂ everyÂ memoryÂ referenceÂ toÂ seeÂ whichÂ blockÂ (ifÂ any)Â isÂ being<br>
Â Â accessed.Â Â ThisÂ givesÂ aÂ lotÂ ofÂ insightÂ intoÂ blockÂ lifetimes,<br>
Â Â utilisation,Â turnover,Â liveness,Â andÂ theÂ locationÂ ofÂ hotÂ andÂ cold<br>
Â Â fields.Â Â YouÂ canÂ useÂ DHATÂ toÂ doÂ hot-fieldÂ profiling.<br>
<br>
*Â ====================Â OTHERÂ CHANGESÂ ====================<br>
<br>
*Â ImprovedÂ supportÂ forÂ unfriendlyÂ self-modifyingÂ code:Â theÂ extra<br>
Â Â overheadÂ incurredÂ byÂ --smc-check=allÂ hasÂ beenÂ reducedÂ by<br>
Â Â approximatelyÂ aÂ factorÂ ofÂ 5Â asÂ comparedÂ withÂ 3.5.0.<br>
<br>
*Â AbilityÂ toÂ showÂ directoryÂ namesÂ forÂ sourceÂ filesÂ inÂ errorÂ messages.<br>
Â Â ThisÂ isÂ combinedÂ withÂ aÂ flexibleÂ mechanismÂ forÂ specifyingÂ which<br>
Â Â partsÂ ofÂ theÂ pathsÂ shouldÂ beÂ shown.Â Â ThisÂ isÂ enabledÂ byÂ theÂ newÂ flag<br>
Â Â --fullpath-after.<br>
<br>
*Â AÂ newÂ flag,Â --require-text-symbol,Â whichÂ willÂ stopÂ theÂ runÂ ifÂ a<br>
Â Â specifiedÂ symbolÂ isÂ notÂ foundÂ itÂ aÂ givenÂ sharedÂ objectÂ whenÂ itÂ is<br>
Â Â loadedÂ intoÂ theÂ process.Â Â ThisÂ makesÂ advancedÂ workingÂ withÂ function<br>
Â Â interceptingÂ andÂ wrappingÂ saferÂ andÂ moreÂ reliable.<br>
<br>
*Â ImprovedÂ supportÂ forÂ theÂ ValkyrieÂ GUI,Â versionÂ 2.0.0.Â Â GUIÂ output<br>
Â Â andÂ controlÂ ofÂ ValgrindÂ isÂ nowÂ availableÂ forÂ theÂ toolsÂ MemcheckÂ and<br>
Â Â Helgrind.Â Â XMLÂ outputÂ fromÂ ValgrindÂ isÂ availableÂ forÂ Memcheck,<br>
Â Â HelgrindÂ andÂ exp-Ptrcheck.<br>
<br>
*Â MoreÂ reliableÂ stackÂ unwindingÂ onÂ amd64-linux,Â particularlyÂ inÂ the<br>
Â Â presenceÂ ofÂ functionÂ wrappers,Â andÂ withÂ gcc-4.5Â compiledÂ code.<br>
<br>
*Â ModestÂ scalabilityÂ (performanceÂ improvements)Â forÂ massive<br>
Â Â long-runningÂ applications,Â particularlyÂ forÂ thoseÂ withÂ hugeÂ amounts<br>
Â Â ofÂ code.<br>
<br>
*Â SupportÂ forÂ analyzingÂ programsÂ runningÂ underÂ WineÂ withÂ hasÂ been<br>
Â Â improved.Â Â TheÂ headerÂ filesÂ &lt;valgrind/valgrind.h&gt;,<br>
Â Â &lt;valgrind/memcheck.h&gt;Â andÂ &lt;valgrind/drd.h&gt;Â canÂ nowÂ beÂ usedÂ in<br>
Â Â Windows-programsÂ compiledÂ withÂ MinGWÂ orÂ oneÂ ofÂ theÂ MicrosoftÂ Visual<br>
Â Â StudioÂ compilers.<br>
<br>
*Â AÂ rareÂ butÂ seriousÂ errorÂ inÂ theÂ 64-bitÂ x86Â CPUÂ simulationÂ wasÂ fixed.<br>
Â Â TheÂ 32-bitÂ simulatorÂ wasÂ notÂ affected.Â Â ThisÂ didÂ notÂ occurÂ often,<br>
Â Â butÂ whenÂ itÂ didÂ wouldÂ usuallyÂ crashÂ theÂ programÂ underÂ test.<br>
Â Â BugÂ 245925.<br>
<br>
*Â AÂ largeÂ numberÂ ofÂ bugsÂ wereÂ fixed.Â Â TheseÂ areÂ shownÂ below.<br>
<br>
*Â AÂ numberÂ ofÂ bugsÂ wereÂ investigated,Â andÂ wereÂ candidatesÂ forÂ fixing,<br>
Â Â butÂ areÂ notÂ fixedÂ inÂ 3.6.0,Â dueÂ toÂ lackÂ ofÂ developerÂ time.Â Â TheyÂ may<br>
Â Â getÂ fixedÂ inÂ laterÂ releases.Â Â TheyÂ are:<br>
<br>
Â Â 194402Â Â vexÂ amd64-&gt;IR:Â 0x48Â 0xFÂ 0xAEÂ 0x4Â 0x24Â 0x49Â Â (FXSAVE64)<br>
Â Â 212419Â Â falseÂ positiveÂ "lockÂ orderÂ violated"Â (A+BÂ vsÂ A)Â <br>
Â Â 213685Â Â UndefinedÂ valueÂ propagatesÂ pastÂ dependencyÂ breakingÂ instruction<br>
Â Â 216837Â Â IncorrectÂ instrumentationÂ ofÂ NSOperationQueueÂ onÂ DarwinÂ <br>
Â Â 237920Â Â valgrindÂ segfaultÂ onÂ forkÂ failureÂ <br>
Â Â 242137Â Â supportÂ forÂ codeÂ compiledÂ byÂ LLVM-2.8<br>
Â Â 242423Â Â AnotherÂ unknownÂ IntelÂ cacheÂ configÂ valueÂ <br>
Â Â 243232Â Â InconsistentÂ LockÂ OrderingsÂ reportÂ withÂ trylockÂ <br>
Â Â 243483Â Â ppc:Â callgrindÂ triggersÂ VEXÂ assertionÂ failureÂ <br>
Â Â 243935Â Â Helgrind:Â implementationÂ ofÂ ANNOTATE_HAPPENS_BEFORE()Â isÂ wrong<br>
Â Â 244677Â Â HelgrindÂ crashÂ hg_main.c:616Â (map_threads_lookup):Â Assertion<br>
Â Â Â Â Â Â Â Â Â Â 'thr'Â failed.Â <br>
Â Â 246152Â Â callgrindÂ internalÂ errorÂ afterÂ pthread_cancelÂ onÂ 32Â BitÂ LinuxÂ <br>
Â Â 249435Â Â AnalyzingÂ wineÂ programsÂ withÂ callgrindÂ triggersÂ aÂ crashÂ <br>
Â Â 250038Â Â ppc64:Â AltivecÂ lvsrÂ andÂ lvslÂ instructionsÂ failÂ theirÂ regtest<br>
Â Â 250065Â Â HandlingÂ largeÂ allocationsÂ <br>
Â Â 250101Â Â hugeÂ "free"Â memoryÂ usageÂ dueÂ toÂ m_mallocfree.c<br>
Â Â Â Â Â Â Â Â Â Â "superblocksÂ fragmentation"<br>
Â Â 251569Â Â vexÂ amd64-&gt;IR:Â 0xFÂ 0x1Â 0xF9Â 0x8BÂ 0x4CÂ 0x24Â (RDTSCP)<br>
Â Â 252091Â Â CallgrindÂ onÂ ARMÂ doesÂ notÂ detectÂ functionÂ returnsÂ correctly<br>
Â Â 252600Â Â [PATCH]Â AllowÂ lhsÂ toÂ beÂ aÂ pointerÂ forÂ shl/shr<br>
Â Â 254420Â Â memoryÂ poolÂ trackingÂ broken<br>
Â Â n-i-bzÂ Â supportÂ forÂ addingÂ symbolsÂ forÂ JITÂ generatedÂ code<br>
<br>
<br>
TheÂ followingÂ bugsÂ haveÂ beenÂ fixedÂ orÂ resolved.Â Â NoteÂ thatÂ "n-i-bz"<br>
standsÂ forÂ "notÂ inÂ bugzilla"Â --Â thatÂ is,Â aÂ bugÂ thatÂ wasÂ reportedÂ toÂ us<br>
butÂ neverÂ gotÂ aÂ bugzillaÂ entry.Â Â WeÂ encourageÂ youÂ toÂ fileÂ bugsÂ in<br>
bugzillaÂ (http://bugs.kde.org/enter_valgrind_bug.cgi)Â ratherÂ than<br>
mailingÂ theÂ developersÂ (orÂ mailingÂ lists)Â directlyÂ --Â bugsÂ thatÂ are<br>
notÂ enteredÂ intoÂ bugzillaÂ tendÂ toÂ getÂ forgottenÂ aboutÂ orÂ ignored.<br>
<br>
ToÂ seeÂ detailsÂ ofÂ aÂ givenÂ bug,Â visit<br>
https://bugs.kde.org/show_bug.cgi?id=XXXXXX<br>
whereÂ XXXXXXÂ isÂ theÂ bugÂ numberÂ asÂ listedÂ below.<br>
<br>
135264Â Â dcbzlÂ instructionÂ missing<br>
142688Â Â ==Â 250799<br>
153699Â Â ValgrindÂ shouldÂ reportÂ unalignedÂ readsÂ withÂ movdqa<br>
180217Â Â ==Â 212335<br>
190429Â Â ValgrindÂ reportsÂ lostÂ ofÂ errorsÂ inÂ ld.so<br>
Â Â Â Â Â Â Â Â withÂ x86_64Â 2.9.90Â glibcÂ <br>
197266Â Â valgrindÂ appearsÂ toÂ chokeÂ onÂ theÂ xmmsÂ instruction<br>
Â Â Â Â Â Â Â Â "roundsd"Â onÂ x86_64Â <br>
197988Â Â CrashÂ whenÂ demanglingÂ veryÂ largeÂ symbolÂ names<br>
202315Â Â unhandledÂ syscall:Â 332Â (inotify_init1)<br>
203256Â Â AddÂ page-levelÂ profilingÂ toÂ Massif<br>
205093Â Â dsymutil=yesÂ needsÂ quotes,Â lockingÂ (partialÂ fix)<br>
205241Â Â SnowÂ LeopardÂ 10.6Â supportÂ (partialÂ fix)<br>
206600Â Â LeakÂ checkerÂ failsÂ toÂ upgradeÂ indirectÂ blocksÂ whenÂ their<br>
Â Â Â Â Â Â Â Â parentÂ becomesÂ reachableÂ <br>
210935Â Â portÂ valgrind.hÂ (notÂ valgrind)Â toÂ win32Â soÂ appsÂ runÂ under<br>
Â Â Â Â Â Â Â Â wineÂ canÂ makeÂ clientÂ requests<br>
211410Â Â vexÂ amd64-&gt;IR:Â 0x15Â 0xFFÂ 0xFFÂ 0x0Â 0x0Â 0x89<br>
Â Â Â Â Â Â Â Â withinÂ LinuxÂ ip-stackÂ checksumÂ functionsÂ <br>
212335Â Â unhandledÂ instructionÂ bytes:Â 0xF3Â 0xFÂ 0xBDÂ 0xC0<br>
Â Â Â Â Â Â Â Â (lzcntÂ %eax,%eax)Â <br>
213685Â Â UndefinedÂ valueÂ propagatesÂ pastÂ dependencyÂ breakingÂ instruction<br>
Â Â Â Â Â Â Â Â (partialÂ fix)<br>
215914Â Â ValgrindÂ insertsÂ bogusÂ emptyÂ environmentÂ variableÂ <br>
217863Â Â ==Â 197988<br>
219538Â Â adjtimexÂ syscallÂ wrapperÂ wrongÂ inÂ readonlyÂ adjtimeÂ modeÂ <br>
222545Â Â shmatÂ failsÂ underÂ valgindÂ onÂ someÂ armÂ targetsÂ <br>
222560Â Â ARMÂ NEONÂ supportÂ <br>
230407Â Â ==Â 202315<br>
231076Â Â ==Â 202315<br>
232509Â Â DocsÂ buildÂ failsÂ withÂ formattingÂ insideÂ &lt;title&gt;&lt;/title&gt;Â elementsÂ <br>
232793Â Â ==Â 202315<br>
235642Â Â [PATCH]Â syswrap-linux.c:Â supportÂ evdevÂ EVIOCG*Â ioctlsÂ <br>
236546Â Â vexÂ x86-&gt;IR:Â 0x66Â 0xFÂ 0x3AÂ 0xA<br>
237202Â Â vexÂ amd64-&gt;IR:Â 0xF3Â 0xFÂ 0xB8Â 0xC0Â 0x49Â 0x3BÂ <br>
237371Â Â betterÂ supportÂ forÂ VALGRIND_MALLOCLIKE_BLOCKÂ <br>
237485Â Â symlinkÂ (syscallÂ 57)Â isÂ notÂ supportedÂ onÂ MacÂ OSÂ <br>
237723Â Â sysnoÂ ==Â 101Â exp-ptrcheck:Â theÂ 'impossible'Â happened:<br>
Â Â Â Â Â Â Â Â unhandledÂ syscallÂ <br>
238208Â Â is_just_below_ESPÂ doesn'tÂ takeÂ intoÂ accountÂ red-zoneÂ <br>
238345Â Â valgrindÂ passesÂ wrongÂ $0Â whenÂ executingÂ aÂ shellÂ scriptÂ <br>
238679Â Â mq_timedreceiveÂ syscallÂ doesn'tÂ flagÂ theÂ receptionÂ buffer<br>
Â Â Â Â Â Â Â Â asÂ "defined"<br>
238696Â Â fcntlÂ commandÂ F_DUPFD_CLOEXECÂ notÂ supportedÂ <br>
238713Â Â unhandledÂ instructionÂ bytes:Â 0x66Â 0xFÂ 0x29Â 0xC6Â <br>
238713Â Â unhandledÂ instructionÂ bytes:Â 0x66Â 0xFÂ 0x29Â 0xC6Â <br>
238745Â Â 3.5.0Â MakeÂ failsÂ onÂ PPCÂ AltivecÂ opcodes,Â thoughÂ configure<br>
Â Â Â Â Â Â Â Â saysÂ "AltivecÂ off"<br>
239992Â Â vexÂ amd64-&gt;IR:Â 0x48Â 0xFÂ 0xC4Â 0xC1Â 0x0Â 0x48Â <br>
240488Â Â ==Â 197988<br>
240639Â Â ==Â 212335<br>
241377Â Â ==Â 236546<br>
241903Â Â ==Â 202315<br>
241920Â Â ==Â 212335<br>
242606Â Â unhandledÂ syscall:Â setegidÂ (inÂ Ptrcheck)<br>
242814Â Â HelgrindÂ "ImpossibleÂ hasÂ happened"Â during<br>
Â Â Â Â Â Â Â Â QApplication::initInstance();Â <br>
243064Â Â ValgrindÂ attemptingÂ toÂ readÂ debugÂ informationÂ fromÂ isoÂ <br>
243270Â Â MakeÂ stackÂ unwindingÂ inÂ ValgrindÂ wrappersÂ moreÂ reliable<br>
243884Â Â exp-ptrcheck:Â theÂ 'impossibleÂ happened:Â unhandledÂ syscallÂ <br>
Â Â Â Â Â Â Â Â sysnoÂ =Â 277Â (mq_open)<br>
244009Â Â exp-ptrcheckÂ unknownÂ syscallsÂ inÂ analyzingÂ lighttpd<br>
244493Â Â ARMÂ VFPÂ d16-d31Â registersÂ supportÂ <br>
244670Â Â addÂ supportÂ forÂ audit_session_selfÂ syscallÂ onÂ MacÂ OSÂ 10.6<br>
244921Â Â TheÂ xmlÂ reportÂ ofÂ helgrindÂ toolÂ isÂ notÂ wellÂ format<br>
244923Â Â InÂ theÂ xmlÂ reportÂ file,Â theÂ &lt;preamble&gt;Â notÂ escapeÂ theÂ <br>
Â Â Â Â Â Â Â Â xmlÂ char,Â egÂ '&lt;','&amp;','&gt;'<br>
245535Â Â printÂ fullÂ pathÂ namesÂ inÂ plainÂ textÂ reportsÂ <br>
245925Â Â x86-64Â redÂ zoneÂ handlingÂ problemÂ <br>
246258Â Â ValgrindÂ notÂ catchingÂ integerÂ underrunsÂ +Â newÂ []Â s<br>
246311Â Â reg/regÂ cmpxchgÂ doesn'tÂ workÂ onÂ amd64<br>
246549Â Â unhandledÂ syscallÂ unix:277Â whileÂ testingÂ 32-bitÂ DarwinÂ appÂ <br>
246888Â Â ImproveÂ Makefile.vex.amÂ <br>
247510Â Â [OSÂ XÂ 10.6]Â MemcheckÂ reportsÂ unaddressableÂ bytesÂ passedÂ <br>
Â Â Â Â Â Â Â Â toÂ [f]chmod_extended<br>
247526Â Â IBMÂ POWER6Â (ISAÂ 2.05)Â supportÂ isÂ incomplete<br>
247561Â Â SomeÂ leakÂ testcasesÂ failsÂ dueÂ toÂ reachableÂ addressesÂ in<br>
Â Â Â Â Â Â Â Â callerÂ saveÂ regs<br>
247875Â Â sizeofIRTypeÂ toÂ handleÂ Ity_I128Â <br>
247894Â Â [PATCH]Â unhandledÂ syscallÂ sys_readaheadÂ <br>
247980Â Â Doesn'tÂ honorÂ CFLAGSÂ passedÂ toÂ configureÂ <br>
248373Â Â darwin10.suppÂ isÂ emptyÂ inÂ theÂ trunkÂ <br>
248822Â Â LinuxÂ FIBMAPÂ ioctlÂ hasÂ intÂ parameterÂ insteadÂ ofÂ long<br>
248893Â Â [PATCH]Â makeÂ readdwarf.cÂ bigÂ endianessÂ safeÂ toÂ enable<br>
Â Â Â Â Â Â Â Â unwindingÂ onÂ bigÂ endianÂ systems<br>
249224Â Â SyscallÂ 336Â notÂ supportedÂ (SYS_proc_info)Â <br>
249359Â Â ==Â 245535<br>
249775Â Â IncorrectÂ schemeÂ forÂ detectingÂ NEONÂ capabilitiesÂ ofÂ hostÂ CPU<br>
249943Â Â jniÂ JVMÂ initÂ failsÂ whenÂ usingÂ valgrind<br>
249991Â Â ValgrindÂ incorrectlyÂ declaresÂ AESKEYGENASSISTÂ support<br>
Â Â Â Â Â Â Â Â sinceÂ VEXÂ r2011<br>
249996Â Â linux/arm:Â unhandledÂ syscall:Â 181Â (__NR_pwrite64)<br>
250799Â Â frexp$fenv_access_offÂ functionÂ generatesÂ SIGILLÂ <br>
250998Â Â vexÂ x86-&gt;IR:Â unhandledÂ instructionÂ bytes:Â 0x66Â 0x66Â 0x66Â 0x2EÂ <br>
251251Â Â supportÂ pclmulqdqÂ insnÂ <br>
251362Â Â valgrind:Â ARM:Â attachÂ toÂ debuggerÂ eitherÂ failsÂ orÂ provokes<br>
Â Â Â Â Â Â Â Â kernelÂ oopsÂ <br>
251674Â Â UnhandledÂ syscallÂ 294<br>
251818Â Â ==Â 254550<br>
<br>
254257Â Â AddÂ supportÂ forÂ debugfilesÂ foundÂ byÂ build-id<br>
254550Â Â [PATCH]Â ImplementÂ DW_ATE_UTFÂ (DWARF4)<br>
254646Â Â WrappedÂ functionsÂ causeÂ stackÂ misalignmentÂ onÂ OSÂ X<br>
Â Â Â Â Â Â Â Â (andÂ possiblyÂ Linux)<br>
254556Â Â ARM:Â valgrindingÂ anythingÂ failsÂ withÂ SIGSEGVÂ forÂ 0xFFFF0FA0<br>
<br>
(3.6.0:Â 21Â OctoberÂ 2010,Â vexÂ r2068,Â valgrindÂ r11471).<br>
<br>
<br>
<br>
ReleaseÂ 3.5.0Â (19Â AugustÂ 2009)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
3.5.0Â isÂ aÂ featureÂ releaseÂ withÂ manyÂ significantÂ improvementsÂ andÂ the<br>
usualÂ collectionÂ ofÂ bugÂ fixes.Â Â TheÂ mainÂ improvementÂ isÂ thatÂ Valgrind<br>
nowÂ worksÂ onÂ MacÂ OSÂ X.<br>
<br>
ThisÂ releaseÂ supportsÂ X86/Linux,Â AMD64/Linux,Â PPC32/Linux,Â PPC64/Linux<br>
andÂ X86/Darwin.Â Â SupportÂ forÂ recentÂ distrosÂ andÂ toolchainÂ components<br>
(glibcÂ 2.10,Â gccÂ 4.5)Â hasÂ beenÂ added.<br>
<br>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â -------------------------<br>
<br>
HereÂ isÂ aÂ shortÂ summaryÂ ofÂ theÂ changes.Â Â DetailsÂ areÂ shownÂ further<br>
down:<br>
<br>
*Â SupportÂ forÂ MacÂ OSÂ XÂ (10.5.x).<br>
<br>
*Â ImprovementsÂ andÂ simplificationsÂ toÂ Memcheck'sÂ leakÂ checker.<br>
<br>
*Â ClarificationÂ andÂ simplificationsÂ inÂ variousÂ aspectsÂ ofÂ Valgrind's<br>
Â Â textÂ output.<br>
<br>
*Â XMLÂ outputÂ forÂ HelgrindÂ andÂ Ptrcheck.<br>
<br>
*Â PerformanceÂ andÂ stabilityÂ improvementsÂ forÂ HelgrindÂ andÂ DRD.<br>
<br>
*Â GenuinelyÂ atomicÂ supportÂ forÂ x86/amd64/ppcÂ atomicÂ instructions.<br>
<br>
*Â AÂ newÂ experimentalÂ tool,Â BBV,Â usefulÂ forÂ computerÂ architecture<br>
Â Â research.<br>
<br>
*Â ImprovedÂ WineÂ support,Â includingÂ abilityÂ toÂ readÂ WindowsÂ PDB<br>
Â Â debuginfo.<br>
<br>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â -------------------------<br>
<br>
HereÂ areÂ detailsÂ ofÂ theÂ aboveÂ changes,Â followedÂ byÂ descriptionsÂ of<br>
manyÂ otherÂ minorÂ changes,Â andÂ aÂ listÂ ofÂ fixedÂ bugs.<br>
<br>
<br>
*Â ValgrindÂ nowÂ runsÂ onÂ MacÂ OSÂ X.Â Â (NoteÂ thatÂ MacÂ OSÂ XÂ isÂ sometimes<br>
Â Â calledÂ "Darwin"Â becauseÂ thatÂ isÂ theÂ nameÂ ofÂ theÂ OSÂ core,Â whichÂ isÂ the<br>
Â Â levelÂ thatÂ ValgrindÂ worksÂ at.)<br>
<br>
Â Â SupportedÂ systems:<br>
<br>
Â Â -Â ItÂ requiresÂ OSÂ 10.5.xÂ (Leopard).Â Â PortingÂ toÂ 10.4.xÂ isÂ notÂ planned<br>
Â Â Â Â becauseÂ itÂ wouldÂ requireÂ workÂ andÂ 10.4Â isÂ onlyÂ becomingÂ lessÂ common.<br>
<br>
Â Â -Â 32-bitÂ programsÂ onÂ x86Â andÂ AMD64Â (a.k.aÂ x86-64)Â machinesÂ areÂ supported<br>
Â Â Â Â fairlyÂ well.Â Â ForÂ 10.5.x,Â 32-bitÂ programsÂ areÂ theÂ defaultÂ evenÂ on<br>
Â Â Â Â 64-bitÂ machines,Â soÂ itÂ handlesÂ mostÂ currentÂ programs.<br>
Â Â Â Â <br>
Â Â -Â 64-bitÂ programsÂ onÂ x86Â andÂ AMD64Â (a.k.aÂ x86-64)Â machinesÂ areÂ not<br>
Â Â Â Â officiallyÂ supported,Â butÂ simpleÂ programsÂ atÂ leastÂ willÂ probablyÂ work.<br>
Â Â Â Â However,Â start-upÂ isÂ slow.<br>
<br>
Â Â -Â PowerPCÂ machinesÂ areÂ notÂ supported.<br>
<br>
Â Â ThingsÂ thatÂ don'tÂ work:<br>
<br>
Â Â -Â TheÂ PtrcheckÂ tool.<br>
<br>
Â Â -Â Objective-CÂ garbageÂ collection.<br>
<br>
Â Â -Â --db-attach=yes.<br>
<br>
Â Â -Â IfÂ youÂ haveÂ RogueÂ Amoeba'sÂ "InstantÂ Hijack"Â programÂ installed,<br>
Â Â Â Â ValgrindÂ willÂ failÂ withÂ aÂ SIGTRAPÂ atÂ start-up.Â Â See<br>
Â Â Â Â https://bugs.kde.org/show_bug.cgi?id=193917Â forÂ detailsÂ andÂ a<br>
Â Â Â Â simpleÂ work-around.<br>
<br>
Â Â UsageÂ notes:<br>
<br>
Â Â -Â YouÂ willÂ likelyÂ findÂ --dsymutil=yesÂ aÂ usefulÂ option,Â asÂ error<br>
Â Â Â Â messagesÂ mayÂ beÂ impreciseÂ withoutÂ it.<br>
<br>
Â Â -Â MacÂ OSÂ XÂ supportÂ isÂ newÂ andÂ thereforeÂ willÂ beÂ lessÂ robustÂ thanÂ the<br>
Â Â Â Â LinuxÂ support.Â Â PleaseÂ reportÂ anyÂ bugsÂ youÂ find.<br>
<br>
Â Â -Â ThreadedÂ programsÂ mayÂ runÂ moreÂ slowlyÂ thanÂ onÂ Linux.<br>
<br>
Â Â ManyÂ thanksÂ toÂ GregÂ ParkerÂ forÂ developingÂ thisÂ portÂ overÂ severalÂ years.<br>
<br>
<br>
*Â Memcheck'sÂ leakÂ checkerÂ hasÂ beenÂ improved.Â Â <br>
<br>
Â Â -Â TheÂ resultsÂ forÂ --leak-check=summaryÂ nowÂ matchÂ theÂ summaryÂ results<br>
Â Â Â Â forÂ --leak-check=full.Â Â PreviouslyÂ theyÂ couldÂ differÂ because<br>
Â Â Â Â --leak-check=summaryÂ countedÂ "indirectlyÂ lost"Â blocksÂ and<br>
Â Â Â Â "suppressed"Â blocksÂ asÂ "definitelyÂ lost".<br>
<br>
Â Â -Â BlocksÂ thatÂ areÂ onlyÂ reachableÂ viaÂ atÂ leastÂ oneÂ interior-pointer,<br>
Â Â Â Â butÂ areÂ directlyÂ pointedÂ toÂ byÂ aÂ start-pointer,Â wereÂ previously<br>
Â Â Â Â markedÂ asÂ "stillÂ reachable".Â Â TheyÂ areÂ nowÂ correctlyÂ markedÂ as<br>
Â Â Â Â "possiblyÂ lost".<br>
<br>
Â Â -Â TheÂ defaultÂ valueÂ forÂ theÂ --leak-resolutionÂ optionÂ hasÂ been<br>
Â Â Â Â changedÂ fromÂ "low"Â toÂ "high".Â Â InÂ general,Â thisÂ meansÂ thatÂ more<br>
Â Â Â Â leakÂ reportsÂ willÂ beÂ produced,Â butÂ eachÂ leakÂ reportÂ willÂ describe<br>
Â Â Â Â fewerÂ leakedÂ blocks.<br>
<br>
Â Â -Â WithÂ --leak-check=full,Â "definitelyÂ lost"Â andÂ "possiblyÂ lost"<br>
Â Â Â Â leaksÂ areÂ nowÂ consideredÂ asÂ properÂ errors,Â ie.Â theyÂ areÂ counted<br>
Â Â Â Â forÂ theÂ "ERRORÂ SUMMARY"Â andÂ affectÂ theÂ behaviourÂ of<br>
Â Â Â Â --error-exitcode.Â Â TheseÂ leaksÂ areÂ notÂ countedÂ asÂ errorsÂ if<br>
Â Â Â Â --leak-check=summaryÂ isÂ specified,Â however.<br>
<br>
Â Â -Â DocumentationÂ forÂ theÂ leakÂ checkerÂ hasÂ beenÂ improved.<br>
<br>
<br>
*Â VariousÂ aspectsÂ ofÂ Valgrind'sÂ textÂ outputÂ haveÂ changed.<br>
<br>
Â Â -Â Valgrind'sÂ start-upÂ messageÂ hasÂ changed.Â Â ItÂ isÂ shorterÂ butÂ also<br>
Â Â Â Â includesÂ theÂ commandÂ beingÂ run,Â whichÂ makesÂ itÂ easierÂ toÂ use<br>
Â Â Â Â --trace-children=yes.Â Â AnÂ example:<br>
<br>
Â Â -Â Valgrind'sÂ shut-downÂ messagesÂ haveÂ alsoÂ changed.Â Â ThisÂ isÂ most<br>
Â Â Â Â noticeableÂ withÂ Memcheck,Â whereÂ theÂ leakÂ summaryÂ nowÂ occursÂ before<br>
Â Â Â Â theÂ errorÂ summary.Â Â ThisÂ changeÂ wasÂ necessaryÂ toÂ allowÂ leaksÂ toÂ be<br>
Â Â Â Â countedÂ asÂ properÂ errorsÂ (seeÂ theÂ descriptionÂ ofÂ theÂ leakÂ checker<br>
Â Â Â Â changesÂ aboveÂ forÂ moreÂ details).Â Â ThisÂ wasÂ alsoÂ necessaryÂ toÂ fixÂ a<br>
Â Â Â Â longstandingÂ bugÂ inÂ whichÂ usesÂ ofÂ suppressionsÂ againstÂ leaksÂ were<br>
Â Â Â Â notÂ "counted",Â leadingÂ toÂ difficultiesÂ inÂ maintainingÂ suppression<br>
Â Â Â Â filesÂ (seeÂ https://bugs.kde.org/show_bug.cgi?id=186790).<br>
<br>
Â Â -Â BehaviorÂ ofÂ -vÂ hasÂ changed.Â Â InÂ previousÂ versions,Â -vÂ printedÂ out<br>
Â Â Â Â aÂ mixtureÂ ofÂ marginally-user-usefulÂ information,Â andÂ tool/core<br>
Â Â Â Â statistics.Â Â TheÂ statisticsÂ printingÂ hasÂ nowÂ beenÂ movedÂ toÂ itsÂ own<br>
Â Â Â Â flag,Â --stats=yes.Â Â ThisÂ meansÂ -vÂ isÂ lessÂ verboseÂ andÂ moreÂ likely<br>
Â Â Â Â toÂ conveyÂ usefulÂ end-userÂ information.<br>
<br>
Â Â -Â TheÂ formatÂ ofÂ someÂ (non-XML)Â stackÂ traceÂ entriesÂ hasÂ changedÂ a<br>
Â Â Â Â little.Â Â PreviouslyÂ thereÂ wereÂ sixÂ possibleÂ forms:<br>
<br>
Â Â Â Â Â Â 0x80483BF:Â reallyÂ (a.c:20)<br>
Â Â Â Â Â Â 0x80483BF:Â reallyÂ (inÂ /foo/a.out)<br>
Â Â Â Â Â Â 0x80483BF:Â really<br>
Â Â Â Â Â Â 0x80483BF:Â (withinÂ /foo/a.out)<br>
Â Â Â Â Â Â 0x80483BF:Â ???Â (a.c:20)<br>
Â Â Â Â Â Â 0x80483BF:Â ???<br>
<br>
Â Â Â Â TheÂ thirdÂ andÂ fourthÂ ofÂ theseÂ formsÂ haveÂ beenÂ madeÂ moreÂ consistent<br>
Â Â Â Â withÂ theÂ others.Â Â TheÂ sixÂ possibleÂ formsÂ areÂ now:<br>
Â Â <br>
Â Â Â Â Â Â 0x80483BF:Â reallyÂ (a.c:20)<br>
Â Â Â Â Â Â 0x80483BF:Â reallyÂ (inÂ /foo/a.out)<br>
Â Â Â Â Â Â 0x80483BF:Â reallyÂ (inÂ ???)<br>
Â Â Â Â Â Â 0x80483BF:Â ???Â (inÂ /foo/a.out)<br>
Â Â Â Â Â Â 0x80483BF:Â ???Â (a.c:20)<br>
Â Â Â Â Â Â 0x80483BF:Â ???<br>
<br>
Â Â Â Â StackÂ tracesÂ producedÂ whenÂ --xml=yesÂ isÂ specifiedÂ areÂ different<br>
Â Â Â Â andÂ unchanged.<br>
<br>
<br>
*Â HelgrindÂ andÂ PtrcheckÂ nowÂ supportÂ XMLÂ output,Â soÂ theyÂ canÂ beÂ used<br>
Â Â fromÂ GUIÂ tools.Â Â Also,Â theÂ XMLÂ outputÂ mechanismÂ hasÂ been<br>
Â Â overhauled.<br>
<br>
Â Â -Â TheÂ XMLÂ formatÂ hasÂ beenÂ overhauledÂ andÂ generalised,Â soÂ itÂ isÂ more<br>
Â Â Â Â suitableÂ forÂ errorÂ reportingÂ toolsÂ inÂ general.Â Â TheÂ Memcheck<br>
Â Â Â Â specificÂ aspectsÂ ofÂ itÂ haveÂ beenÂ removed.Â Â TheÂ newÂ format,Â which<br>
Â Â Â Â isÂ anÂ evolutionÂ ofÂ theÂ oldÂ format,Â isÂ describedÂ in<br>
Â Â Â Â docs/internals/xml-output-protocol4.txt.<br>
<br>
Â Â -Â MemcheckÂ hasÂ beenÂ updatedÂ toÂ useÂ theÂ newÂ format.<br>
<br>
Â Â -Â HelgrindÂ andÂ PtrcheckÂ areÂ nowÂ ableÂ toÂ emitÂ outputÂ inÂ thisÂ format.<br>
<br>
Â Â -Â TheÂ XMLÂ outputÂ mechanismÂ hasÂ beenÂ overhauled.Â Â XMLÂ isÂ nowÂ output<br>
Â Â Â Â toÂ itsÂ ownÂ fileÂ descriptor,Â whichÂ meansÂ that:<br>
<br>
Â Â Â Â *Â ValgrindÂ canÂ outputÂ textÂ andÂ XMLÂ independently.<br>
<br>
Â Â Â Â *Â TheÂ longstandingÂ problemÂ ofÂ XMLÂ outputÂ beingÂ corruptedÂ byÂ <br>
Â Â Â Â Â Â unexpectedÂ un-taggedÂ textÂ messagesÂ Â isÂ solved.<br>
<br>
Â Â Â Â AsÂ before,Â theÂ destinationÂ forÂ textÂ outputÂ isÂ specifiedÂ using<br>
Â Â Â Â --log-file=,Â --log-fd=Â orÂ --log-socket=.<br>
<br>
Â Â Â Â AsÂ before,Â XMLÂ outputÂ forÂ aÂ toolÂ isÂ enabledÂ usingÂ --xml=yes.<br>
<br>
Â Â Â Â BecauseÂ there'sÂ aÂ newÂ XMLÂ outputÂ channel,Â theÂ XMLÂ output<br>
Â Â Â Â destinationÂ isÂ nowÂ specifiedÂ byÂ --xml-file=,Â --xml-fd=Â or<br>
Â Â Â Â --xml-socket=.<br>
<br>
Â Â Â Â InitialÂ feedbackÂ hasÂ shownÂ thisÂ causesÂ someÂ confusion.Â Â To<br>
Â Â Â Â clarify,Â theÂ twoÂ envisagedÂ usageÂ scenariosÂ are:<br>
<br>
Â Â Â Â (1)Â NormalÂ textÂ output.Â Â InÂ thisÂ case,Â doÂ notÂ specifyÂ --xml=yes<br>
Â Â Â Â Â Â Â Â norÂ anyÂ ofÂ --xml-file=,Â --xml-fd=Â orÂ --xml-socket=.<br>
<br>
Â Â Â Â (2)Â XMLÂ output.Â Â InÂ thisÂ case,Â specifyÂ --xml=yes,Â andÂ oneÂ of<br>
Â Â Â Â Â Â Â Â --xml-file=,Â --xml-fd=Â orÂ --xml-socket=Â toÂ selectÂ theÂ XML<br>
Â Â Â Â Â Â Â Â destination,Â oneÂ ofÂ --log-file=,Â --log-fd=Â orÂ --log-socket=<br>
Â Â Â Â Â Â Â Â toÂ selectÂ theÂ destinationÂ forÂ anyÂ remainingÂ textÂ messages,<br>
Â Â Â Â Â Â Â Â and,Â importantly,Â -q.<br>
<br>
Â Â Â Â Â Â Â Â -qÂ makesÂ ValgrindÂ completelyÂ silentÂ onÂ theÂ textÂ channel,<br>
Â Â Â Â Â Â Â Â exceptÂ inÂ theÂ caseÂ ofÂ criticalÂ failures,Â suchÂ asÂ Valgrind<br>
Â Â Â Â Â Â Â Â itselfÂ segfaulting,Â orÂ failingÂ toÂ readÂ debuggingÂ information.<br>
Â Â Â Â Â Â Â Â Hence,Â inÂ thisÂ scenario,Â itÂ sufficesÂ toÂ checkÂ whetherÂ orÂ not<br>
Â Â Â Â Â Â Â Â anyÂ outputÂ appearedÂ onÂ theÂ textÂ channel.Â Â IfÂ yes,Â thenÂ itÂ is<br>
Â Â Â Â Â Â Â Â likelyÂ toÂ beÂ aÂ criticalÂ errorÂ whichÂ shouldÂ beÂ broughtÂ toÂ the<br>
Â Â Â Â Â Â Â Â attentionÂ ofÂ theÂ user.Â Â IfÂ noÂ (theÂ textÂ channelÂ producedÂ no<br>
Â Â Â Â Â Â Â Â output)Â thenÂ itÂ canÂ beÂ assumedÂ thatÂ theÂ runÂ wasÂ successful.<br>
<br>
Â Â Â Â Â Â Â Â ThisÂ allowsÂ GUIsÂ toÂ makeÂ theÂ criticalÂ distinctionÂ theyÂ needÂ to<br>
Â Â Â Â Â Â Â Â makeÂ (didÂ theÂ runÂ failÂ orÂ not?)Â withoutÂ havingÂ toÂ searchÂ or<br>
Â Â Â Â Â Â Â Â filterÂ theÂ textÂ outputÂ channelÂ inÂ anyÂ way.<br>
<br>
Â Â Â Â ItÂ isÂ alsoÂ recommendedÂ toÂ useÂ --child-silent-after-fork=yesÂ in<br>
Â Â Â Â scenarioÂ (2).<br>
<br>
<br>
*Â ImprovementsÂ andÂ changesÂ inÂ Helgrind:<br>
<br>
Â Â -Â XMLÂ output,Â asÂ describedÂ above<br>
<br>
Â Â -Â ChecksÂ forÂ consistentÂ associationÂ betweenÂ pthreadÂ condition<br>
Â Â Â Â variablesÂ andÂ theirÂ associatedÂ mutexesÂ areÂ nowÂ performed.<br>
<br>
Â Â -Â pthread_spinlockÂ functionsÂ areÂ supported.<br>
<br>
Â Â -Â ModestÂ performanceÂ improvements.<br>
<br>
Â Â -Â InitialÂ (skeletal)Â supportÂ forÂ describingÂ theÂ behaviourÂ of<br>
Â Â Â Â non-POSIXÂ synchronisationÂ objectsÂ throughÂ ThreadSanitizer<br>
Â Â Â Â compatibleÂ ANNOTATE_*Â macros.<br>
<br>
Â Â -Â MoreÂ controllableÂ tradeoffsÂ betweenÂ performanceÂ andÂ theÂ levelÂ of<br>
Â Â Â Â detailÂ ofÂ "previous"Â accessesÂ inÂ aÂ race.Â Â ThereÂ areÂ nowÂ three<br>
Â Â Â Â settings:<br>
<br>
Â Â Â Â *Â --history-level=full.Â Â ThisÂ isÂ theÂ default,Â andÂ wasÂ alsoÂ the<br>
Â Â Â Â Â Â defaultÂ inÂ 3.4.x.Â Â ItÂ showsÂ bothÂ stacksÂ involvedÂ inÂ aÂ race,Â but<br>
Â Â Â Â Â Â requiresÂ aÂ lotÂ ofÂ memoryÂ andÂ canÂ beÂ veryÂ slowÂ inÂ programsÂ that<br>
Â Â Â Â Â Â doÂ manyÂ inter-threadÂ synchronisationÂ events.<br>
<br>
Â Â Â Â *Â --history-level=none.Â Â ThisÂ onlyÂ showsÂ theÂ laterÂ stackÂ involved<br>
Â Â Â Â Â Â inÂ aÂ race.Â Â ThisÂ canÂ beÂ muchÂ fasterÂ thanÂ --history-level=full,<br>
Â Â Â Â Â Â butÂ makesÂ itÂ muchÂ moreÂ difficultÂ toÂ findÂ theÂ otherÂ access<br>
Â Â Â Â Â Â involvedÂ inÂ theÂ race.<br>
<br>
Â Â Â Â TheÂ newÂ intermediateÂ settingÂ is<br>
<br>
Â Â Â Â *Â --history-level=approx<br>
<br>
Â Â Â Â Â Â ForÂ theÂ earlierÂ (other)Â access,Â twoÂ stacksÂ areÂ presented.Â Â The<br>
Â Â Â Â Â Â earlierÂ accessÂ isÂ guaranteedÂ toÂ beÂ somewhereÂ inÂ betweenÂ theÂ two<br>
Â Â Â Â Â Â programÂ pointsÂ denotedÂ byÂ thoseÂ stacks.Â Â ThisÂ isÂ notÂ asÂ useful<br>
Â Â Â Â Â Â asÂ showingÂ theÂ exactÂ stackÂ forÂ theÂ previousÂ accessÂ (asÂ per<br>
Â Â Â Â Â Â --history-level=full),Â butÂ itÂ isÂ betterÂ thanÂ nothing,Â andÂ it's<br>
Â Â Â Â Â Â almostÂ asÂ fastÂ asÂ --history-level=none.<br>
<br>
<br>
*Â NewÂ featuresÂ andÂ improvementsÂ inÂ DRD:<br>
<br>
Â Â -Â TheÂ errorÂ messagesÂ printedÂ byÂ DRDÂ areÂ nowÂ easierÂ toÂ interpret.<br>
Â Â Â Â InsteadÂ ofÂ usingÂ twoÂ differentÂ numbersÂ toÂ identifyÂ eachÂ thread<br>
Â Â Â Â (ValgrindÂ threadÂ IDÂ andÂ DRDÂ threadÂ ID),Â DRDÂ doesÂ nowÂ identify<br>
Â Â Â Â threadsÂ viaÂ aÂ singleÂ numberÂ (theÂ DRDÂ threadÂ ID).Â Â Furthermore<br>
Â Â Â Â "firstÂ observedÂ at"Â informationÂ isÂ nowÂ printedÂ forÂ allÂ error<br>
Â Â Â Â messagesÂ relatedÂ toÂ synchronizationÂ objects.<br>
<br>
Â Â -Â AddedÂ supportÂ forÂ namedÂ semaphoresÂ (sem_open()Â andÂ sem_close()).<br>
<br>
Â Â -Â RaceÂ conditionsÂ betweenÂ pthread_barrier_wait()Â and<br>
Â Â Â Â pthread_barrier_destroy()Â callsÂ areÂ nowÂ reported.<br>
<br>
Â Â -Â AddedÂ supportÂ forÂ customÂ allocatorsÂ throughÂ theÂ macros<br>
Â Â Â Â VALGRIND_MALLOCLIKE_BLOCK()Â VALGRIND_FREELIKE_BLOCK()Â (definedÂ in<br>
Â Â Â Â inÂ &lt;valgrind/valgrind.h&gt;).Â AnÂ alternativeÂ forÂ theseÂ twoÂ macrosÂ is<br>
Â Â Â Â theÂ newÂ clientÂ requestÂ VG_USERREQ__DRD_CLEAN_MEMORYÂ (definedÂ in<br>
Â Â Â Â &lt;valgrind/drd.h&gt;).<br>
<br>
Â Â -Â AddedÂ supportÂ forÂ annotatingÂ non-POSIXÂ synchronizationÂ objects<br>
Â Â Â Â throughÂ severalÂ newÂ ANNOTATE_*()Â macros.<br>
<br>
Â Â -Â OpenMP:Â addedÂ supportÂ forÂ theÂ OpenMPÂ runtimeÂ (libgomp)Â included<br>
Â Â Â Â withÂ gccÂ versionsÂ 4.3.0Â andÂ 4.4.0.<br>
<br>
Â Â -Â FasterÂ operation.<br>
<br>
Â Â -Â AddedÂ twoÂ newÂ command-lineÂ optionsÂ (--first-race-onlyÂ and<br>
Â Â Â Â --segment-merging-interval).<br>
<br>
<br>
*Â GenuinelyÂ atomicÂ supportÂ forÂ x86/amd64/ppcÂ atomicÂ instructions<br>
<br>
Â Â ValgrindÂ willÂ nowÂ preserveÂ (memory-access)Â atomicityÂ ofÂ LOCK-<br>
Â Â prefixedÂ x86/amd64Â instructions,Â andÂ anyÂ othersÂ implyingÂ aÂ global<br>
Â Â busÂ lock.Â Â DittoÂ forÂ PowerPCÂ l{w,d}arx/st{w,d}cx.Â instructions.<br>
<br>
Â Â ThisÂ meansÂ thatÂ ValgrindedÂ processesÂ willÂ "playÂ nicely"Â in<br>
Â Â situationsÂ whereÂ communicationÂ withÂ otherÂ processes,Â orÂ theÂ kernel,<br>
Â Â isÂ doneÂ throughÂ sharedÂ memoryÂ andÂ coordinatedÂ withÂ suchÂ atomic<br>
Â Â instructions.Â Â PriorÂ toÂ thisÂ change,Â suchÂ arrangementsÂ usually<br>
Â Â resultedÂ inÂ hangs,Â racesÂ orÂ otherÂ synchronisationÂ failures,Â because<br>
Â Â ValgrindÂ didÂ notÂ honourÂ atomicityÂ ofÂ suchÂ instructions.<br>
<br>
<br>
*Â AÂ newÂ experimentalÂ tool,Â BBV,Â hasÂ beenÂ added.Â Â BBVÂ generatesÂ basic<br>
Â Â blockÂ vectorsÂ forÂ useÂ withÂ theÂ SimPointÂ analysisÂ tool,Â whichÂ allows<br>
Â Â aÂ program'sÂ overallÂ behaviourÂ toÂ beÂ approximatedÂ byÂ runningÂ onlyÂ a<br>
Â Â fractionÂ ofÂ it.Â Â ThisÂ isÂ usefulÂ forÂ computerÂ architecture<br>
Â Â researchers.Â Â YouÂ canÂ runÂ BBVÂ byÂ specifyingÂ --tool=exp-bbvÂ (the<br>
Â Â "exp-"Â prefixÂ isÂ shortÂ forÂ "experimental").Â Â BBVÂ wasÂ writtenÂ by<br>
Â Â VinceÂ Weaver.<br>
<br>
<br>
*Â ModestlyÂ improvedÂ supportÂ forÂ runningÂ WindowsÂ applicationsÂ under<br>
Â Â Wine.Â Â InÂ particular,Â initialÂ supportÂ forÂ readingÂ WindowsÂ .PDBÂ debug<br>
Â Â informationÂ hasÂ beenÂ added.<br>
<br>
<br>
*Â AÂ newÂ MemcheckÂ clientÂ requestÂ VALGRIND_COUNT_LEAK_BLOCKSÂ hasÂ been<br>
Â Â added.Â Â ItÂ isÂ similarÂ toÂ VALGRIND_COUNT_LEAKSÂ butÂ countsÂ blocks<br>
Â Â insteadÂ ofÂ bytes.<br>
<br>
<br>
*Â TheÂ ValgrindÂ clientÂ requestsÂ VALGRIND_PRINTFÂ and<br>
Â Â VALGRIND_PRINTF_BACKTRACEÂ haveÂ beenÂ changedÂ slightly.Â Â Previously,<br>
Â Â theÂ stringÂ wasÂ alwaysÂ printedÂ immediatelyÂ onÂ itsÂ ownÂ line.Â Â Now,Â the<br>
Â Â stringÂ willÂ beÂ addedÂ toÂ aÂ bufferÂ butÂ notÂ printedÂ untilÂ aÂ newlineÂ is<br>
Â Â encountered,Â orÂ otherÂ ValgrindÂ outputÂ isÂ printedÂ (noteÂ thatÂ for<br>
Â Â VALGRIND_PRINTF_BACKTRACE,Â theÂ back-traceÂ itselfÂ isÂ considered<br>
Â Â "otherÂ ValgrindÂ output").Â Â ThisÂ allowsÂ youÂ toÂ useÂ multiple<br>
Â Â VALGRIND_PRINTFÂ callsÂ toÂ buildÂ upÂ aÂ singleÂ outputÂ line,Â andÂ alsoÂ to<br>
Â Â printÂ multipleÂ outputÂ linesÂ withÂ aÂ singleÂ requestÂ (byÂ embedding<br>
Â Â multipleÂ newlinesÂ inÂ theÂ string).<br>
<br>
<br>
*Â TheÂ graphsÂ drawnÂ byÂ Massif'sÂ ms_printÂ programÂ haveÂ changedÂ slightly:<br>
<br>
Â Â -Â TheÂ half-heightÂ charsÂ '.'Â andÂ ','Â areÂ noÂ longerÂ drawn,Â because<br>
Â Â Â Â theyÂ areÂ confusing.Â Â TheÂ --yÂ optionÂ canÂ beÂ usedÂ ifÂ theÂ default<br>
Â Â Â Â y-resolutionÂ isÂ notÂ highÂ enough.<br>
<br>
Â Â -Â HorizontalÂ linesÂ areÂ nowÂ drawnÂ afterÂ theÂ topÂ ofÂ aÂ snapshotÂ if<br>
Â Â Â Â thereÂ isÂ aÂ gapÂ untilÂ theÂ nextÂ snapshot.Â Â ThisÂ makesÂ itÂ clearÂ that<br>
Â Â Â Â theÂ memoryÂ usageÂ hasÂ notÂ droppedÂ toÂ zeroÂ betweenÂ snapshots.<br>
<br>
<br>
*Â SomethingÂ thatÂ happenedÂ inÂ 3.4.0,Â butÂ wasn'tÂ clearlyÂ announced:Â the<br>
Â Â optionÂ --read-var-info=yesÂ canÂ beÂ usedÂ byÂ someÂ toolsÂ (Memcheck,<br>
Â Â HelgrindÂ andÂ DRD).Â Â WhenÂ enabled,Â itÂ causesÂ ValgrindÂ toÂ readÂ DWARF3<br>
Â Â variableÂ typeÂ andÂ locationÂ information.Â Â ThisÂ makesÂ thoseÂ tools<br>
Â Â startÂ upÂ moreÂ slowlyÂ andÂ increasesÂ memoryÂ consumption,Â but<br>
Â Â descriptionsÂ ofÂ dataÂ addressesÂ inÂ errorÂ messagesÂ becomeÂ more<br>
Â Â detailed.<br>
<br>
<br>
*Â exp-Omega,Â anÂ experimentalÂ instantaneousÂ leak-detectingÂ tool,Â was<br>
Â Â disabledÂ inÂ 3.4.0Â dueÂ toÂ aÂ lackÂ ofÂ interestÂ andÂ maintenance,<br>
Â Â althoughÂ theÂ sourceÂ codeÂ wasÂ stillÂ inÂ theÂ distribution.Â Â TheÂ source<br>
Â Â codeÂ hasÂ nowÂ beenÂ removedÂ fromÂ theÂ distribution.Â Â ForÂ anyone<br>
Â Â interested,Â theÂ removalÂ occurredÂ inÂ SVNÂ revisionÂ r10247.<br>
<br>
<br>
*Â SomeÂ changesÂ haveÂ beenÂ madeÂ toÂ theÂ buildÂ system.<br>
<br>
Â Â -Â VEX/Â isÂ nowÂ integratedÂ properlyÂ intoÂ theÂ buildÂ system.Â Â ThisÂ means<br>
Â Â Â Â thatÂ dependencyÂ trackingÂ withinÂ VEX/Â nowÂ worksÂ properly,Â "make<br>
Â Â Â Â install"Â willÂ workÂ withoutÂ requiringÂ "make"Â beforeÂ it,Â and<br>
Â Â Â Â parallelÂ buildsÂ (ie.Â 'makeÂ -j')Â nowÂ workÂ (previouslyÂ a<br>
Â Â Â Â .NOTPARALLELÂ directiveÂ wasÂ usedÂ toÂ serializeÂ builds,Â ie.Â 'makeÂ -j'<br>
Â Â Â Â wasÂ effectivelyÂ ignored).<br>
<br>
Â Â -Â TheÂ --with-vexÂ configureÂ optionÂ hasÂ beenÂ removed.Â Â ItÂ wasÂ of<br>
Â Â Â Â littleÂ useÂ andÂ removingÂ itÂ simplifiedÂ theÂ buildÂ system.<br>
<br>
Â Â -Â TheÂ locationÂ ofÂ someÂ installÂ filesÂ hasÂ changed.Â Â ThisÂ shouldÂ not<br>
Â Â Â Â affectÂ mostÂ users.Â Â ThoseÂ whoÂ mightÂ beÂ affected:<br>
<br>
Â Â Â Â *Â ForÂ peopleÂ whoÂ useÂ ValgrindÂ withÂ MPIÂ programs,Â theÂ installed<br>
Â Â Â Â Â Â libmpiwrap.soÂ libraryÂ hasÂ movedÂ from<br>
Â Â Â Â Â Â $(INSTALL)/&lt;platform&gt;/libmpiwrap.soÂ to<br>
Â Â Â Â Â Â $(INSTALL)/libmpiwrap-&lt;platform&gt;.so.<br>
<br>
Â Â Â Â *Â ForÂ peopleÂ whoÂ distributeÂ standaloneÂ ValgrindÂ tools,Â the<br>
Â Â Â Â Â Â installedÂ librariesÂ suchÂ asÂ $(INSTALL)/&lt;platform&gt;/libcoregrind.a<br>
Â Â Â Â Â Â haveÂ movedÂ toÂ $(INSTALL)/libcoregrind-&lt;platform&gt;.a.<br>
<br>
Â Â Â Â TheseÂ changesÂ simplifyÂ theÂ buildÂ system.<br>
<br>
Â Â -Â Previously,Â allÂ theÂ distributedÂ suppressionÂ (*.supp)Â filesÂ were<br>
Â Â Â Â installed.Â Â Now,Â onlyÂ default.suppÂ isÂ installed.Â Â ThisÂ shouldÂ not<br>
Â Â Â Â affectÂ usersÂ asÂ theÂ otherÂ installedÂ suppressionÂ filesÂ wereÂ not<br>
Â Â Â Â read;Â theÂ factÂ thatÂ theyÂ wereÂ installedÂ wasÂ aÂ mistake.<br>
<br>
<br>
*Â KNOWNÂ LIMITATIONS:<br>
<br>
Â Â -Â MemcheckÂ isÂ unusableÂ withÂ theÂ IntelÂ compilerÂ suiteÂ versionÂ 11.1,<br>
Â Â Â Â whenÂ itÂ generatesÂ codeÂ forÂ SSE2-and-aboveÂ capableÂ targets.Â Â This<br>
Â Â Â Â isÂ becauseÂ ofÂ icc'sÂ useÂ ofÂ highlyÂ optimisedÂ inlinedÂ strlen<br>
Â Â Â Â implementations.Â Â ItÂ causesÂ MemcheckÂ toÂ reportÂ hugeÂ numbersÂ of<br>
Â Â Â Â falseÂ errorsÂ evenÂ inÂ simpleÂ programs.Â Â HelgrindÂ andÂ DRDÂ mayÂ also<br>
Â Â Â Â haveÂ problems.<br>
<br>
Â Â Â Â VersionsÂ 11.0Â andÂ earlierÂ mayÂ beÂ OK,Â butÂ thisÂ hasÂ notÂ been<br>
Â Â Â Â properlyÂ tested.<br>
<br>
<br>
TheÂ followingÂ bugsÂ haveÂ beenÂ fixedÂ orÂ resolved.Â Â NoteÂ thatÂ "n-i-bz"<br>
standsÂ forÂ "notÂ inÂ bugzilla"Â --Â thatÂ is,Â aÂ bugÂ thatÂ wasÂ reportedÂ toÂ us<br>
butÂ neverÂ gotÂ aÂ bugzillaÂ entry.Â Â WeÂ encourageÂ youÂ toÂ fileÂ bugsÂ in<br>
bugzillaÂ (http://bugs.kde.org/enter_valgrind_bug.cgi)Â ratherÂ than<br>
mailingÂ theÂ developersÂ (orÂ mailingÂ lists)Â directlyÂ --Â bugsÂ thatÂ are<br>
notÂ enteredÂ intoÂ bugzillaÂ tendÂ toÂ getÂ forgottenÂ aboutÂ orÂ ignored.<br>
<br>
ToÂ seeÂ detailsÂ ofÂ aÂ givenÂ bug,Â visit<br>
https://bugs.kde.org/show_bug.cgi?id=XXXXXX<br>
whereÂ XXXXXXÂ isÂ theÂ bugÂ numberÂ asÂ listedÂ below.<br>
<br>
84303Â Â Â HowÂ aboutÂ aÂ LockCheckÂ tool?Â <br>
91633Â Â Â dereferenceÂ ofÂ nullÂ ptrÂ inÂ vgPlain_st_basetypeÂ <br>
97452Â Â Â ValgrindÂ doesn'tÂ reportÂ anyÂ pthreadsÂ problemsÂ <br>
100628Â Â leak-checkÂ getsÂ assertionÂ failureÂ whenÂ usingÂ <br>
Â Â Â Â Â Â Â Â VALGRIND_MALLOCLIKE_BLOCKÂ onÂ malloc()edÂ memoryÂ <br>
108528Â Â NPTLÂ pthreadÂ cleanupÂ handlersÂ notÂ calledÂ <br>
110126Â Â ValgrindÂ 2.4.1Â configure.inÂ tramplesÂ CFLAGSÂ <br>
110128Â Â mallinfoÂ isÂ notÂ implemented...Â <br>
110770Â Â VEX:Â GeneratedÂ filesÂ notÂ alwaysÂ updatedÂ whenÂ makingÂ valgrind<br>
111102Â Â Memcheck:Â problemsÂ withÂ largeÂ (memoryÂ footprint)Â applicationsÂ <br>
115673Â Â Vex'sÂ decoderÂ shouldÂ neverÂ assertÂ <br>
117564Â Â FalseÂ positive:Â SyscallÂ paramÂ clone(child_tidptr)Â contains<br>
Â Â Â Â Â Â Â Â uninitialisedÂ byte(s)Â <br>
119404Â Â executingÂ sshÂ fromÂ insideÂ valgrindÂ failsÂ <br>
133679Â Â CallgrindÂ doesÂ notÂ writeÂ pathÂ namesÂ toÂ sourcesÂ withÂ dwarfÂ debug<br>
Â Â Â Â Â Â Â Â info<br>
135847Â Â configure.inÂ problemÂ withÂ nonÂ gnuÂ compilersÂ (andÂ possibleÂ fix)Â <br>
136154Â Â threads.c:273Â (vgCallgrind_post_signal):Â Assertion<br>
Â Â Â Â Â Â Â Â '*(vgCallgrind_current_fn_stack.top)Â ==Â 0'Â failed.Â <br>
136230Â Â memcheckÂ reportsÂ "possiblyÂ lost",Â shouldÂ beÂ "stillÂ reachable"Â <br>
137073Â Â NULLÂ argÂ toÂ MALLOCLIKE_BLOCKÂ causesÂ crashÂ <br>
137904Â Â ValgrindÂ reportsÂ aÂ memoryÂ leakÂ whenÂ usingÂ POSIXÂ threads,<br>
Â Â Â Â Â Â Â Â whileÂ itÂ shouldn'tÂ <br>
139076Â Â valgrindÂ VT_GETSTATEÂ errorÂ <br>
142228Â Â complaintÂ ofÂ elf_dynamic_do_relaÂ inÂ trivialÂ usageÂ <br>
145347Â Â spuriousÂ warningÂ withÂ USBDEVFS_REAPURBÂ <br>
148441Â Â (wine)Â can'tÂ findÂ memoryÂ leakÂ inÂ Wine,Â win32Â binaryÂ <br>
Â Â Â Â Â Â Â Â executableÂ file.<br>
148742Â Â Leak-checkÂ failsÂ assertÂ onÂ exitÂ <br>
149878Â Â addÂ (proper)Â checkÂ forÂ callocÂ integerÂ overflowÂ <br>
150606Â Â CallÂ graphÂ isÂ brokenÂ whenÂ usingÂ callgrindÂ controlÂ <br>
152393Â Â leakÂ errorsÂ produceÂ anÂ exitÂ codeÂ ofÂ 0.Â IÂ needÂ someÂ wayÂ toÂ <br>
Â Â Â Â Â Â Â Â causeÂ leakÂ errorsÂ toÂ resultÂ inÂ aÂ nonzeroÂ exitÂ code.Â <br>
157154Â Â documentationÂ (leak-resolutionÂ docÂ speaksÂ aboutÂ num-callers<br>
Â Â Â Â Â Â Â Â def=4)Â +Â whatÂ isÂ aÂ lossÂ record<br>
159501Â Â incorrectÂ handlingÂ ofÂ ALSAÂ ioctlsÂ <br>
162020Â Â ValgrindingÂ anÂ empty/zero-byteÂ fileÂ crashesÂ valgrindÂ <br>
162482Â Â ppc:Â ValgrindÂ crashesÂ whileÂ readingÂ stabsÂ informationÂ <br>
162718Â Â x86:Â avoidÂ segmentÂ selectorÂ 0Â inÂ sys_set_thread_area()Â <br>
163253Â Â (wine)Â canonicaliseSymtabÂ forgotÂ someÂ fieldsÂ inÂ DiSymÂ <br>
163560Â Â VEX/test_main.cÂ isÂ missingÂ fromÂ valgrind-3.3.1Â <br>
164353Â Â malloc_usable_size()Â doesn'tÂ returnÂ aÂ usableÂ sizeÂ <br>
165468Â Â InconsistentÂ formattingÂ inÂ memcheckÂ manualÂ --Â pleaseÂ fixÂ <br>
169505Â Â main.c:286Â (endOfInstr):<br>
Â Â Â Â Â Â Â Â AssertionÂ 'ii-&gt;cost_offsetÂ ==Â *cost_offset'Â failedÂ <br>
177206Â Â GenerateÂ default.suppÂ duringÂ compileÂ insteadÂ ofÂ configure<br>
177209Â Â ConfigureÂ valt_load_addressÂ basedÂ onÂ arch+osÂ <br>
177305Â Â eventfdÂ /Â syscallÂ 323Â patchÂ lost<br>
179731Â Â TestsÂ failÂ toÂ buildÂ becauseÂ ofÂ inliningÂ ofÂ non-localÂ asmÂ labels<br>
181394Â Â helgrind:Â libhb_core.c:3762Â (msm_write):Â AssertionÂ <br>
Â Â Â Â Â Â Â Â 'ordxxÂ ==Â POrd_EQÂ ||Â ordxxÂ ==Â POrd_LT'Â failed.Â <br>
181594Â Â BogusÂ warningÂ forÂ emptyÂ textÂ segmentÂ <br>
181707Â Â dwarfÂ doesn'tÂ requireÂ enumerationsÂ toÂ haveÂ nameÂ <br>
185038Â Â exp-ptrcheck:Â "unhandledÂ syscall:Â 285"Â (fallocate)Â onÂ x86_64Â <br>
185050Â Â exp-ptrcheck:Â sg_main.c:727Â (add_block_to_GlobalTree):<br>
Â Â Â Â Â Â Â Â AssertionÂ '!already_present'Â failed.<br>
185359Â Â exp-ptrcheck:Â unhandledÂ syscallÂ getresuid()<br>
185794Â Â "WARNING:Â unhandledÂ syscall:Â 285"Â (fallocate)Â onÂ x86_64<br>
185816Â Â ValgrindÂ isÂ unableÂ toÂ handleÂ debugÂ infoÂ forÂ filesÂ withÂ split<br>
Â Â Â Â Â Â Â Â debugÂ infoÂ thatÂ areÂ prelinkedÂ afterwardsÂ <br>
185980Â Â [darwin]Â unhandledÂ syscall:Â sem_openÂ <br>
186238Â Â bbToIR_AMD64:Â disInstrÂ miscalculatedÂ nextÂ %rip<br>
186507Â Â exp-ptrcheckÂ unhandledÂ syscallsÂ prctl,Â etc.Â <br>
186790Â Â SuppressionÂ patternÂ usedÂ forÂ leaksÂ areÂ notÂ reportedÂ <br>
186796Â Â SymbolsÂ withÂ length&gt;200Â inÂ suppressionÂ filesÂ areÂ ignoredÂ <br>
187048Â Â drd:Â mutexÂ PTHREAD_PROCESS_SHAREDÂ attributeÂ missinterpretation<br>
187416Â Â exp-ptrcheck:Â supportÂ forÂ __NR_{setregid,setreuid,setresuid}<br>
188038Â Â helgrind:Â hg_main.c:926:Â mk_SHVAL_fail:Â theÂ 'impossible'Â happened<br>
188046Â Â bashismsÂ inÂ theÂ configureÂ script<br>
188127Â Â amd64-&gt;IR:Â unhandledÂ instructionÂ bytes:Â 0xF0Â 0xFÂ 0xB0Â 0xA<br>
188161Â Â memcheck:Â --track-origins=yesÂ assertsÂ "mc_machine.c:672<br>
Â Â Â Â Â Â Â Â (get_otrack_shadow_offset_wrk):Â theÂ 'impossible'Â happened."<br>
188248Â Â helgrind:Â pthread_cleanup_push,Â pthread_rwlock_unlock,Â <br>
Â Â Â Â Â Â Â Â assertionÂ failÂ "!lock-&gt;heldBy"Â <br>
188427Â Â AddÂ supportÂ forÂ epoll_create1Â (withÂ patch)Â <br>
188530Â Â SupportÂ forÂ SIOCGSTAMPNS<br>
188560Â Â IncludeÂ valgrind.specÂ inÂ theÂ tarball<br>
188572Â Â ValgrindÂ onÂ MacÂ shouldÂ suppressÂ setenv()Â memÂ leakÂ <br>
189054Â Â ValgrindÂ failsÂ toÂ buildÂ becauseÂ ofÂ duplicateÂ non-localÂ asmÂ labelsÂ <br>
189737Â Â vexÂ amd64-&gt;IR:Â unhandledÂ instructionÂ bytes:Â 0xAC<br>
189762Â Â epoll_createÂ syscallÂ notÂ handledÂ (--tool=exp-ptrcheck)<br>
189763Â Â drdÂ assertionÂ failure:Â s_threadinfo[tid].is_recordingÂ <br>
190219Â Â unhandledÂ syscall:Â 328Â (x86-linux)<br>
190391Â Â dupÂ ofÂ 181394;Â seeÂ above<br>
190429Â Â ValgrindÂ reportsÂ lotsÂ ofÂ errorsÂ inÂ ld.soÂ withÂ x86_64Â 2.9.90Â glibcÂ <br>
190820Â Â NoÂ debugÂ informationÂ onÂ powerpc-linux<br>
191095Â Â PATCH:Â ImproveÂ usbdevfsÂ ioctlÂ handlingÂ <br>
191182Â Â memcheck:Â VALGRIND_LEAK_CHECKÂ quadraticÂ whenÂ bigÂ nrÂ ofÂ chunks<br>
Â Â Â Â Â Â Â Â orÂ bigÂ nrÂ ofÂ errors<br>
191189Â Â --xml=yesÂ shouldÂ obeyÂ --gen-suppressions=allÂ <br>
191192Â Â syslog()Â needsÂ aÂ suppressionÂ onÂ macosxÂ <br>
191271Â Â DARWIN:Â WARNING:Â unhandledÂ syscall:Â 33554697Â a.k.a.:Â 265Â <br>
191761Â Â getrlimitÂ onÂ MacOSXÂ <br>
191992Â Â multipleÂ --fn-skipÂ onlyÂ worksÂ sometimes;Â dependentÂ onÂ orderÂ <br>
192634Â Â V.Â reportsÂ "aspacemÂ sync_check_mapping_callback:Â <br>
Â Â Â Â Â Â Â Â segmentÂ mismatch"Â onÂ Darwin<br>
192954Â Â __extension__Â missingÂ onÂ 2Â clientÂ requestsÂ <br>
194429Â Â CrashÂ atÂ start-upÂ withÂ glibc-2.10.1Â andÂ linux-2.6.29Â <br>
194474Â Â "INSTALL"Â fileÂ hasÂ differentÂ buildÂ instructionsÂ thanÂ "README"<br>
194671Â Â UnhandledÂ syscallÂ (sem_wait?)Â fromÂ macÂ valgrindÂ <br>
195069Â Â memcheck:Â reportsÂ leakÂ (memoryÂ stillÂ reachable)Â forÂ <br>
Â Â Â Â Â Â Â Â printf("%d',Â x)Â <br>
195169Â Â drd:Â (vgDrd_barrier_post_wait):<br>
Â Â Â Â Â Â Â Â AssertionÂ 'r-&gt;sg[p-&gt;post_iteration]'Â failed.Â <br>
195268Â Â valgrindÂ --log-fileÂ doesn'tÂ acceptÂ ~/...<br>
195838Â Â VEXÂ abort:Â LibVEX_N_SPILL_BYTESÂ tooÂ smallÂ forÂ CPUIDÂ boilerplateÂ <br>
195860Â Â WARNING:Â unhandledÂ syscall:Â unix:223Â <br>
196528Â Â needÂ aÂ errorÂ suppressionÂ forÂ pthread_rwlock_initÂ underÂ osÂ x?Â <br>
197227Â Â SupportÂ aio_*Â syscallsÂ onÂ Darwin<br>
197456Â Â valgrindÂ shouldÂ rejectÂ --suppressions=(directory)Â <br>
197512Â Â DWARF2Â CFIÂ reader:Â unhandledÂ CFIÂ instructionÂ 0:10Â <br>
197591Â Â unhandledÂ syscallÂ 27Â (mincore)Â <br>
197793Â Â MergeÂ DCASÂ branchÂ toÂ theÂ trunkÂ ==Â 85756,Â 142103<br>
197794Â Â AvoidÂ duplicateÂ filenamesÂ inÂ VexÂ <br>
197898Â Â makeÂ checkÂ failsÂ onÂ currentÂ SVNÂ <br>
197901Â Â makeÂ checkÂ failsÂ alsoÂ underÂ exp-ptrcheckÂ inÂ currentÂ SVNÂ <br>
197929Â Â MakeÂ --leak-resolution=highÂ theÂ defaultÂ <br>
197930Â Â ReduceÂ spacingÂ betweenÂ leakÂ reportsÂ <br>
197933Â Â PrintÂ commandÂ lineÂ ofÂ clientÂ atÂ start-up,Â andÂ shortenÂ preambleÂ <br>
197966Â Â unhandledÂ syscallÂ 205Â (x86-linux,Â --tool=exp-ptrcheck)<br>
198395Â Â addÂ BBVÂ toÂ theÂ distributionÂ asÂ anÂ experimentalÂ toolÂ <br>
198624Â Â MissingÂ syscallsÂ onÂ Darwin:Â 82,Â 167,Â 281,Â 347Â <br>
198649Â Â callgrind_annotateÂ doesn'tÂ cumulateÂ countersÂ <br>
199338Â Â callgrind_annotateÂ sorting/thresholdsÂ areÂ brokenÂ forÂ allÂ butÂ IrÂ <br>
199977Â Â ValgrindÂ complainsÂ aboutÂ anÂ unrecognizedÂ instructionÂ inÂ the<br>
Â Â Â Â Â Â Â Â atomic_incsÂ testÂ program<br>
200029Â Â valgrindÂ isn'tÂ ableÂ toÂ readÂ FedoraÂ 12Â debuginfoÂ <br>
200760Â Â darwinÂ unhandledÂ syscall:Â unix:284Â <br>
200827Â Â DRDÂ doesn'tÂ workÂ onÂ MacÂ OSÂ XÂ <br>
200990Â Â VG_(read_millisecond_timer)()Â doesÂ notÂ workÂ correctlyÂ <br>
201016Â Â ValgrindÂ doesÂ notÂ supportÂ pthread_kill()Â onÂ MacÂ OSÂ <br>
201169Â Â DocumentÂ --read-var-info<br>
201323Â Â Pre-3.5.0Â performanceÂ sanityÂ checkingÂ <br>
201384Â Â ReviewÂ userÂ manualÂ forÂ theÂ 3.5.0Â releaseÂ <br>
201585Â Â mfpvrÂ notÂ implementedÂ onÂ ppcÂ <br>
201708Â Â testsÂ failingÂ becauseÂ x86Â directionÂ flagÂ isÂ leftÂ setÂ <br>
201757Â Â ValgrindÂ doesn'tÂ handleÂ anyÂ recentÂ sys_futexÂ additionsÂ <br>
204377Â Â 64-bitÂ valgrindÂ canÂ notÂ startÂ aÂ shellÂ script<br>
Â Â Â Â Â Â Â Â (withÂ #!/path/to/shell)Â ifÂ theÂ shellÂ isÂ aÂ 32-bitÂ executable<br>
n-i-bzÂ Â drd:Â fixedÂ assertionÂ failureÂ triggeredÂ byÂ mutexÂ reinitialization.<br>
n-i-bzÂ Â drd:Â fixedÂ aÂ bugÂ thatÂ causedÂ incorrectÂ messagesÂ toÂ beÂ printed<br>
Â Â Â Â Â Â Â Â aboutÂ memoryÂ allocationÂ eventsÂ withÂ memoryÂ accessÂ tracingÂ enabled<br>
n-i-bzÂ Â drd:Â fixedÂ aÂ memoryÂ leakÂ triggeredÂ byÂ vectorÂ clockÂ deallocation<br>
<br>
(3.5.0:Â 19Â AugÂ 2009,Â vexÂ r1913,Â valgrindÂ r10846).<br>
<br>
<br>
<br>
ReleaseÂ 3.4.1Â (28Â FebruaryÂ 2009)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
3.4.1Â isÂ aÂ bug-fixÂ releaseÂ thatÂ fixesÂ someÂ regressionsÂ andÂ assertion<br>
failuresÂ inÂ debugÂ infoÂ readingÂ inÂ 3.4.0,Â mostÂ notablyÂ incorrectÂ stack<br>
tracesÂ onÂ amd64-linuxÂ onÂ olderÂ (glibc-2.3Â based)Â systems.Â Various<br>
otherÂ debugÂ infoÂ problemsÂ areÂ alsoÂ fixed.Â Â AÂ numberÂ ofÂ bugsÂ inÂ the<br>
exp-ptrcheckÂ toolÂ introducedÂ inÂ 3.4.0Â haveÂ beenÂ fixed.<br>
<br>
InÂ viewÂ ofÂ theÂ factÂ thatÂ 3.4.0Â containsÂ user-visibleÂ regressions<br>
relativeÂ toÂ 3.3.x,Â upgradingÂ toÂ 3.4.1Â isÂ recommended.Â Â PackagersÂ are<br>
encouragedÂ toÂ shipÂ 3.4.1Â inÂ preferenceÂ toÂ 3.4.0.<br>
<br>
TheÂ fixedÂ bugsÂ areÂ asÂ follows.Â Â NoteÂ thatÂ "n-i-bz"Â standsÂ forÂ "notÂ in<br>
bugzilla"Â --Â thatÂ is,Â aÂ bugÂ thatÂ wasÂ reportedÂ toÂ usÂ butÂ neverÂ gotÂ a<br>
bugzillaÂ entry.Â Â WeÂ encourageÂ youÂ toÂ fileÂ bugsÂ inÂ bugzilla<br>
(http://bugs.kde.org/enter_valgrind_bug.cgi)Â ratherÂ thanÂ mailingÂ the<br>
developersÂ (orÂ mailingÂ lists)Â directlyÂ --Â bugsÂ thatÂ areÂ notÂ entered<br>
intoÂ bugzillaÂ tendÂ toÂ getÂ forgottenÂ aboutÂ orÂ ignored.<br>
<br>
n-i-bzÂ Â FixÂ variousÂ bugsÂ readingÂ icc-11Â generatedÂ debugÂ info<br>
n-i-bzÂ Â FixÂ variousÂ bugsÂ readingÂ gcc-4.4Â generatedÂ debugÂ info<br>
n-i-bzÂ Â PreliminaryÂ supportÂ forÂ glibc-2.10Â /Â FedoraÂ 11<br>
n-i-bzÂ Â CachegrindÂ andÂ Callgrind:Â handleÂ non-power-of-twoÂ cacheÂ sizes,<br>
Â Â Â Â Â Â Â Â soÂ asÂ toÂ supportÂ (eg)Â 24kÂ AtomÂ D1Â andÂ Core2Â withÂ 3/6/12MBÂ L2.<br>
179618Â Â exp-ptrcheckÂ crashedÂ /Â exitÂ prematurely<br>
179624Â Â helgrind:Â falseÂ positiveÂ racesÂ withÂ pthread_createÂ and<br>
Â Â Â Â Â Â Â Â recv/open/close/read<br>
134207Â Â pkg-configÂ outputÂ containsÂ @VG_PLATFORM@<br>
176926Â Â floatingÂ pointÂ exceptionÂ atÂ valgrindÂ startupÂ withÂ PPCÂ 440EPX<br>
181594Â Â BogusÂ warningÂ forÂ emptyÂ textÂ segment<br>
173751Â Â amd64-&gt;IR:Â 0x48Â 0xFÂ 0x6FÂ 0x45Â (evenÂ moreÂ redundantÂ rexÂ prefixes)<br>
181707Â Â Dwarf3Â doesn'tÂ requireÂ enumerationsÂ toÂ haveÂ name<br>
185038Â Â exp-ptrcheck:Â "unhandledÂ syscall:Â 285"Â (fallocate)Â onÂ x86_64<br>
185050Â Â exp-ptrcheck:Â sg_main.c:727Â (add_block_to_GlobalTree):<br>
Â Â Â Â Â Â Â Â AssertionÂ '!already_present'Â failed.<br>
185359Â Â exp-ptrcheckÂ unhandledÂ syscallÂ getresuid()<br>
<br>
(3.4.1.RC1:Â Â 24Â FebÂ 2008,Â vexÂ r1884,Â valgrindÂ r9253).<br>
(3.4.1:Â Â Â Â Â Â 28Â FebÂ 2008,Â vexÂ r1884,Â valgrindÂ r9293).<br>
<br>
<br>
<br>
ReleaseÂ 3.4.0Â (2Â JanuaryÂ 2009)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
3.4.0Â isÂ aÂ featureÂ releaseÂ withÂ manyÂ significantÂ improvementsÂ andÂ the<br>
usualÂ collectionÂ ofÂ bugÂ fixes.Â Â ThisÂ releaseÂ supportsÂ X86/Linux,<br>
AMD64/Linux,Â PPC32/LinuxÂ andÂ PPC64/Linux.Â Â SupportÂ forÂ recentÂ distros<br>
(usingÂ gccÂ 4.4,Â glibcÂ 2.8Â andÂ 2.9)Â hasÂ beenÂ added.<br>
<br>
3.4.0Â bringsÂ someÂ significantÂ toolÂ improvements.Â Â MemcheckÂ canÂ now<br>
reportÂ theÂ originÂ ofÂ uninitialisedÂ values,Â theÂ threadÂ checkers<br>
HelgrindÂ andÂ DRDÂ areÂ muchÂ improved,Â andÂ weÂ haveÂ aÂ newÂ experimental<br>
tool,Â exp-Ptrcheck,Â whichÂ isÂ ableÂ toÂ detectÂ overrunsÂ ofÂ stackÂ and<br>
globalÂ arrays.Â Â InÂ detail:<br>
<br>
*Â MemcheckÂ isÂ nowÂ ableÂ toÂ trackÂ theÂ originÂ ofÂ uninitialisedÂ values.<br>
Â Â WhenÂ itÂ reportsÂ anÂ uninitialisedÂ valueÂ error,Â itÂ willÂ tryÂ toÂ show<br>
Â Â theÂ originÂ ofÂ theÂ value,Â asÂ eitherÂ aÂ heapÂ orÂ stackÂ allocation.<br>
Â Â OriginÂ trackingÂ isÂ expensiveÂ andÂ soÂ isÂ notÂ enabledÂ byÂ default.Â Â To<br>
Â Â useÂ it,Â specifyÂ --track-origins=yes.Â Â Memcheck'sÂ speedÂ willÂ be<br>
Â Â essentiallyÂ halved,Â andÂ memoryÂ usageÂ willÂ beÂ significantly<br>
Â Â increased.Â Â NeverthelessÂ itÂ canÂ drasticallyÂ reduceÂ theÂ effort<br>
Â Â requiredÂ toÂ identifyÂ theÂ rootÂ causeÂ ofÂ uninitialisedÂ valueÂ errors,<br>
Â Â andÂ soÂ isÂ oftenÂ aÂ programmerÂ productivityÂ win,Â despiteÂ runningÂ more<br>
Â Â slowly.<br>
<br>
*Â AÂ versionÂ (1.4.0)Â ofÂ theÂ ValkyrieÂ GUI,Â thatÂ worksÂ withÂ MemcheckÂ in<br>
Â Â 3.4.0,Â willÂ beÂ releasedÂ shortly.<br>
<br>
*Â Helgrind'sÂ raceÂ detectionÂ algorithmÂ hasÂ beenÂ completelyÂ redesigned<br>
Â Â andÂ reimplemented,Â toÂ addressÂ usabilityÂ andÂ scalabilityÂ concerns:<br>
<br>
Â Â -Â TheÂ newÂ algorithmÂ hasÂ aÂ lowerÂ false-errorÂ rate:Â itÂ isÂ muchÂ less<br>
Â Â Â Â likelyÂ toÂ reportÂ racesÂ thatÂ doÂ notÂ reallyÂ exist.<br>
<br>
Â Â -Â HelgrindÂ willÂ displayÂ fullÂ callÂ stacksÂ forÂ bothÂ accessesÂ involved<br>
Â Â Â Â inÂ aÂ race.Â Â ThisÂ makesÂ itÂ easierÂ toÂ identifyÂ theÂ rootÂ causesÂ of<br>
Â Â Â Â races.<br>
<br>
Â Â -Â LimitationsÂ onÂ theÂ sizeÂ ofÂ programÂ thatÂ canÂ runÂ haveÂ beenÂ removed.<br>
<br>
Â Â -Â PerformanceÂ hasÂ beenÂ modestlyÂ improved,Â althoughÂ thatÂ isÂ very<br>
Â Â Â Â workload-dependent.<br>
<br>
Â Â -Â DirectÂ supportÂ forÂ Qt4Â threadingÂ hasÂ beenÂ added.<br>
<br>
Â Â -Â pthread_barriersÂ areÂ nowÂ directlyÂ supported.<br>
<br>
Â Â -Â HelgrindÂ worksÂ wellÂ onÂ allÂ supportedÂ LinuxÂ targets.<br>
<br>
*Â TheÂ DRDÂ threadÂ debuggingÂ toolÂ hasÂ seenÂ majorÂ improvements:<br>
<br>
Â Â -Â GreatlyÂ improvedÂ performanceÂ andÂ significantlyÂ reducedÂ memory<br>
Â Â Â Â usage.<br>
<br>
Â Â -Â SupportÂ forÂ severalÂ majorÂ threadingÂ librariesÂ (Boost.Thread,Â Qt4,<br>
Â Â Â Â glib,Â OpenMP)Â hasÂ beenÂ added.<br>
<br>
Â Â -Â SupportÂ forÂ atomicÂ instructions,Â POSIXÂ semaphores,Â barriersÂ and<br>
Â Â Â Â reader-writerÂ locksÂ hasÂ beenÂ added.<br>
<br>
Â Â -Â WorksÂ nowÂ onÂ PowerPCÂ CPUsÂ too.<br>
<br>
Â Â -Â AddedÂ supportÂ forÂ printingÂ threadÂ stackÂ usageÂ atÂ threadÂ exitÂ time.<br>
<br>
Â Â -Â AddedÂ supportÂ forÂ debuggingÂ lockÂ contention.<br>
<br>
Â Â -Â AddedÂ aÂ manualÂ forÂ Drd.<br>
<br>
*Â AÂ newÂ experimentalÂ tool,Â exp-Ptrcheck,Â hasÂ beenÂ added.Â Â Ptrcheck<br>
Â Â checksÂ forÂ misusesÂ ofÂ pointers.Â Â InÂ thatÂ senseÂ itÂ isÂ aÂ bitÂ like<br>
Â Â Memcheck.Â Â However,Â PtrcheckÂ canÂ doÂ thingsÂ MemcheckÂ can't:Â itÂ can<br>
Â Â detectÂ overrunsÂ ofÂ stackÂ andÂ globalÂ arrays,Â itÂ canÂ detect<br>
Â Â arbitrarilyÂ farÂ out-of-boundsÂ accessesÂ toÂ heapÂ blocks,Â andÂ itÂ can<br>
Â Â detectÂ accessesÂ heapÂ blocksÂ thatÂ haveÂ beenÂ freedÂ aÂ veryÂ longÂ time<br>
Â Â agoÂ (millionsÂ ofÂ blocksÂ inÂ theÂ past).<br>
<br>
Â Â PtrcheckÂ currentlyÂ worksÂ onlyÂ onÂ x86-linuxÂ andÂ amd64-linux.Â Â ToÂ use<br>
Â Â it,Â useÂ --tool=exp-ptrcheck.Â Â AÂ simpleÂ manualÂ isÂ provided,Â asÂ part<br>
Â Â ofÂ theÂ mainÂ ValgrindÂ documentation.Â Â AsÂ thisÂ isÂ anÂ experimental<br>
Â Â tool,Â weÂ wouldÂ beÂ particularlyÂ interestedÂ inÂ hearingÂ aboutÂ your<br>
Â Â experiencesÂ withÂ it.<br>
<br>
*Â exp-Omega,Â anÂ experimentalÂ instantaneousÂ leak-detectingÂ tool,Â isÂ no<br>
Â Â longerÂ builtÂ byÂ default,Â althoughÂ theÂ codeÂ remainsÂ inÂ theÂ repository<br>
Â Â andÂ theÂ tarball.Â Â ThisÂ isÂ dueÂ toÂ threeÂ factors:Â aÂ perceivedÂ lackÂ of<br>
Â Â users,Â aÂ lackÂ ofÂ maintenance,Â andÂ concernsÂ thatÂ itÂ mayÂ notÂ be<br>
Â Â possibleÂ toÂ achieveÂ reliableÂ operationÂ usingÂ theÂ existingÂ design.<br>
<br>
*Â AsÂ usual,Â supportÂ forÂ theÂ latestÂ LinuxÂ distrosÂ andÂ toolchain<br>
Â Â componentsÂ hasÂ beenÂ added.Â Â ItÂ shouldÂ workÂ wellÂ onÂ FedoraÂ CoreÂ 10,<br>
Â Â OpenSUSEÂ 11.1Â andÂ UbuntuÂ 8.10.Â Â gcc-4.4Â (inÂ itsÂ currentÂ pre-release<br>
Â Â state)Â isÂ supported,Â asÂ isÂ glibc-2.9.Â Â TheÂ C++Â demanglerÂ hasÂ been<br>
Â Â updatedÂ soÂ asÂ toÂ workÂ wellÂ withÂ C++Â compiledÂ byÂ evenÂ theÂ mostÂ recent<br>
Â Â g++'s.<br>
<br>
*Â YouÂ canÂ nowÂ useÂ frame-levelÂ wildcardsÂ inÂ suppressions.Â Â ThisÂ wasÂ a<br>
Â Â frequently-requestedÂ enhancement.Â Â AÂ lineÂ "..."Â inÂ aÂ suppressionÂ now<br>
Â Â matchesÂ zeroÂ orÂ moreÂ frames.Â Â ThisÂ makesÂ itÂ easierÂ toÂ write<br>
Â Â suppressionsÂ whichÂ areÂ preciseÂ yetÂ insensitiveÂ toÂ changesÂ in<br>
Â Â inliningÂ behaviour.<br>
<br>
*Â 3.4.0Â addsÂ supportÂ onÂ x86/amd64Â forÂ theÂ SSSE3Â instructionÂ set.<br>
<br>
*Â VeryÂ basicÂ supportÂ forÂ IBMÂ Power6Â hasÂ beenÂ addedÂ (64-bitÂ processesÂ only).<br>
<br>
*Â ValgrindÂ isÂ nowÂ cross-compilable.Â Â ForÂ example,Â itÂ isÂ possibleÂ to<br>
Â Â crossÂ compileÂ ValgrindÂ onÂ anÂ x86/amd64-linuxÂ host,Â soÂ thatÂ itÂ runs<br>
Â Â onÂ aÂ ppc32/64-linuxÂ target.<br>
<br>
*Â YouÂ canÂ setÂ theÂ mainÂ thread'sÂ stackÂ sizeÂ atÂ startupÂ usingÂ the<br>
Â Â newÂ --main-stacksize=Â flagÂ (subjectÂ ofÂ courseÂ toÂ ulimitÂ settings).<br>
Â Â ThisÂ isÂ usefulÂ forÂ runningÂ appsÂ thatÂ needÂ aÂ lotÂ ofÂ stackÂ space.<br>
<br>
*Â TheÂ limitationÂ thatÂ youÂ can'tÂ useÂ --trace-children=yesÂ together<br>
Â Â withÂ --db-attach=yesÂ hasÂ beenÂ removed.<br>
<br>
*Â TheÂ followingÂ bugsÂ haveÂ beenÂ fixed.Â Â NoteÂ thatÂ "n-i-bz"Â standsÂ for<br>
Â Â "notÂ inÂ bugzilla"Â --Â thatÂ is,Â aÂ bugÂ thatÂ wasÂ reportedÂ toÂ usÂ but<br>
Â Â neverÂ gotÂ aÂ bugzillaÂ entry.Â Â WeÂ encourageÂ youÂ toÂ fileÂ bugsÂ in<br>
Â Â bugzillaÂ (http://bugs.kde.org/enter_valgrind_bug.cgi)Â ratherÂ than<br>
Â Â mailingÂ theÂ developersÂ (orÂ mailingÂ lists)Â directly.<br>
<br>
Â Â n-i-bzÂ Â MakeÂ returnÂ typesÂ forÂ someÂ clientÂ requestsÂ 64-bitÂ clean<br>
Â Â n-i-bzÂ Â glibcÂ 2.9Â support<br>
Â Â n-i-bzÂ Â ignoreÂ unsafeÂ .valgrindrc'sÂ (CVE-2008-4865)<br>
Â Â n-i-bzÂ Â MPI_Init(0,0)Â isÂ validÂ butÂ libmpiwrap.cÂ segfaults<br>
Â Â n-i-bzÂ Â BuildingÂ inÂ anÂ envÂ withoutÂ gdbÂ givesÂ bogusÂ gdbÂ attach<br>
Â Â 92456Â Â Â TracingÂ theÂ originÂ ofÂ uninitialisedÂ memory<br>
Â Â 106497Â Â ValgrindÂ doesÂ notÂ demangleÂ someÂ C++Â templateÂ symbols<br>
Â Â 162222Â Â ==106497<br>
Â Â 151612Â Â SuppressionÂ withÂ "..."Â (frame-levelÂ wildcardsÂ inÂ .suppÂ files)<br>
Â Â 156404Â Â UnableÂ toÂ startÂ oocalcÂ underÂ memcheckÂ onÂ openSUSEÂ 10.3Â (64-bit)<br>
Â Â 159285Â Â unhandledÂ syscall:25Â (stime,Â onÂ x86-linux)<br>
Â Â 159452Â Â unhandledÂ ioctlÂ 0x8B01Â onÂ "valgrindÂ iwconfig"<br>
Â Â 160954Â Â ppcÂ buildÂ ofÂ valgrindÂ crashesÂ withÂ illegalÂ instructionÂ (isel)<br>
Â Â 160956Â Â mallinfoÂ implementation,Â w/Â patch<br>
Â Â 162092Â Â ValgrindÂ failsÂ toÂ startÂ gnome-system-monitor<br>
Â Â 162819Â Â malloc_free_fillÂ testÂ doesn'tÂ passÂ onÂ glibc2.8Â x86<br>
Â Â 163794Â Â assertionÂ failureÂ withÂ "--track-origins=yes"<br>
Â Â 163933Â Â sigcontext.errÂ andÂ .trapnoÂ mustÂ beÂ setÂ together<br>
Â Â 163955Â Â removeÂ constraintÂ !(--db-attach=yesÂ &amp;&amp;Â --trace-children=yes)<br>
Â Â 164476Â Â MissingÂ kernelÂ moduleÂ loadingÂ systemÂ calls<br>
Â Â 164669Â Â SVNÂ regression:Â mmap()Â dropsÂ posixÂ fileÂ locks<br>
Â Â 166581Â Â CallgrindÂ outputÂ corruptionÂ whenÂ programÂ forks<br>
Â Â 167288Â Â PatchÂ fileÂ forÂ missingÂ systemÂ callsÂ onÂ CellÂ BE<br>
Â Â 168943Â Â unsupportedÂ scasÂ instructionÂ pentium<br>
Â Â 171645Â Â UnrecognisedÂ instructionÂ (MOVSD,Â non-binutilsÂ encoding)<br>
Â Â 172417Â Â x86-&gt;IR:Â 0x82Â ...<br>
Â Â 172563Â Â amd64-&gt;IR:Â 0xD9Â 0xF5Â Â -Â Â fprem1<br>
Â Â 173099Â Â .ldsÂ linkerÂ scriptÂ generationÂ error<br>
Â Â 173177Â Â [x86_64]Â syscalls:Â 125/126/179Â (capget/capset/quotactl)<br>
Â Â 173751Â Â amd64-&gt;IR:Â 0x48Â 0xFÂ 0x6FÂ 0x45Â (evenÂ moreÂ redundantÂ prefixes)<br>
Â Â 174532Â Â ==Â 173751<br>
Â Â 174908Â Â --log-fileÂ valueÂ notÂ expandedÂ correctlyÂ forÂ coreÂ file<br>
Â Â 175044Â Â AddÂ lookup_dcookieÂ forÂ amd64<br>
Â Â 175150Â Â x86-&gt;IR:Â 0xF2Â 0xFÂ 0x11Â 0xC1Â (movssÂ non-binutilsÂ encoding)<br>
<br>
Developer-visibleÂ changes:<br>
<br>
*Â Valgrind'sÂ debug-infoÂ readingÂ machineryÂ hasÂ beenÂ majorlyÂ overhauled.<br>
Â Â ItÂ canÂ nowÂ correctlyÂ establishÂ theÂ addressesÂ forÂ ELFÂ dataÂ symbols,<br>
Â Â whichÂ isÂ somethingÂ thatÂ hasÂ neverÂ workedÂ properlyÂ beforeÂ now.<br>
<br>
Â Â Also,Â ValgrindÂ canÂ nowÂ readÂ DWARF3Â typeÂ andÂ locationÂ informationÂ for<br>
Â Â stackÂ andÂ globalÂ variables.Â Â ThisÂ makesÂ itÂ possibleÂ toÂ useÂ the<br>
Â Â frameworkÂ toÂ buildÂ toolsÂ thatÂ relyÂ onÂ knowingÂ theÂ typeÂ andÂ locations<br>
Â Â ofÂ stackÂ andÂ globalÂ variables,Â forÂ exampleÂ exp-Ptrcheck.<br>
<br>
Â Â ReadingÂ ofÂ suchÂ informationÂ isÂ disabledÂ byÂ default,Â becauseÂ most<br>
Â Â toolsÂ don'tÂ needÂ it,Â andÂ becauseÂ itÂ isÂ expensiveÂ inÂ spaceÂ andÂ time.<br>
Â Â However,Â youÂ canÂ forceÂ ValgrindÂ toÂ readÂ it,Â usingÂ the<br>
Â Â --read-var-info=yesÂ flag.Â Â Memcheck,Â HelgrindÂ andÂ DRDÂ areÂ ableÂ to<br>
Â Â makeÂ useÂ ofÂ suchÂ information,Â ifÂ present,Â toÂ provideÂ source-level<br>
Â Â descriptionsÂ ofÂ dataÂ addressesÂ inÂ theÂ errorÂ messagesÂ theyÂ create.<br>
<br>
(3.4.0.RC1:Â Â 24Â DecÂ 2008,Â vexÂ r1878,Â valgrindÂ r8882).<br>
(3.4.0:Â Â Â Â Â Â Â 3Â JanÂ 2009,Â vexÂ r1878,Â valgrindÂ r8899).<br>
<br>
Â Â Â Â </p></div>
</div>
<div>
<br><table class="nav" width="100%" cellspacing="3" cellpadding="2" border="0" summary="Navigation footer">
<tr>
<td rowspan="2" width="40%" align="left">
<a accesskey="p" href="dist.authors.html">&lt;&lt;Â 1.Â AUTHORS</a>Â </td>
<td width="20%" align="center"><a accesskey="u" href="dist.html">Up</a></td>
<td rowspan="2" width="40%" align="right">Â <a accesskey="n" href="dist.news.old.html">3.Â OLDER NEWSÂ &gt;&gt;</a>
</td>
</tr>
<tr><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td></tr>
</table>
</div>
</body>
</html>
